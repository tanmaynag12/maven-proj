
/**
 * @name manageDocument.js
 * @purpose for management of documents
 * @since: 27th march 2012
 * @function_List: 1. createTree(); 2. clearAddDocumentCategoryForm() 3.
 *                 showAddDocumentCategoryForm() 4. getDocumentCategory() 5.
 *                 addDocumentCategoryCheckPoint1() 6.
 *                 addDocumentCategoryCheckPoint2(v,m,f) 7.
 *                 addDocumentCategoryAjax() 8.
 *                 removeDocumentCategoryCheckPoint1() 9.
 *                 removeDocumentCategory() 10. getUploadedFiles(nodeId) 11.
 *                 getTextFiles(nodeId) 12. reload() 13. getChildren() 14.
 *                 getSelected() 15. collapse() 16. collapseAll() 17.
 *                 expandAll() 18. find(id) 19. showTextDocumentIcons() 20.
 *                 showUploadedDocumentIcon() 21. showFiles(nodeId) 22.
 *                 addTextDocumentCheckPoint() 23.
 *                 showAddTextDocumentNamePrompt() 24.
 *                 checkTextDocumentNameDuplicacy(strName) 25.
 *                 showAddEditTextDocumentForm() 26. saveTextDocument() 27.
 *                 showText(docId) 28. uploadDocumentCheckPoint() 29.
 *                 getCategoryPath(nodeId) 30. showUploadDocumentForm() 31.
 *                 showCategoryProperties() 32. deleteFiles() 33.
 *                 showFileDetail(id) 34. searchDocumentFile() 35.
 *                 showSearchResultDocumentIcon(searchText,intSearchCout) 36.
 *                 refreshCategoryTree()
 */
var menu3 = '';
var ArrayTags = new Array();
var TRIM_FILE_NAME_LENGTH = 25;

var dmsSettingsObj = {
		FOLDER_ICON:'img/FileSystem/Folder2.png',//'img/FileSystem/Folder.png',//'img/folderNew.png',
		FOLDER_EMPTY_ICON : 'img/FileSystem/Folder2.png'//'img/folder_emptyNew.png' 
};

$(function() {
	$('#chkIncludeDMS').attr('checked',false);
	$('#addDocumentCategoryDialog').modal({
		backdrop : 'static',
		keyboard : false,
		show : false
	}).css({
		width : '400px',
		'margin-left' : function() {
			return -($(this).width() / 2);
		}
	});
	
	$('#showTextDocumentDialog').modal({
		//backdrop : 'static',
		keyboard : false,
		show : false
	}).css({
		width : '1000px',
		'margin-left' : function() {
			return -($(this).width() / 2);
		}
	});
	
	$('#showTextDocumentDialog').modal({
		//backdrop : 'static',
		keyboard : false,
		show : false
	}).css({
		width : '1000px',
		'margin-left' : function() {
			return -($(this).width() / 2);
		}
	});

	$('#addCourseFileDocumentFromDMS').modal({
		backdrop : 'static',
		keyboard : false,
		show : false
	}).css({
		width : '800px',
		'margin-left' : function() {
			return -($(this).width() / 2);
		}
	});
	
	$('#txtSearch2').keypress(function(event){
	    var keycode = (event.keyCode ? event.keyCode : event.which);
	    if(keycode == '13'){
	    	//searchDocumentFile();
	    	if($.trim($(this).val())=='' || $(this).val().indexOf('#')!=-1){
	    		refreshCategoryTree();//searchTagTxt
	    	}
	    }
	});
	
	gemsCommonPopupModalCssLayout('#imageViewrSlides', '1000px');
	
});
/*$(function() {
	$('#textDocumentNameDialog').dialog({
		autoOpen : false,
		width : 450,
		height : 150,
		modal : true

	});
});*/

$(function() {

	$('#uploadDocumentDialog').modal({
		backdrop : 'static',
		keyboard : false,
		show : false
	}).css({
		width : '600px',
		'margin-left' : function() {
			return -($(this).width() / 2);
		}
	});

	$('#uploadDocumentDialog').on('hidden', function() {
		var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
		//showFiles(node.id);
	});
});

$(function() {
	$('#renameFileDialog').dialog({
		autoOpen : false,
		width : 450,
		height : 200,
		modal : true
	});
});

$(function() {
	$('#organizeFile').dialog({
		autoOpen : false,
		width : 600,
		height : 600,
		modal : true
	});
});

$(function() {
	$('#categoryPropertiesDialog').dialog({
		autoOpen : false,
		width : 400,
		height : 500,
		modal : true

	});
});

/** @DOCUMENT_TYPE_CLASS */

var DMSDocType = {
		UPLOADED : 'UPLOADED',
		TEXT : 'TEXT'
};

/** @Global_Variables */
var gjArrTextDocument = "";
/** @purpose: for storing the list of Text Document list */
var gjArrUploadedDocument = "";
/** @purpose: for storing the list of Uploaded Document list */
var gjArrSearchResultDocument = "";
/** @purpose: for storing the list of searched Document list */
var gTextDocSaveFlag = false;
var gTextDocumentCommandFlag = '';
/** @purpose: for storing command text */
var gFileId = '';
var gCommentCnt = 1;
var gProfileImgPath = '';
var gGender = '';
var gDMSCategoryTreeId = null;
var gDMSCategoryTreeName = null;
var gCategoryType = '';
/** @purpose storing the selected category type */
var gParentCategoryType = '';
/** @purpose storing the selected parent category type */
var gCategoryPath = '';
/** @purpose storing the selected parent category path */
var gCategoryTypeAll = new Array();

/*******************************************************************************
 * @purpose for keeping the all category types to be shown on page. Each page
 *          will explicitly specify all types of the category. e.g:
 *          [dms,coursefile,announcement,notice,communication]
 ******************************************************************************/

var gSearchInCategory = new Array();
var gNodeId = '';
var gExtensionArray = [ 'doc', 'docx', 'xls', 'xlsx', 'pdf', 'jpg', 'text',
                        'png', 'gif', 'ppt', 'zip','r' ];

var gDefaultCategoryArray = [ "SHARED", "EVENT", "EXPENSE", "COMMUNICATION",
                              "FEES", "PROFILE", "COURSE_FILE", "MY_DRIVE", "MY_PROJECTS" ];

var gShowAttachmentBar = false;
/** To take decision that attachement bar should show only when doc already saved */

gEvaluationType = '';
/**
 * @Name: createTree()
 * @Author: Vimal Kr.
 * @Date: 27 Mar 2012
 * @param categoryPath
 *            used for fetching the document category of the specified path
 * @default is undefined
 * @param typeArray
 *            used for type associated with Category. This is an array which
 *            contains one or more than one type
 * 
 * @Purpose: initializing the document Management tree
 */

function _doCreateTree(jArray,elementId){
	var j = jArray.length;
	reload(elementId);
	for(var i=0;i<j;i++)
	{
		if(jArray[i]["name"] != 'SHARED'){
			if((jArray[i]["refDocumentCategoryId"]) == undefined) { //parent
				if(elementId == undefined){
					$('#'+gDMSCategoryTreeId).tree('append',{
						data:[{
							id:jArray[i]["documentCategoryId"],
							text:jArray[i]["name"],
						}]
					});
				} else {
					$('#'+elementId).tree('append',{
						data:[{
							id:jArray[i]["documentCategoryId"],
							text:jArray[i]["name"],
						}]
					});
				}	
			} else {
				var parent = jArray[i]["refDocumentCategoryId"];
				var text   = jArray[i]["name"];
				var node   = $('#'+gDMSCategoryTreeId).tree('find',parent);
				if(elementId == undefined){
					$('#'+gDMSCategoryTreeId).tree('append',{
						parent: (node?node.target:null),
						data:[{
							id:jArray[i]["documentCategoryId"],
							text:text,
						}]
					});
				} else {
					$('#'+elementId).tree('append',{
						parent: (node?node.target:null),
						data:[{
							id:jArray[i]["documentCategoryId"],
							text:text,
						}]
					});
				}	
				if(elementId == undefined){
					$('#'+gDMSCategoryTreeId).tree('collapseAll', node.target);
				} else {
					$('#'+elementId).tree('collapseAll', node.target);	
				}
			}
		}
	}
	if(elementId == undefined){
		$('#'+gDMSCategoryTreeId).tree('expandAll');
		$('#'+gDMSCategoryTreeId).tree('collapseAll');
	} else {
		$('#'+elementId).tree('expandAll');
		$('#'+elementId).tree('collapseAll');
	}
}
function fetchAllDocumnetsWithDMS(rdoType){

	if(window.req_param_categoryId!=null){
		getFolderFilesDocumentsByParentId(window.req_param_categoryId);
		
		return false;
	}
	
	$('#fileDropdowMenuTopBar').show();
	setTimeout(function(){
		$('#filterGroup').addClass('open');
	},50);
	
	var categoryPath = '';
	var rootRquired='';
	/*var isHideEmptyFolders=false;
	$('#chkIncludeSharedDMS').attr('checked',false);
	if($('#chkHideEmtyFolders').is(':checked'))
		isHideEmptyFolders=true;*/
	
	var parentType = new Array();
	var typeArray = new Array();
	console.log(rdoType);
	if('Academic' == rdoType){
		parentType.push('dms');
		typeArray.push('Academic');
		categoryPath = 'Academic';
	}else if($('#chkIncludeDMS').is(':checked')){
		
		
		
		parentType.push('dmsNew','dms');
		typeArray.push('dmsNew','dms');
		
		/*$.ajax({
			url : 'getDocumentCategoryAjaxDMS.json?categoryPath=' + categoryPath
			+ '&typeArray=' + typeArray + '&parentType=' + parentType
			+ '&root=' + rootRquired+'&isHideEmptyFolders='+isHideEmptyFolders,
			dataType : 'json',
			beforeSend : function() {
				startCommonAjaxSpinner();
				$("body").css("cursor", "progress");
			},
			complete : function() {
				stopCommonAjaxSpinner();
				setTimeout(function(){$("body").css("cursor", "default");},1000)
			},
			success : function(jArray) {
				doCreateTree(jArray);
				doCreateOrganizeFolderTree(jArray);
			},
			error : function() {
			}
		});*/
		
	}else{
		 typeArray ='dmsNew';
		 parentType = 'dmsNew';
	}
	createTree(categoryPath, typeArray, parentType, rootRquired);
}

var gCreateTreeArr = null;
function createTree(categoryPath, typeArray, parentType, rootRquired, tagSearch, flg) {

	/*if($('#hdnUserRole').val()=='student'){
		$('#chkIncludeSharedDMS').prop('checked', true);
		$('#chkIncludeSharedDMS').trigger('click');
		return;
	}*/
	var searchTagTxt = '';
	if('AuthorWiseCats'==categoryPath){
		searchTagTxt = '&searchTagTxt='+typeArray+'&s_searchType=AuthorWiseCats';
		
		categoryPath = undefined;
		typeArray= undefined;
	}
	if('CharSearch'==categoryPath){
		searchTagTxt = '&searchTagTxt='+typeArray+'&s_searchType=CharSearch';
		
		
		if($('#chkIncludeSharedDMS').is(':checked')){
			$('#txtSearch2').tagit("removeAll");
			$('#txtSearch2').tagit("createTag", typeArray);
			return false;
	    }

		categoryPath = undefined;
		typeArray= undefined;
	}
	if('recentAdded'==categoryPath){
		searchTagTxt = '&searchTagTxt='+typeArray+'&s_searchType=recentAdded';
		
		categoryPath = undefined;
		typeArray= undefined;
	}
	
	var isHideEmptyFolders=false;
	if($('#chkHideEmtyFolders').attr('checked'))
		isHideEmptyFolders=true;
	
	
	if($('#chooseYearFilter').val()!='0'){
		searchTagTxt = '&searchTagTxt='+$('#chooseYearFilter').val()+'&s_searchType=YearFilter';
	}
	if(tagSearch==true && $.trim($('#txtSearch2').val())!=''){
		var tgTxt = $('#txtSearch2').val();
		searchTagTxt = '&searchTagTxt='+tgTxt;
	}
	
	
	if($('#chkIncludeDMS').is(':checked')){		
		parentType = new Array();
		typeArray = new Array();
		parentType.push('dms');//'dmsNew',
		typeArray.push('dms');
	}else{
		parentType='dmsNew';
		typeArray='dmsNew';
	}
	$("#subFolder, #tdFileAndTextWindow").html('<div style="text-align:center;margin: 5px 0px;" class="simpleSpinnerCls"><i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i></div>');
	if(flg != undefined && flg==true && gCreateTreeArr!=null){
		doCreateTree(gCreateTreeArr);
		doCreateOrganizeFolderTree(gCreateTreeArr);
	}else{
		$.ajax({
			url : 'getDocumentCategoryAjaxDMS_Sp.json?categoryPath=' + categoryPath
			+ '&typeArray=' + typeArray.toString() + '&parentType=' + parentType.toString()
			+ '&root=' + rootRquired+'&isHideEmptyFolders='+isHideEmptyFolders+''+searchTagTxt,
			dataType : 'json',
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			success : function(jArray) {
				gCreateTreeArr = jArray;
				doCreateTree(jArray);
				
				//alert(jArray.length);
				doCreateOrganizeFolderTree(jArray);
				showZipDownloadButton();
			},
			error : function() {
			}
		});
	}	
	

}

/**
 * @Name: createTree()
 * @Author: Vimal Kr.
 * @Date: 27 Mar 2012
 * @param categoryPath
 *            used for fetching the document category of the specified path
 * @default is undefined
 * @param typeArray
 *            used for type associated with Category. This is an array which
 *            contains one or more than one type
 * 
 * @Purpose: initializing the document Management tree
 */
function createHierarchyTree(categoryPath, typeArray, parentType) {
	$.ajax({
		url : 'getDocumentCategoryHierarchyAjax.json?categoryPath='
			+ categoryPath + '&typeArray=' + typeArray + '&parentType='
			+ parentType,
			dataType : 'json',
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			success : function(jArray) {
				doCreateTree(jArray);
				doCreateOrganizeFolderTree(jArray);
			},
			error : function() {
			}
	});
}

function doCreateTree(jArray, elementId) {
	console.log("Test123");
	$("#subFolder").html('');
	$("#tdFileAndTextWindow").html('');
	var j = jArray.length;
	reload(elementId);
	var flag=8;
	var menuBoiler='';
	$('#my-menu').html('');
	var boiler1='<div class="DMS_content">';
	var boilerList =folderCommonHeader();//Kiran List View Header
	if(j==0){
		boiler1+=`<div style="text-align: center;color: gray; margin-top: 50px;">
			<i class="fa fa-exclamation-triangle fa-4x"></i>
			<br>
			<b>This folder is empty</b>
		</div>`;
		
	}
	for ( var i = 0; i < j; i++) {
		var fullName = jArray[i]["name"];
		try{fullName = decodeURIComponent(fullName); }catch(e){}
		var dirCount = jArray[i]["childDirectoryCount"];
		var fileCount = jArray[i]["childUploadedFileCount"] + jArray[i]["childCreatedFileCount"];
		var isShared = false;//jArray[i]["isShared"]!=null?jArray[i]["isShared"]:'false';
		if(jArray[i]["sharedStatus"]!=undefined && jArray[i]["sharedStatus"]!=0){
			isShared = true;
		}
		
		var canEdit = jArray[i]["canEdit"]!=null?jArray[i]["canEdit"]:false;
		var createdByEmp = jArray[i]["createdByEmp"]!=null?jArray[i]["createdByEmp"]:"";
		var createdTimetamp= jArray[i]["createdTime"]!=null?jArray[i]["createdTime"]:"";
		var folderIcon = dmsSettingsObj.FOLDER_ICON;
		var name = jArray[i]["name"].length<TRIM_FILE_NAME_LENGTH?jArray[i]["name"]:jArray[i]["name"].substring(0,TRIM_FILE_NAME_LENGTH)+'...';
		if(jArray[i]["isEmpty"]==true)
			folderIcon = dmsSettingsObj.FOLDER_EMPTY_ICON;
			
		
		boiler1+=`<div id="optionDmsFolder-${jArray[i]["documentCategoryId"]}" 
			class="DMS_content_item dms_tile_view_property" 
			data-name="${fullName}" 
			data-dirCount="${dirCount}" 
			data-fileCount="${fileCount}" 
			isShared="${isShared}"
			canEdit="${canEdit}"
			data-createdByEmp="${createdByEmp}"
			style="height: auto; float: left;text-align: left;" 
			ondblclick="getFolderFilesDocumentsByParentId(${jArray[i]["documentCategoryId"]},'${escape(fullName)}',undefined, undefined ,${jArray[i].canEdit})">
			<div style="float: left;">
			<img src="${folderIcon}" class="dmsFolder" ondragstart="return false" style="width: 40px;">
			</div>
			<div style="float: left;width: 79%;">
				<p class="text-center">${name} <br/> <span style="color: gray;">Items: <b>${dirCount+fileCount}</b></span></p>
				<span class="folderTagsCls">${documentTagsBoiler(jArray[i]["tags"])}</span>
			</div>
		</div>`;
		/*boiler1+='<div id="optionDmsFolder-'+jArray[i]["documentCategoryId"]+'" class="DMS_content_item" data-name="'+fullName+'" data-dirCount="'+dirCount+'" data-fileCount="'+fileCount+'" isShared="'+isShared+'" '+
		'canEdit="'+canEdit+'" data-createdByEmp="'+createdByEmp+'" ondblclick="getFolderFilesDocumentsByParentId('+jArray[i]["documentCategoryId"]+',\''+escape(fullName)+'\')">';
		boiler1+='<img src="' + folderIcon + '" class="dmsFolder" ondragstart="return false"><p class="text-center">'+name+'</p>';
		boiler1+='<span class="folderTagsCls" style="display:none;">'+documentTagsBoiler(jArray[i]["tags"])+'</span>';
		boiler1+='</div>';*/
		
		boilerList+='<tr id="optionDmsFolder-'+jArray[i]["documentCategoryId"]+'" class="DMS_content_item" data-name="'+fullName+'" data-dirCount="'+dirCount+'" data-fileCount="'+fileCount+'" isShared="'+isShared+'" '+
		`canEdit="${canEdit}" data-createdByEmp="${createdByEmp}" ondblclick="getFolderFilesDocumentsByParentId(${jArray[i]["documentCategoryId"]},'${escape(fullName)}',undefined, undefined, ${jArray[i].canEdit}))"`;
		boilerList+='<td></td>';
		boilerList+='<td><a href="javascript:void(0);"><i class="fa fa-circle"></i> <b>'+fullName+'</b></a></td><td>Folder</td>';
		boilerList+='<td title="Directory/File Count"> '+(dirCount)+' Folder(s) & '+(fileCount)+' File(s).</td>';
		boilerList+='<td title="Created By Employee">'+(createdByEmp)+'</td>';
		boilerList+='<td title="Can Edit">'+(canEdit==true?'No':'Yes')+'</td>';
		boilerList+='<td title="Shared">'+(isShared==true?'Shared':'-')+'</td>';
		boilerList+='<td>-</td>';
		boilerList+='<td>'+documentTagsBoiler(jArray[i]["tags"])+'</td>'+
			'<td>'+createdTimetamp+'</td>'+'<td></td></tr>';
		
		if(jArray[i]["parentCategoryType"]!=null && (jArray[i]["parentCategoryType"]!='dms' && jArray[i]["parentCategoryType"]!='DMS'))
		{
			$('#menuFoldr-'+ jArray[i]["documentCategoryId"]).remove();
			if($('#hdnUserRole').val()!='student'){
				menuBoiler += '<div id="menuFoldr-'+ jArray[i]["documentCategoryId"] +'"><ul>';
				menuBoiler += '<li onclick="configureUploadedFolderSharingView('+jArray[i]["documentCategoryId"]+',\'folder\',\''+name+'\')"><a href="javascript:void(0);"><i class="fa fa-share fa-lg"></i> Share</a></li>';
				if(jArray[i]["childUploadedFileCount"]>0){
				menuBoiler += '<li onclick="downloadZipUploadedFile('+jArray[i]["documentCategoryId"]+',\''+name+'\')"><a href="javascript:void(0);"><i class="fa fa-file-archive-o" aria-hidden="true"></i> Download Zip</a></li>';
				}
				menuBoiler += '<li onclick="deleteOwnerCreatedFolder('+i+')"><a href="javascript:void(0);"><i class="fa fa-trash fa-lg"></i> Delete</a></li>';
				menuBoiler += '<li onclick="showDocumentFolderProperties(\'folder\','+i+')"><a href="javascript:void(0);"><i class="fa fa-info-circle fa-lg"></i> Properties</a></li>';
				menuBoiler += '</ul></div>';
			}
		}
		
	}
	boiler1+='</div>';
	boilerList+='</tbody></table>';
	
	if($('#folderViewChangeId').hasClass('fa-th-large')){
		$("#tdFileAndTextWindow").html(boilerList);
		$('.DMS_content_item').css('float', 'inherit');
		dataTableListView();
	}else{
		$("#tdFileAndTextWindow").html(boiler1);
		$('.DMS_content_item').css('float', 'left');
	}
	$("#tdFileAndTextWindow").show();
	$("#fileMap").val("/home");//<span onclick='showFileAndTextWindow();' style='cursor:pointer;'>
	$("#fileMapLocation").html("/<a onclick='showFileAndTextWindow();' style='cursor:pointer;'>home</a>");
	showZipDownloadButton();
	$('#fileMap').keypress(function(event){
	    var keycode = (event.keyCode ? event.keyCode : event.which);
	    if(keycode == '13'){
	    	if($('#chkIncludeSharedDMS').is(':checked')==true){
	    		fetchAllSharedDocuments();
	    	}else{
	    		getFileAndFolderByPath();
	    	}
	    }
	});
	
	$('.DMS_content_item')
		.mouseenter(function(e) {
			//console.log(this);
			showItemDetails(this);
			var tp = $(this).offset().top;
			var lft = $(this).offset().left;
			$('.movable').css({'top': tp+62,'left': lft+45});
			//$('.movable').css({'top': e.pageY,'left': e.pageX});
			$('#dms_item_details').show();
		})
		.mouseleave(function() {
			//$('#dms_item_details').hide();
		})
		.click(function (){
			$('.DMS_content_item').removeClass('DMS_content_item_selected');
			$(this).addClass('DMS_content_item_selected');
		});
	$('body').click(function(){
		$('#dms_item_details').hide();
	});
	if($('#hdnUserRole').val()!='student'){
		$('#my-menu').append(menuBoiler);

		for ( var i = 0; i < jArray.length; i++) {
			if(jArray[i]["parentCategoryType"]!=null && (jArray[i]["parentCategoryType"]!='dms' && jArray[i]["parentCategoryType"]!='DMS'))
			{
				/*var isShared = jArray[i]["isShared"]!=null?jArray[i]["isShared"]:'false';
				var canEdit = jArray[i]["canEdit"]!=null?jArray[i]["canEdit"]:'false';
				if(isShared=='false' || (isShared=='true' && canEdit=='true'))
				{*/
					$("#optionDmsFolder-"+ jArray[i]["documentCategoryId"]).ClassyContextMenu({
						menu: 'menuFoldr-'+ jArray[i]["documentCategoryId"],
						mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
						isMenu: true,
						minWidth: 120,
						maxWidth: 0,
						delay: 500, 
					});
				//}
			}
		}
	}
}


/**
 * @param jArray
 * @purpose this function has been used for create the tree with same structure
 *          for copy/move the document
 */
function doCreateOrganizeFolderTree(jArray) {
	$('#ulTargetTree').tree('reload');
	var j = jArray.length;
	for ( var i = 0; i < j; i++) {
		if ((jArray[i]["refDocumentCategoryId"]) == undefined) { // parent
			$('#ulTargetTree').tree('append', {
				data : [ {
					id : jArray[i]["documentCategoryId"],
					text : jArray[i]["name"]
				} ]
			});
		} else {
			var parent = jArray[i]["refDocumentCategoryId"];
			var text = jArray[i]["name"];
			var node = $('#ulTargetTree').tree('find', parent);
			$('#ulTargetTree').tree('append', {
				parent : (node ? node.target : null),
				data : [ {
					id : jArray[i]["documentCategoryId"],
					text : text,
				} ]
			});
			try{
			$('#ulTargetTree').tree('collapseAll', node.target);
			}catch(e){}
		}
	}
}
/**
 * @Name: clearAddDocumentForm()
 * @Author: Vimal Kr.
 * @Date: 27 Mar 2012
 * @Purpose: for clearing the addDocumentCategoryForm
 */
function clearAddDocumentCategoryForm() {
	$('#documentCategoryName').val("");
	$('#documentDescription').val("");
}

/**
 * @Name: showAddDocumentCategoryForm()
 * @Author: Vimal Kr.
 * @Date: 27 Mar 2012
 * @Purpose: for showing the addDocumentCategoryForm
 */
function showAddDocumentCategoryForm() {
	clearAddDocumentCategoryForm();
	$('#addDocumentCategoryDialog').modal('show');
}

/**
 * @Name: getDocumentCategory()
 * @Author: Vimal Kr.
 * @Date: 27 Mar 2012
 * @Purpose: for fetching the category list of the Document with AJAX method
 */
function getDocumentCategory() {

	$.ajax({
		url : 'getDocumentCategoryAjax.json',
		dataType : 'json',
		success : function(jArray) {

		},
		error : function() {
		}
	});
}

/**
 * @Name: addDocumentCategoryCheckPoint1()
 * @Author: Vimal Kr.
 * @Date: 28 Mar 2012
 * @Purpose: for checking the parent selection before adding the
 *           DocumentCategory
 */
function addDocumentCategoryCheckPoint1() {
	$('#txtDocumentTags').tagit('removeAll');
	var parentCatId = gDMSCategoryTreeId;
	if (parentCatId == null) {
		//$.prompt('Creating document with no parent category. Proceed?', {
		$.prompt('Creating folder with no parent folder. Proceed?', {
			callback : addDocumentCategoryCheckPoint2,
			buttons : {
				Proceed : true,
				Cancel : false
			}
		});
	} else {
		$('#chkNewDocFlag, #chkNewDocFlagTbx').removeAttr('checked');
		$('#hdnParentCategoryId, #hdnParentCategoryIdTbx').val(parentCatId);
		showAddDocumentCategoryForm();
	}
}

/**
 * @Name: addDocumentCategoryCheckPoint2()
 * @Author: Vimal Kr.
 * @Date: 28 Mar 2012
 * @Purpose: for checking the parent selection before adding the
 *           DocumentCategory
 */
function addDocumentCategoryCheckPoint2(e, v, m, f) {
	if (v) {
		$('#chkNewDocFlag, #chkNewDocFlagTbx').attr('checked', 'checked');
		showAddDocumentCategoryForm();
	}
}

/**
 * @Name: addDocumentCategoryAjax()
 * @Author: Vimal Kr.
 * @Date: 28 Mar 2012
 * @Purpose: for adding the document category
 * @param documentCategoryName
 *            name of the category
 * @param documentDescription
 *            description about the category
 * @param categoryType
 *            type of the category e.g: dms/courseFile/mentoring/event etc
 * @param parentCategoryType
 *            e.g.: dms/communication/announcement/notices etc
 * @param newDocFlag
 *            Whether it is root category or child category
 */
function addDocumentCategoryAjax(documentCategoryName, documentDescription,
		categoryType, parentCategoryType, newDocFlag) {

	/**
	* to ensure that if category has been added from outside(not from dialog
	* box) the it must be root category
	*/

	if (documentCategoryName == undefined){
		documentCategoryName = $('#documentCategoryName').val();
		if(isValidFileName(documentCategoryName)==false){
			$('#documentCategoryName').css('border', '1px solid red');
			jAlert("Please enter valid Folder Name!");
			return;
		}
	}
	if (documentDescription == undefined)
		documentDescription = $('#documentDescription').val();
	if (categoryType == undefined)
		categoryType = getSelectedCategoryType();
	if (parentCategoryType == undefined)
		parentCategoryType = getSelectedParentCategoryType();

	categoryPath = getCategoryRetrievalPath();
	/** Will return undefined if proper path is not available */
	var prevWhileAttchFlag = false;
	if (newDocFlag == undefined) {
		newDocFlag = $('#chkNewDocFlag').is(':checked');
		prevWhileAttchFlag = $('#chkPrevToAttachmentFlag').is(':checked');
		if(prevWhileAttchFlag==true){
			categoryType = 'DMS';
			parentCategoryType = 'DMS';
		}
	} else {
		newDocFlag = true;
	}
	/**
	* Doesn't matter if undefined or anything because it has been taken on
	* server side by session
	* 
	*/
	var employeeId = $('#hdnDocumentPerson').val();
	var parentCatId = "null";
	var path = "";
	if (!newDocFlag) {
		parentCatId = $('#hdnParentCategoryId').val();
		path = getCategoryPath(parentCatId);
	}
	var documentTag = $('#txtDocumentTags').val();
	var isPrivacyPublic = $('#folderIsPublic').is(':checked');
	$.ajax({
		url : 'addDocumentCategoryAjax.json?documentCategoryName='
			+ documentCategoryName + '&documentDescription='
			+ documentDescription + '&employeeId=' + employeeId
			+ '&parentCatId=' + parentCatId + '&path=' + path
			+ '&categoryType=' + categoryType + '&parentCategoryType='
			+ parentCategoryType + '&documentTag='+documentTag+'&isPrivacyPublic='+isPrivacyPublic,
			dataType : 'json',
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			success : function(jArray) {
				$('#addDocumentCategoryDialog').modal('show');
				if (jArray[0].responseFlag == '1') {
					//showSuccessMessage(jArray[0].responseText, 5000);
				} else {
					//showErrorMessage(jArray[0].responseText, 5000);
					jArray(jArray[0].responseText);
				}
				/**
				* @comment such function to be called which can be overriden by
				*          another pluggins so that proper parameter could be
				*          called!!!
				*/
				if(window.req_param_categoryId!=null){
					getFolderFilesDocumentsByParentId(window.req_param_categoryId);
					
				}else if (newDocFlag) {
					fetchAllDocumnetsWithDMS(isAcademicFolder);
				} else {
					//refreshFolder();
					//getDocumentByParentId(gDMSCategoryTreeId,escape(gDMSCategoryTreeName));
					//fetchAllDocumnetsWithDMS();
					getFileAndFolderByPath();
				}
				$('#addDocumentCategoryDialog').modal('hide');
				$('#chkPrevToAttachmentFlag').prop('checked', false);
				$('#txtDocumentTags').tagit('removeAll');
			},
			error : function() {

			}
	});
}

/**
 * @since 11th May 2012
 */
/**
 * @since 11 may 2012
 */
function createCategoryHirarchy(categoryPathArr, typeArray, parentType) {
	$.ajax({
		url : 'createHirarchicalCategoryAjax.json?categoryHirarchyArr='
			+ categoryPathArr + '&categoryType=' + typeArray
			+ '&parentCategoryType=' + parentType,
			dataType : 'json',
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			success : function(jArray) {
				if (jArray[0].responseFlag == '1') {
					showSuccessMessage(jArray[0].responseText, 15000);
				} else {
					showErrorMessage(jArray[0].responseText, 15000);
				}
				var catPath = categoryPathArr.join("/");
				createTree(catPath, typeArray, parentType);
			},
			error : function() {

			}
	});
}

/**
 * @since 1 mar 2013
 * @author vimal
 */
function createCategoryHirarchy1(categoryPathArr, categoryPathNameArr,
		typeArray, parentType, callback) {

	categoryPathArr = categoryPathArr.join(",");
	categoryPathNameArr = categoryPathNameArr.join("~");
	docCategoryId = '0';
	$
	.ajax({
		url : 'createHirarchicalCategoryAjaxNew1.json',
		data : {
			categoryHirarchyArr : categoryPathArr,
			categoryHirarchyNameArr : encodeURIComponent(categoryPathNameArr+''),
			categoryType : typeArray,
			parentCategoryType : parentType
		},
		type : 'POST',
		dataType : 'json',
		beforeSend : function() {
			startCommonAjaxSpinner();
		},
		complete : function() {
			stopCommonAjaxSpinner();
		},
		success : function(jArray) {
			if (jArray[0].responseFlag == '1') {
				docCategoryId = jArray[0].CategoryHierarchyList[0].documentCategoryId;
				
				//new
				getFolderFilesDocumentsByParentId(docCategoryId, gDMSCategoryTreeName);
				getFolderFilesDocumentsByParentId(docCategoryId, gDMSCategoryTreeName);
				//new
				
				showSuccessMessage(jArray[0].responseText, 15000);
			} else {
				showErrorMessage(jArray[0].responseText, 15000);
			}
			doCreateTree(jArray[0].CategoryHierarchyList);
			try {
				callback(jArray[0].CategoryHierarchyList[0].documentCategoryId);
			} catch (e) {
				alert(e);
			}
		},
		error : function() {
			alert('error');
		}
	});
}

/**
 * @since 17 Apr 2013
 * @author vimal
 */
function createTrainingCategoryHirarchy(categoryPathArr) {

	categoryPathArr = categoryPathArr.join(",");
	$.ajax({
		url : 'createHirarchicalCategoryForTrainingAjax.json',
		data : {
			categoryHirarchyArr : categoryPathArr,
		},
		type : 'POST',
		dataType : 'json',
		beforeSend : function() {
			startCommonAjaxSpinner();
		},
		complete : function() {
			stopCommonAjaxSpinner();
		},
		success : function(jArray) {
			if (jArray[0].responseFlag == '1') {
				showSuccessMessage(jArray[0].responseText, 15000);
			} else {
				showErrorMessage(jArray[0].responseText, 15000);
			}
			doCreateTree(jArray[0].CategoryHierarchyList);
		},
		error : function() {

		}
	});
}

/**
 * @Name: removeDocumentCategoryCheckPoint1()
 * @Author: Vimal Kr.
 * @Date: 29 Mar 2012
 * @Purpose: for removing the document category
 */
function removeDocumentCategoryCheckPoint1() {
	var parentCatId = getSelected();
	alert(parentCatId);
	if (parentCatId == null) {
		$.prompt('Please choose a document category to delete.');
	} else {
		var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
		if ($.inArray(node.text, gDefaultCategoryArray) == -1) {
			$.prompt('Are you sure to delete?', {
				callback : removeDocumentCategory,
				buttons : {
					Proceed : true,
					Cancel : false
				}
			});
		} else {
			jAlert('Default category(folder) cannot be deleted');
		}
	}
}

/**
 * @Name: removeDocumentCategory()
 * @Author: Vimal Kr.
 * @Date: 29 Mar 2012
 * @Purpose: for removing the document category
 */
function removeDocumentCategory(e, v, m, f) {

	if (v) {
		var categoryId = gDMSCategoryTreeId;
		var path = getCategoryPath(categoryId);
		$.ajax({
			url : 'removeDocumentCategoryAjax.json?categoryId='
				+ categoryId + '&path=' + path,
				dataType : 'text',
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				async : false,
				success : function(response) {
					if (response == 'Deleted') {
						$('#tdDocumentFilesWindow').html("");
						showSuccessMessage(
								'Directory successfully deleted', 500000);
						var node = getParent();
						if (node) {
							/** If deleted folder is child of some folder */
							refreshFolder(node);
						} else {
							/** If deleted folder is root parent */
							node = find(categoryId);
							/** Current selected folder object */
							deleteFolder(node);
						}
					} else {
						jAlert('Deletion Failed!!');
					}

				},
				error : function() {

				}
		});
	}
}

/**
 * @Name: getUploadedFiles(nodeId)
 * @Author: Vimal Kr.
 * @Date: 28 Mar 2012
 * @Purpose: for adding the document category
 * @param: nodeId- category id of the clicked category
 */
function getUploadedFiles(nodeId) {
	
	gNodeId = nodeId;
	$('#chkIncludeDMS').attr('checked',false);
	$('#chkHideEmtyFolders').attr('checked',false);
	$('#chkIncludeSharedDMS').attr('checked',false);
	$.ajax({
		url : 'getUploadedDocumentAjax.json?categoryid=' + gNodeId,
		dataType : 'json',
		beforeSend : function() {
			startCommonAjaxSpinner();
			$("body").css("cursor", "progress");
		},
		complete : function() {
			stopCommonAjaxSpinner();
			setTimeout(function(){$("body").css("cursor", "default");},1000)
		},
		async : true,
		success : function(jArray) {
			gjArrUploadedDocument = jArray;
			showUploadedDocumentIcon();
			stopCommonAjaxSpinner();
		},
		error : function() {
			alert('error');
		}

	});
}

/**
 * @Name: getTextFiles(nodeId)
 * @Author: Vimal Kr.
 * @Date: 28 Mar 2012
 * @Purpose: for adding the document category
 * @param: nodeId- category id of the clicked category
 */
function getTextFiles(nodeId) {
	gNodeId = nodeId;
	$.ajax({
		url : 'getTextDocumentListAjax.json?categoryid=' + nodeId,
		dataType : 'json',
		beforeSend : function() {
			startCommonAjaxSpinner();
			$("body").css("cursor", "progress");
		},
		complete : function() {
			stopCommonAjaxSpinner();
			setTimeout(function(){$("body").css("cursor", "default");},1000);
			
		},
		async : true,
		success : function(jArray) {
			gjArrTextDocument = jArray;
			showTextDocumentIcons();

		},
		error : function() {
			alert('error');
		}
	});
}

function reload(elementId) {
	if (elementId == undefined)
		$('#' + gDMSCategoryTreeId).tree('reload');
	else
		$('#' + elementId).tree('reload');
}

function getChildren() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	var children = new Array();
	if (node) {
		children = $('#' + gDMSCategoryTreeId).tree('getChildren', node.target);
	} else {
		children = $('#' + gDMSCategoryTreeId).tree('getChildren');
	}
	var s = '';
	for ( var i = 0; i < children.length; i++) {
		s += children[i].text + ',';
	}
}

function getParent() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	if (node) {
		return $('#' + gDMSCategoryTreeId).tree('getParent', node.target);
	} else {
		return null;
	}
}
function getSelected() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	/*var node = '';
	if (node != null)
		return node.id;
	else {
		return null;
	}*/
	return node;
}

function collapse() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	$('#' + gDMSCategoryTreeId).tree('collapse', node.target);
}

function setSelected(categoryId) {
	$('.tree-node[node-id="' + categoryId + '"]').find('.tree-icon.tree-folder').click();
}
function expand() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	$('#' + gDMSCategoryTreeId).tree('expand', node.target);
}
function expandNode(node) {
	$('#' + gDMSCategoryTreeId).tree('expand', node.target);
}

function collapseNode(node) {
	$('#' + gDMSCategoryTreeId).tree('collapse', node.target);
}

function collapseAll() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	if (node) {
		$('#' + gDMSCategoryTreeId).tree('collapseAll', node.target);
	} else {
		$('#' + gDMSCategoryTreeId).tree('collapseAll');
	}
}
function expandAll() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	if (node) {
		$('#' + gDMSCategoryTreeId).tree('expandAll', node.target);
	} else {
		$('#' + gDMSCategoryTreeId).tree('expandAll');
	}
}

function find(id) {

	var node = $('#' + gDMSCategoryTreeId).tree('find', id);
	return node;
}

/**
 * @name showTextDocumentIcons()
 * @since 29th Mar 2012
 * @purpose for showing the icons of the text documents
 */
function showTextDocumentIcons() {
	$('#textDocumentNameDialog').modal('hide');
	
	var boiler1 = '<table class="">';
	var boilerList = '';
	var link = "";
	var menuBoiler = '';
	var flag = 8;
	link += '<tr><td><div id="showPrivateCommentDiv"></div></td></tr>';
	gFileId = 1;
	for ( var i = 0; i < gjArrTextDocument.length; i++) {

		var iconPath = '';
		if (gjArrTextDocument[i]["hasAttachment"] != undefined)
			if (gjArrTextDocument[i]["hasAttachment"].toLowerCase() == 'yes') {
				//iconPath = 'css/images/icon_attachment.gif';
				iconPath = 'img/files/txt.png';
			} else {
				//iconPath = 'css/images/tree_file.gif';
				iconPath = 'img/files/txt.png';
			}
		
		
		//new s
		if(i==flag)
		{
			boiler1+='</tr><tr>';
			flag+=8;
		}
		var name = gjArrTextDocument[i]["name"].length<11?gjArrTextDocument[i]["name"].gemsDecode():gjArrTextDocument[i]["name"].gemsDecode().substring(0,11)+'...';
		boiler1+='<td style="padding:20px;">';
		boiler1+='<div id="options-'+ gjArrTextDocument[i]["documentId"] + '" data-name='+name+' style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink DMS_content_item" id = "tdFileListIcon-text-'
		+ gjArrTextDocument[i]["documentId"]+ '"><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false"'
		//+ gjArrTextDocument[i]["documentId"]+ '"><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false" onmouseover = "showFileDetail(\'tdFileListIcon-text-'+ gjArrTextDocument[i]["documentId"]\')
		+ '"><p class="text-center">'+name+'</p>';
		
		boiler1+='</div>';
		boiler1+='</td>';
		if(i==flag)
		{
			boiler1+='</tr>';
		}
		$('#menu-'+ gjArrTextDocument[i]["documentId"]).remove();
		var canEdit='false';
		var isShared='false';
		isShared = $('#optionDmsFolder-'+gjArrTextDocument[i]["categoryId"]).attr('isShared');
		canEdit = $('#optionDmsFolder-'+gjArrTextDocument[i]["categoryId"]).attr('canEdit');
		menuBoiler += '<div id="menu-'+ gjArrTextDocument[i]["documentId"] +'"><ul>'+
		'<li onclick = "showText(\''+ gjArrTextDocument[i]["documentId"] + '\',\'view\')"><a href="javascript:void(0);">View</a></li>';
		if($('#hdnUserRole').val()!='student'){
			if((gjArrTextDocument[i]["isShared"]==null && isShared=='false' && canEdit=='false') || (isShared=='true' && canEdit=='true') || (gjArrTextDocument[i]["isShared"]=='true' && gjArrTextDocument[i]["canEdit"]=='true'))
			{
				menuBoiler += '<li onclick = "showText(\''+ gjArrTextDocument[i]["documentId"] + '\',\'edit\')"><a href="javascript:void(0);">Edit</a></li>';
				menuBoiler += '<li onclick="configureCourseFileDocSharingView(\'\','+gjArrTextDocument[i]["documentId"]+')"><a href="javascript:void(0);">Share</a></li>';
				menuBoiler += '<li onclick="configureUploadedFolderSharingView(\''+gjArrTextDocument[i]["documentId"]+'\',\'docFile\',\''+name+'\')"><a href="javascript:void(0);">Share in DMS</a></li>';
			}
		}
		menuBoiler +='</ul></div>';
		//new e

		link += '<tr>'
			+ '<td  class="ui-state-default" width="40px">'
			+ '<input type = "checkbox"  id = "chkFileListIcon-text-'
			+ gjArrTextDocument[i]["documentId"]
		+ '"  class = "chkFileListIcon"  name = "chkFileListIcon">'
		+ '</td>'
		+ '<td class="context-menu-one tooltiplink ui-state-default" id = "tdFileListIcon-text-'
		+ gjArrTextDocument[i]["documentId"]
		/*+ '" onmouseover = "showFileDetail(\'tdFileListIcon-text-'
		+ gjArrTextDocument[i]["documentId"]\')*/
		+ '" style =  "cursor:pointer;" onclick = "showText(\''
		+ gjArrTextDocument[i]["documentId"] + '\')">'
		+ '<image src = "' + iconPath + '" height=25 />&nbsp;&nbsp;'
		+ gjArrTextDocument[i]["name"] + '</td>';

		if (gjArrTextDocument[i]["sharedStatus"] != 0)
			link += '<td id="shaEmp'
				+ gFileId
				+ '" width="20px;" class="ui-state-default"><a href="javascript:void(0);" onclick="showSharedEmployeeList('
				+ gjArrTextDocument[i]["documentId"]
		+ ',\'textfile\','
		+ gFileId
		+ ')" title=""><img src="img/share.png" alt="Shared" />Shared With Section</a></td>';
		else
			link += '<td id="shaEmp' + gFileId+ '" width="20px;" class="ui-state-default"></td>';

		if(!$('.courseFileTabs .active').data('isFreeze'))
		{
			link+= '<td style="width:70px;text-align:center" class="context-menu-one ui-state-default"><a class="btn btn-mini docListOpt btnDocOpts" href="javascript:void(0);" id="btnDocOptDocShared" title="Share with Others" onclick="configureCourseFileDocSharingView(\'\','+gjArrTextDocument[i]["documentId"]+')"><i class="icon-user"></i></a></td>';
			/*
			link += '<td style="width:80px;" class="context-menu-one ui-state-default">'
				+ '<div class="btn-group">'
				+ '<a data-toggle="dropdown" style="color:#FFFFFF;" class="btn btn-mini btn-inverse dropdown-toggle" href="javascript:void(0);">'
				+ '<i class="icon-cog icon-white"></i> Option '
				+ '<span class="caret"></span>'
				+ '</a>'
				+ '<ul class="dropdown-menu options pull-right">';

			if (gCategoryType == 'mentoring')
				link += '<li><a href="javascript:void(0)" onclick="showMentoringStudentShare('+ gFileId + ','+ gjArrTextDocument[i]["documentId"] + ',\'textfile\')" ><i class="icon-user"></i> Share with Student(s)</a></li>';

			else if (gCategoryType == 'RESEARCH') {
				link += '<li><a href="javascript:void(0)" onclick="showResearchEmployeeShare('+ gFileId + ',' + gjArrTextDocument[i]["documentId"] + ',\'textfile\')" >'
				+ '<i class="icon-user"></i> Share with Employee </a></li>'
				+ '<li><a href="javascript:void(0)" onclick="showResearchStudentShare(' + gFileId + ',' + gjArrTextDocument[i]["documentId"] + ',\'textfile\')" >'
				+ '<i class="icon-user"></i> Share with Students </a></li>';

				for ( var k = 0; k < gDepartmentName.length; k++) {
					var temp = gDepartmentName[k];
					temp = temp.replace(/\./g, "-");
					temp = temp.replace(/\ /g, "-");
					temp = temp.replace(/\&/g, "-");
					link += '<li>'
						+ '<a href="javascript:void(0)" onclick="showEmployeeShare(\''+ temp + '\',' + gFileId + ',' + k + ','+ gjArrTextDocument[i]["documentId"]+ ',\'textfile\',\'' + gDepartmentName[k] + '\')">'
						+ '<i class="icon-user"></i> Share with '+ gDepartmentName[k] + ' Staff' + '</a>' + '</li>';
				}
			} else if (gCategoryType == 'courseFile') {
					
			link += '<li>'
				 *//*** Replace sharing code ***//* 
					+ '<a href="javascript:void(0)" onclick="configureCourseFileDocSharingView(\'\','+gjArrTextDocument[i]["documentId"]+')" >'
						+ '<i class="icon-user"></i> Share'
					+ '</a>'+'</li>';



				link += '<li>'
					*//*** Replace sharing code ***//* 
					+ '<a href="javascript:void(0)" onclick="configureCourseFileDocSharingViewCurrentBatch(\'\','+gjArrTextDocument[i]["documentId"]+')" >'
					+ '<i class="icon-user"></i> Share with Current Batch'
					+ '</a>'+'</li>';

				*//*** Replace sharing code ***//* 


			} else {

				for ( var k = 0; k < gBatchSemester.length; k++) {
					var temp = gBatchSemester[k];
					temp = temp.replace(/\./g, "-");
					temp = temp.replace(/\ /g, "-");
					temp = temp.replace(/\&/g, "-");
					link += '<li>'
						+ '<a href="javascript:void(0)" onclick="showStudentShare(\''
						+ temp + '\',' + gFileId + ',' + k + ','
						+ gjArrTextDocument[i]["documentId"]
					+ ',\'textfile\',\'' + gBatchSemester[k] + '\')" >'
					+ '<i class="icon-user"></i> Share with '
					+ gBatchSemester[k] + ' Student(s)' + '</a>' + '</li>';
				}

				for ( var k = 0; k < gDepartmentName.length; k++) {
					var temp = gDepartmentName[k];
					temp = temp.replace(/\./g, "-");
					temp = temp.replace(/\ /g, "-");
					temp = temp.replace(/\&/g, "-");
					link += '<li>'
						+ '<a href="javascript:void(0)" onclick="showEmployeeShare(\''
						+ temp + '\',' + gFileId + ',' + k + ','
						+ gjArrTextDocument[i]["documentId"]
					+ ',\'textfile\',\'' + gDepartmentName[k] + '\')">'
					+ '<i class="icon-user"></i> Share with '
					+ gDepartmentName[k] + ' Staff' + '</a>' + '</li>';
				}
			}

			link += '<li class="divider"></li>';

			if (gjArrTextDocument[i]["sharedStatus"] == 1) {

				link += '<li>'
					+ '<a href="javascript:void(0);" class="has_down_arrow trigger first" onclick="showComment('
					+ gFileId
					+ ','
					+ gjArrTextDocument[i]["documentId"]
				+ ',\'textfile\','
				+ i
				+ ')">'
				+ '<i class="icon-comment"></i> Comment'
				+ '</a>'
				+ '</li>'
				+ '<li class="divider"></li>'
				+ '</ul>'
				+ '</div>'
				+ '</td>'
				+ '</tr>'
				+ '<tr id="trshowComment'
				+ gFileId
				+ '" style="display:none;">'
				+ '<td colspan="3">'
				+ '<div id="commentConfig' + gFileId + '"></div>' + '</td>';

			} else
				link += '</ul>' + '</div>' + '</td>';
		*/}

		link += '</tr>'
			+ '<tr id="trshowStudentShare'
			+ gFileId
			+ '" style="display:none;"><td colspan="6"><div id="showStudentShare'
			+ gFileId
			+ '"></div></td></tr>'
			+ '<tr id="trshowEmployeeShare'
			+ gFileId
			+ '" style="display:none;"><td colspan="6"><div id="showEmployeeShare'
			+ gFileId
			+ '"></div></td></tr>'
			+ '<tr id="trshowPrivateComment'
			+ gFileId
			+ '" style="display:none;"><td colspan="6"><div id="showPrivateComment'
			+ gFileId + '"></div></td></tr>';
		gFileId++;
		
		
		boilerList+='<tr id="options-'+ gjArrTextDocument[i]["documentId"] + '" data-name='+name+' style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink" id = "tdFileListIcon-text-'
		+ gjArrTextDocument[i]["documentId"]+ '">'+
		'<td><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false" style="width:25px;height:25px;"> '+gjArrTextDocument[i]["name"].gemsDecode()+'</td>';//isShared canEdit hasAttachment
		
		boilerList+='<td>File</td><td>-</td><td>-</td>';
		/*boilerList+='<td title="Can Edit">'+(canEdit=='true'?'Not Readonly':'Readonly')+'</td>';*/
		boilerList+='<td title="Is Shared">'+(isShared=='true'?'Shared':'-')+'</td>';
		boilerList+='<td title="has Attahcments">'+(gjArrTextDocument[i]["hasAttachment"]+''=='true'?'Yes':'No')+'</td>';
		boilerList+='</tr>';
	}
	$('#documentsList').show();
	
	
	if($('#folderViewChangeId').hasClass('fa-th-large')){
		//$('#documentsList').html(boilerList);
		$("#subFolder .tableWithoutPadding").append(boilerList);
		dataTableListView();
	}else{
		$('#documentsList').html(boiler1);
	}
	$('#my-menu').append(menuBoiler);
	
	
	for ( var i = 0; i < gjArrTextDocument.length; i++)
	{

		$("#options-"+ gjArrTextDocument[i]["documentId"]).ClassyContextMenu({
			menu: 'menu-'+ gjArrTextDocument[i]["documentId"],
			mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
			isMenu: true,
			minWidth: 120,
			maxWidth: 0,
			delay: 500, 
		});

	}
	$(document).ready(function() {
		$('.commentMark').elastic();
	});
	jQuery(function() {
		jQuery('.jbar').jbar();
	});
	/**
	 * file detail data association with checkbox and td element id using jquery
	 * data function
	 */
	for ( var i = 0; i < gjArrTextDocument.length; i++) {
		$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Type', 'text');
		$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Id', gjArrTextDocument[i]["documentId"]);
		$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'CreationDate', gjArrTextDocument[i]["creationDate"]);
		$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Name', gjArrTextDocument[i]["name"]);
		$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Parent', gjArrTextDocument[i]["catName"]);
		$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Description', gjArrTextDocument[i]["description"]);
		$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Type', 'text');
		$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Id', gjArrTextDocument[i]["documentId"]);
		$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'CreationDate', gjArrTextDocument[i]["creationDate"]);
		$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Name', gjArrTextDocument[i]["name"]);
		$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Parent', gjArrTextDocument[i]["name"]);
		$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Description', gjArrTextDocument[i]["description"]);
	}

}

/**
 * @name showUploadedDocumentIcon()
 * @since 29th Mar 2012
 * @purpose for showing the icons of the uploaded documents
 */
function showUploadedDocumentIcon() {
	var link = ""; var flag1= 8;
	var boiler = '<table class="">';
	var menuBoiler = '';
	var boilerList ='';
	link += '<tr><td><div id="showPrivateCommentDiv"></div></td></tr>';
	for ( var i = 0; i < gjArrUploadedDocument.length; i++) {

		gFileId++;
		
		if(i==flag1)
		{
			boiler+='</tr><tr>';
			flag1+=8;
		}
		if (gjArrUploadedDocument[i]["documentBody"] != undefined) {
			downloadLink = (juno.label['url.download.json'].setIndexedArgs((gjArrUploadedDocument[i]["eDocPathId"]!=undefined?gjArrUploadedDocument[i]["eDocPathId"]:gjArrUploadedDocument[i]["documentPathId"]), "UPLOADED", encodeURIComponent(gjArrUploadedDocument[i]["name"])))
		}
		
		var canEdit='false';
		var isShared='false';
		isShared = $('#optionDmsFolder-'+gjArrUploadedDocument[i]["categoryId"]).attr('isShared');
		canEdit = $('#optionDmsFolder-'+gjArrUploadedDocument[i]["categoryId"]).attr('canEdit');
		
		var fileType = gjArrUploadedDocument[i]["extension"].toLowerCase();
		iconPath = gFileTypeIcon[fileType];
		
		var temp = gjArrUploadedDocument[i]["name"];
		temp = temp.replace(/\ /g, "-");
		temp = temp.replace(/\&/g, "-");
		var name = gjArrUploadedDocument[i]["name"].length<20?gjArrUploadedDocument[i]["name"]:gjArrUploadedDocument[i]["name"].substring(0,20)+'...';
		boiler+='<td style="padding:20px;" style="text-align:center;">';
		boiler+='<div id="Upload-'+ gjArrUploadedDocument[i]["documentPathId"] +'" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink DMS_content_item" data-name='+temp+'><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false"><p class="text-center">'+name+'</p></div>';
		//boiler+='<div oncontextmenu="rightClick();" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;"><a href="'+downloadLink+'"><img src="'+iconPath+'"><p class="text-center">'+name+'</a></p>';
		boiler+= '<div style="text-align:center;">';
		boiler+= '</div>';
		boiler+='</td>';

		boilerList+='<tr id="Upload-'+ gjArrUploadedDocument[i]["documentPathId"] +'" class="tooltiplink DMS_content_item" data-name="'+temp+'" style="cursor:pointer;">';
		boilerList+='<td><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false" style="width:25px;height:25px;"/></td><td>'+name+'</td>';
		boilerList+='<td>Folder</td><td title="Directory/File Count">-</td>';
		boilerList+='<td title="Created By Employee">-</td>';
		/*boilerList+='<td title="Can Edit">'+(canEdit=='true'?'Not Readonly':'Readonly')+'</td>';*/
		boilerList+='<td title="Is Shared">'+(isShared=='true'?'Shared':'-')+'</td>';
		boilerList+='<td>-</td>';
		boilerList+='</tr>';
		
		if(i==flag1)
		{
			boiler+='</tr>';
		}
		
		menuBoiler += '<div id="Uploadmenu-'+ gjArrUploadedDocument[i]["documentPathId"] +'"><ul>';
		if(fileType=='doc' || fileType=='docx' || fileType=='ppt' || fileType=='pptx' || fileType=='xls' || fileType=='xlsx')
		{
			menuBoiler+= '<li onclick="showDocumentPreview('+gjArrUploadedDocument[i]["documentPathId"]+');"><a href="javascript:void(0);">Preview</a></li></a>';
		}
		menuBoiler += '<li><a href="'+downloadLink+'">Download</a></li>';
		
		if($('#hdnUserRole').val()!='student'){
			if((gjArrUploadedDocument[i]["isShared"]==null && isShared=='false' && canEdit=='false') || (isShared=='true' && canEdit=='true') || (gjArrUploadedDocument[i]["isShared"]=='true' && gjArrUploadedDocument[i]["canEdit"]=='true'))
			{
				menuBoiler += '<li onclick="configureUploadedFileDocSharingView('+gjArrUploadedDocument[i]["documentPathId"]+',\'uploaded\',\''+name+'\',\''+gjArrUploadedDocument[i]["categoryId"]+'\')"><a href="javascript:void(0);">Share</a></li>';
				menuBoiler += '<li onclick="configureUploadedFolderSharingView('+gjArrUploadedDocument[i]["documentPathId"]+',\'file\',\''+name+'\')"><a href="javascript:void(0);">Share in DMS </a></li>';
				menuBoiler+= '<li onclick="deleteDocumentFromDMS('+gjArrUploadedDocument[i]["documentPathId"]+')"><a href="javascript:void(0);">Delete</a></li></ul></div>';
			}
		}
	}
	boiler+='</table>';
	//boilerList+='</table>';
	//$("#fileList").html(boiler);
	if($('#folderViewChangeId').hasClass('fa-th-large')){
		$("#subFolder table").append(boilerList);
		$('.DMS_content_item').css('float', 'inherit');
		dataTableListView();
	}else{
		$("#fileList").html(boiler);
		$('.DMS_content_item').css('float', 'left');
	}
	$("#tdFileAndTextWindow").hide();
	//$('.tblFileIconList').append(link);
	$("#fileList").show();
	//$("#fileList").html(link);
	$('#myUploadmenu').html(menuBoiler);

	for ( var i = 0; i < gjArrUploadedDocument.length; i++) {
		$("#Upload-"+ gjArrUploadedDocument[i]["documentPathId"]).ClassyContextMenu({
			menu: 'Uploadmenu-'+ gjArrUploadedDocument[i]["documentPathId"],
			mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
			isMenu: true,
			minWidth: 120,
			maxWidth: 0,
			delay: 500, 
		});
	}
	
	$(document).ready(function() {
		$('.commentMark').elastic();
	});
	jQuery(function() {
		jQuery('.jbar').jbar();
	});
	/**
	 * file detail data association with checkbox and td element id using jquery
	 * data function
	 */
	for ( var i = 0; i < gjArrUploadedDocument.length; i++) {
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data("Type", "uploaded");
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Id', gjArrUploadedDocument[i]["documentId"]);
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('CreationDate', gjArrUploadedDocument[i]["creationDate"]);
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Name', gjArrUploadedDocument[i]["name"]);
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Parent', gjArrUploadedDocument[i]["catName"]);
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Description', gjArrUploadedDocument[i]["description"]);
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('DocumentPath', gjArrUploadedDocument[i]["documentPath"]);
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data("Type", "uploaded");
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Id', gjArrUploadedDocument[i]["documentId"]);
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('CreationDate', gjArrUploadedDocument[i]["creationDate"]);
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Name', gjArrUploadedDocument[i]["name"]);
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Parent', gjArrUploadedDocument[i]["catName"]);
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Description', gjArrUploadedDocument[i]["description"]);
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('DocumentPath', gjArrUploadedDocument[i]["documentPath"]);
	}

}

/**
 * @name showFiles(nodeId)
 * @param nodeId:
 *            target node(category-tree) Id on which mouse click event has been
 *            fired
 * @since 29th Mar 2012
 * @purpose for showing the icons of the selected category(tree node)
 */

function showDocumentPreview(documentId, fileType)
{
	var domain = "http://"+window.location.host;
	var path = domain+'/'+(juno.label['url.download.json'].setIndexedArgs((documentId), "UPLOADED", 'NA'));
	var encodedPath = encodeURIComponent(path);
	var boiler = '';
	if(fileType != undefined && (fileType == 'jpg' || fileType == 'png'|| fileType == 'gif'))
		boiler = '<img style="width:100%;height:550px;" src="https://view.officeapps.live.com/op/view.aspx?src='+encodedPath+'"/>';
	else
		boiler = '<iframe style="width:100%;height:550px;" src="https://view.officeapps.live.com/op/view.aspx?src='+encodedPath+'"/>';
	
	$('#showDocumentPreviewDialog').find('.documentBody').html(boiler);
	$('#showDocumentPreviewDialog').modal('show').css({
		width: '100%',
		height:'100%',
		left:'0px',
		top:'0px',
		margin:'0'
	});
	
	$('#showDocumentPreviewDialog').css('z-index', '1100');
}

function showFiles(nodeId) {

	$('.tblFileIconList').removeClass('smalltable');

	$('.tblFileIconList').removeClass('table-bordered');

	if ($('#editing_field1').val() != undefined) {
		removeDocumentEditor();
	}
	$('.divDocumentListWindowTitle').show();
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	setWorkingAreaTitle(node.text);
	clearDMSWorkingArea();

	try {
		loadEmployeeRoasterMappingAjax();
	} catch (Exception) {
	}
	if (node.text == 'SHARED') {
		getSharedFiles();
	} else {
		getFolderFilesDocumentsByParentId(nodeId, gDMSCategoryTreeName);
		getFolderFilesDocumentsByParentId(nodeId, gDMSCategoryTreeName);
	}
	/*$('#tdMenuFileDelete').hide();
	$('.docListOpt').hide();*/


	$('.chkFileListIcon').bind('click', function() {
		if ($('input[name=chkFileListIcon]').is(':checked')) {
			$('#tdMenuFileDelete').show();
			$('.docListOpt').show();
		} /*else {
			$('#tdMenuFileDelete').hide();
			$('.docListOpt').hide();
		}*/
	});

	try {
		onShowFilesFinish();
	} catch (Exception) {
	}

}

/**
 * @name addTextDocumentCheckPoint()
 * @since 29th Mar 2012
 * @purpose for showing the icons of the uploaded documents
 */

function addTextDocumentCheckPoint() {
	//var nodeId = getSelected();
	gTextDocSaveFlag = false;
	var nodeId = gDMSCategoryTreeId;
	if (nodeId != null) {
		showAddEditTextDocumentForm(undefined);
	} else {
		jAlert('Can not Upload and Create File in /Home (Root) directory!');
	}
}

/**
 * @name showAddTextDocumentNamePrompt()
 * @since 29th Mar 2012
 * @purpose for showing the icons of the uploaded documents
 */
function showAddTextDocumentNamePrompt() {

	if (gTextDocSaveFlag == false) {
		$('#showTextDocumentDialog').modal('hide');
		$('#txtDocumentName').val("");
		$('#textDocumentNameDialog').modal('show');
	} else {
		var textDocumentName = $('#txtDocumentName').val();
		$('#showTextDocumentDialog').modal('hide');
		saveTextDocument(textDocumentName);
	}
}

/**
 * @name checkTextDocumentNameDuplicacy()
 * @return: true on success(duplicacy found) false (on duplicacy found)
 * @since 29th Mar 2012
 * @purpose for checking the duplicacy of the text document name in a given
 *          category
 */
function checkTextDocumentNameDuplicacy() {
	//var nodeId = getSelected();
	var nodeId = gDMSCategoryTreeId;
	var name = $('#txtDocumentName').val();
	var returnResponse = false;
	$.ajax({
		url : 'checkTextDocumentNameAjax.json?categoryId=' + nodeId + '&name='
		+ name.gemsEncode(2),
		dataType : 'json',
		async : false,
		success : function(jArray) {
			if (jArray[0].responseFlag == '1') {
				returnResponse = true;
			} else if (jArray[0].responseFlag == '0') {
				returnResponse = false;
			}
		},
		error : function() {
			return false;
		}
	});
	return returnResponse;
}

/**
 * @name showAddEditTextDocumentForm()
 * @since 29th Mar 2012
 * @purpose for showing the icons of the uploaded documents
 */
function showAddEditTextDocumentForm(documentId, callback) {
	
	var custHelper = $('#customerHelper').val();
	
	var fileExtAvailable = custHelper=='HPTU' || $('#productionServer').val()=='false'?'All File Types Allowed.':'.doc, .docx, .xls, .xlsx, .pdf, .jpg, .text, .png, .gif, .ppt, .pptx files only';
	removeAllTemporaryAttachment();
	/** Seting blank to each control/fields of the addText document form */
	var addTextDocumentFormBoilerPlate = `
		<div class="modal-header" id="divTextDocumentFileTitle"><a href="javascript:void(0);" class="label alert-danger pull-right" data-dismiss="modal" style="background-color:">X</a> <h3>New Text Document</h3></div>
		<div class="modal-body">
		<table align="center" class="table">
		<input type = "hidden" id = "hdnDocumentId"/>
		<input type = "hidden" id = "hdnDocumentCategoryId"/>
		<tr>
		<td style="display:none">
		<a class="button" style="display:none" id = "btnTextDocumentDelete" style = "display:none;" title="Delete" href="javascript:void(0)"><span class="icon icon186"></span></a>
		<a class="button" style="display:none" id = "btnTextDocumentReplicate" title="Replicate" href="javascript:void(0)"><span class="icon icon55"></span></a>
		<a class="button" style="display:none" id = "btnTextDocumentCancel" onclick="cancelTextDocumentFormCheckPoint()" title="Close" href="javascript:void(0)"><span class="icon icon56"></span></a>
		</td></tr><tr>
		<td>
		<textarea style="height:100px; width:100%" id="editing_field1"></textarea>
		</td>
		</tr>
		<tr>
		<tr><td><div class = "label label-info" style = "font-size:14px;height:15px">Description</div></td></tr>
		<tr>
		<td>
		<textarea style="height:50px; width:100%" id="txtDescription"></textarea>
		</td>
		</tr>
		<tr>
		<td>
		<fieldset>
		<legend><i class="fa fa-paperclip fa-lg fa-rotate-270" aria-hidden="true"></i> Attachments  </legend>
		<div id = "tblAttachementList">No Attachments!</div>
		</fieldset>
		</td>
		</tr>
		<tr>
		<td style="" id="idattachmentbar">
		<div class="upload-btn-wrapper" style="width:30%">
		<button class="btn btn-info full-upload-btn" type="button"><i class="fa fa-upload" aria-hidden="true"></i> Upload attachments</button>
		<input type="file" id="txtFileAttachment" name="fileData" />
		</div>
		<br>
		<div class = "alert alert-info">
		<i class = "icon-hand-right"></i>&nbsp;&nbsp; ${fileExtAvailable}<br />
		<i class = "icon-hand-right"></i>&nbsp;&nbsp; Maximum file size limit &nbsp;&nbsp;<strong class = "fileSizeAllowedCls">20</strong>&nbsp;MB<br />
		</div></td>
		</tr>
		<tr>
		<td>
		<div class="label label-info">Add Tags</div>
		<input type="text" id="textFileTagsInput" value=""/>
		</td> </tr> </table> </div>
		<div class="modal-footer" style="text-align:right;">
		 <input type="button" id = "btnTextDocumentSave" class = "btn btn-inverse btn-mini" value="Save" onclick = "showAddTextDocumentNamePrompt()" >
		 <input type="button" id = "btnTextDocumentCancel" class = "btn btn-danger btn-mini" value="Close" onclick = "cancelTextDocumentFormCheckPoint()" data-dismiss="modal">
		</div>`;

	/**
	 * Hiding the content title of the middle td. WHich need to be shown later(
	 * After saving the text file)
	 */
	$('.divDocumentListWindowTitle').hide();
	//$('.tblFileIconList').html(addTextDocumentFormBoilerPlate);
	//$('#showTextDocumentDialog').find('.TextDocumentDetail').html(addTextDocumentFormBoilerPlate);
	$('#showTextDocumentDialog').html(addTextDocumentFormBoilerPlate);
	$('#showTextDocumentDialog').modal('show');
	
	$('#textFileTagsInput').tagit();
    $('#textFileTagsInput').tagit({//K-i-r-a-n
    	caseSensitive:false,
    	tagLimit:10,
    	availableTags: ArrayTags
    });
    
	$('.replicateDoc').data('docId', documentId);
	$('#btnTextDocumentReplicate').data('docId', documentId);
	$('#btnTextDocumentReplicate').click(function() {
		configureReplicateToOtherBatch(this, gEvaluationType);
	});

	if (documentId != undefined) {// If document is unsaved, Delete button has
		// to be hidden and vice-versa

		$('#btnTextDocumentDelete').show();
		$('#btnTextDocumentDelete').unbind();
		$('#btnTextDocumentDelete').click(function() {
			deleteFiles(documentId, 'text');
		});

	}
	
	var fileSizeAllowed = AllowedFileSize.DOCUMENT_UPLOAD / (1024 * 1024);
	$('#fileSizeAllowed, .fileSizeAllowedCls').text(fileSizeAllowed);
	$('#hdnDocumentCategoryId').val(gDMSCategoryTreeId);
	createEditor('editing_field1'); // function call to convert the textarea
	// into richtextbox
	initAttachmentBar();
	$('#btnTextDocumentCancel').bind('click', function() {
		gTextDocumentCommandFlag = 'cancel';
	});
	$('#btnTextDocumentReset').bind('click', function() {
		gTextDocumentCommandFlag = 'reset';
	});
	$('#btnTextDocumentSave').bind('click', function() {
		gTextDocumentCommandFlag = 'save';
	});
	try {
		callback();
	} catch (e) {
		// alert(e);
	}
}

/**
 * @name saveTextDocument()
 * @since 30th Mar 2012
 * @purpose for adding the text documents against a category
 */
function saveTextDocument(textDocumentName) {

	$('#textDocumentNameDialog').modal('hide');
	var saveFlag = true;
	if (textDocumentName == undefined || textDocumentName == '') {
		textDocumentName = getDocumentTitle();
	}else{
		if(isValidFileName(textDocumentName)==false){
			jAlert("Please enter valid File Name!");
			return;
		}
	}
	/**
	 * Check point for already save of the document. If already save no need to
	 * check duplicacy and if not check for duplicacy. 'saveFlag used for
	 * checking the call'
	 */
	if (gTextDocSaveFlag == false) {
		if (checkTextDocumentNameDuplicacy() == true)
			saveFlag = true;
		else
			saveFlag = false;
	}
	
	if (saveFlag == true) {
		var text = CKEDITOR.instances.editing_field1.getData();
		var docId = $('#hdnDocumentId').val();
		//var categoryId = getSelected();
		var categoryId = gDMSCategoryTreeId;
		var description = $('#txtDescription').val();
		var tagsTxt = $('#textFileTagsInput').val();
		
		$.ajax({
			url : 'saveTextDocumentAjax.json',
			data : {
				documentId : docId,
				text : text,
				description : description,
				categoryId : categoryId,
				name : textDocumentName.gemsEncode(),
				files_uploaded : '',
				tags: tagsTxt
			},
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			dataType : 'json',
			type : 'POST',
			success : function(jArray) {
				var responseText = '';
				var text = jArray[0].responseText;
				var docId = text.split('-')[1];
				responseText = text.split('-')[0];
				if (jArray[0].responseFlag == '1') {
					$('#idattachmentbar').show();
					/**
					 * @comment empty the global variable 'files_uploaded' to
					 *          avoid dirty data
					 */
					files_uploaded = '';
					/**
					 * Putting save true false to make the system know that
					 * current document is saved
					 */
					gTextDocSaveFlag = true;
					setDocumentTitle(textDocumentName);
					$('#btnTextDocumentDelete').unbind();
					$('#btnTextDocumentDelete').click(function() {
						deleteFiles(docId, 'text');
					});
					$('#btnTextDocumentDelete').show();
					$('#hdnDocumentId').val(docId);
					//getAttachmentListAjax1(docId);
					//getTextFiles(categoryId);
					//showSuccessMessage("Saved Successfully", 5000);
					getFileAndFolderByPath();
					
					jAlert("Saved Successfully");
					/** to save the text editor */
					// tinyMCE.triggerSave();
				} else {
					showErrorMessage(responseText, 5000);
					/**
					 * Putting save flag false to make the system know that
					 * there is no any text doc pending to be saved
					 */
					gTextDocSaveFlag = false;
				}
				/**
				 * If cancel was pressed then following script should run
				 */
				if (gTextDocumentCommandFlag == 'cancel') {
					gTextDocSaveFlag = false;
					/** to save the text editor */
					// tinyMCE.triggerSave();
					/** Removes the editor instance */
					removeDocumentEditor();
					//var nodeId = getSelected();
					var nodeId = gDMSCategoryTreeId;
					/** show the list of file in the selected category */
					showFiles(nodeId);
				}
			},
			error : function() {

			}
		});
	} else {
		jAlert('Name already exist');
	}
}

/**
 * @name showText(docId)
 * @param docId:
 *            'text document ID' on which click event has been fired
 * @since 30th Mar 2012
 * @purpose for showing the text documents on double click against a document ID
 */
var gTextVeiwTypeFlag = false;
function showText(docId,type) {
	
	if(type!=undefined && type=='view')
	{
		gTextDocSaveFlag = false;
	}else{
		gTextDocSaveFlag = true;
	}
	$('#tdFileListIcon-text-'+docId).popover('destroy');
	$('#docSettings').hide();
	$('#tdMenuFileDelete').hide();

	showAddEditTextDocumentForm(docId, function() {
		if(type!=undefined && type=='view')
		{
			gTextVeiwTypeFlag = false;
			$('#btnTextDocumentSave').hide();
			$('#idattachmentbar').hide();
			$('#btnTextDocumentCance').off('click');
		}
		else
		{
			gTextVeiwTypeFlag = true;
			$('#btnTextDocumentSave').show();
			$('#idattachmentbar').show();
		}
		getTextDocumentData(docId);
	});
}

function getTextDocumentData(docId) {

	$.ajax({
		url : 'getTextDocumentAjax.json?d__documentId=' + docId,
		beforeSend : function() {
			startCommonAjaxSpinner();
		},
		complete : function() {
			stopCommonAjaxSpinner();
		},
		dataType : 'json',
		async : false,
		success : function(jArray) {
			if (jArray.length > 0) {
				gTextDocSaveFlag = true;
				/**
				 * Seting each control/fields of the addText document form with
				 * the current document information
				 */
				CKEDITOR.instances.editing_field1
				.setData(jArray[0]["documentBody"]);
				$('#hdnDocumentId').val(jArray[0]["documentId"]); /*
				 * Hidden
				 * document
				 * id that
				 * will help
				 * us in
				 * editing
				 * the same
				 * document
				 * overthe
				 * controller
				 */
				setDocumentTitle(jArray[0]["name"]);
				$('#txtDescription').val(jArray[0]["description"].gemsDecode());
				$('#txtDocumentName').val(jArray[0]["name"].gemsDecode());
				
				$('#hdnDocumentCategoryId').val(jArray[0]["documentCategoryId"]);
					
				$('#docCatIdDNS').val(jArray[0]["documentCategoryId"]);

				/** Attaching the attachments attached with current text document */
				getAttachmentListAjax1(jArray[0]["eDocId"]);
			}
		},
		error : function() {

		}
	});
}

/**
 * @name uploadDocumentCheckPoint()
 * @since 30th Mar 2012
 * @purpose for checking the selection of category
 */
function uploadDocumentCheckPoint() {
	var nodeId = gDMSCategoryTreeId;
	if (nodeId != null) {
		showUploadDocumentForm(nodeId);
	} else {
		jAlert('Can not Upload and Create File in /Home (Root) directory!');
	}
}

/**
 * @name getCategoryPath(nodeId)
 * @param nodeId:
 *            target node(category) ID for which path requires
 * @since 30th Mar 2012
 * @purpose returns the category path of the document the upload form for
 *          uploading the file
 */
function getCategoryPath(nodeId, callback) {
	var catPath = "";
	$.ajax({
		url : 'getCategoryPathAjax.json?categoryId=' + nodeId,
		dataType : 'text',
		async : false,
		success : function(response) {
			try {
				callback(response);
			} catch (e) {
				catPath = response;
			}
		},
		error : function() {

		}
	});
	return catPath;
}

/**
 * @name showUploadDocumentForm()
 * @since 30th Mar 2012
 * @purpose for showing the upload form for uploading the file
 * @param dialogId
 *            'id' of the dialog box on which uploading form has to be shown
 * @author vimal
 */
/*function showUploadDocumentForm(dialogClass, nodeId) {
	try {
		if (dialogClass == undefined) {
			dialogClass = 'tblFileIconList';
		}
		if (nodeId == undefined) {
			nodeId = getSelected();
		}
		initDocumentUploadForm(nodeId);
		setDocumentCategoryId(nodeId);
	} catch (e) {

	}
}*/
//new
function showUploadDocumentForm(nodeId) {
	try {
		/*if (dialogClass == undefined) {
			dialogClass = 'tblFileIconList';
		}*/
		if (nodeId == undefined) {
			nodeId = gDMSCategoryTreeId;
		}
		
		$('#descriptionUpload').show();
	   	$('#docUploadSection').hide();
		
		initDocumentUploadForm(nodeId);
		setDocumentCategoryId(nodeId);
	} catch (e) {

	}
}

function uploadDocumentFormNextBtn(){
	$('#descriptionUpload').hide();
	$('#docUploadSection').show();
}

function uploadDocumentFormBackBtn(){
	$('#descriptionUpload').show();
	$('#docUploadSection').hide();
}
//

function initDocumentUploadFormDialog(dialogId) {

	$('#' + dialogId).dialog({
		autoOpen : false,
		width : 600,
		height : 400,
		modal : true

	});
}

/**
 * @name showCategoryProperties()
 * @since 30th Mar 2012
 * @purpose for showing the properties for the selected category
 */
function showCategoryProperties() {
	var nodeId = getSelected();
	$.ajax({
		url : 'getCategoryProperties.json?categoryId=' + nodeId,
		dataType : 'json',
		async : false,
		success : function(jArray) {
			$('#lblCategoryPath').html(jArray[0]["categoryPath"]);
			$('#lblCategoryName').html(jArray[0]["name"]);
			$('#lblCategorySize').html(jArray[0]["categorySize"]);
			$('#lblCategorySize').append('&nbsp;&nbsp; KB');
			$('#categoryPropertiesDialog').dialog('open');
		},
		error : function() {

		}
	});

}

/**
 * @name deleteFiles()
 * @since 1st Apr 2012
 * @purpose for deleting the file from a percular category
 */
function deleteFiles(docId, docType) {

	jConfirm('Are you sure?', 'Confirmation Dialog', function(response) {

		if (response) {
			var ids = new Array();
			var fileTypes = new Array();
			var i = 0;
			if (docId != undefined && docType != undefined) {
				ids.push(docId);
				fileTypes.push(docType);
			} else {
				$('input[name=chkFileListIcon]:checked').each(function() {
					var temp = $(this).attr('id');
					ids[i] = temp.split("-")[2];
					fileTypes[i] = temp.split("-")[1];

					i++;
				});
			}

			$.ajax({
				url : 'deleteFiles.json?ids=' + ids + '&fileTypes=' + fileTypes,
				dataType : 'text',
				async : false,
				success : function(text) {
					jAlert("Success");
//					gCategoryType='courseFile';
//					setEvaluationSchemaId(id);
//					showFiles(documentCategoryId);
//					gCategoryType = '';
					$('#commonDocumentDialog').modal('hide');

					var nodeId = getSelected();

					showFiles(nodeId);
				},
				error : function() {

				}
			});
		}
	});

}

/**
 * @name showFileDetail(id)
 * @id id of the 'td' element(inside which file list is showing), on which
 *     mouseover event has been fired
 * @since: 1st Apr 2012
 * @purpose for showing the properties for the selected category
 */
function showFileDetail(id, toolTipText) {

	if (toolTipText == undefined) {
		if (gEvaluationType != 'Lecture Notes'
			&& gEvaluationType != 'University Question bank'
				&& gEvaluationType != 'Sample Assignment') {
			toolTipText = 
				'<button style="color:red;float:right;margin-right:-10px;margin-top:-20px;" data-dismiss="modal" class="close" type="button" id="close-'+id+'">x</button>'+
				'<table id="dpop" class = "smalltable">' + '<tbody>'
				+ '<tr>' + '<th>File:</th>' + '<td>'
				+ $('#' + id).data("Name")
				+ '</td>'
				+ '</tr>'
				+ '<tr>'
				+ '<th>Created On:</th>'
				+ '<td>'
				+ $('#' + id).data("CreationDate")
				+ '</td>'
				+ '</tr>'
				+ '<tr>'
				+ '<th>Category:</th>'
				+ '<td>'
				+ $('#' + id).data("Parent")
				+ '</td>'
				+ '</tr>'
				+ '<tr>'
				+ '<th>Type</th>'
				+ '<td>'
				+ $('#' + id).data("Type")
				+ '</td>'
				+ '</tr>'
				+ '<tr>'
				+ '<th>Description</th>'
				+ '<td>'
				+ $('#' + id).data("Description")
				+ '</td>'
				+ '</tr>'
				+ '</tbody>'
				+ '</table>';
		}
	}


	$('#close-'+id).click(function(){
		closeTooltip(this);
	});

	$('#'+id).popover('destroy');
	var toolTipObj = $('#'+id).popover({trigger:'hover',placement:'top',html:true,content:toolTipText});
	$('#'+id).popover('show');
	$('#close-'+id).data('toolTipObj',toolTipObj);


}

function closeTooltip(toolTipObj)
{
	toolTipObj = $(toolTipObj).popover('toolTipObj');
	$(toolTipObj).popover('destroy');
}


/**
 * @name hideFileDetail(id)
 * @param id:
 *            id of the 'td' element(inside which file list is showing), on
 *            which mouseout event has been fired
 * @since: 1st Apr 2012
 * @purpose for showing the properties for the selected category
 */
function hideFileDetail(id) {
	$('#' + id).qtip("destroy");
}

/**
 * @name: searchDocumentFile()
 * @since: 1st April 2012
 * @purpose: for searching document file in entire category with proper path
 */
function searchDocumentFile() {
	//var searchText = $('#txtSearch').val().trim();
	//var searchType = $('input[name="searchType"]:checked').val();
	var searchText = $('#txtSearch2').val().trim();
	var searchType = $('#searchTypeCmb option:selected').val();
	$('#searchFileList').html('');
	$('#subFolder').html('');
	$('#documentsList').html('');
	
	$('#tdFileAndTextWindow').hide();
	
	if (searchText != '') {
		$
		.ajax({
			url : 'searchDocumentFile.json?searchText=' + searchText
			+ '&searchInCategory=' + gSearchInCategory
			+ '&searchType=' + searchType,
			dataType : 'json',
			async : false,
			success : function(jArray) {
				gjArrSearchResultDocument = jArray;
				//gjArrUploadedDocument = jArray;
				//showUploadedDocumentIcon();
				if (jArray[0].responseFlag == undefined) {
					showSearchResultDocumentIcon(searchText,
							gjArrSearchResultDocument.length);
					
				} else {
					$('.tblFileIconList').html(jArray[0].responseText);
					/**
					 * changing the title of the file window(which is in
					 * middle) with search result related information
					 */
					$(".divDocumentListWindowTitle")
					.html(
							'<h5 align="center" class="box-title">'
							+ (gjArrSearchResultDocument.length - 1)
							+ '&nbsp;search result(s) found for-&nbsp;"'
							+ searchText + '"</h5>');
				}
			},
			error : function() {
			}
		});
	} else {
		jAlert('Please enter search text!!!!');
	}
}

/**
 * @name showSearchResultDocumentIcon(searchText,searchCount)
 * @param searchText:
 *            search text entered by user
 * @param searchCount:
 *            no of search results
 * @since 1st Apr 2012
 * @purpose for showing the searched icons of the files(text + uploaded
 *          document) followed by path
 */
function showSearchResultDocumentIcon(searchText, searchCount) {
	$('.tblFileIconList').html("");
	$("#documentsList").html('');
	$('#my-menu').html('');
	$('#load').show();
	
	/**
	 * changing the title of the file window(which is in middle) with search
	 * result related information
	 */
	var boiler1 = '';
	$('#fileList').hide();
	$('#searchFileList').show();
	$('#searchFileList').html('');
	$('#tdFileAndTextWindow').hide();
	
	boiler1 +=
			'<h5 align="center" class="box-title" style="">' + searchCount
			+ '&nbsp;search result(s) found for-&nbsp;"' + searchText
			+ '"</h5>';
	
	var link = "";
	var flag=8;
	var menuBoiler = '';
	boiler1 +='<table class=""><tr>';

	/** loop for showing list of files on a perticular search with path */
	for ( var i = 0; i < gjArrSearchResultDocument.length; i++) {

		var downloadLink = '';
		var fullName = gjArrSearchResultDocument[i]["name"];
		// gjArrUploadedDocument[i]["documentPathId"]+'&type=uploaded"
		if (gjArrSearchResultDocument[i]["documentBody"] != undefined) {
			downloadLink = (juno.label['url.download.json'].setIndexedArgs((gjArrSearchResultDocument[i]["eDocId"]!=undefined?gjArrSearchResultDocument[i]["eDocId"]:gjArrSearchResultDocument[i]["documentId"]), "UPLOADED", fullName));
		} else {
			downloadLink = 'downloadDocument.json?Path='
				+ gjArrSearchResultDocument[i]["documentPath"];
		}

		var catPath = getCategoryPath(gjArrSearchResultDocument[i]["categoryId"]);
		catPath = decodeURIComponent(replaceAll(catPath, '/', ' / '));
		
		if(i==flag)
		{
			boiler1+='</tr><tr>';
			flag+=8;
		}
		
		if (gjArrSearchResultDocument[i]['type'] == 'text') { 
			// condition to check for the text document file
			
			//new
			
			var name = gjArrSearchResultDocument[i]["name"].length<15?gjArrSearchResultDocument[i]["name"]:gjArrSearchResultDocument[i]["name"].substring(0,15)+'...';
			boiler1+='<td style="padding:10px;width:12.5%">';
			boiler1+='<div id="options-'+ gjArrSearchResultDocument[i]["documentId"] + '" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink" id = "tdFileListIcon-text-'
			+ gjArrSearchResultDocument[i]["documentId"]+ '"><img class="dmsFolder" src="img/files/txt.png" title="'+catPath+''+fullName+'" ondragstart="return false"'
			//+ gjArrSearchResultDocument[i]["documentId"]+ '"><img class="dmsFolder" src="img/files/txt.png" title="'+catPath+''+fullName+'" ondragstart="return false" onmouseover = "showFileDetail(\'tdFileListIcon-text-'+ gjArrSearchResultDocument[i]["documentId"]\')
			+ '"><p class="text-center">'+name+'</p>';
			
			menuBoiler += '<div id="menu-'+ gjArrSearchResultDocument[i]["documentId"] +'"><ul><li onclick = "showText(\''+ gjArrSearchResultDocument[i]["documentId"] + '\')"><a href="javascript:void(0);">Edit</a></li>';
			menuBoiler += '<li onclick="configureCourseFileDocSharingView(\'\','+gjArrSearchResultDocument[i]["documentId"]+')"><a href="javascript:void(0);">Share</a></li></ul></div>';
			//new
			
			
			link += '<tr><td  class="ui-state-default" width="40px"><input type = "checkbox"  id = "chkFileListIcon-text-'
				+ gjArrSearchResultDocument[i]["documentId"]
			+ '"  class = "chkFileListIcon"  name = "chkFileListIcon"></td><td width="150px" class="context-menu-one tooltiplink ui-state-default" id = "tdFileListIcon-text-'
			+ gjArrSearchResultDocument[i]["documentId"]
			/*+ '"  onmouseover = "showFileDetail(\'tdFileListIcon-text-'
			+ gjArrSearchResultDocument[i]["documentId"]\')
*/			+ '" style =  "cursor:pointer;" onclick = "showText(\''
			+ gjArrSearchResultDocument[i]["documentId"]
			+ '\')"><image src = "css/images/tree_file.gif" />&nbsp;&nbsp;'
			+ gjArrSearchResultDocument[i]["name"]
			+ '</td><td class="ui-state-default" width = "100px">'
			+ catPath + '</td></tr>';
		} else if (gjArrSearchResultDocument[i]['type'] == 'uploaded') { 
			// condtion for the uploaded document file
			
			//new
			var fileType = gjArrSearchResultDocument[i]["extension"];
			var iconPath = gFileTypeIcon[fileType];
			var name = gjArrSearchResultDocument[i]["name"].length<15?gjArrSearchResultDocument[i]["name"]:gjArrSearchResultDocument[i]["name"].substring(0,15)+'...';
			boiler1+='<td style="padding:10px;width:12.5%"">';
			boiler1+='<div id="options-'+ gjArrSearchResultDocument[i]["documentId"] + '" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink" id = "tdFileListIcon-text-'
			+ gjArrSearchResultDocument[i]["documentId"]+ '"><img class="dmsFolder" src="'+iconPath+'" title="'+catPath+''+fullName+'" ondragstart="return false"'
			//+ gjArrSearchResultDocument[i]["documentId"]+ '"><img class="dmsFolder" src="'+iconPath+'" title="'+catPath+''+fullName+'" ondragstart="return false" onmouseover = "showFileDetail(\'tdFileListIcon-text-'+ gjArrSearchResultDocument[i]["documentId"]\')
			+ '"><p class="text-center">'+name+'</p>';
			
			menuBoiler += '<div id="menu-'+ gjArrSearchResultDocument[i]["documentId"] +'"><ul>';
			if(fileType=='doc' || fileType=='docx' || fileType=='ppt' || fileType=='pptx' || fileType=='xls' || fileType=='xlsx')
			{
				menuBoiler+= '<li onclick="showDocumentPreview('+gjArrSearchResultDocument[i]["documentId"]+');"><a href="javascript:void(0);">Preview</a></li></a>';
			}
			menuBoiler += '<li onclick="configureUploadedFileDocSharingView('+gjArrSearchResultDocument[i]["documentId"]+',\'uploaded\',\''+name+'\',\''+gjArrSearchResultDocument[i]["categoryId"]+'\')"><a href="javascript:void(0);">Share</a></li>';
			menuBoiler+= '<li><a href="'+downloadLink+'">Download</a></li></ul></div>';
			
			//new
			
			
			link += '<tr><td  class="ui-state-default" width="40px"><input type = "checkbox" id = "chkFileListIcon-uploaded-'
				+ gjArrSearchResultDocument[i]["documentId"]
			+ '"  class = "chkFileListIcon" name = "chkFileListIcon" ></td><td width="150px" class="context-menu-one tooltiplink ui-state-default" id = "tdFileListIcon-uploaded-'
			+ gjArrSearchResultDocument[i]["documentPathId"]
			/*+ '"  onmouseover = "showFileDetail(\'tdFileListIcon-uploaded-'
			+ gjArrSearchResultDocument[i]["documentId"]\')
*/			+ '" style =  "cursor:pointer"><a class="ui-state-default" href = "'
			+ downloadLink
			+ '" ><span><image src = "css/images/add_attachment_icon.png" /></span>&nbsp;&nbsp;'
			+ gjArrSearchResultDocument[i]["name"]
			+ '</a></td><td width = "100px" class="ui-state-default">'
			+ catPath
			+ '&nbsp;&nbsp;&nbsp;&nbsp;<img src = "css/icons/DownloadIcon.png" title = "download" /></td></tr>';
		}
		boiler1+='</div>';
		boiler1+='</td>';
		if(i==flag)
		{
			boiler1+='</tr>';
		}
	}
	
	
	$('#my-menu').html(menuBoiler);
	$('#searchFileList').append(boiler1);
	$('#load').hide();
	//$('.tblFileIconList').append(link);
	for ( var i = 0; i < gjArrSearchResultDocument.length; i++) {
		$("#options-"+ gjArrSearchResultDocument[i]["documentId"]).ClassyContextMenu({
			menu: 'menu-'+ gjArrSearchResultDocument[i]["documentId"],
			mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
			isMenu: true,
			minWidth: 120,
			maxWidth: 0,
			delay: 500, 
		});
	}

	/**
	 * file detail data association with checkbox and td element id using jquery
	 * data function
	 */
	for ( var i = 0; i < gjArrUploadedDocument.length; i++) {
		if (gjArrSearchResultDocument[i]['type'] == 'text') {
			$(
					'#chkFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Type', 'text');
			$(
					'#chkFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Id', gjArrSearchResultDocument[i]["documentId"]);
			$(
					'#chkFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'CreationDate',
							gjArrSearchResultDocument[i]["creationDate"]);
			$(
					'#chkFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Name', gjArrSearchResultDocument[i]["name"]);
			$(
					'#chkFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"])
					.data(
							'Parent',
							gjArrSearchResultDocument[i]["documentCategoryObj"]["name"]);
			$(
					'#chkFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Description', gjArrSearchResultDocument[i]["description"]);
			$(
					'#tdFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Type', 'text');
			$(
					'#tdFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Id', gjArrSearchResultDocument[i]["documentId"]);
			$(
					'#tdFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'CreationDate',
							gjArrSearchResultDocument[i]["creationDate"]);
			$(
					'#tdFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Name', gjArrSearchResultDocument[i]["name"]);
			$(
					'#tdFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"])
					.data(
							'Parent',
							(gjArrSearchResultDocument[i]["documentCategoryObj"]!=null?gjArrSearchResultDocument[i]["documentCategoryObj"]["name"]:""));
			$(
					'#tdFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Description', gjArrSearchResultDocument[i]["description"]);
		} else if (gjArrSearchResultDocument[i]['type'] == 'uploaded') {
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							"Type", "uploaded");
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Id', gjArrUploadedDocument[i]["documentPathId"]);
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'CreationDate', gjArrUploadedDocument[i]["creationDate"]);
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Name', gjArrUploadedDocument[i]["name"]);
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Parent',
							(gjArrUploadedDocument[i]["documentCategoryObj"]!=null?gjArrUploadedDocument[i]["documentCategoryObj"]["name"]:""));
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Description', gjArrUploadedDocument[i]["description"]);
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'DocumentPath', gjArrUploadedDocument[i]["documentPath"]);

			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							"Type", "uploaded");
			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Id', gjArrUploadedDocument[i]["documentPathId"]);
			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'CreationDate', gjArrUploadedDocument[i]["creationDate"]);
			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Name', gjArrUploadedDocument[i]["name"]);
			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Parent',
							(gjArrUploadedDocument[i]["documentCategoryObj"]!=null?gjArrUploadedDocument[i]["documentCategoryObj"]["name"]:""));
			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Description', gjArrUploadedDocument[i]["description"]);
			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'DocumentPath', gjArrUploadedDocument[i]["documentPath"]);
		}

	}
	/**
	 * binding the right click action on each 'td' element inside which file has
	 * been shown
	 */
	/*$('.docListOpt').hide();
	$('#tdMenuFileDelete').hide();*/
	/**
	 * binding click event on the checkbox so dat clicking on it can show the
	 * action button associated with dat file
	 */
	$('.chkFileListIcon').bind('click', function() {

		if ($('input[name=chkFileListIcon]').is(':checked')) {
			$('.docListOpt').show();
			$('#tdMenuFileDelete').show();
		} /*else {
			$('#tdMenuFileDelete').hide();
			$('.docListOpt').hide();
		}*/

	});
}

/**
 * @name refreshCategoryTree()
 * @since 1st Apr 2012
 * @purpose for refreshing the entire tree(category view)
 */
function refreshCategoryTree(catTypeArray, flg) {
	var categoryRetrievalPath = getCategoryRetrievalPath();
	var categoryType = getSelectedCategoryType();
	var parentCategoryType = getSelectedParentCategoryType();
	createTree(categoryRetrievalPath, categoryType, parentCategoryType,undefined,undefined,flg);
	reload();
}

/**
 * @name: cancelTextDocumentFormCheckPoint()
 * @since 4th Apr 2012
 */

function cancelTextDocumentFormCheckPoint() {
	if(gTextVeiwTypeFlag==false){
		return true;
	}
	var evaluationName = $('.divDocumentListWindowTitle').text();
	if (CKEDITOR.instances.editing_field1 != undefined) {
		if (isDocumentDirty()) {
			$.prompt('Do you want to save '+evaluationName+'?', {
				callback : cancelTextDocumentForm,
				buttons : {
					Save : 1,
					Abort : 2,
					Cancel : 3
				}
			});
		} else {
			/** Removes the editor instance */
			removeDocumentEditor();
			removeAllTemporaryAttachment();
			var nodeId = getSelected();
			showFiles(nodeId);
			gTextDocSaveFlag = false;
			$('#docSettings').show();
		}
	} else {
		var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
		showFiles(node.id);
		$('#docSettings').show();
	}

	/***************************************************************************
	 * Anil kateliya Replicate doc
	 */
	$('.replicateDoc').data('docId', '-1');

}

/**
 * @name: cancelTextDocumentForm()
 * @since 4th Apr 2012
 */
function cancelTextDocumentForm(e, v, m, f) {

	if (v == 1) { // condition to save
		/**
		 * Ask for the name of the file if current file is unsaved ohter wise
		 * save it with previous name
		 */
		showAddTextDocumentNamePrompt();

	} else if (v == 2) { // condition to abort
		/**
		 * Putting save flag false to make the system know that there is no any
		 * text doc pending to be saved
		 */
		gTextDocSaveFlag = false;
		removeAllTemporaryAttachment();
		var nodeId = getSelected();
		/** show the list of file in the selected category */
		showFiles(nodeId);
	} else if (v == 3) {
		// No Action
	}
}

/**
 * @name: uploadTextDocumentAttachment()
 * @since 4th Apr 2012
 * @see upload.js
 */
function uploadTextDocumentAttachment() {
	upload('DMS-TextDocumentAttachment', getCategoryPath(getSelected()));
}

/**
 * @name: removeAttachmentAjax(Id)
 * @since 4th Apr 2012
 */
function removeAttachmentAjax(id, fileName) {
	fileName = fileName.replace(/~/g, ' ');
	var documentId = id.split('-')[1];
	$('#' + id + '').data('removeFileHtml', $('#' + id + '').html());
	if (documentId != undefined && fileName != undefined) {
		if (documentId != '0') {
			$
			.ajax({
				url : 'removeAttachmentAjax.json?d__documentId='
					+ documentId + '&attachmentName=' + fileName,
					async : false,
					dataType : 'text',
					success : function(response) {
						/**
						 * Attaching the attachments attached with current
						 * text document
						 */
						if (response == 'success') {
							var undoBoiler = '<td colspan = "2">This document has been deleted successfully. You can <a href = "javascript:void(0)" onclick = "undoAttachmentRemoveAction(\''
								+ id
								+ '\',\''
								+ documentId
								+ '\',\''
								+ fileName
								+ '\')"> <span class="label">undo</span></a> this action.</td>';
							$('#' + id).html(undoBoiler);
						}else{
							jAlert(response);
						}
					},
					error : function() {
					}
			});
		} else {
			$('#' + id).remove();
		}
		getTextDocumentData(id);
		//refreshTemporaryAttachmentList();
	}
}

function undoAttachmentRemoveAction(trId, documentId, attachmentFileName) {
	$.ajax({
		url : 'undoAttachmentRemoveAction.json',
		data : {
			attachmentName : attachmentFileName,
			documentId : documentId
		},
		dataType : 'text',
		type : 'POST',
		success : function(text) {
			if (text == 'success') {
				// jAlert($('#'+trId+'').data('removeFileHtml'));
				$('#' + trId + '').html(
						$('#' + trId + '').data('removeFileHtml'));
			} else {

			}
		}
	});
}
/**
 * @name getAttachmentListAjax(documentId)
 */
function getAttachmentListAjax(documentId, tableId) {
	$
	.ajax({
		url : 'getTextDocumentAjax.json?d__documentId=' + documentId,
		async : false,
		dataType : 'json',
		success : function(jArray) {
			/**
			 * Attaching the attachments attached with current text
			 * document
			 */
			var attachedFiles = jArray[0]["documentPath"] + "";
			var arrAttachedFile = attachedFiles.split(";");
			var attachementBoiler = "";
			for ( var i = 0; i < arrAttachedFile.length - 1; i++) {
				var attachmentFileName = arrAttachedFile[i];
				attachmentFileName = attachmentFileName
				.substring(attachmentFileName.lastIndexOf('/') + 1);
				var fileName = attachmentFileName.replace(/ /g, '~')
				.trim();
				var trId = 'trAttachmentFile-'
					+ jArray[0]["documentId"] + '-' + i;
				attachementBoiler += '<tr id = "'
					+ trId
					+ '"><td><img src="images/attachments.png" />&nbsp;&nbsp;&nbsp;&nbsp;<a href = "downloadDocument.json?Path='
					+ arrAttachedFile[i]
				+ '">'
				+ attachmentFileName
				+ '</a></td><td><img style = "cursor:pointer" title = "remove" src = "img/remove-icon.png" onclick = "removeAttachmentAjax(\''
				+ trId
				+ '\',\''
				+ fileName
				+ '\')" />&nbsp;&nbsp;&nbsp;&nbsp<img src = "../css/icons/DownloadIcon.png" title = "download"></td></tr>';

			}
			if (tableId == undefined)
				$('#tblAttachementList').html(attachementBoiler);
			else
				$('#' + tableId).html(attachementBoiler);
		},
		error : function() {

		}
	});
}

/**
 * @name getAttachmentListAjax(documentId)
 */
function getAttachmentListAjax1(documentId, tableId, isOwner, callback) {
	try {
		$.ajax({
			url : 'getAttachmentList.json?d__documentId=' + documentId,
			async : false,
			dataType : 'json',
			beforeSend : function() {
				$('#tblAttachementList').html(
				'<div class = "preview-large"></div>');
				$('.preview-large').addClass('loading-large');
			},
			complete : function() {
				$('.preview-large').removeClass('loading-large');

			},
			success : function(jArray) {
				$('#tblAttachementList').find('.preview-large').remove();
				populateAttachmentList(jArray, tableId, documentId, isOwner);
				callback();
			},
			error : function() {

			}
		});
	} catch (e) {

	}
}

/**
 * @name getTemporaryAttachmentListAjax1(documentId)
 */
function getTemporaryAttachmentListAjax1(callback) {
	try {
		$.ajax({
			url : 'getTemporaryAttachmentList.json',
			async : false,
			dataType : 'json',
			beforeSend : function() {
				$('#tblAttachementList').html(
				'<div class = "preview-large"></div>');
				$('.preview-large').addClass('loading-large');
			},
			complete : function() {
				$('.preview-large').removeClass('loading-large');
			},
			success : function(jArray) {
				populateTemporaryAttachmentList(jArray);
				try {
					callback();
				} catch (e) {

				}
			},
			error : function() {

			}
		});
	} catch (e) {

	}
}

function populateAttachmentList(jArray, tableId, documentId, isOwner) {
	var attachementBoiler = "";
	if (jArray.length > 0) {
		for ( var i = 0; i < jArray.length; i++) {
			var attachmentFileName = jArray[i]["name"].toString();
			var trId = 'trAttachmentFile-' + documentId + '-' + i;

			var fileType = jArray[i]["type"];
			iconPath = gFileTypeIcon[fileType];
			if (isOwner == undefined || isOwner) {
				
				
				/*Kiran*/
				var downloadLinkTmp = (juno.label['url.download.json'].setIndexedArgs((documentId), "TEXT", encodeURIComponent(attachmentFileName)));
				attachementBoiler += '<div id = "'+ trId+ '" align="center" class="label label-info" style="min-width:300px;text-align: left;background: #eaeaea;margin: 5px;">'
				+juno.label['a.download.json'].setIndexedArgs((documentId), "TEXT", encodeURIComponent(attachmentFileName), '<i class = "fa fa-download fa-lg pull-right"></i>')
				+'<img src="'+ iconPath + '" style="width:22x;height:22px;margin:1px;"/>';
				if($('#customerHelper').val() == "GOKHALE_INSTITUTE"){
					attachementBoiler += '<a style="color: #000000;font-weight: initial;" href="javascript:void(0);" clickHref = "'+downloadLinkTmp+'" target="_blank" onclick="return false;">'+attachmentFileName+'</a>';	
				}else{
					attachementBoiler += '<a style="color: #000000;font-weight: initial;" href="javascript:void(0);" clickHref = "'+downloadLinkTmp+'" target="_blank" onclick="imageViewerModal(this, \''+fileType+'\');">'+ attachmentFileName + '</a>';
				}
				
				
				
				attachementBoiler += '<a title="Remove" id = "delete-'+ documentId+ '" href="javascript:void(0)" onclick="removeAttachmentAjax(\''+ trId+ '\',\''+ attachmentFileName+ '\')">'
				+'<i class="fa fa-times-circle fa-lg" style="color:#f00;margin-left:15px;float: right;margin-top: -15px;"></i></a></div>';
				
				
			} else {
				var downloadLinkTmp = (juno.label['a.download.json'].setIndexedArgs((documentId), "TEXT", encodeURIComponent(attachmentFileName), attachmentFileName));
				attachementBoiler += '<tr id = "'
					+ trId
					+ '"><td><img src="'
					+ iconPath
					+ '" />&nbsp;&nbsp;&nbsp;&nbsp;'
					+ downloadLinkTmp
					+ '</td><td>&nbsp;&nbsp;&nbsp;&nbsp'
					+ (juno.label['a.download.json'].setIndexedArgs((documentId), "TEXT", encodeURIComponent(attachmentFileName), '<i class = "fa fa-download fa-lg"></i>'))+'</td></tr>';
				
				/*Kiran*/
				attachementBoiler += '<div id = "'+ trId+ '" align="center" class="label label-info" style="min-width:300px;text-align: left;background: #eaeaea;margin: 5px;"><img src="'+ iconPath + '" style="width:22x;height:22px;margin:1px;"/> '
				+ '<span style="color: #000000;font-weight: initial;">'+downloadLinkTmp
				+ '</span></div>';
			}
			

		}
		if (tableId == undefined)
			$('#tblAttachementList').html(attachementBoiler);
		else
			$('#' + tableId).html(attachementBoiler);
	} else {
		$('#' + tableId)
		.html(
		'<div class="alert alert-info" style="padding:2px"><strong style="color:red">No attachments!!!</strong></div>');
	}
}

/**
 * @name populateTemporaryAttachmentList()
 * @since 4th Apr 2012
 */
function populateTemporaryAttachmentList(jArray, elementId) {
	var attachementBoiler = '';
	$('#tblAttachementList').html(attachementBoiler);
	for ( var i = 0; i < jArray.length; i++) {
		var attachmentFileName = jArray[i]["name"].toString();
		var fileType = jArray[i]["type"].toString();
		var documentId = jArray[i]["documentId"].toString();
		iconPath = gFileTypeIcon[fileType];
		var trId = 'trAttachmentFile-' + documentId + '-' + i;
		if (attachmentFileName != '') {
			var downLink = 'downloadTemporaryAttachmentByTmpDocId.json?id='+ documentId+'&name='+attachmentFileName;
			/*Kiran*/
			attachementBoiler = '<div id = "'+ trId+ '" align="center" class="label label-info" style="min-width:300px;text-align: left;background: #eaeaea;margin: 5px;">'
			+'<a href="'+downLink+'" target="_blank"><i class="fa fa-download fa-lg pull-right"></i></a>'
			+'<img src="'+ iconPath + '" style="width:22x;height:22px;margin:1px;"/> '
			+'<a style="color: #000000;font-weight: initial;" clickHref = "'+downLink
			+'" onclick="imageViewerModal(this, \''+fileType+'\');" href="javascript:void(0)">'+ attachmentFileName + '</a>'
			
			+ '<a title="Remove" id = "delete-'+ documentId+ '" href="javascript:void(0)" onclick="removeTemporaryAttachmentAjax(\''+ trId+ '\',\''+ documentId+ '\' '+(jArray[i]["sType"]!=undefined?',\''+jArray[i]["sType"]+'\'':'')+')">'
			+'<i class="fa fa-times-circle fa-lg" style="color:#f00;margin-left:15px;float: right;margin-top: -15px;"></i></a></div>';
			//alert(downLink);
			/*attachementBoiler += 
				'<tr id = "'+ trId+ '"><td><div class="hvr-sweep-to-bottom download" id = "'+trId+'" style="background-color:#eee;height:65px;width:26%;margin:2px;" onmouseover="showDownloads('+documentId+')" onmouseleave="hideButton('+documentId+');">'+
				'<div style="float:left;border-right:1px solid lightgray;padding:5px;margin-top:2px;"><img src="'+iconPath+'"></div>'+
				'<p style="font-size:12px;padding:5px;" title="'+attachmentFileName+'">&nbsp;&nbsp;&nbsp;&nbsp;'+attachmentFileName.substring(0,30)+'</p>';
			
			attachementBoiler += '<div id="buttonDownload-'+documentId+'" style="display:none;">'+
				'<a class="btn btn-default" style="margin-left:10px;" href = "javascript:void(0);" onclick = "removeTemporaryAttachmentAjax(\''+ trId+ '\',\''+ documentId+ '\')" >Remove Attachment</a></div>';
			
			attachementBoiler += '</div></div><td></tr>';*/
			$('#'+(elementId!=undefined?elementId:'tblAttachementList')).append(attachementBoiler);
			
			
		}
	}

}

function showDownloads(documentId)
{
	$("#buttonDownload-"+documentId).show();
}

function hideButton(documentId)
{
	$("#buttonDownload-"+documentId).hide();
}

function removeTemporaryAttachmentAjax(trId, tempDocId, stypee) {
	try {
		$.ajax({
			url : 'removeTemporaryAttachmentList.json?d__documentId=' + tempDocId + (stypee!=undefined?"&stype="+stypee:''),
			dataType : 'json',
			type : 'POST',
			success : function(jArray) {
				$('#' + trId).remove();
				refreshTemporaryAttachmentList();
			},
			error : function() {

			}
		});
	} catch (e) {

	}
}

function refreshTemporaryAttachmentList(elementId, type) {
	try {
		$.ajax({
			url : 'getTemporaryAttachmentList.json'+(type!=undefined?'?type='+type:''),
			dataType : 'json',
			success : function(jArray) {
				populateTemporaryAttachmentList(jArray, elementId);
			},
		});
	} catch (e) {

	}
}

function removeDocumentEditor() {
	var instance = CKEDITOR.instances['editing_field1'];
	if (instance) {
		CKEDITOR.remove(instance);
	}
}

function isDocumentDirty() {
	return CKEDITOR.instances.editing_field1.checkDirty();
}

function setDocumentTitle(txtTitle) {
	$("#divTextDocumentFileTitle").html(
			'<h5 align="left" style="margin-top:5px;margin-left:15px;">'
			+ txtTitle + '</h5>');
}

function getDocumentTitle() {
	var title = $("#divTextDocumentFileTitle").find('h5').html();
	return title;
}

function getDocumentId(object) {
	var tdId = '' + $(object).attr('id');
	var docId = tdId.substring(tdId.lastIndexOf('-') + 1);
	return docId;
}

function openRenamingDialog(oldFileName, fileType, docId) {

	$('#txtNewDocumentName').val(oldFileName);
	$('#txtNewDocumentName').data('fileType', fileType);
	if (fileType.toLowerCase() == 'uploaded') {
		temp = oldFileName.substring(0, oldFileName.lastIndexOf('.'));
		if (temp.trim() != '')
			$('#txtNewDocumentName').val(temp);
		else
			$('#txtNewDocumentName').val(oldFileName);
	}
	$('#txtNewDocumentName').data('docId', docId);

	$('#renameFileDialog').dialog('open');
}

function closeRenamingDialog() {
	$('#renameFileDialog').dialog('close');
}

function renameDocument(oldName, newName) {
	var newName = $('#txtNewDocumentName').val();
	if (newName.trim() == '') {
		closeRenamingDialog();
	} else if (newName.trim() == oldName) {
		closeRenamingDialog();
	} else {
		if (validateFileName(newName)) {
			var fileType = $('#txtNewDocumentName').data('fileType');
			var docId = $('#txtNewDocumentName').data('docId');
			$
			.ajax({
				url : 'renameDocumentAjax.json?newName=' + newName
				+ '&d__documentId=' + docId + '&documentType='
				+ fileType,
				dataType : 'json',
				success : function(jArray) {
					if (jArray[0].responseFlag == '1') {
						var nodeId = getSelected();
						showFiles(nodeId);
						showSuccessMessage(
								'Document has been renamed successfully.',
								5000);
						closeRenamingDialog();
					} else {
						jAlert('Name already exist!');
					}
				}
			});
		} else {
			closeRenamingDialog();
			jAlert("this file name is invalid");
		}
	}
}

/**
 * to do later for setting the name dynamically to the td of the file list icon
 */
function setFileTitle() {

}

/**
 * 
 * @param str
 * @returns {Boolean}
 */
function validateFileName(str) {
	if (/^[A-Za-z0-9\' '\-_]+$/.test(str)) {
		return true;
	} else {
		return false;
	}
}

/**
 * @since 19th June
 */
function clearDMSWorkingArea() {
	$('.tblFileIconList').html("");
}

function setWorkingAreaTitle(title) {
	$(".divDocumentListWindowTitle").html('<h5 align="center" style="" class="box-title">' + title + '</h5>');
}

function openOrganizeFileDialog() {
	$('#organizeFile').dialog('open');
}

function closeOrganizeFileDialog() {
	$('#organizeFile').dialog('close');
}

function getSelectedTargetFolder() {
	var node = $('#ulTargetTree').tree('getSelected');

	if (node != null)
		return node.id;
	else {
		return null;
	}
}

/**
 * 
 * @param targetCategoryId
 * @param action
 *            move/copy
 */
function organizeFile(sourceCategoryId, targetCategoryId, selectedDocumentJSON,
		action) {
	/**
	 * @getting documentId as per clicked
	 */
	var documentId = '';
	var documentType = '';

	if (action == null || action == undefined) {
		jAlert('Select action!');
		return;
	} else if (targetCategoryId == null || targetCategoryId == undefined) {
		jAlert('Select target folder!');
		return;
	} else {
		var document = new Array();
		if (selectedDocumentJSON.document.length > 0) {
			for ( var i = 0; i < selectedDocumentJSON.document.length; i++) {
				docId = selectedDocumentJSON.document[i].DocumentId;
				docType = selectedDocumentJSON.document[i].DocumentType;
				document.push(docId + '-' + docType);
			}
		} else {
			/**
			 * <input type="hidden" id = "documentId"><input type="hidden" id =
			 * "documentType">
			 */
			docId = $('#documentId').val();
			docType = $('#documentType').val();
			document.push(docId + '-' + docType);
		}
		try {
			$.ajax({
				url : 'fileOrgization.json?sourceCategoryId=' + sourceCategoryId
				+ '&targetCategoryId=' + targetCategoryId + '&action='
				+ action + '&document=' + document,
				dataType : 'json',
				type : 'POST',
				success : function(jArray) {
					if (jArray["responseFlag"] == '1') {
						closeOrganizeFileDialog();
					}
					jAlert(jArray["responseText"]);
				}

			});
		} catch (e) {

		}
	}
}

/**
 * @since 16th Jul 2012
 * @returns {JSON list}
 * @functionality returns the list of selected document Id associated with
 *                type(TEXT/UPLOADED) of the document with key DocumentId and
 *                DocumentType
 */
function getSelectedDocument() {
	var selectedDocumentJSONObject = {
			document : []
	};
	$('input[name=chkFileListIcon]:checked').each(function() {
		selectedDocumentJSONObject.document.push({
			"DocumentId" : $(this).data('Id'),
			"DocumentType" : $(this).data('Type'),
		});
	});
	return selectedDocumentJSONObject;
}

function getDocumentCategoryTreeTitle() {
	$('#divCategoryHeader').find('h5').html();
}

function getSelectedCategoryType() {
	return gCategoryType;
}

function setDocumentCategoryTreeTitle(title) {
	$('#divCategoryHeader').find('h5').html(title);
}

function getDocumentWindowTitle() {
	$('.divDocumentListWindowTitle').find('h5').html();
}

function setDocumentWindowTitle(title) {
	$('.divDocumentListWindowTitle').find('h5').html(title);
}

function getSelectedParentCategoryType() {
	return gParentCategoryType;
}

function setSelectedParentCategoryType(catType) {
	gParentCategoryType = catType;
}

function setCategoryRetrievalPath(path) {
	gCategoryPath = path;
}

function getCategoryRetrievalPath() {
	return gCategoryPath;
}

function restrictNewCategory() {
	$('#chkNewDocFlag, #chkNewDocFlagTbx').attr('disabled', 'disabled');
}

function showMainMenu() {
	window.location.href = 'home.htm?type=owner';
}

/**
 * for initializing the file type input to accept file and send it server as
 * multipart to save it
 * 
 * @autor vimal
 * @since 23 Aug 2012
 */
function initAttachmentBar() {
	$(document).ready(
			function() {
				new AjaxUpload('txtFileAttachment', {
					action : 'uploadAttachments.json',
					name : 'fileData',
					size : AllowedFileSize.DOCUMENT_UPLOAD,
					data : {},
					onSubmit : function(file, extension) {
						if ($.inArray(extension.toString().toLowerCase(),
								gExtensionArray) != -1) {
							$('div.preview').addClass('loading');
							
							$('#tblAttachementList').append(
							'<div class="label label-info file-upload-progress-Bar" style="min-width:100px;width:100px;text-align: left;background: #f2dede;margin: 5px;" align="center"><img src="'+gFileTypeIcon[extension]+'" style="width:22x;height:15px;margin:1px;"> <a style="color: #000000;font-weight: initial;" href="#">'+
							file+'</a></div>'
							);//<span style="float:right" class="file-upload-progress-span"></span>
							
							$(".file-upload-progress-Bar").animate({ 
				                  width: "80%"
				            }, {
				                duration: 3000,
				            });
							this.setData({
								'categoryId' : $("#hdnDocumentCategoryId")
								.val(),
								'documentId' : $("#hdnDocumentId").val(),
								'fileSize' : AllowedFileSize.DOCUMENT_UPLOAD
							});
							return true;
						} else {
							jAlert('File type is not valid!');
							return false;
						}
					},
					onComplete : function(file, response) {
						response = eval('(' + response + ')');
						//$('.file-upload-progress-Bar').remove();
						//$('div.preview').removeClass('loading');
						if (response[0].responseFlag == '1') {
							try {
								/** To be overrriden by pluggins */
								/** ****************************** */
								var documentId = response[1].DocumentId;
								if (documentId != undefined){ 
									getAttachmentListAjax1(documentId,'tblAttachementList');
								}else{
									setTimeout(function(){
										getTemporaryAttachmentListAjax1();
									},2000);
									
								}
									
							} catch (e) {

							}
						}

					}
				});
			});
}

/**
 * for the showing the upload form
 * 
 * @param dialogClass
 *            class of the div under which form has to be shown
 */
function paintDocumentUploadForm(dialogClass, callback) {
	var boiler = '<form id = "uploadDocument" action="uploadDocument.json" method="POST" enctype="multipart/form-data">'
		+ '	<table align="Center" class="smalltable">'
		+ '	<input type="hidden" id="hdnDocumentCategory"  path="documentCategoryObj.documentCategoryId" />'
		+ '	<input type="hidden" id="hdnDocumentPath" path="documentPath" />'
		+ '	<tr>'
		+ '		<td colspan="2"><label>Description:</label>&nbsp;&nbsp;<textarea style="height:100px; width:80%" id="txtUploadDescription" name="description"></textarea></td>'
		+ '	</tr>'
		+ '<tr>'
		+ '		<td><label>Barcode:</label>'
		+ '			<input type="text" name="barcode" id="barcode"/>'
		+ '			<input type="hidden" name="barcodeOld" id="barcodeOld"/>'
		+ '				<div class="login" style="float: left;margin-left:5px"><input type="button" class = "btn btn-inverse btn-mini  " value="Show" onclick="getBarcodeFromControl(\'barcode\',\'barcodeImg\')"/>'
		+ '				</div>'
		+ '				<div style="float: left; margin-left:20px; height: 30px; overflow:hidden;">'
		+ '				<span id="barcodeImg"></span>'
		+ '				</div>'
		+ '		</td>'
		+ '	</tr>'
		+ '	<tr>'
		+ '		<td><label>Browse File:</label>'
		+ '<div class = "preview"></div>'
		+ '		<input type="file" id="txtUploadDocument"  name="fileData" /></td>'
		+ '	</tr>'
		+ '	<tr>'
		+ '		<td><label style = "color:red"><sup>*</sup>&nbsp;File size should be less than 10 MB</label></td>'
		+ '	</tr>'
		+ '	<tr>'
		+ '		<td>'
		+ '			<input type="button" class = "btn btn-inverse btn-mini  " value="Cancel" onclick = "try{showFiles(getSelected())} catch(e){}">'
		+ '		</td>' + '	</tr>' + '</table>' + '</form>';
	$('.' + dialogClass).html(boiler);
	$('#uploadDocument').reset();
	callback();
}

function setDocumentCategoryId(nodeId) {
	$('#hdnDocumentCategory').val(nodeId);
}

/**
 * for the showing the upload form
 * 
 * @param Any
 *            element id under which upload bar has to be shown
 */
function paintDocumentUploadBar(tableId) {
	var boiler = '<form id = "uploadDocument" action="uploadDocument.json" method="POST" enctype="multipart/form-data">'
		+ '<table class = "table">'
		+ '<tr>'
		+ '<th>'
		+ '<input type="hidden" id="hdnDocumentCategory"  name="documentCategoryObj.documentCategoryId" />'
		+ '		 <label>Browse file:</label>'
		+ '</th>'
		+ '<td>'
		+ '<div class = "preview"></div>'
		+ '<input type="file" id="txtUploadDocument"  name="fileData" />'
		+ '</td>' + '</tr>' + '</table>' + '</form>';

	$('#' + tableId).html(boiler);
	$('#uploadDocument').reset();
	initDocumentUploadForm();
}

function deletePlugginAttachment(docId) {
	try {
		$.ajax({
			url : 'deletePlugginAttachment.json',
			data : {
				docId : docId
			},
			success : function() {
			}
		});
	} catch (e) {
		alert(e);
	}
}

function getDocumentCategoryByParentId(categoryId, callback) {
	//alert(categoryId);
	try {
		$.ajax({
			url : 'getCategoriesByParentCategory.json',
			data : 'categoryId=' + categoryId,
			dataType : 'json',
			success : function(jArray) {
				callback(jArray);
			},
			error : function(e) {

			}

		});
	} catch (e) {

	}
}

function createChildCategoryTree(jArray) {
	// reload();
	for ( var i = 0; i < jArray.length; i++) {
		var parent = jArray[i]["refDocumentCategoryObj"]["documentCategoryId"];
		var text = jArray[i]["name"];
		var node = $('#' + gDMSCategoryTreeId).tree('find', parent);
		$('#' + gDMSCategoryTreeId).tree('append', {
			parent : (node ? node.target : null),
			data : [ {
				id : jArray[i]["documentCategoryId"],
				text : text,
			} ]
		});
	}
}

function setSearchInCategory(categoryId) {
	gSearchInCategory.push(categoryId);
}

/**
 * 
 * @param catName
 * @returns encoded string of string is valid else return blank string
 */
function getEncodedDMSCategoryName(catName) {
	if (catName == undefined)
		return "";

	if (catName != '') {
		var result = catName.replace(/[^A-Za-z0-9]/g, "");
		return result;
	} else {
		return "";
	}
}

function refreshFolder(node) {
	if (node == undefined)
		node = $('#' + gDMSCategoryTreeId).tree('getSelected');

	getDocumentCategoryByParentId(node.id,
			function(jArray) {
		var children = $('#' + gDMSCategoryTreeId).tree('getChildren',
				node.target);
		for ( var i = 0; i < children.length; i++) {
			$('#' + gDMSCategoryTreeId).tree('remove',
					children[i].target);
		}
		;
		createChildCategoryTree(jArray);
		expandNode(node);
		children = $('#' + gDMSCategoryTreeId).tree('getChildren',
				node.target);
		for ( var i = 0; i < children.length; i++) {
			$('#' + gDMSCategoryTreeId).tree('expand',
					children[i].target);
			$('#' + gDMSCategoryTreeId).tree('collapse',
					children[i].target);
		}
		;
	});
}

function deleteFolder(node) {
	$('#' + gDMSCategoryTreeId).tree('remove', node.target);
}

function removeAllTemporaryAttachment() {
	$.ajax({
		url : 'removeAllTemporaryAttachmentList.json',
		type : 'POST',
		success : function(text) {

		}
	});
}

function initDocumentUploadForm(documentCategoryId) {
    var custHelper = $('#customerHelper').val();
    var uploadDocument = new UploadDocument();
    
    var fileTypesArr = [ 'doc', 'docx', 'pdf', 'xls', 'xlsx', 'txt', 'zip', 'png', 'bmp', 'jpg', 'jpeg', 'ppt', 'pptx' ];
    if(custHelper=='HPTU' || custHelper=='HPTELIBRARY'){
    	fileTypesArr = ['ALL'];
    }else if(custHelper=='WESCHOOL'){
    	fileTypesArr = ['py', 'ipynb', 'csv', 'twb', 'twb', 'twbx', 'tds', 'tdsx', 'tde', 'tbm', 'tms', 'tps', 'sav', 'spo', 
    	                'flv', 'asf','qt','mov', 'mpg', 'mpeg', 'avi', 'm4v', 'wmv', 'mp4', 
    	                '3gp', 'mp3', 'wma', 'wav',
    	                'doc', 'docx', 'pdf', 'xls', 'xlsx', 'txt', 'zip', 
    	                'png', 'bmp', 'jpg', 'jpeg', 'ppt', 'pptx'];
    }
	var uploadFileSize = AllowedFileSize.DOCUMENT_UPLOAD;
	if(custHelper=='GMR_SA'){
		uploadFileSize = AllowedFileSize.DOCUMENT_UPLOAD_50MB
	}
    
    uploadDocument.init({
        categoryId : documentCategoryId,
        elementId : 'divUploadingBar',
        caption : 'Upload Document',
        fileType : fileTypesArr,
                     onUpload : function() {
                         uploadDocument.setData({
                             desc : $('#txtUploadDescription').val(),
                             barcode : $('#barcode').val(),
                             tags: $('#tagsFrUploadedDoc').val(),
                             subjectName : $('#subjectNameFrUploadedDoc').val(),
                             fileSize: uploadFileSize
                         });
                         return true;
                     }
    }, function(documentId) {
        uploadDocument.getDocument(documentCategoryId, function(jArray) {
                showUploadedDocumentForDMS(jArray, 'uploadedDocList', false);
        });
        $('#uploadDocument').reset();
        $('#tagsFrUploadedDoc').tagit('removeAll');
        $('#subjectNameFrUploadedDoc').val('');
    });

    uploadDocument.getDocument(documentCategoryId, function(jArray) {
            showUploadedDocumentForDMS(jArray, 'uploadedDocList', false);
    });
    
    $('#subjectNameFrUploadedDoc').val('');
    $('#tagsFrUploadedDoc').tagit('removeAll');
    $('#uploadDocumentDialog').modal('show');
    
    var fileSizeAllowed = Math.floor(uploadFileSize / (1024 * 1024));
    $('#fileSizeAllowed, .fileSizeAllowedCls').text(fileSizeAllowed);
}

function showUploadedDocumentForDMS(jArray, elementId, isCreator) {
	if (jArray.length > 0) {
		var attachementBoiler = "<table class = 'table'>";
		for ( var i = 0; i < jArray.length; i++) {
			var attachmentFileName = jArray[i]["name"].toString();
			var documentId = jArray[i]["documentId"];
			var eDocPathId = jArray[i]["eDocPathId"]!=undefined?jArray[i]["eDocPathId"]:jArray[i]["documentId"];
			var isTemporary = jArray[i]["isTemporary"];

			var trId = 'trAttachmentFile-' + eDocPathId;

			var fileType = jArray[i]["type"];
			iconPath = gFileTypeIconMapping[fileType];
			if (!isTemporary) {
				attachementBoiler += '<tr id = "'
					+ trId
					+ '"><td><img src="'
					+ iconPath
					+ '" />&nbsp;&nbsp;&nbsp;&nbsp;'+(juno.label['a.download.json'].setIndexedArgs((eDocPathId), "UPLOADED", encodeURIComponent(attachmentFileName), attachmentFileName))+'</td>';
				
				//if (isCreator) {
					attachementBoiler += '<td><img style = "cursor:pointer" title = "remove" src = "img/remove-icon.png" onclick = "deleteUploadedDMSDocument(this,\''
						+ eDocPathId + '\')" /></td>';
				//}
				attachementBoiler += '</tr>';
			} else {
				attachementBoiler += '<tr id = "'
					+ trId
					+ '"><td><img src="'
					+ iconPath
					+ '" />&nbsp;&nbsp;&nbsp;&nbsp;<a href = "#">'
					+ attachmentFileName
					+ '</a></td><td><img style = "cursor:pointer" title = "remove" src = "img/remove-icon.png" onclick = "deleteUploadedCV(\''
					+ eDocPathId
					+ '\')" />&nbsp;&nbsp;&nbsp;&nbsp<img src = "img/unsaved.png" title = "Unsaved"/></td></tr>';
			}
		}
		attachementBoiler += "</table>";
		if (elementId == undefined)
			$('#uploadedDocList').html(attachementBoiler);
		else
			$('#' + elementId).html(attachementBoiler);
	} else {
		$('#' + elementId).html('No document uploaded!!!');
	}
}

function showAddDocumentFromDMSDialog(targetDocumentId) {
	var uploadDocument = new UploadDocument();
	uploadDocument.getAllUserRootFolder(undefined, 'dms', function(jArray) {
		instantiateCourseFileAttachmentTree('ulDMSCourseFileAttachmentTree');
		_doCreateTree(jArray, 'ulDMSCourseFileAttachmentTree');
	});
	getAllCourseFileRelatedDocumentAttachment(function(jArray) {
		showDocumentForCourseFileAttachment(jArray);
	});

	$('.btnInsertFileToDocument').attr('disabled', 'disabled');
	$('.btnInsertFileToDocument').unbind();
	$('.btnInsertFileToDocument').bind('click', function() {
		insertAndShowSelectedFileToDocument(targetDocumentId);
	});

	/**
	 * Binding Search Event
	 */
	var boiler = '<input type="text" class="inputSearch" style="margin-left:10px" placeholder="Search Text">';
	$('.divSearch').html(boiler);
	$(".inputSearch")
	.tokenInput(
			'getSearchedUserDocument.json',
			{
				theme : "facebook",
				tokenLimit : 1,
				preventDuplicates : true,
				propertyToSearch : "documentName",
				placeholder : 'Search in all folder',
				noResultsText : 'No result found',
				onAdd : function(item) {
					var documentArray = '';
					documentArray = '[';

					var documentId = item.documentId;
					var documentType = item.documentType;
					var fileName = item.documentName;
					var categoryId = item.categoryId;
					documentArray += '{' + '\"documentId\":\"'
					+ documentId + '\",'
					+ '\"documentType\":\"' + documentType
					+ '\",' + '\"fileName\":\"' + fileName
					+ '\",' + '\"categoryId\":\"' + categoryId
					+ '\"' + '}';

					documentArray += ']';

					var documentJSON = documentArray;// documentArray.replace(/\s+/g,
					// '');

					if (documentJSON != '' && documentJSON != '[]') {
						insertSelectedFilesToDocument(
								documentJSON,
								targetDocumentId,
								function(jArray) {
									populateAttachmentList(jArray,
											undefined, targetDocumentId);
									$('#addCourseFileDocumentFromDMS')
									.modal('hide');
								});
					}
				},
				onDelete : function(item) {
				},
				resultsFormatter : function(item) {

					var fileType = item.fileType;
					var iconPath = gFileTypeIconMapping[fileType];
					return "<li><img src='"
					+ iconPath
					+ "' title='"
					+ item.documentName
					+ "'  />"
					+ "<div style='display: inline-block; padding-left: 10px;'><div class='full_name'>"
					+ item.documentName + "</div></div></li>";
				},
				tokenFormatter : function(item) {
					var fileType = item.fileType;
					var iconPath = gFileTypeIconMapping[fileType];
					return "<li><p><img src='" + iconPath + "' title='"
					+ item.documentName + "' />"
					+ item.documentName + "</p></li>";
				}
			});
	$('#addCourseFileDocumentFromDMS').modal('show');
}

function showDocumentForCourseFileAttachment(jArray) {
	var boiler = '<table cellpadding="0" class="table table-bordered documentFileTable" id="documentFileTable">';
	boiler += '<thead>';
	boiler += '<tr id = "' + trId + '" class="">';
	boiler += '<th class="documentId" style="display:none"></th>';
	boiler += '<th class="documentType" style="display:none"></th>';
	boiler += '<th class="categoryId" style="display:none"></th>';
	boiler += '<th class="checkbox1"><input type="checkbox" class="document" title="Select All"></th>';
	boiler += '<th class="icon"></th>';
	boiler += '<th class="fileName" style="text-align:left">Document Name</th>';
	boiler += '<th class="createdDate" style="text-align:left">Created Date</th>';
	boiler += '</tr>';
	boiler += '</thead><tbody>';
	for ( var i = 0; i < jArray.length; i++) {
		var attachmentFileName = jArray[i].documentName;
		var documentId = jArray[i].documentId;
		var trId = 'trourseFileAttachmentFile-' + i;
		var fileType = jArray[i].fileType;
		var documentType = jArray[i].documentType;
		var categoryId = jArray[i].categoryId;
		var createdDate = jArray[i].createdDate;
		iconPath = gFileTypeIconMapping[fileType];
		boiler += '<tr id = "' + trId + '" class="documentFileRow">';
		boiler += '<td class="documentId" style="display:none">' + documentId
		+ '</td>';
		boiler += '<td class="documentType" style="display:none">'
			+ documentType + '</td>';
		boiler += '<td class="categoryId" style="display:none">' + categoryId
		+ '</td>';
		if (fileType != 'folder') {
			boiler += '<td class="checkbox1"><input type="checkbox" class="document"></td>';
		} else {
			boiler += '<td class="checkbox1"></td>';
		}
		boiler += '<td class="icon"><img src="' + iconPath + '" /></td>';
		if (fileType != 'folder') {
			boiler += '<td class="fileName">' + attachmentFileName + '</td>';
		} else {
			boiler += '<td class="fileName pointer" onclick="">'
				+ attachmentFileName + '</td>';
		}

		boiler += '<td class="createdDate">' + createdDate + '</td>';
		boiler += '</tr>';
	}
	boiler += '</tbody></table>';
	$('.divUserFileList').html(boiler);
	$('.documentFileTable')
	.dataTable(
			{
				"sDom" : "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid<'span6'i><'span6'p>>",
				"iDisplayLength" : -1,
				"sWrapper" : "dataTables_wrapper form-inline",
			});

	$('.dataTables_length').addClass('hide');
	$('.documentFileTable').find('.document').bind(
			'click',
			function() {
				if ($(this).is(':checked')) {
					$(this).closest('tr').addClass('rowSelected');
				} else {
					$(this).closest('tr').removeClass('rowSelected');
				}
				if ($('.documentFileTable').find('.documentFileRow').hasClass(
				'rowSelected')) {
					$('.btnInsertFileToDocument').removeAttr('disabled');
				} else {
					$('.btnInsertFileToDocument').attr('disabled', 'disabled');
				}
			});

	var uploadDocument = new UploadDocument();
	$('.documentFileTable').find('.fileName').bind(
			'click',
			function() {

				var documentType = $(this).closest('tr').find('.documentType')
				.text();
				var documentCategoryId = $(this).closest('tr').find(
				'.documentId').text();
				if (documentType == 'cat') {
					/**
					 * @if documentType == folder then documentId is actually
					 *     documentCategoryId
					 */
					uploadDocument.getFilesForCourseFileAttachment(
							documentCategoryId, function(jArray) {
								showDocumentForCourseFileAttachment(jArray);
							});
					uploadDocument.getCategoryPathWithId(documentCategoryId,
							function(jsonArray) {
						showCategoryPath(jsonArray);
					});
				}
			});
}

function getDocumentTableData(documentCategoryId) {
	var uploadDocument = new UploadDocument();
	uploadDocument.getFilesForCourseFileAttachment(documentCategoryId,
			function(jArray) {
		showDocumentForCourseFileAttachment(jArray);
	});
	uploadDocument.getCategoryPathWithId(documentCategoryId,
			function(jsonArray) {
		showCategoryPath(jsonArray);
	});
}
function showCategoryPath(jsonArray) {
	var pathArray = new Array();
	var boiler = '';
	if (jsonArray.length > 1) {
		for ( var int = jsonArray.length - 1; int >= 0; int--) {
			boiler = '<span class="documentCategoryId pointer" id="'
				+ jsonArray[int].id + '" onclick="getDocumentTableData(\''
				+ jsonArray[int].id + '\')">' + jsonArray[int].name
				+ '</span>';
			pathArray.push(boiler);
		}
		pathArray = pathArray
		.join(' <i class="icon-play icon-white"></i> ');
		$('.searchPath').html(pathArray);
		var uploadDocument = new UploadDocument();
		$('.searchPath').find('.documentCategoryId').bind(
				'click',
				function() {
					var documentCategoryId = $(this).attr('id');
					uploadDocument.getFilesForCourseFileAttachment(
							documentCategoryId, function(jArray) {
								showDocumentForCourseFileAttachment(jArray);
							});
				});
		$('.searchPath').show();
	} else {
		$('.searchPath').hide();
	}
}

//uploadDocument.getCategoryPathWithIdAjax.json
function getAllUserRootFolder(typeArray, parentType, callback) {
	gDMSCategoryTreeId = null;
	gDMSCategoryTreeName = null;
	$
	.ajax({
		url : 'getDocumentCategoryAjax.json?categoryPath=undefined&typeArray=undefined&parentType='
			+ parentType + '&root=undefined',
			dataType : 'json',
			beforeSend : function() {
				$('.ulDMSCourseFileAttachmentTree').html(
				'<div class="preview-large"></div>');
				$('.ulDMSCourseFileAttachmentTree').find('.preview-large')
				.addClass('loading-large');
			},
			complete : function() {
				$('.ulDMSCourseFileAttachmentTree').find('.preview-large')
				.removeClass('loading-large');
			},
			success : function(jArray) {
				callback(jArray);
			},
			error : function() {
			}
	});
}

function getAllCourseFileRelatedDocumentAttachment(callback) {
	$.ajax({
		url : 'getAllCourseFileRelatedDocumentAttachment.json',
		dataType : 'json',
		beforeSend : function() {
			$('.divUserFileList').html('<div class="preview-large"></div>');
			$('.divUserFileList').find('.preview-large').addClass(
			'loading-large');
		},
		complete : function() {
			$('.divUserFileList').find('.preview-large').removeClass(
			'loading-large');
		},
		success : function(jArray) {
			callback(jArray);
		},
		error : function() {
		}
	});
}

function instantiateCourseFileAttachmentTree(treeId) {
	$('#' + treeId).tree(
			{
				animate : true,
				dnd : false,
				onClick : function(e, node) {
					var node = $('#' + treeId).tree('getSelected');
					var uploadDocument = new UploadDocument();
					uploadDocument.getFilesForCourseFileAttachment(node.id,
							function(jArray) {
						showDocumentForCourseFileAttachment(jArray);
					});
				}
			});
}

function instantiateCourseFileAttachmentTree(treeId) {
	$('#' + treeId).tree(
			{
				animate : true,
				dnd : false,
				onClick : function(e, node) {
					var node = $('#' + treeId).tree('getSelected');
					var uploadDocument = new UploadDocument();
					uploadDocument.getFilesForCourseFileAttachment(node.id,
							function(jArray) {
						showDocumentForCourseFileAttachment(jArray);
					});
				}
			});
}

function insertAndShowSelectedFileToDocument(targetDocumentId) {
	var documentArray = '';
	documentArray = '[';
	$('.documentFileTable').find('tr.documentFileRow').each(
			function() {
				var chkObj = $(this).find('.document');
				if ($(chkObj).is(':checked')) {
					var documentId = $(this).find('.documentId').text();
					var documentType = $(this).find('.documentType').text();
					var fileName = $(this).find('.fileName').text();
					var categoryId = $(this).find('.categoryId').text();
					documentArray += '{' + '\"documentId\":\"' + documentId
					+ '\",' + '\"documentType\":\"' + documentType
					+ '\",' + '\"fileName\":\"' + fileName + '\",'
					+ '\"categoryId\":\"' + categoryId + '\"' + '},';
				}
			});
	documentArray = documentArray.substring(0, documentArray.length - 1);
	documentArray += ']';

	var documentJSON = documentArray;// documentArray.replace(/\s+/g, '');

	if (documentJSON != '' && documentJSON != '[]') {
		insertSelectedFilesToDocument(documentJSON, targetDocumentId, function(
				jArray) {
			populateAttachmentList(jArray, undefined, targetDocumentId);
			$('#addCourseFileDocumentFromDMS').modal('hide');
		});
	}
}
function insertSelectedFilesToDocument(documentArray, targetDocumentId,
		callback) {
	if (targetDocumentId == undefined || targetDocumentId == 'undefined') {
		targetDocumentId = undefined;
	}
	var targetCategoryId = gDMSCategoryTreeId;
	$.ajax({
		url : 'insertSelectedFilesToDMSDocument.json',
		dataType : 'json',
		type : 'POST',
		data : {
			documentIdsWithTypeAndName : documentArray,
			targetDocumentId : targetDocumentId,
			targetCategoryId : targetCategoryId
		},
		success : function(jObject) {
			if (jObject.responseFlag == 1) {
				callback(jObject.documentArray);
			} else {
				jAlert('<strong>' + jObject.responseText + '</strong>');
			}
		},
		error : function() {

		}
	});
}
function getFilesForCourseFileAttachment(categoryId, callback) {
	$.ajax({
		url : 'getAllUserDocumentByCategoryId.json',
		dataType : 'json',
		data : 'categoryId=' + categoryId,
		beforeSend : function() {
			$('.divUserFileList').html('<div class="preview-large"></div>');
			$('.divUserFileList').find('.preview-large').addClass(
			'loading-large');
		},
		complete : function() {
			$('.divUserFileList').find('.preview-large').removeClass(
			'loading-large');
		},
		success : function(jArray) {
			callback(jArray);
		},
		error : function() {
		}
	});
}

function deleteUploadedDMSDocument(thisObj,doumentId){
	removeUploadedDocumentById(doumentId,function(jObject){
		if(jObject.responseFlag == '1') {
			$(thisObj).closest('tr').remove();
		} else {
			jAlert('Deletion failed');
		}
	});
}

//new

function showFileAndTextWindow()
{
	$("#tdFileAndTextWindow").show();
	$("#documentsList").html('');
	$("#searchFileList").html('');
	$(".tblFileIconList").html('');
	gDMSCategoryTreeId = null;
	gDMSCategoryTreeName = null;
	$("#subFolder").hide();
	$("#fileList").hide();
	fileNameArray.splice(1, fileNameArray.length);
	fileIdArray.splice(1, fileIdArray.length);
	refreshMap();
	//$("#fileMap").html(fileNameArray[0]);
	$("#fileMapLocation").html("/<a onclick='showFileAndTextWindow();' style='cursor:pointer;'>home</a>");
	
	$('#btnAddDoc').hide();
	$('#btnUploadDoc').hide();
	$('#btnAddFolder').show();
	$('.lblIncludeDMS').show();
	
	if(window.req_param_categoryId!=null){
		getFolderFilesDocumentsByParentId(window.req_param_categoryId);
		
		return false;
	}
	
	if($('#chkIncludeSharedDMS').is(':checked')){
		fetchAllSharedDocuments();
	}else{
		fetchAllDocumnetsWithDMS(isAcademicFolder);
	}
	
}

var fileNameArray = ["Home"];//<span onclick='showFileAndTextWindow();' style='cursor:pointer;'>
var fileIdArray = ["-"];
function getDocumentByParentId(categoryId,fname) {
	console.log("Test123");
	$('#btnAddDoc').show();
	$('#btnUploadDoc').show();
	$('.lblIncludeDMS').hide();
	
	$('#dms_item_details').hide();
	gDMSCategoryTreeId = categoryId;
	//var boiler = '';
	var name = unescape(fname);
	
	if(fileIdArray.indexOf(categoryId)==-1){
		fileNameArray.push(name);
		fileIdArray.push(categoryId);
		refreshMap();
	}
	gDMSCategoryTreeName = fname;
	
	$('#load').show();
	//$('#my-menu').html('');
	var canEdit='false';
	var isShared='false';
	isShared = $('#optionDmsFolder-'+categoryId).attr('isShared');
	canEdit = $('#optionDmsFolder-'+categoryId).attr('canEdit');
	if(isShared=='true'){
		if(canEdit=='false'){
			$('#btnAddDoc').hide();
			$('#btnUploadDoc').hide();
			$('#btnAddFolder').hide();
		}else
		{
			$('#btnAddDoc').show();
			$('#btnUploadDoc').show();
			$('#btnAddFolder').show();
		}
	}
	else
	{
		$('#btnAddDoc').show();
		$('#btnUploadDoc').show();
		$('#btnAddFolder').show();
	}
	try {
		getUploadedFiles(categoryId);
		getTextFiles(categoryId);
		$.ajax({
			url : 'getCategoriesByParentCategory.json',
			data : 'categoryId=' + categoryId,
			dataType : 'json',
			success : function(jArray) {
				var j = jArray.length;
				var flag=8;
				var menuBoiler='';
				var boiler1='<table class=""><tr>';
				var boilerList =folderCommonHeader();//Kiran List View Header
				for ( var i = 0; i < j; i++) {

					if(i==flag)
					{
						boiler1+='</tr><tr>';
						flag+=8;
					}
					var fullName = jArray[i]["name"];
					try{fullName = decodeURIComponent(fullName); }catch(e){}
					var name = jArray[i]["name"].length<11?jArray[i]["name"]:jArray[i]["name"].substring(0,11)+'...';
					var createdByEmp= jArray[i]["createdByEmp"]!=null?jArray[i]["createdByEmp"]:"";
					boiler1+='<td style="padding:10px;">';
					if(jArray[i]["isEmpty"]==true){
						boiler1+='<div id="optionDmsFolder-'+ jArray[i]["documentCategoryId"]+'" isShared="'+isShared+'" canEdit="'+canEdit+'" data-createdByEmp="'+createdByEmp+'" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="DMS_content_item" data-name="'+jArray[i]["name"]+'" data-dirCount="'+jArray[i]["childDirectoryCount"]+'"  data-fileCount="'+jArray[i]["childCreatedFileCount"]+'" ondblclick="getFolderFilesDocumentsByParentId('+jArray[i]["documentCategoryId"]+',\''+escape(fullName)+'\',undefined,undefined,' +jArray[i].canEdit+')">)"><img class="dmsFolder" title="'+fullName+'" src="img/folder_emptyNew.png" ondragstart="return false">';
						try{
							boiler1+= '<p class="text-center">'+decodeURIComponent(name)+'</p>';
						}
						catch(e){
							boiler1+= '<p class="text-center">'+name+'</p>';
						}
					}
					else
					{		
						boiler1+='<div id="optionDmsFolder-'+ jArray[i]["documentCategoryId"]+'" isShared="'+isShared+'" canEdit="'+canEdit+'" data-createdByEmp="'+createdByEmp+'"  style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="DMS_content_item" data-name="'+jArray[i]["name"]+'" data-dirCount="'+jArray[i]["childDirectoryCount"]+'" data-fileCount="'+jArray[i]["childCreatedFileCount"]+'" ondblclick="getFolderFilesDocumentsByParentId('+jArray[i]["documentCategoryId"]+',\''+escape(fullName)+'\',undefined,undefined,' +jArray[i].canEdit+')">)"><img class="dmsFolder" title="'+fullName+'" src="img/folderNew.png" ondragstart="return false">';
						try{
							boiler1+= '<p class="text-center">'+decodeURIComponent(name)+'</p>';
						}
						catch(e){
							boiler1+= '<p class="text-center">'+name+'</p>';
						}
					}
					boiler1+= '<span class="folderTagsCls" style="display:none;">'+documentTagsBoiler(jArray[i]["tags"])+'</span>';
					var folderIcon = dmsSettingsObj.FOLDER_ICON;
					if(jArray[i]["isEmpty"]==true)
						folderIcon = dmsSettingsObj.FOLDER_EMPTY_ICON;
					
					boilerList+='<tr id="optionDmsFolder-'+jArray[i]["documentCategoryId"]+'" class="DMS_content_item" data-name="'+fullName+'" isShared="'+isShared+'" '+
					'canEdit="'+canEdit+'" data-createdByEmp="'+createdByEmp+'" ondblclick="getFolderFilesDocumentsByParentId('+jArray[i]["documentCategoryId"]+',\''+escape(fullName)+'\',undefined,undefined,' +jArray[i].canEdit+')">)">';
					boilerList+='<td><input type="checkbox" class="multiSelectDMSFileCls" data-file-type="folder" value="'+i+'"/></td>';
					boilerList+='<td><img src="' + folderIcon + '" class="dmsFolder" ondragstart="return false" style="width:25px;height:25px;"> '+fullName+'</td><td>Folder</td>';
					boilerList+='<td title="Directory/File Count"> </td>';
					boilerList+='<td title="Created By Employee">'+(createdByEmp)+'</td>';
					boilerList+='<td title="Can Edit">-</td>';
					boilerList+='<td title="Is Shared">'+(isShared==true?'Shared':'-')+'</td>';
					boilerList+='<td>-</td><td>'+ documentTagsBoiler(jArray[i]["tags"])+'</td>';
					boilerList+='<td></td>';
					boilerList+='</tr>';
					
					boiler1+='</div>';
					boiler1+='</td>';
					if(i==flag)
					{
						boiler1+='</tr>';
					}
					if(jArray[i]["parentCategoryType"]!=null && (jArray[i]["parentCategoryType"]!='dms' && jArray[i]["parentCategoryType"]!='DMS'))
					{
						var a=(isShared=='false' || (isShared=='true' && canEdit=='true'))?true:false;
						console.log(a);
						if(isShared=='false' || (isShared=='true' && canEdit=='true'))
						{
							$('#menuFoldr-'+ jArray[i]["documentCategoryId"]).remove();
							
							menuBoiler += '<div id="menuFoldr-'+ jArray[i]["documentCategoryId"] +'"><ul>';
							try
							{
								menuBoiler += '<li onclick="configureUploadedFolderSharingView('+jArray[i]["documentCategoryId"]+',\'folder\',\''+escape(name)+'\')"><a href="javascript:void(0);">Share</a></li>';
							}catch(e)
							{
								menuBoiler += '<li onclick="configureUploadedFolderSharingView('+jArray[i]["documentCategoryId"]+',\'folder\',\''+name+'\')"><a href="javascript:void(0);">Share</a></li>';
							}

							menuBoiler += '</ul></div>';
						}
					}
				}
				boiler1+='</tr></table>';
				boilerList+='</tbody></table>';
				
				if($('#folderViewChangeId').hasClass('fa-th-large')){
					$("#subFolder").html(boilerList);
					$('.DMS_content_item').css('float', 'inherit');
					//dataTableListView();
				}else{
					$("#subFolder").html(boiler1);
					$('.DMS_content_item').css('float', 'left');
				}
				
				$("#tdFileAndTextWindow").hide();
				$("#subFolder").show();
				$('#load').hide();
				
				$('.DMS_content_item').mousemove(function(e) {
					showItemDetails(this);
					console.log("a");
					console.log(this);
					//$('.movable').css({'top': e.pageY,'left': e.pageX});
					var tp = $(this).offset().top;
					var lft = $(this).offset().left;
					$('.movable').css({'top': tp+62,'left': lft+45});
					$('#dms_item_details').show();
				}).mouseleave(function() {
					//$('#dms_item_details').hide();
				}).click(function (){
					$('.DMS_content_item').removeClass('DMS_content_item_selected');
					$(this).addClass('DMS_content_item_selected');
				});
				$('body').click(function(){
					$('#dms_item_details').hide();
				});
				$('#my-menu').append(menuBoiler);
				for ( var i = 0; i < jArray.length; i++) {
					if(jArray[i]["parentCategoryType"]!=null && (jArray[i]["parentCategoryType"]!='dms' && jArray[i]["parentCategoryType"]!='DMS'))
					{
						/*var a=(isShared=='false' || (isShared=='true' && canEdit=='true'))?true:false;
						console.log(a);
						if(isShared=='false' || (isShared=='true' && canEdit=='true'))
						{*/
							$("#optionDmsFolder-"+ jArray[i]["documentCategoryId"]).ClassyContextMenu({
								menu: 'menuFoldr-'+ jArray[i]["documentCategoryId"], // get menu by categoryId
								mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
								isMenu: true,
								minWidth: 120,
								maxWidth: 0,
								delay: 500, 
							});
						//}
					}
				}
				
				
				showZipDownloadButton();
				
			},
			error : function(e) {

			}

		});
		
	} catch (e) {

	}
	
}

var flag = 0;
function getFolderDetail(categoryId,name)
{
	var index = fileIdArray.indexOf(categoryId);
	fileIdArray.splice(index, fileNameArray.length);
	fileNameArray.splice(index, fileNameArray.length);
	
	getFolderFilesDocumentsByParentId(categoryId,name);
	//refreshMap();
}
function getFolderDetail2(categoryId,name, flg)
{
	/*var index = fileIdArray.indexOf(categoryId);
	fileIdArray.splice(index, fileNameArray.length);
	fileNameArray.splice(index, fileNameArray.length);*/
	
	getFolderFilesDocumentsByParentId(categoryId,name, flg);
	//refreshMap();
}
var fileMapClickArray = new Array();
function refreshMap()
{

	console.log(fileNameArray);
	var boiler = '', boilerLocation='';
	boilerLocation +='/<a onclick="showFileAndTextWindow();" style="cursor:pointer;">home</a>';
	boiler+= '/'+fileNameArray[0];//showFileAndTextWindow();
	for(var i=1;i<fileNameArray.length;i++)
	{
		boilerLocation+= '/<a onclick="getFolderDetail('+fileIdArray[i]+',\''+escape(fileNameArray[i])+'\');" style="cursor:pointer;">'+fileNameArray[i]+'</a>';
		boiler+= '/'+fileNameArray[i];
		console.log(i + " -- "+fileIdArray[i]);
		fileMapClickArray[boiler] = {
			categoryId : fileIdArray[i],
			name: escape(fileNameArray[i])//Kiran Badave
		};
		/** new code **/
		try{
		$("#optionDmsFolder-"+ fileIdArray[i]).ClassyContextMenu({
			menu: 'menuFoldr-'+ fileIdArray[i], // get menu by categoryId
			mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
			isMenu: true,
			minWidth: 120,
			maxWidth: 0,
			delay: 500, 
		});
		}catch(e){console.log(e)}
		/** end **/
	}
	
	
	$("#fileMapLocation").html(boilerLocation);
	$("#fileMap").val(boiler);
	
}
function getFileAndFolderByPath(flg){
	var fileMapVal = $('#fileMap').val().trim();
	if(fileMapVal[fileMapVal.length-1]=='/'){
		fileMapVal = fileMapVal.substring(0, fileMapVal.length-1);
		$('#fileMap').val(fileMapVal);
	}
	if(fileMapVal=='' || fileMapVal=='/home'){
		$('#fileMap').val('/home')
		showFileAndTextWindow();//Kiran Badave
	}else{
		if(fileMapClickArray[fileMapVal]!=undefined){
			getFolderDetail2(fileMapClickArray[fileMapVal].categoryId, fileMapClickArray[fileMapVal].name, flg);
		}else{
			getFolderDetail2(0, "Path", fileMapVal);
			
		}
	}
}
function backBtnLocationPath(){//Kiran Badave
	LocationPathAndPathEditorToggle(1);
	if(!$('#fileMapLocation').is(':visible')){
		$('.searchHideShowCls').hide();
		$('#fileMapLocation').show();
	}
	
	var fileMapVal = $('#fileMap').val().trim();
	if(fileMapVal[fileMapVal.length-1]=='/'){
		fileMapVal = fileMapVal.substring(0, fileMapVal.length-1);
	}
	if(fileMapVal.lastIndexOf('/')!=-1 && fileMapVal.lastIndexOf('/')!=0){
		fileMapVal = fileMapVal.substring(0, fileMapVal.lastIndexOf('/'));
		$('#fileMap').val(fileMapVal);
		if(fileMapVal=='' || fileMapVal=='/home'){
			$('#fileMap').val('/home')
			if($('#chkIncludeSharedDMS').is(':checked')==true){
				fetchAllSharedDocuments();
			}else{
				showFileAndTextWindow();
			}
		}else{
			if(fileMapClickArray[fileMapVal]!=undefined){
				
				var index = fileIdArray.indexOf(fileMapClickArray[fileMapVal].categoryId)+1;
				fileIdArray.splice(index, fileIdArray.length);
				fileNameArray.splice(index, fileNameArray.length);
				
				getFolderDetail2(fileMapClickArray[fileMapVal].categoryId, fileMapClickArray[fileMapVal].name);//Kiran Badave
			}
		}
	}else{
		if($('#chkIncludeSharedDMS').is(':checked')==true){
			$('#fileMap').val('/home')
			fetchAllSharedDocuments();
		}else{
			showFileAndTextWindow();
		}
		
	}
}
function refreshUplodedFiles()
{
	if($('#chkIncludeSharedDMS').is(':checked')){
		toggleSwitchDropdown(1);
	}else if(fileIdArray!=null && fileIdArray.length>1){
		getFolderFilesDocumentsByParentId(gDMSCategoryTreeId, gDMSCategoryTreeName);
	}else{
		fetchAllDocumnetsWithDMS(isAcademicFolder);
	}
}
function showDocumentViewer(documentId,KEY,attachmentFileName,fileType)
{
	var domain = window.location.origin; //"http://"+window.location.host;
	var path = domain+'/'+(juno.label['url.download.json'].setIndexedArgs(documentId, "UPLOADED", encodeURIComponent(attachmentFileName),attachmentFileName))
	if((KEY) && (KEY != undefined)){
		 path = domain+'/downloadWithPath.json?id='+documentId+'&n='+attachmentFileName+'&t='+fileType+'';
	}
	var encodedPath = encodeURIComponent(path);
	console.log(encodedPath);
	var boiler = '';
		boiler = '<iframe style="width:100%;height:550px;" src="https://docs.google.com/viewer?url='+encodedPath+'&embedded=true"/>';
	$('#showDocumentPreviewDialog').find('.documentBody').html(boiler);
	$('#showDocumentPreviewDialog').modal('show').css({
		width: '100%',
		height:'100%',
		left:'0px',
		top:'0px',
		margin:'0'
	});
	
	$('#showDocumentPreviewDialog').css('z-index', '1100');
}
/*
 * @param 
 * documentCategoryId ,
 * type -- e.g. file,folder
 * folderName
 * 
 * */
function configureUploadedFolderSharingView(documentCategoryId,type,folderName)
{
	var docArray = new Array();
	var flag = true;
	if(documentCategoryId==undefined || documentCategoryId==null || documentCategoryId=='')
	{
		jAlert('No folder found..!!','warning');
		flag = false;
	}
	else
		docArray.push(documentCategoryId);

	if(flag && docArray.length>0)
	{
		var boiler ='<div id="sharingDetails"></div><div style="width:100%;">'+
			'<fieldset><legend><b>File/Folder Access</b></legend>'+
			'<input type="radio" id="viewChoice" name="readWriteChoice" checked="checked" value="read">&nbsp;<b>Read Access</b>&nbsp;&nbsp;&nbsp;&nbsp;'+
			'<input type="radio" id="editChoice" name="readWriteChoice" value="write">&nbsp;<b>Read and write Access</b>'+
			//'<br/><b>Accessibility End Date:</b> <input type="text" id="durationPeriodOfShare" value=""/>'+
			//'<br/><b>Start Date and Time:</b><input type="text" id="dms_startDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_startTime" placeholder="Start Time" style="width:70px;" readonly>'+
			//'<b>End Date and Time:</b><input type="text" id="dms_endDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_endTime" style="width:70px;" placeholder="End Time" readonly>'+
			'<table class="table table-condenced table-bordered">'+
			'<tr><td style="width:100px;vertical-align: middle;">Start Date and Time :</td><td style="width: 150px;"><input type="text" id="dms_startDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_startTime" placeholder="Start Time" style="width:70px;" readonly></td><td style="width:100px;vertical-align: middle;">End Date and Time :</td><td style="width: 150px;"><input type="text" id="dms_endDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_endTime" style="width:70px;" placeholder="End Time" readonly></td></tr>'+
			'</table>'+
			'</fieldset></div>'+
			'<fieldset><legend><b>Share with</b></legend>'+
			'<div style="width:100%;">'+
			'<input id="folderSharingTo" style="width:400px; " placeholder="Share with..." type="text"/>'+
			'</div></fieldset>';
		$('#dmsFolderSharingBody').html(boiler);

		$('#dmsFolderSharingDialogHeader').html('Document sharing');
		//$('#durationPeriodOfShare').datepicker({dateFormat:"M dd, yy"});
		$("#dms_startDate").datepicker({
			dateFormat:"M dd,yy",
			changeMonth : true,
			changeYear : true,
			minDate :new Date(),
			onSelect:function(date){
				$("#dms_endDate").datepicker("option","minDate", date);

			}
		});
		$("#dms_endDate" ).datepicker({
			dateFormat:"M dd,yy",
			changeMonth : true,
			changeYear : true,
			minDate :new Date(),
			onSelect: function(date){
			}
		});

		$('#dms_startTime').timepicker({
			showPeriod: true,
			showLeadingZero: true,
		});

		$('#dms_endTime').timepicker({
			showPeriod: true,
			showLeadingZero: true,
		});
		boiler =
			'<input type="button" id="post-Folder-Sharing" value="Post" class="btn btn-primary btn-mini" >'+
			'<input type="button" class="btn btn-danger btn-mini" value="Close" data-dismiss="modal">';
		$('#dmsFolderSharingFooter').html(boiler);

		$('#dmsFolderSharingDialog').modal('show').css({
			width:'800px',
			'margin-left': function () {
				return -($(this).width() / 2);
			}
		});
		
		/***** code to check sharing details*****/
		$.ajax({
			url:'getAllSharedWithUserData.json',
			dataType:'json',
			type:'POST',
			data:{type:type,
				documentIds:docArray+''
				},
				async:false,
				beforeSend: function() {
					startCommonAjaxSpinner();
				},
				complete: function() {
					stopCommonAjaxSpinner();
				},
				success:function(jArray){
					if(jArray.length>0)
					{
						var boiler='<div style="max-height:400px;overflow:auto;"><table class="table table-bordered"><tr><th colspan="4">Shared with user list</th></tr>';
						boiler+='<tr><th>Sr.No.</th><th>Name</th><th>View/Write</th><th></th></tr>';
						for(var i=0; i<jArray.length;i++)
						{
							boiler+='<tr><td>'+(i+1)+'</td><td>'+jArray[i]["userName"]+'</td>';
							if(jArray[i]["canEdit"]==true || jArray[i]["canEdit"]=='true')
								boiler+='<td>Write</td>';
							else
								boiler+='<td>View</td>';
							
							boiler+='<td><span class="btn btn-danger btn-mini" onclick="remmoveSharedDocumentUserId(\''+jArray[i]["thredId"]+'\')"><i class="fa fa-trash"></i> Remove</span></td>';
							boiler+='</tr>';
						}

						boiler+='</table></div>';
						$('#sharingDetails').html(boiler);
					}
				},
				error:function(){
				}
		});
		
		/***** END ****/
		
		$('.token-input-remove-searchableById-facebook-folderSharingTo').remove();
		if(gRoasterIdArray!=null && gRoasterIdArray.length>0)
		{
			$('#folderSharingTo').tokenInput("populateAllforEmployeePost.json",{
				theme: "facebook",
				resultsLimit: 10,
				placeholder: 'To',
				propertyToSearch: "name",
				//abortPrevCall:true,
				resultsFormatter: function(item){ return "<li><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" +
					"<div style='display: inline-block; padding-left: 10px;'><div class='full_name'>" + item.name +
					"</div><div class='email'>" + item.Desc + "</div></div></li>";},
					tokenFormatter: function(item) { return "<li><p><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" + item.name + "</p></li>";}
			});
		}else if(gBatchSemCapId!=null && gBatchSemCapId.length>0)
		{
			$('#folderSharingTo').tokenInput("populateAllforStudentPost.json",{
				theme: "facebook",
				resultsLimit: 10,
				placeholder: 'To',
				propertyToSearch: "name",
				//abortPrevCall:true,
				resultsFormatter: function(item){ return "<li><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" +
					"<div style='display: inline-block; padding-left: 10px;'><div class='full_name'>" + item.name +
					"</div><div class='email'>" + item.Desc + "</div></div></li>";},
					tokenFormatter: function(item) { return "<li><p><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" + item.name + "</p></li>";}
			});
		}

		$('#post-Folder-Sharing').click(function(){
			postDocumentSharing(docArray,type);
		});
		
	}
}

function postDocumentSharing(docArray,type)
{
	var alumniTextPost='';
	var alumUserIds='';
	var selfPostFlag=false;
	var canView=true;
	var canEdit=false;
	if($('input[name="readWriteChoice"]:checked').val()=='write')
		canEdit=true;

	if($('#folderSharingTo').val()!='' && $('#folderSharingTo').val()!=undefined){
		alumUserIds=$('#folderSharingTo').val();
		$('#folderSharingTo').focus();
		selfPostFlag=true;
	}else{
		selfPostFlag=false;
	}
	/*if($('#dms_startDate').val()==''||$('#dms_endDate').val()==''||$('#dms_startTime').val()==''||$('#dms_endTime').val()==''){
		jAlert('Please enter valid From and To date time!');
		return;
	}*/
	//var shareDuration = $('#durationPeriodOfShare').val(); 
	if(selfPostFlag){
		$.ajax({
			url:'addDocumentFolderSharing.json',
			dataType:'text',
			type:'POST',
			data:{alumUserIds:alumUserIds,alumniTextPost:alumniTextPost,canEdit:canEdit,canView:canView,type:type,
				documentIds:docArray+'',
				startDate: $('#dms_startDate').val(),
				endDate: $('#dms_endDate').val(),
				startTime: $('#dms_startTime').val(),
				endTime: $('#dms_endTime').val()},
				async:false,
				junoSpinner:true,
				beforeSend: function() {
					startCommonAjaxSpinner();
				},
				complete: function() {
					stopCommonAjaxSpinner();
					$('#folderSharingTo').tokenInput("clear");
					$("#folderSharingTo").val("");
					$("#folderSharingTo").focus();
					$('#dmsFolderSharingDialog').modal('hide');
				},
				success:function(messgae){
					$('.token-input-remove-searchableById-facebook-folderSharingTo').remove();
					refreshUplodedFiles();
					jAlert('Document shared successfully','success');
				},
				error:function(){
				}
		});
	}

}

function fetchAllSharedDocuments(flg)
{
	$('#fileDropdowMenuTopBar').hide();
	setTimeout(function(){
		$('#filterGroup').addClass('open');
	},50);
	var categoryPath = '';
	var rootRquired='';
	var isHideEmptyFolders=false;
	$('#chkIncludeDMS').attr('checked',false);
	//$('#chkHideEmtyFolders').attr('checked',false);
	if($('#chkHideEmtyFolders').attr('checked'))
		isHideEmptyFolders=true;
	$('#searchFileList').html('');
	if($('#chkIncludeSharedDMS').attr('checked')){
		
		var parentType = new Array();
		var typeArray = new Array();
		
		parentType.push('dmsNew','dms');
		typeArray.push('dmsNew','dms');
		var searchTagTxt = {};
		if(flg!=undefined && flg=="tagSearch"){
			searchTagTxt = {searchTagTxt:$('#txtSearch2').val()};
		}
		$.ajax({
			url : 'getSharedDocumentCategory.json',
			data:searchTagTxt,
			dataType : 'json',
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			success : function(jArray) {
			
				gjArrUploadedDocument = jArray[0]["path"];
				//showUploadedDocumentIcon();
				gjArrTextDocument = jArray[0]["documents"];
				//showTextDocumentIcons();
				//doCreateTree(jArray[0]["category"]);
				//doCreateOrganizeFolderTree(jArray[0]["category"]);
				gFolderFilesDocumentsObj = {
						folders: jArray[0]["category"],
						textFiles: jArray[0]["documents"],
						uploadedFiles: jArray[0]["path"]
				};
				getFolderFilesDocumentsByParentId(0, undefined, true);
				
			},
			error : function() {
			}
		});
		
	}else{
		 typeArray ='dmsNew';
		 parentType = 'dmsNew';
		 $("#tdFileAndTextWindow").html('');
		 $('#documentsList').html('');
		 $("#fileList").html('');
		 createTree(categoryPath, typeArray, parentType, rootRquired);
	}
}

/**
 * April 10,2019
 * @Purpose : to create menu list on right click
 * 
 * **/
function loadMainMenu()
{
	$('#allMenu').remove();
	
	var menuBoiler='';
	menuBoiler += '<div id="allMenu"><ul>';
	menuBoiler += '<li onclick="addDocumentCategoryCheckPoint1()" id="btnAddFolder" ><a href="javascript:void(0);"><i class="fa fa-folder-o fa-lg"></i> New Folder...</a></li>';
	menuBoiler += '<li onclick="addTextDocumentCheckPoint()" id="btnAddDoc"  ><a href="javascript:void(0);"><i class="fa fa-file-o fa-lg"></i> New Document...</a></li>';
	menuBoiler += '<li onclick="uploadDocumentCheckPoint()" id="btnUploadDoc" ><a href="javascript:void(0);"><i class="fa fa-upload fa-lg"></i> Upload Document...</a></li>';
	menuBoiler += '</ul></div>';
	$('#my-AllMenu').html(menuBoiler);
	
	$("#allDataDiv").ClassyContextMenu({
		menu: 'allMenu',
		mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
		isMenu: true,
		minWidth: 120,
		maxWidth: 0,
		delay: 100, 
		keyboard: false,
		hoverIntent: true
	});
	
	if(fileIdArray!=null && fileIdArray.length<=1){
		$('#btnAddDoc').hide();
		$('#btnUploadDoc').hide();
	}
	/*setTimeout(function(){
		$(document).ClassyContextMenu("close");
		}, 10000);*/
}

function folderViewChange(src){
	if($(src).hasClass('fa-th-large')){
		$(src).removeClass('fa-th-large').addClass('fa-list').attr('title', 'List View');
	}else{
		$(src).removeClass('fa-list').addClass('fa-th-large').attr('title', 'Icon View');
	}
	
	if($('#chkIncludeSharedDMS').is(':checked')==true){
		getFolderFilesDocumentsByParentId(0, undefined, true);
	}else if($('#fileMap').val()=='/home' || $('#fileMap').val()==''){
		$('#fileMap').val('/home');
		showFileAndTextWindow();
		refreshCategoryTree(undefined, true);
	}else{
		getFileAndFolderByPath(true);
	}
}

function searchBarAndLocationToggle(flg){//flg = search
	if(flg==undefined || (flg!=undefined && flg=='search')){
		$('.searchHideShowCls').fadeIn('slow');
		$('.label .tagit').fadeIn('slow')
			.css('display','inline-block')
			.css('background','#fff');
		$('.label .tagit input[type="text"]').prop('placeholder','Search your file(s) or folder(s).');
		$('#fileMap, #fileMapLocation').hide();
	}else{
		$('.searchHideShowCls, .label .tagit, #fileMapLocation').hide();
		$('#fileMap').fadeIn('slow');
		$('#txtSearch2').tagit('removeAll');
	}
}
function LocationPathAndPathEditorToggle(flg){
	if(!$('#fileMapLocation').is(':visible') || flg!=undefined){
		$('#fileMapLocation').fadeIn('slow');
		$('#fileMap').hide();
		$('.searchHideShowCls, .label .tagit').hide();
	}else{
		$('.searchHideShowCls, .label .tagit, #fileMapLocation').hide();
		$('#fileMap').fadeIn('slow');
	}
	$('#txtSearch2').tagit('removeAll');
	
}

function folderCommonHeader(){
	return '<table class="table table-bordered tableWithoutPadding"><thead><tr><th></th><th style="width:200px">Name</th><th>Type</th><th>Size</th><th style="width:125px;">Created By</th>'
	+'<th>Edit Access</th><th>Share Status</th><th>Attachments</th><th style="width:100px;">Tags</th><th>Date Modified</th><th></th></tr></thead><tbody>';//Kiran List View Header
}
function dataTableListView(){
	setTimeout(function(){
		/*$('.tableWithoutPadding').dataTable( {
			"sDom": "<'row-fluid'<'span4'l><'span8'f>r><'row-fluid't><'row-fluid'<'span4'i><'span8'p>>",
			"oLanguage": {
				"sLengthMenu": "_MENU_ Records Per Page"
			},
			"bJQueryUI": true,
			"bPaginate" : false,
			"bProcessing": false,
			"bDeferRender": false
		} );*/
		$('.tableWithoutPadding').dataTable({
			"sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid<'span6'i><'span6'p>>",
		  "iDisplayLength" : -1,
		  "sWrapper" : "dataTables_wrapper form-inline",
		  "bPaginate" : false
		});
	},100);
}




function addDocumentCategoryAjaxToolBox(documentCategoryName, documentDescription,
		categoryType, parentCategoryType, newDocFlag) {

	/**
	* to ensure that if category has been added from outside(not from dialog
	* box) the it must be root category
	*/

	if (documentCategoryName == undefined)
		documentCategoryName = $('#documentCategoryNameTbx').val();
	if (documentDescription == undefined)
		documentDescription = $('#documentDescriptionTbx').val();
	if (categoryType == undefined)
		categoryType = getSelectedCategoryType();
	if (parentCategoryType == undefined)
		parentCategoryType = getSelectedParentCategoryType();

	categoryPath = getCategoryRetrievalPath();
	/** Will return undefined if proper path is not available */
	var prevWhileAttchFlag = false;
	if (newDocFlag == undefined) {
		if($('#fileMap').val()=='/home'){
			newDocFlag = true;
		}else{
			newDocFlag = $('#chkNewDocFlagTbx').is(':checked');
		}
		
		prevWhileAttchFlag = $('#chkPrevToAttachmentFlagTbx').is(':checked');
		if(prevWhileAttchFlag==true){
			categoryType = 'DMS';
			parentCategoryType = 'DMS';
		}
	} else {
		newDocFlag = true;
	}
	/**
	* Doesn't matter if undefined or anything because it has been taken on
	* server side by session
	* 
	*/
	var employeeId = $('#hdnDocumentPerson').val();
	var parentCatId = "null";
	var path = "";
	if (!newDocFlag) {
		parentCatId = gDMSCategoryTreeId;//$('#hdnParentCategoryIdTbx').val();
		if(parentCatId!=null){
			path = getCategoryPath(parentCatId);
			newDocFlag = false;
		}else{
			newDocFlag = true;
			parentCatId = "null";
		}
	}
	var documentTag = $('#txtDocumentTagsTbx').val();
	$.ajax({
		url : 'addDocumentCategoryAjax.json',
		data:{documentCategoryName:documentCategoryName,
			documentDescription:documentDescription,
			employeeId:employeeId,
			parentCatId: parentCatId,
			path: path,
			categoryType: categoryType,
			parentCategoryType: parentCategoryType,
			documentTag: documentTag
		},
		dataType : 'json',
		async:false,
		success : function(jArray) {
			if (jArray[0].responseFlag == '1') {
				//showSuccessMessage(jArray[0].responseText, 5000);
			} else {
				jAlert(jArray[0].responseText);
				//showErrorMessage(jArray[0].responseText, 5000);
			}
			if (newDocFlag) {
				fetchAllDocumnetsWithDMS(isAcademicFolder);
			} else {
				//fetchAllDocumnetsWithDMS();
				getFileAndFolderByPath();
			}
			
			clearToolBoxFields();
			$('.minimize_msg_box').trigger('click');
			
		},
		error : function() {

		}
	});
}

function clearToolBoxFields(){
	$('#hdnDocumentId, #hdnDocumentCategoryId').val('');
	$('.recepientCss').val('');
	$('#txtDocumentTagsTbx').tagit('removeAll');
	$('#chkPrevToAttachmentFlagTdx').prop('checked', false);
	$('#tblAttachementList').html('No Attachments!');
	$('#btnTextDocumentSave, #btnTextDocumentDelete, #btnTextDocumentReplicate, #btnTextDocumentCancel').hide();
}

/**
 * @name showAddEditTextDocumentFormToolBox()
 * @since 10th June 2019
 * 
 */
function showAddEditTextDocumentForm23(documentId, callback) {

	$('#createDocRadioKrn').prop('checked',true);
	//folderModificationSwitch();
	
	/** Seting blank to each control/fields of the addText document form */
	$('.divDocumentListWindowTitle').hide();

	$('.replicateDoc').data('docId', documentId);
	$('#btnTextDocumentReplicate').data('docId', documentId);
	$('#btnTextDocumentReplicate').click(function() {
		configureReplicateToOtherBatch(this, gEvaluationType);
	});

	if (documentId != undefined) {// If document is unsaved, Delete button has
		// to be hidden and vice-versa

		$('#btnTextDocumentDelete').show();
		$('#btnTextDocumentDelete').unbind();
		$('#btnTextDocumentDelete').click(function() {
			deleteFiles(documentId, 'text');
		});

	}
	$("#divTextDocumentFileTitle").html(
	'<h5 align="left" style="margin-top:5px;">New Text Document<button type="button" class="close badge" data-dismiss="modal">X Close</button></h5>');
	var fileSizeAllowed = AllowedFileSize.DOCUMENT_UPLOAD / (1024 * 1024);
	$('#fileSizeAllowed, .fileSizeAllowedCls').text(fileSizeAllowed);
	$('#hdnDocumentCategoryId').val(gDMSCategoryTreeId);
	//createEditor('editing_field1'); // function call to convert the textarea
	// into richtextbox
	initAttachmentBar();
	$('#btnTextDocumentCancel').bind('click', function() {
		gTextDocumentCommandFlag = 'cancel';
	});
	$('#btnTextDocumentReset').bind('click', function() {
		gTextDocumentCommandFlag = 'reset';
	});
	$('#btnTextDocumentSave').bind('click', function() {
		gTextDocumentCommandFlag = 'save';
	});
	try {
		callback();
	} catch (e) {
		// alert(e);
	}
	setTimeout(function(){
		$('.minimize_msg_box').trigger('click');
	},1500);
}

function createLightCKEditor(id)
{
	var instance = CKEDITOR.instances[id];
	//console.log(instance);
	if(instance!=undefined){
		instance.setData('');
		//CKEDITOR.remove(instance);
	}else{


		CKEDITOR.replace(id,{uiColor: '#FFFFFF',height:'20%',
			/*toolbar:[['Font','FontSize','-','scayt','Bold','Italic', 'Underline','Strike','Subscript','Superscript','RemoveFormat','-','NumberedList', 'BulletedList', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','SCAYT','scayt','Scayt','-','equation']]
			 */
			toolbar :
				[
				 { name: 'styles', items: [ 'Font', 'FontSize','-' ] },
				 { name: 'basicstyles', items : [ 'Bold','Italic','Underline','-' ] },
				 { name: 'paragraph', items : [ 'NumberedList','BulletedList','-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock' ], },
				 { name: 'editing', items : [ 'Scayt','-' ] },
				 { name: 'tools', items : [ 'Maximize','-' ] },
				 { name: 'Multimedia', items : [ 'Image','Smiley','Iframe','-' ] }
				 ]
		});
	}
}


/**
 * @name saveTextDocument()
 * @since 30th Mar 2012
 * @purpose for adding the text documents against a category
 */
function saveTextDocumentToolBox() {

	var textDocumentName = $('#txtDocumentName').val();
	var saveFlag = true;
	if (textDocumentName == undefined || textDocumentName == '') {
		textDocumentName = getDocumentTitle();
	}
	/**
	 * Check point for already save of the document. If already save no need to
	 * check duplicacy and if not check for duplicacy. 'saveFlag used for
	 * checking the call'
	 */
	if (gTextDocSaveFlag == false) {
		if (checkTextDocumentNameDuplicacy() == true)
			saveFlag = true;
		else
			saveFlag = false;
	}

	if (saveFlag == true) {
		var text = CKEDITOR.instances.editing_field1.getData();
		var docId = $('#hdnDocumentId').val();
		var categoryId = gDMSCategoryTreeId;
		var description = $('#txtDescription').val();
		$.ajax({
			url : 'saveTextDocumentAjax.json',
			data : {
				documentId : docId,
				text : text,
				description : description,
				categoryId : categoryId,
				name : textDocumentName.gemsEncode(),
				files_uploaded : ''
			},
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			dataType : 'json',
			type : 'POST',
			success : function(jArray) {
				var responseText = '';
				var text = jArray[0].responseText;
				var docId = text.split('-')[1];
				responseText = text.split('-')[0];
				if (jArray[0].responseFlag == '1') {
					$('#idattachmentbar').show();
					/**
					 * @comment empty the global variable 'files_uploaded' to
					 *          avoid dirty data
					 */
					files_uploaded = '';
					/**
					 * Putting save true false to make the system know that
					 * current document is saved
					 */
					gTextDocSaveFlag = true;
					setDocumentTitle(textDocumentName);
					$('#btnTextDocumentDelete').unbind();
					$('#btnTextDocumentDelete').click(function() {
						deleteFiles(docId, 'text');
					});
					$('#btnTextDocumentDelete').show();
					$('#hdnDocumentId').val(docId);
					getAttachmentListAjax1(docId);
					getTextFiles(categoryId);
					showSuccessMessage("Saved Successfully", 5000);
					jAlert("Saved Successfully");
					/** to save the text editor */
					// tinyMCE.triggerSave();
				} else {
					showErrorMessage(responseText, 5000);
					/**
					 * Putting save flag false to make the system know that
					 * there is no any text doc pending to be saved
					 */
					gTextDocSaveFlag = false;
				}
				/**
				 * If cancel was pressed then following script should run
				 */
				if (gTextDocumentCommandFlag == 'cancel') {
					gTextDocSaveFlag = false;
					/** to save the text editor */
					// tinyMCE.triggerSave();
					/** Removes the editor instance */
					removeDocumentEditor();
					//var nodeId = getSelected();
					var nodeId = gDMSCategoryTreeId;
					/** show the list of file in the selected category */
					showFiles(nodeId);
				}
			},
			error : function() {

			}
		});
	} else {
		jAlert('Name already exist');
	}
}


function imageViewerModal(src, fileType){
	var link = $(src).attr('clickHref');
	var imgFilesArr = ['jpg','png', 'gif', 'jpeg'];
	if(fileType != undefined && (imgFilesArr.indexOf(fileType.toLowerCase())!=-1)){
		$('#imageViewrSlides').modal('show');
		$('#imageViewrTag').attr('src', link);
		$('#imageViewrTagDownload').off('click').click(function(){
			window.location.href = link;
		});
		
	}else if(false && fileType == 'pdf'){
		var boiler = `<iframe style="width:100%;height:900px;" src="Viewer.js/index.html#../${link}&f=.pdf" allowfullscreen webkitallowfullscreen/>`;
		juno.modal({
			header:'Document Preview',
			body:boiler,
			width:'1000px',
			height: '500px'
		});
	}else{
		//window.location.href = link;
		//var _encLink = encodeURIComponent(window.location.origin+'/'+link);
		juno.documentPreview(link, fileType, true);
		/*$.documentPreview({
			url:link,
			viewer:'google'
		});*/
	}	
}

function junoDocumentOrImageViewer(docId, fileType){
	var link = (juno.label['url.download.json'].setIndexedArgs(docId, "UPLOADED", ""));
	juno.documentPreview(link, fileType);
}

function searchClickByTagName(tagName){
	if(tagName!=""){
		//$('#txtSearch2').tagit("removeAll");
		searchBarAndLocationToggle('search');
		$('#txtSearch2').tagit("createTag", tagName);
	}
}



//getDocumentByParentId
var gFolderWiseDataArrObj = new Array();
var gFolderFilesDocumentsObj = null;
function getFolderFilesDocumentsByParentId(categoryId,fname, flg, filter_value, canEditParent) {
	console.log(categoryId);
	console.log(fname);
	console.log(flg);
	console.log(filter_value);
	$('#btnAddDoc').show();
	$('#btnUploadDoc').show();
	//$('.lblIncludeDMS').hide();
	var folder_ViewId = '#subFolder';
	if($('#dynamicFolderDivId-'+categoryId).length){
		folder_ViewId = '#dynamicFolderDivId-'+categoryId;
	}else if($('.common_transaction_list_view_bind_cls:visible').length!=0){
		//folder_ViewId = '#dynamicFolderDivId-'+categoryId;
		var divId = $('.common_transaction_list_view_bind_cls:visible').parent().attr('id');
		folder_ViewId = '#'+createDynamicBlock('#'+divId, '');
	}else if($('.dynamicFolderDivId-cls:visible').length>0){
		var divId = $('.dynamicFolderDivId-cls:visible').attr('id');
		folder_ViewId = '#'+createDynamicBlock('#'+divId, '');
	}
	
	$(folder_ViewId).html('');
	$('#dms_item_details').hide();
	gDMSCategoryTreeId = categoryId;
	//var boiler = '';
	if(fname!=undefined){
		var name = unescape(fname);

		if(fileIdArray.indexOf(categoryId)==-1){
			fileNameArray.push(name);
			fileIdArray.push(categoryId);
			refreshMap();
		}
		gDMSCategoryTreeName = fname;
	}
	$('#load').show();
	$('#my-menu').html('');
	var sharedFolderTabFlg = $('#chkIncludeSharedDMS').is(':checked');

	var canEdit=false;
	var isShared=false;
	if(categoryId!=undefined && gFolderWiseDataArrObj[categoryId]!=undefined){
		if(gFolderWiseDataArrObj[categoryId].sharedStatus!=undefined && gFolderWiseDataArrObj[categoryId].sharedStatus!=0){
			isShared = true;
		}
	}
	try {
		/*getUploadedFiles(categoryId);
		getTextFiles(categoryId);*/
		
		var bindFoldersAndDocs = function(jMainOnj){ //K-I-R-A-N
			var jArray = jMainOnj.folders;
			gjArrTextDocument = jMainOnj.textFiles;
			gjArrUploadedDocument = jMainOnj.uploadedFiles ? jMainOnj.uploadedFiles:[];
			var j = jArray.length;
			var flag=8;
			var menuBoiler='';
			var boiler1='';
			var boilerList =folderCommonHeader();//Kiran List View Header
			//Folder
			if(jArray.length==0 && gjArrTextDocument.length == 0 && gjArrUploadedDocument.length == 0){
				boiler1+=`<div style="text-align: center;color: gray;margin-top: 50px;">
					<i class="fa fa-exclamation-triangle fa-4x"></i>
					<br>
					<b>This folder is empty</b>
				</div>`;
				
			}
			for ( var i = 0; i < jArray.length; i++) {
				gFolderWiseDataArrObj[jArray[i]["documentCategoryId"]] = jArray[i];
				var fullName = jArray[i]["name"];
				var name = jArray[i]["name"];
				try{ fullName = decodeURIComponent(fullName); }catch(e){}
				name = fullName.length<TRIM_FILE_NAME_LENGTH?fullName:fullName.substring(0,TRIM_FILE_NAME_LENGTH)+'...';
				var createdByEmp= jArray[i]["createdByEmp"]!=null?jArray[i]["createdByEmp"]:"";
				var dirCount = jArray[i]["childDirectoryCount"];
				var fileCount = jArray[i]["childUploadedFileCount"] + jArray[i]["childCreatedFileCount"];
				var createdByEmp = jArray[i]["createdByEmp"]!=null?jArray[i]["createdByEmp"]:"";
				var createdTimetamp= jArray[i]["createdTime"]!=null?jArray[i]["createdTime"]:"";
				var folderEditAccess = '-';
				var boolFolderCanEdit = jArray[i]["canEdit"]!=undefined?eval(jArray[i]["canEdit"]):false;
				if(sharedFolderTabFlg==false || (sharedFolderTabFlg==true && boolFolderCanEdit==true))
					folderEditAccess = 'Yes';
				
				var isFolderShared = false;
				if(isShared==false){
					if(jArray[i].sharedStatus!=undefined && jArray[i].sharedStatus!=0){
						isFolderShared = true;
					}
				}else{
					isFolderShared = true;
				}
					
				
				var folderIcon = dmsSettingsObj.FOLDER_ICON;
				if(jArray[i]["isEmpty"]==true)
					folderIcon = dmsSettingsObj.FOLDER_EMPTY_ICON;
				
				
				boiler1+=`<div id="optionDmsFolder-${jArray[i]["documentCategoryId"]}" 
					class="DMS_content_item dms_tile_view_property" 
					data-name="${fullName}" 
					data-dirCount="${dirCount}" 
					data-fileCount="${fileCount}" 
					isShared="${isShared}"
					canEdit="${canEdit}"
					data-createdByEmp="${createdByEmp}"`;
				if(fileCount==0 && dirCount==0 && $('#chkHideEmtyFolders').attr('checked')){
					boiler1+=`style="height: auto; float: left;text-align: left; display:none"`;
				}else{
					boiler1+=`style="height: auto; float: left;text-align: left; "`;
				} 
				console.log(jArray[i],"sssssssssssss")
				boiler1+=`ondblclick="getFolderFilesDocumentsByParentId(${jArray[i]["documentCategoryId"]},'${escape(fullName)}', undefined, undefined,${jArray[i].canEdit})">
					<div style="float: left;">
					<img src="${folderIcon}" class="dmsFolder" ondragstart="return false" style="width: 40px;">
					</div>
					<div style="float: left;width: 79%;">
						<p class="text-center">${name} <br/> <span style="color: gray;">Items: <b>${dirCount+fileCount}</b></span></p>
						<span class="folderTagsCls">${documentTagsBoiler(jArray[i]["tags"])}</span>
					</div>
				</div>`;
				
				//Thumbnail View
				/*boiler1+='<div id="optionDmsFolder-'+ jArray[i]["documentCategoryId"]+'" isShared="'+isFolderShared+'" canEdit="'+boolFolderCanEdit+'" data-createdByEmp="'+createdByEmp+'" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="DMS_content_item" data-name="'+jArray[i]["name"]+'" data-dirCount="'+jArray[i]["childDirectoryCount"]+'"  data-fileCount="'+jArray[i]["childCreatedFileCount"]+'" ondblclick="getFolderFilesDocumentsByParentId('+jArray[i]["documentCategoryId"]+',\''+escape(fullName)+'\')">'
				+'<img class="dmsFolder" title="'+fullName+'" src="'+folderIcon+'" ondragstart="return false">';
				boiler1+= '<p class="text-center">'+name+'</p>';
				boiler1+= '<span class="folderTagsCls" style="display:none;">'+documentTagsBoiler(jArray[i]["tags"])+'</span>';
				boiler1+='</div>';*/
				
				//List View
				boilerList+='<tr id="optionDmsFolder-'+jArray[i]["documentCategoryId"]+'" class="DMS_content_item" data-name="'+fullName+'" isShared="'+isFolderShared+'" '+
				'canEdit="'+canEdit+'" data-createdByEmp="'+createdByEmp+'" ondblclick="getFolderFilesDocumentsByParentId('+jArray[i]["documentCategoryId"]+',\''+escape(fullName)+'\',undefined,undefined,' +jArray[i].canEdit+')">';
				boilerList+='<td></td>';
				boilerList+='<td style="width:200px;"><a href="javascript:void(0);"><i class="fa fa-circle"></i> <b>'+fullName+'</b></a></td><td>Folder</td>';
				boilerList+='<td title="Directory/File Count"> '+(dirCount)+' Folder(s) & '+(fileCount)+' File(s).</td>';
				boilerList+='<td style="width:125px;" title="Created By Employee">'+(createdByEmp)+'</td>';
				boilerList+='<td title="Can Edit">'+(folderEditAccess)+'</td>';
				boilerList+='<td title="Shared">'+(isFolderShared==true?'Shared':'-')+'</td>';
				boilerList+='<td>-</td>';
				boilerList+='<td style="width:100px;">'+documentTagsBoiler(jArray[i]["tags"])+'</td>';
				boilerList+='<td>'+createdTimetamp+'</td>';
				boilerList+='<td></td>';
				boilerList+='</tr>';
				
				$('#menuFoldr-'+ jArray[i]["documentCategoryId"]).remove();
				if(jArray[i]["parentCategoryType"]!=null && (jArray[i]["parentCategoryType"]!='dms' && jArray[i]["parentCategoryType"]!='DMS'))
				{
					menuBoiler += '<div id="menuFoldr-'+ jArray[i]["documentCategoryId"] +'"><ul>';
					if($('#hdnUserRole').val()!='student'){
						if(sharedFolderTabFlg==false || (sharedFolderTabFlg==true && jArray[i]["canEdit"]==true))
							menuBoiler += '<li onclick="configureUploadedFolderSharingView('+jArray[i]["documentCategoryId"]+',\'folder\',\''+(jArray[i]["name"])+'\')"><a href="javascript:void(0);"><i class="fa fa-share fa-lg"></i> Share</a></li>';
					}
					if(!sharedFolderTabFlg)
						menuBoiler += '<li onclick="deleteOwnerCreatedFolder('+i+')"><a href="javascript:void(0);"><i class="fa fa-trash fa-lg"></i> Delete</a></li>';
					if(jArray[i]["childUploadedFileCount"]>0){
					menuBoiler += '<li onclick="downloadZipUploadedFile('+jArray[i]["documentCategoryId"]+',\''+(jArray[i]["name"])+'\')"><a href="javascript:void(0);"><i class="fa fa-file-archive-o" aria-hidden="true"></i> Download Zip</a></li>';
					}
					menuBoiler += '<li onclick="showDocumentFolderProperties(\'folder\','+i+')"><a href="javascript:void(0);"><i class="fa fa-info-circle fa-lg"></i> Properties</a></li>';
					menuBoiler += '</ul></div>';
				}
			}
			
			//Text Files
			for ( var i = 0; i < gjArrTextDocument.length; i++) {

				var fullName = gjArrTextDocument[i]["name"];
				var tags = gjArrTextDocument[i]["tags"]!=null?gjArrTextDocument[i]["tags"]:new Array();
				var createdByEmp = gjArrTextDocument[i]["createdByEmp"]!=null?gjArrTextDocument[i]["createdByEmp"]:"";
				var createdTimetamp= gjArrTextDocument[i]["createdTime"]!=null?gjArrTextDocument[i]["createdTime"]:"";
				
				var boolTextCanEdit = gjArrTextDocument[i]["canEdit"]!=undefined?eval(gjArrTextDocument[i]["canEdit"]):false;
				var textEditAccess = '-';
				if(sharedFolderTabFlg==false || (sharedFolderTabFlg==true && boolTextCanEdit==true))
					textEditAccess = 'Yes';
				
				var name = gjArrTextDocument[i]["name"];
				try{ fullName = decodeURIComponent(fullName); }catch(e){}
				name = fullName.length<TRIM_FILE_NAME_LENGTH?fullName:fullName.substring(0,TRIM_FILE_NAME_LENGTH)+'...';
				
				var iconPath = '';
				if (gjArrTextDocument[i]["hasAttachment"] != undefined && gjArrTextDocument[i]["hasAttachment"].toLowerCase() == 'yes') {
					iconPath = 'img/files/txt.png';
				} else {
					iconPath = 'img/files/txt.png';
				}
				var isTextShared = false;
				if(isShared==false){
					if(gjArrTextDocument[i].sharedStatus!=undefined && gjArrTextDocument[i].sharedStatus!=0){
						isTextShared = true;
					}
				}else{
					isTextShared = true;
				}
				
				
				
				boiler1+=`<div id="options-${gjArrTextDocument[i]["documentId"]}" 
					class="tooltiplink DMS_content_item dms_tile_view_property" 
					data-name="${fullName}" 
					style="height: auto; float: left;text-align: left;" 
					ondblclick="showText('${gjArrTextDocument[i]["documentId"]}','view')">
					<div style="float: left;">
					<img src="${iconPath}" class="dmsFolder" ondragstart="return false" style="width: 40px;">
					</div>
					<div style="float: left;width: 79%;">
						<p class="text-center">${name}</p>
						<span class="folderTagsCls">${documentTagsBoiler(gjArrTextDocument[i]["tags"])}</span>
					</div>
				</div>`;
				
				/*boiler1+='<div id="options-'+ gjArrTextDocument[i]["documentId"] + '" data-name='+fullName+' style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink DMS_content_item" id = "tdFileListIcon-text-'
				+ gjArrTextDocument[i]["documentId"]+ '" ondblclick="showText(\''+ gjArrTextDocument[i]["documentId"] + '\',\'view\')"><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false"'
				+ '"><p class="text-center">'+name+'</p>';
				boiler1+='</div>';*/
				
				boilerList+='<tr id="options-'+ gjArrTextDocument[i]["documentId"] + '" data-name='+name+' style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink DMS_content_item" id = "tdFileListIcon-text-'
				+ gjArrTextDocument[i]["documentId"]+ '" ondblclick="showText(\''+ gjArrTextDocument[i]["documentId"] + '\',\'view\')">';
				boilerList+='<td></td>';
				boilerList+='<td style="width:200px;"><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false" style="width:25px;height:25px;"> '+gjArrTextDocument[i]["name"].gemsDecode()+'</td>';//isShared canEdit hasAttachment
				boilerList+='<td>Text</td><td>-</td>';
				boilerList+='<td style="width:125px;" title="Created By Employee">'+(createdByEmp)+'</td>';
				boilerList+='<td title="Can Edit">'+(textEditAccess)+'</td>';
				boilerList+='<td title="Is Shared">'+(isTextShared==true?'Shared':'-')+'</td>';
				boilerList+='<td title="has Attahcments">'+(gjArrTextDocument[i]["hasAttachment"]!=undefined?gjArrTextDocument[i]["hasAttachment"]:"-")+'</td>';
				boilerList+='<td style="width:100px;">'+documentTagsBoiler(gjArrTextDocument[i]["tags"])+'</td>';
				boilerList+='<td>'+createdTimetamp+'</td>';
				boilerList+='<td></td>';
				boilerList+='</tr>';
				
				
				$('#menu-'+ gjArrTextDocument[i]["documentId"]).remove();
				menuBoiler += '<div id="menu-'+ gjArrTextDocument[i]["documentId"] +'"><ul>'+
				'<li onclick = "showText(\''+ gjArrTextDocument[i]["documentId"] + '\',\'view\')"><a href="javascript:void(0);"><i class="fa fa-eye fa-lg"></i>  View</a></li>';
				if($('#hdnUserRole').val()!='student'){
					if(sharedFolderTabFlg==false || (sharedFolderTabFlg==true && boolTextCanEdit==true)){
						menuBoiler += '<li onclick = "showText(\''+ gjArrTextDocument[i]["documentId"] + '\',\'edit\')"><a href="javascript:void(0);"><i class="fa fa-pencil fa-lg"></i> Edit</a></li>';
						/*menuBoiler += '<li onclick="configureCourseFileDocSharingView(\'\','+gjArrTextDocument[i]["documentId"]+')"><a href="javascript:void(0);">Share</a></li>';*/
						menuBoiler += '<li onclick="configureUploadedFolderSharingView(\''+gjArrTextDocument[i]["documentId"]+'\',\'docFile\',\''+name+'\')"><a href="javascript:void(0);"><i class="fa fa-share fa-lg"></i> Share</a></li>';
						if(!sharedFolderTabFlg)
							menuBoiler += '<li onclick="deleteOwnerCreatedTextDpcument(\''+(gjArrTextDocument[i]["documentId"])+'\')"><a href="javascript:void(0);"><i class="fa fa-trash fa-lg"></i> Delete</a></li>';
					}					
				}
				menuBoiler += '<li onclick="showDocumentFolderProperties(\'text\','+i+')"><a href="javascript:void(0);"><i class="fa fa-info-circle fa-lg"></i> Properties</a></li>';
				menuBoiler +='</ul></div>';
			}
			
			//Uploaded Files
			var downloadLink='';
			for ( var i = 0; i < gjArrUploadedDocument.length; i++) {
				
				var createdByEmp = gjArrUploadedDocument[i]["createdByEmp"]!=null?gjArrUploadedDocument[i]["createdByEmp"]:"";
				var createdTimetamp= gjArrUploadedDocument[i]["modifiedTime"]!=null?gjArrUploadedDocument[i]["modifiedTime"]:"";
				
				var boolUploadedCanEdit = gjArrUploadedDocument[i]["canEdit"]!=undefined?eval(gjArrUploadedDocument[i]["canEdit"]):false;
				var uploadedEditAccess = '-';
				if(sharedFolderTabFlg==false || (sharedFolderTabFlg==true && boolUploadedCanEdit==true)){
					uploadedEditAccess = 'Yes';
				}
	
				if(sharedFolderTabFlg && gjArrUploadedDocument[i]["canEdit"]=='false'){
					
					$('#fileDropdowMenuTopBar, #btnAddFolder, #btnAddDoc, #btnUploadDoc').hide();
				}else{
					$('#fileDropdowMenuTopBar, #btnAddFolder, #btnAddDoc, #btnUploadDoc').show();
				}

				if (gjArrUploadedDocument[i]["documentBody"] != undefined) {
					
					downloadLink = (juno.label['url.download.json'].setIndexedArgs(gjArrUploadedDocument[i]["eDocPathId"]!=undefined?gjArrUploadedDocument[i]["eDocPathId"]:gjArrUploadedDocument[i]["documentPathId"], "UPLOADED", gjArrUploadedDocument[i]["name"]));
				}
				
				var isUploadedShared = false;
				if(isShared==false){
					if(gjArrUploadedDocument[i].sharedStatus!=undefined && gjArrUploadedDocument[i].sharedStatus!=0){
						isUploadedShared = true;
					}
				}else{
					isUploadedShared = true;
				}
				var isShared3 = gjArrUploadedDocument[i].sharedStatus!=undefined&&gjArrUploadedDocument[i].sharedStatus!='0'?true:false;//$('#optionDmsFolder-'+gjArrUploadedDocument[i]["categoryId"]).attr('isShared');
				var canEdit3 = $('#optionDmsFolder-'+gjArrUploadedDocument[i]["categoryId"]).attr('canEdit');
				
				var fileType = gjArrUploadedDocument[i]["extension"].toLowerCase();
				var iconPath = gFileTypeIcon[fileType];
				
				var fullNametemp = gjArrUploadedDocument[i]["name"];
				try{ fullNametemp = decodeURIComponent(fullNametemp); }catch(e){}
				
				var temp = gjArrUploadedDocument[i]["name"];
				temp = temp.replace(/\ /g, "-");
				temp = temp.replace(/\&/g, "-");
				var name = fullNametemp.length<20?fullNametemp:fullNametemp.substring(0,20)+'...';
				
				
				
				boiler1+=`<div id="Upload-${gjArrUploadedDocument[i]["documentPathId"]}" 
					class="tooltiplink DMS_content_item dms_tile_view_property" 
					data-name="${temp}" 
					style="height: auto; float: left;text-align: left;" 
					ondblclick="imageViewerModal(this, '${fileType}')"
					clickHref="${downloadLink}"
					>
					<div style="float: left;">
					<img src="${iconPath}" class="dmsFolder" ondragstart="return false" style="width: 40px;">
					</div>
					<div style="float: left;width: 79%;">
						<p class="text-center">${name}</p>
						<span class="folderTagsCls">${documentTagsBoiler(gjArrUploadedDocument[i]["tags"])}</span>
					</div>
				</div>`;
				
				if(sharedFolderTabFlg && gjArrUploadedDocument[i]["canEdit"]=='false'){
					$('#fileDropdowMenuTopBar, #btnAddFolder, #btnAddDoc, #btnUploadDoc').hide();
				}else{
					$('#fileDropdowMenuTopBar, #btnAddFolder, #btnAddDoc, #btnUploadDoc').show();
				}
				
				/*boiler1+='<div id="Upload-'+ gjArrUploadedDocument[i]["documentPathId"] +'" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink DMS_content_item" data-name='+temp+' '+
				' ondblclick="imageViewerModal(this, \''+fileType+'\')" clickHref = "'+downloadLink+'"><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false"><p class="text-center">'+name+'</p>';
				boiler1+= '<span class="folderTagsCls" style="display:none;">'+documentTagsBoiler(gjArrUploadedDocument[i]["tags"])+'</span></div>';
				boiler1+= '<div style="text-align:center;">';
				boiler1+= '</div>';*/
				

				boilerList+='<tr id="Upload-'+ gjArrUploadedDocument[i]["documentPathId"] +'" class="tooltiplink DMS_content_item" data-name="'+temp+'" style="cursor:pointer;" ondblclick="imageViewerModal(this, \''+fileType+'\')" clickHref = "'+downloadLink+'">';
				boilerList+='<td></td>';
				boilerList+='<td style="width:200px;"><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false" style="width:25px;height:25px;"/> '+fullNametemp+'</td>';
				boilerList+='<td>'+(gjArrUploadedDocument[i]["extension"]!=undefined?gjArrUploadedDocument[i]["extension"].toUpperCase():"")+' File</td>'
				+'<td title="Directory/File Count">'+(gjArrUploadedDocument[i]["size"]!=undefined?gjArrUploadedDocument[i]["size"]:"-")+'</td>';
				boilerList+='<td style="width:125px;" title="Created By Employee">'+(createdByEmp)+'</td>';
				boilerList+='<td title="Can Edit">'+(uploadedEditAccess)+'</td>';
				boilerList+='<td title="Shared">'+(isUploadedShared==true?'Shared':'-')+'</td>';
				boilerList+='<td>-</td>';
				boilerList+='<td style="width:100px;">'+documentTagsBoiler(gjArrUploadedDocument[i]["tags"])+'</td>';
				boilerList+='<td>'+createdTimetamp+'</td>';
				boilerList+='<td></td>';
				boilerList+='</tr>';
				
				$('#Uploadmenu-'+ gjArrUploadedDocument[i]["documentPathId"]).remove();
				menuBoiler += '<div id="Uploadmenu-'+ gjArrUploadedDocument[i]["documentPathId"] +'"><ul>';
				if(fileType=='doc' || fileType=='docx' || fileType=='ppt' || fileType=='pptx' || fileType=='xls' || fileType=='xlsx')
				{
					menuBoiler+= '<li onclick="showDocumentPreview('+gjArrUploadedDocument[i]["documentPathId"]+');"><a href="javascript:void(0);"><i class="fa fa-eye fa-lg"></i> Preview</a></li></a>';
				}
				menuBoiler += '<li><a href="'+downloadLink+'" target="_blank"><i class="fa fa-download fa-lg"></i> Download</a></li>';
				
				if($('#hdnUserRole').val()!='student'){
					/*if((canEdit3=='false') || (isShared3=='true' && canEdit3=='true') || (gjArrUploadedDocument[i]["isShared"]=='true' && gjArrUploadedDocument[i]["canEdit"]=='true'))
					{*/
						/*menuBoiler+= '<li onclick="editOrRenameUploadedDocumentNameOrTag('+i+')"><a href="javascript:void(0);">Edit</a></li>';*/
						/*menuBoiler += '<li onclick="configureUploadedFileDocSharingView('+gjArrUploadedDocument[i]["documentPathId"]+',\'uploaded\',\''+name+'\',\''+gjArrUploadedDocument[i]["categoryId"]+'\')"><a href="javascript:void(0);">Share</a></li>';*/
						if(sharedFolderTabFlg==false || (sharedFolderTabFlg==true && gjArrUploadedDocument[i]["canEdit"]==true))
							menuBoiler += '<li onclick="configureUploadedFolderSharingView('+gjArrUploadedDocument[i]["documentPathId"]+',\'file\',\''+name+'\')"><a href="javascript:void(0);"><i class="fa fa-share fa-lg"></i> Share</a></li>';
						if(!sharedFolderTabFlg)
							menuBoiler+= '<li onclick="deleteDocumentFromDMS(\''+(gjArrUploadedDocument[i]["eDocPathId"]!=undefined?gjArrUploadedDocument[i]["eDocPathId"]:gjArrUploadedDocument[i]["documentPathId"])+'\')"><a href="javascript:void(0);"><i class="fa fa-trash fa-lg"></i> Delete</a></li>';
					//}
				}
			   menuBoiler += '<li onclick="showDocumentFolderProperties(\'uploaded\','+i+')"><a href="javascript:void(0);"><i class="fa fa-info-circle fa-lg"></i> Properties</a></li>';
			   menuBoiler += '</ul></div>';
			}
			
			boilerList+='</tbody></table>';
			
			if($('#folderViewChangeId').hasClass('fa-th-large')){
				$(folder_ViewId).html(boilerList);
				$('.DMS_content_item').css('float', 'inherit');
				dataTableListView();
			}else{
				$(folder_ViewId).html(boiler1);
				$('.DMS_content_item').css('float', 'left');
			}
			
			$("#tdFileAndTextWindow").hide();
			$(folder_ViewId).show();
			$('#load').hide();
			
			$('.DMS_content_item').mousemove(function(e) {
				showItemDetails(this);
				//$('.movable').css({'top': e.pageY,'left': e.pageX});
				var tp = $(this).offset().top;
				var lft = $(this).offset().left;
				$('.movable').css({'top': tp+62,'left': lft+45});
				$('#dms_item_details').show();
			}).mouseleave(function() {
				//$('#dms_item_details').hide();
			}).click(function (){
				$('.DMS_content_item').removeClass('DMS_content_item_selected');
				$(this).addClass('DMS_content_item_selected');
			});
			$('body').click(function(){
				$('#dms_item_details').hide();
			});

			
			$('#my-menu').append(menuBoiler);
			for ( var i = 0; i < jArray.length; i++) {
				/*if(jArray[i]["parentCategoryType"]!=null && (jArray[i]["parentCategoryType"]!='dms' && jArray[i]["parentCategoryType"]!='DMS'))
				{*/
					try{
						$("#optionDmsFolder-"+ jArray[i]["documentCategoryId"]).ClassyContextMenu({
							menu: 'menuFoldr-'+ jArray[i]["documentCategoryId"], // get menu by categoryId
							mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
							isMenu: true,
							minWidth: 120,
							maxWidth: 0,
							delay: 500, 
						});
					}catch(e){}
				//}
			}
			
			for ( var i = 0; i < gjArrTextDocument.length; i++)
			{
				try{
						$("#options-"+ gjArrTextDocument[i]["documentId"]).ClassyContextMenu({
							menu: 'menu-'+ gjArrTextDocument[i]["documentId"],
							mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
							isMenu: true,
							minWidth: 120,
							maxWidth: 0,
							delay: 500, 
						});
				}catch(e){}

				$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Type', 'text');
				$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Id', gjArrTextDocument[i]["documentId"]);
				$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'CreationDate', gjArrTextDocument[i]["creationDate"]);
				$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Name', gjArrTextDocument[i]["name"]);
				$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Parent', gjArrTextDocument[i]["catName"]);
				$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Description', gjArrTextDocument[i]["description"]);
				$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Type', 'text');
				$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Id', gjArrTextDocument[i]["documentId"]);
				$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'CreationDate', gjArrTextDocument[i]["creationDate"]);
				$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Name', gjArrTextDocument[i]["name"]);
				$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Parent', gjArrTextDocument[i]["name"]);
				$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Description', gjArrTextDocument[i]["description"]);

			}
			
			
			for ( var i = 0; i < gjArrUploadedDocument.length; i++) {
				try{
				$("#Upload-"+ gjArrUploadedDocument[i]["documentPathId"]).ClassyContextMenu({
					menu: 'Uploadmenu-'+ gjArrUploadedDocument[i]["documentPathId"],
					mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
					isMenu: true,
					minWidth: 120,
					maxWidth: 0,
					delay: 500, 
				});
				}catch(e){console.log(e);}
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data("Type", "uploaded");
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Id', gjArrUploadedDocument[i]["documentId"]);
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('CreationDate', gjArrUploadedDocument[i]["creationDate"]);
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Name', gjArrUploadedDocument[i]["name"]);
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Parent', gjArrUploadedDocument[i]["catName"]);
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Description', gjArrUploadedDocument[i]["description"]);
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('DocumentPath', gjArrUploadedDocument[i]["documentPath"]);
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data("Type", "uploaded");
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Id', gjArrUploadedDocument[i]["documentId"]);
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('CreationDate', gjArrUploadedDocument[i]["creationDate"]);
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Name', gjArrUploadedDocument[i]["name"]);
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Parent', gjArrUploadedDocument[i]["catName"]);
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Description', gjArrUploadedDocument[i]["description"]);
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('DocumentPath', gjArrUploadedDocument[i]["documentPath"]);
			}
			$(document).ready(function() {
				$('.commentMark').elastic();
			});
			jQuery(function() {
				jQuery('.jbar').jbar();
			});
			
			
			showZipDownloadButton();
			
		};
		
		if(gFolderFilesDocumentsObj!=null && flg!=undefined && flg==true){
			bindFoldersAndDocs(gFolderFilesDocumentsObj);
		}else{
			var fileMapTxt = undefined;
			if(flg!=undefined && flg.indexOf('Home')!=-1){
				fileMapTxt = flg;
				$('#fileMap').val(fileMapTxt);
			}
			var searchTagTxt = undefined;
			if(flg!=undefined && (flg=="tagSearch" || flg=="tagSearch-shared")){
				searchTagTxt = $('#txtSearch2').val();
			}
			if(flg!=undefined && flg=="BOOLEAN_FILTER" && filter_value!=undefined){
				searchTagTxt = filter_value;
			}
			$.ajax({
				url : 'getCategoriesUploadedAndTextFileByParentCategory.json',
				data : {categoryId:categoryId, fileMap:fileMapTxt, searchTagTxt:searchTagTxt, search_flag:flg, canEdit:canEditParent},
				type: 'POST',
				dataType : 'json',
				beforeSend : function() {startCommonAjaxSpinner();},
				complete : function() {stopCommonAjaxSpinner();},
				success : function(jMainOnj) {
					gFolderFilesDocumentsObj = jMainOnj; 
					bindFoldersAndDocs(jMainOnj);
					console.log(jMainOnj,"sd");
					if(jMainOnj.canEdit == false){
					
					$('#fileDropdowMenuTopBar, #btnAddFolder, #btnAddDoc, #btnUploadDoc').hide();	
					}
				},
				error : function(e) {

				}

			});
		}
		
	} catch (e) {

	}
	
}
function documentTagsBoiler(tagsArr){
	var tags = tagsArr!=null?tagsArr:new Array();
	var tagsBoiler = '';
	for(var tg in tags){
		tagsBoiler+=(tg!=0?', ':'')+'<a href="javascript:void(0);" onclick="searchClickByTagName(\''+tags[tg].nm+'\');"><i class="fa fa-tag"></i> '+tags[tg].nm+'</a>';	
	}
	return tagsBoiler;
}

function isValidFileName(fname){
	var rg1=/^[^\\/:\*\?"<>\|&^!/{/}:;,`]+$/; // forbidden characters \ / : * ? " < > |
	var rg2=/^\./; // cannot start with dot (.)
	var rg3=/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i; // forbidden file names
	return rg1.test(fname)&&!rg2.test(fname)&&!rg3.test(fname);
}


function removeDocumentCategoryfg() {
		var categoryId = gDMSCategoryTreeId;
		var path = getCategoryPath(categoryId);
		$.ajax({
			url : 'removeDocumentCategoryAjax.json?categoryId='
				+ categoryId + '&path=' + path,
				dataType : 'text',
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				async : false,
				success : function(response) {
					if (response == 'Deleted') {
						$('#tdDocumentFilesWindow').html("");
						showSuccessMessage(
								'Directory successfully deleted', 500000);
						var node = getParent();
						if (node) {
							/** If deleted folder is child of some folder */
							refreshFolder(node);
						} else {
							/** If deleted folder is root parent */
							node = find(categoryId);
							/** Current selected folder object */
							deleteFolder(node);
						}
					} else {
						jAlert('Deletion Failed!!');
					}

				},
				error : function() {

				}
		});
}

function editOrRenameUploadedDocumentNameOrTag(i){
	//gjArrUploadedDocument[i]["eDocPathId"]!=undefined?gjArrUploadedDocument[i]["eDocPathId"]:gjArrUploadedDocument[i]["documentPathId"]
	if(gFolderFilesDocumentsObj==null){
		jArray("Something went wrong! Please try again!");
		return;
	}
	var tmpjArrUploadedDocument = gFolderFilesDocumentsObj.uploadedFiles;

	var fullName = tmpjArrUploadedDocument[i]["name"];
	try{ fullName = decodeURIComponent(fullName); }catch(e){}
	
	var boiler = '<table class="table table-bordered"><tr>'
	+ '<th>Rename File</th>'
	+ '<td><input type="text" id="textRenameFileInput" value="'+fullName+'"/></td>' 
	+ '</tr>'	
	+ '<th>Add tags</th>'
	+ '<td><input type="text" id="textFileTagsInputEdit" value=""/></td>' 
	+ '</tr>' + '</table>';
	$('#gemsCommonDialogModal .modal-header h3').text("Edit Uploaded Document");
	$('#gemsCommonDialogModal .modal-body').html(boiler);
	$('#gemsCommonDialogModal .modal-footer').html('<input onclick="updateEditedTagsOrRename(\'uploaded\','+i+')" class="btn btn-success btn-mini" value="Update" type="button"><input class="btn btn-inverse btn-mini" data-dismiss="modal" value="Close" type="button">');
	
	$('#gemsCommonDialogModal').modal('show');
	
	$('#textFileTagsInputEdit').tagit();
    $('#textFileTagsInputEdit').tagit({//K-i-r-a-n
    	caseSensitive:false,
    	tagLimit:10,
    	availableTags: ArrayTags
    });
    
    var tags = tmpjArrUploadedDocument[i]["tags"]!=null?tmpjArrUploadedDocument[i]["tags"]:new Array();
	var tagsBoiler = '';
	for(var tg in tags){
		$('#textFileTagsInputEdit').tagit("createTag", tags[tg].nm);//K-i-r-a-n
	}
	
	
}


function updateEditedTagsOrRename(type, i){
	jConfirm('Are you sure? If you have shared some file(s) from folder then they will be removed from shared content!', 'Confirmation Dialog', function(response) {
		if (response) {
			var jObjUploadedDocument = null;

			var docId = 0;
			if(type=='folder'){
				if(fileNameArray.length==1 && gCreateTreeArr!=undefined){
					jObjUploadedDocument = gCreateTreeArr[i];
				}else{
					jObjUploadedDocument = gFolderFilesDocumentsObj.folders[i];
				}
				docId = jObjUploadedDocument.documentCategoryId;
			}else if(type=='text'){
				jObjUploadedDocument = gFolderFilesDocumentsObj.textFiles[i];
				docId = jObjUploadedDocument["eDocId"]!=undefined?jObjUploadedDocument["eDocId"]:jObjUploadedDocument["documentId"];
			}else{
				jObjUploadedDocument = gFolderFilesDocumentsObj.uploadedFiles[i];
				docId = jObjUploadedDocument["eDocPathId"]!=undefined?jObjUploadedDocument["eDocPathId"]:jObjUploadedDocument["documentPathId"];
			}
			var renameDocNameTxt = $.trim($('#textRenameFileInput').val());
			var tagsNames = $('#textFileTagsInputEdit').val();
			var docFolderDesc = $('#prop-descriptionTxt').val();
			
			if(renameDocNameTxt!='' && !isValidFileName(renameDocNameTxt)){
				jAlert("Please enter valid file name!");
				return;
			}
			var fullName = jObjUploadedDocument["name"];
			try{ fullName = decodeURIComponent(fullName); }catch(e){}

			$.ajax({
				url : 'updateUploadDocumentNameOrTags.json',
				data : {
					d__docId : docId,
					rnmDocName:(renameDocNameTxt==fullName?undefined:renameDocNameTxt),
					tags:tagsNames,
					type:type,
					desc: docFolderDesc
				},
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				type : 'POST',
				success : function(txt) {
					$('#gemsCommonDialogModal').modal('hide');
					jAlert(txt);
					refreshUplodedFiles();
				}
			});
		}
	});
}

function showDocumentFolderProperties(type,i){
	var docId = 0;
	var shareType = 'docFile';
	if(type=='uploaded'){
		shareType = 'file';
		var jObjUploadedDocument = gFolderFilesDocumentsObj.uploadedFiles[i];
		
		docId = jObjUploadedDocument.documentPathId;
		var fullName = jObjUploadedDocument["name"];
		try{ fullName = decodeURIComponent(fullName); }catch(e){}
		
		var fileType = jObjUploadedDocument["extension"].toLowerCase();
		var iconPath = gFileTypeIcon[fileType];
		var size = jObjUploadedDocument["size"];
		var folderName = $('#fileMap').val();
		try{
			folderName = folderName.substring(folderName.lastIndexOf('/'), folderName.length);
		}catch(e){}
		var createdByEmp = jObjUploadedDocument["createdByEmp"]!=null?jObjUploadedDocument["createdByEmp"]:"";
		var createdTimetamp= jObjUploadedDocument["modifiedTime"]!=null?jObjUploadedDocument["modifiedTime"]:"";
		var docDescription= jObjUploadedDocument["description"]!=null?jObjUploadedDocument["description"]:"";
		
		
		var boiler = '<div id="tabs" class="tabbable tabs">'
		+'<ul class="nav nav-pills">'
		+'<li class="active"><a href="#prop-tabs-1" data-toggle="tab">Basic</a></li>'
		//+'<li><a href="#prop-tabs-2" data-toggle="tab">Permission</a></li>'
		//+'<li><a href="#prop-tabs-3" data-toggle="tab">Open With</a></li>'
		+'<li><a href="#prop-tabs-4" data-toggle="tab">Shared With</a></li>'
		+'<li><a href="#prop-tabs-5" data-toggle="tab">Notes</a></li>'
		+'</ul>'
		+'<div class="tab-content">'
		
			+'<div id="prop-tabs-1" class="tab-pane active">'
			+ '<img src="'+iconPath+'" style="width:50px;height:50px;display:inline;"/>'
			+ '<table style="display: inline-table;width: 80%;margin-left: 25px;">'
			+ '<tr><td>Name:</td><td><input type="text" id="textRenameFileInput" value="'+fullName+'"/></td></tr>'
			+ '<tr><td>Type:</td><td>'+fileType.toUpperCase()+'</td></tr>'
			+ '<tr><td>Size: <br/><br/></td><td>'+size+' <br/><br/></td></tr>'
			+ '<tr><td>Location:</td><td>'+$('#fileMap').val()+'</td></tr>'
			+ '<tr><td>Folder: <br/><br/></td><td>'+folderName+' <br/><br/></td></tr>'
			+ '<tr><td>Owner:</td><td>'+createdByEmp+'</td></tr>'
			+ '<tr><td>Modified:<br/><br/></td><td>'+createdTimetamp+'<br/><br/></td></tr>'
			+ '<tr><td>Tags:</td><td><input type="text" id="textFileTagsInputEdit" value=""/></td></tr>'
			+ '</table>'
			+ '</div>'
			
			+'<div id="prop-tabs-2" class="tab-pane">'
			
			+ '</div>'
			
			
			+'<div id="prop-tabs-3" class="tab-pane">'
			
			+ '</div>'
			
			+'<div id="prop-tabs-4" class="tab-pane">'
			+'<div id="propertiesSharedWithMeTab"></div>'
			+ '</div>'
			
			+'<div id="prop-tabs-5" class="tab-pane">'
			+'<textarea id="prop-descriptionTxt">'+docDescription+'</textarea>'
			+ '</div>'
		+ '</div>'
		+ '</div>';
		$('#gemsCommonDialogModal .modal-header h3').text(fullName+" Properties");
		$('#gemsCommonDialogModal .modal-body').html(boiler);
		if($('#hdnUserRole').val()!='student' && $('#chkIncludeSharedDMS').is(':checked')!=true){
			$('#gemsCommonDialogModal .modal-footer').html('<input onclick="updateEditedTagsOrRename(\'uploaded\','+i+')" class="btn btn-success btn-mini" value="Update" type="button"><input class="btn btn-inverse btn-mini" data-dismiss="modal" value="Close" type="button">');
		}
		$('#textFileTagsInputEdit').tagit();
	    $('#textFileTagsInputEdit').tagit({//K-i-r-a-n
	    	caseSensitive:false,
	    	tagLimit:10,
	    	availableTags: ArrayTags
	    });
	    
	    var tags = jObjUploadedDocument["tags"]!=null?jObjUploadedDocument["tags"]:new Array();
		var tagsBoiler = '';
		for(var tg in tags){
			$('#textFileTagsInputEdit').tagit("createTag", tags[tg].nm);//K-i-r-a-n
		}
		$('#gemsCommonDialogModal').modal('show');
	}else if(type=='text'){
		/*var jArray = jMainOnj.folders;*/
		shareType = 'docFile';
		
		var jObjTextDocument = gFolderFilesDocumentsObj.textFiles[i];
		docId = jObjTextDocument.documentId;
		
		var fullName = jObjTextDocument["name"];
		try{ fullName = decodeURIComponent(fullName); }catch(e){}
		
		var fileType = 'txt';
		var iconPath = gFileTypeIcon[fileType];
		var size = jObjTextDocument["size"];
		var folderName = $('#fileMap').val();
		try{
			folderName = folderName.substring(folderName.lastIndexOf('/'), folderName.length);
		}catch(e){}
		var createdByEmp = jObjTextDocument["createdByEmp"]!=null?jObjTextDocument["createdByEmp"]:"";
		var createdTimetamp= jObjTextDocument["createdTime"]!=null?jObjTextDocument["createdTime"]:"";
		var docDescription= jObjTextDocument["description"]!=null?jObjTextDocument["description"]:"";
		var attachsLen = jObjTextDocument.attachs!=undefined?jObjTextDocument.attachs.length:0;
		
		var boiler = '<div id="tabs" class="tabbable tabs">'
		+'<ul class="nav nav-pills">'
		+'<li class="active"><a href="#prop-tabs-1" data-toggle="tab">Basic</a></li>'
		//+'<li><a href="#prop-tabs-2" data-toggle="tab">Permission</a></li>'
		//+'<li><a href="#prop-tabs-3" data-toggle="tab">Open With</a></li>'
		+'<li><a href="#prop-tabs-4" data-toggle="tab">Shared With</a></li>'
		+'<li><a href="#prop-tabs-5" data-toggle="tab">Notes</a></li>'
		+'</ul>'
		+'<div class="tab-content">'
		
			+'<div id="prop-tabs-1" class="tab-pane active">'
			+ '<img src="'+iconPath+'" style="width:50px;height:50px;display:inline;"/>'
			+ '<table style="display: inline-table;width: 80%;margin-left: 25px;">'
			+ '<tr><td>Name:</td><td><input type="text" id="textRenameFileInput" value="'+fullName+'"/></td></tr>'
			+ '<tr><td>Type:</td><td>'+fileType.toUpperCase()+'</td></tr>'
			+ '<tr><td>Attachment(s):</td><td>'+attachsLen+'</td></tr>'
			+ '<tr><td>Size: <br/><br/></td><td>'+size+'<br/><br/></td></tr>'
			+ '<tr><td>Location:</td><td>'+$('#fileMap').val()+'</td></tr>'
			+ '<tr><td>Folder: <br/><br/></td><td>'+folderName+' <br/><br/></td></tr>'
			+ '<tr><td>Owner:</td><td>'+createdByEmp+'</td></tr>'
			+ '<tr><td>Modified:<br/><br/></td><td>'+createdTimetamp+'<br/><br/></td></tr>'
			+ '<tr><td>Tags:</td><td><input type="text" id="textFileTagsInputEdit" value=""/></td></tr>'
			+ '</table>'
			+ '</div>'
			
			+'<div id="prop-tabs-2" class="tab-pane">'
			
			+ '</div>'
			
			
			+'<div id="prop-tabs-3" class="tab-pane">'
			
			+ '</div>'
			
			+'<div id="prop-tabs-4" class="tab-pane">'
			+'<div id="propertiesSharedWithMeTab"></div>'
			+ '</div>'
			
			+'<div id="prop-tabs-5" class="tab-pane">'
			+'<textarea id="prop-descriptionTxt">'+docDescription+'</textarea>'
			+ '</div>'
		+ '</div>'
		+ '</div>';
		$('#gemsCommonDialogModal .modal-header h3').text(fullName+" Properties");
		$('#gemsCommonDialogModal .modal-body').html(boiler);
		if($('#hdnUserRole').val()!='student' && $('#chkIncludeSharedDMS').is(':checked')!=true){
			$('#gemsCommonDialogModal .modal-footer').html('<input onclick="updateEditedTagsOrRename(\'text\','+i+')" class="btn btn-success btn-mini" value="Update" type="button"><input class="btn btn-inverse btn-mini" data-dismiss="modal" value="Close" type="button">');
		}
		$('#textFileTagsInputEdit').tagit();
	    $('#textFileTagsInputEdit').tagit({//K-i-r-a-n
	    	caseSensitive:false,
	    	tagLimit:10,
	    	availableTags: ArrayTags
	    });
	    
	    var tags = jObjTextDocument["tags"]!=null?jObjTextDocument["tags"]:new Array();
		var tagsBoiler = '';
		for(var tg in tags){
			$('#textFileTagsInputEdit').tagit("createTag", tags[tg].nm);//K-i-r-a-n
		}
		$('#gemsCommonDialogModal').modal('show');
	}else{
		shareType = 'folder';
		var jObjFolders = null;
		
		if(fileNameArray.length==1 && gCreateTreeArr!=undefined){
			jObjFolders = gCreateTreeArr[i];
		}else{
			jObjFolders = gFolderFilesDocumentsObj.folders[i];
		}
		docId = jObjFolders.documentCategoryId;
		
		var dirCount = jObjFolders["childDirectoryCount"];
		var fileCount = jObjFolders["childUploadedFileCount"] + jObjFolders["childCreatedFileCount"];
		
		var fullName = jObjFolders["name"];
		try{ fullName = decodeURIComponent(fullName); }catch(e){}
		
		var fileType = 'txt';
		var iconPath = gFileTypeIcon[fileType];
		var size = dirCount+' Folder(s) & '+fileCount+' File(s)';
		var folderName = $('#fileMap').val();
		try{
			folderName = folderName.substring(folderName.lastIndexOf('/'), folderName.length);
		}catch(e){}
		var createdByEmp = jObjFolders["createdByEmp"]!=null?jObjFolders["createdByEmp"]:"";
		var createdTimetamp= jObjFolders["createdTime"]!=null?jObjFolders["createdTime"]:"";
		var docDescription= jObjFolders["description"]!=null?jObjFolders["description"]:"";
		
		var boiler = '<div id="tabs" class="tabbable tabs">'
		+'<ul class="nav nav-pills">'
		+'<li class="active"><a href="#prop-tabs-1" data-toggle="tab">Basic</a></li>'
		//+'<li><a href="#prop-tabs-2" data-toggle="tab">Permission</a></li>'
		//+'<li><a href="#prop-tabs-3" data-toggle="tab">Open With</a></li>'
		+'<li><a href="#prop-tabs-4" data-toggle="tab">Shared With</a></li>'
		+'<li><a href="#prop-tabs-5" data-toggle="tab">Notes</a></li>'
		+'</ul>'
		+'<div class="tab-content">'
		
			+'<div id="prop-tabs-1" class="tab-pane active">'
			+ '<img src="'+iconPath+'" style="width:50px;height:50px;display:inline;"/>'
			+ '<table style="display: inline-table;width: 80%;margin-left: 25px;">'
			+ '<tr><td>Name:</td><td><input type="text" id="textRenameFileInput" value="'+fullName+'"/></td></tr>'
			+ '<tr><td>Type:</td><td>'+fileType.toUpperCase()+'</td></tr>'
			+ '<tr><td>Size: <br/><br/></td><td>'+size+'<br/><br/></td></tr>'
			+ '<tr><td>Location:</td><td>'+$('#fileMap').val()+'</td></tr>'
			+ '<tr><td>Folder: <br/><br/></td><td>'+folderName+' <br/><br/></td></tr>'
			+ '<tr><td>Owner:</td><td>'+createdByEmp+'</td></tr>'
			+ '<tr><td>Modified:<br/><br/></td><td>'+createdTimetamp+'<br/><br/></td></tr>'
			+ '<tr><td>Tags:</td><td><input type="text" id="textFileTagsInputEdit" value=""/></td></tr>'
			+ '</table>'
			+ '</div>'
			
			+'<div id="prop-tabs-2" class="tab-pane">'
			
			+ '</div>'
			
			
			+'<div id="prop-tabs-3" class="tab-pane">'
			
			+ '</div>'
			
			+'<div id="prop-tabs-4" class="tab-pane">'
			+'<div id="propertiesSharedWithMeTab"></div>'
			+ '</div>'
			
			+'<div id="prop-tabs-5" class="tab-pane">'
			+'<textarea id="prop-descriptionTxt">'+docDescription+'</textarea>'
			+ '</div>'
		+ '</div>'
		+ '</div>';
		$('#gemsCommonDialogModal .modal-header h3').text(fullName+" Properties");
		$('#gemsCommonDialogModal .modal-body').html(boiler);
		if($('#hdnUserRole').val()!='student' && $('#chkIncludeSharedDMS').is(':checked')!=true){
			$('#gemsCommonDialogModal .modal-footer').html('<input onclick="updateEditedTagsOrRename(\'folder\','+i+')" class="btn btn-success btn-mini" value="Update" type="button"><input class="btn btn-inverse btn-mini" data-dismiss="modal" value="Close" type="button">');
		}
		$('#textFileTagsInputEdit').tagit();
	    $('#textFileTagsInputEdit').tagit({//K-i-r-a-n
	    	caseSensitive:false,
	    	tagLimit:10,
	    	availableTags: ArrayTags
	    });
	    
	    var tags = jObjFolders["tags"]!=null?jObjFolders["tags"]:new Array();
		var tagsBoiler = '';
		for(var tg in tags){
			$('#textFileTagsInputEdit').tagit("createTag", tags[tg].nm);//K-i-r-a-n
		}
		$('#gemsCommonDialogModal').modal('show');
	}
	setTimeout(function(){
		$.ajax({
			url:'getAllSharedWithUserData.json',
			dataType:'json',
			type:'POST',
			data:{type:shareType,
				documentIds:docId+''
			},
			success:function(jArray){
				if(jArray.length>0)
				{
					var boiler='<table class="table table-bordered"><tr><th colspan="3">Shared with user list</th></tr>';
					boiler+='<tr><th>Sr.No.</th><th>Name</th><th>View/Write</th></tr>';
					for(var i=0; i<jArray.length;i++)
					{
						boiler+='<tr><td>'+(i+1)+'</td><td>'+jArray[i]["userName"]+'</td>';
						if(jArray[i]["canEdit"]==true || jArray[i]["canEdit"]=='true')
							boiler+='<td>Write</td>';
						else
							boiler+='<td>View</td>';
						boiler+='</tr>';
					}
					boiler+='</table>';
					$('#propertiesSharedWithMeTab').html(boiler);
				}
			},
			error:function(){
			}
		});
	},1000);
}

function showZipDownloadButton(flg){
	var folderArr = new Array();
	var uploadedArr = new Array();
	var txtArr = new Array();
	if(flg==undefined){
		$('.multiSelectDMSFileCls').off('click').click(function(){
			showZipDownloadButton(1);
		});
	}
	$('.multiSelectDMSFileCls:visible:checked').each(function(){
		if($(this).attr('data-file-type')=='folder'){
			var fIndx = $(this).val();
			var jObjFolders = null;
			try{
				if(fileNameArray.length==1 && gCreateTreeArr!=undefined){
					jObjFolders = gCreateTreeArr[fIndx];
				}else{
					jObjFolders = gFolderFilesDocumentsObj.folders[fIndx];
				}
				folderArr.push(jObjFolders.documentCategoryId);
			}catch(e){}
		}
		if($(this).attr('data-file-type')=='uploaded'){
			try{
				var fIndx = $(this).val();
				var jObjUploadedDocument = gFolderFilesDocumentsObj.uploadedFiles[fIndx];
				uploadedArr.push(jObjUploadedDocument.documentPathId);
			}catch(e){}
		}
		if($(this).attr('data-file-type')=='text'){
			try{
				var fIndx = $(this).val();
				var jObjTextDocument = gFolderFilesDocumentsObj.textFiles[fIndx];
				txtArr.push(jObjTextDocument.documentId);
			}catch(e){}
		}
	});
	if(folderArr.length>0 || uploadedArr.length>0 || txtArr.length>0){
		$('#downloadZipFileBtn, #shareMultipleFileBtn, #deleteMultipleFileBtn').show();
	}else{
		$('#downloadZipFileBtn, #shareMultipleFileBtn, #deleteMultipleFileBtn').hide();
	}
	return {folders:folderArr, uploads:uploadedArr, texts:txtArr};
}

function deleteOwnerCreatedFolder(i){
	jConfirm('Are you sure? Do you want to delete this folder? If you have shared some file(s) from folder then they will be removed from shared content!', 'Confirmation Dialog', function(response) {
		if (response) {

			var jObjFolders = null;
			
			if(fileNameArray.length==1 && gCreateTreeArr!=undefined){
				jObjFolders = gCreateTreeArr[i];
			}else{
				jObjFolders = gFolderFilesDocumentsObj.folders[i];
			}
			
			var docId = jObjFolders.documentCategoryId;
			$.ajax({
				url : 'deleteAuthFolderUploadedFileDocFromDMS.json',
				data : {
					docCatIds : docId
				},
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				type : 'POST',
				success : function(txt) {
					jAlert(txt);
					refreshUplodedFiles();
				}
			});
		}
	});
}


function multipleFileUploadedFolderSharingView()
{
	var flag = true;

	var allDocObjArr = showZipDownloadButton(1);
	if(allDocObjArr.folders.length>0 || allDocObjArr.uploads.length>0 || allDocObjArr.texts.length>0){
		flag = true;
	}else{
		flag = false;
	}
	
	if(flag)
	{
		var boiler ='<div id="sharingDetails"></div><div style="width:100%;">'+
			'<fieldset><legend><b>File/Folder Access</b></legend>'+
			'<input type="radio" id="viewChoice" name="readWriteChoice" checked="checked" value="read">&nbsp;<b>Read Access</b>&nbsp;&nbsp;&nbsp;&nbsp;'+
			'<input type="radio" id="editChoice" name="readWriteChoice" value="write">&nbsp;<b>Read and write Access</b>'+
			'<table class="table table-condenced table-bordered">'+
			'<tr><td style="width:100px;vertical-align: middle;">Start Date and Time :</td><td style="width: 150px;"><input type="text" id="dms_startDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_startTime" placeholder="Start Time" style="width:70px;" readonly></td><td style="width:100px;vertical-align: middle;">End Date and Time :</td><td style="width: 150px;"><input type="text" id="dms_endDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_endTime" style="width:70px;" placeholder="End Time" readonly></td></tr>'+
			'</table>'+
			'</fieldset></div>'+
			'<fieldset><legend><b>Share with</b></legend>'+
			'<div style="width:100%;">'+
			'<input id="folderSharingTo" style="width:400px; " placeholder="Share with..." type="text"/>'+
			'</div></fieldset>';
		$('#dmsFolderSharingBody').html(boiler);

		$('#dmsFolderSharingDialogHeader').html('Document sharing');
		
		$("#dms_startDate").datepicker({
			dateFormat:"M dd,yy",
			changeMonth : true,
			changeYear : true,
			minDate :new Date(),
			onSelect:function(date){
				$("#dms_endDate").datepicker("option","minDate", date);

			}
		});
		$("#dms_endDate" ).datepicker({
			dateFormat:"M dd,yy",
			changeMonth : true,
			changeYear : true,
			minDate :new Date(),
			onSelect: function(date){
			}
		});

		$('#dms_startTime').timepicker({
			showPeriod: true,
			showLeadingZero: true,
		});

		$('#dms_endTime').timepicker({
			showPeriod: true,
			showLeadingZero: true,
		});
		boiler =
			'<input type="button" id="post-Folder-Sharing" value="Post" class="btn btn-primary btn-mini" >'+
			'<input type="button" class="btn btn-danger btn-mini" value="Close" data-dismiss="modal">';
		$('#dmsFolderSharingFooter').html(boiler);

		$('#dmsFolderSharingDialog').modal('show').css({
			width:'800px',
			'margin-left': function () {
				return -($(this).width() / 2);
			}
		});
		
		$('.token-input-remove-searchableById-facebook-folderSharingTo').remove();
		if(gRoasterIdArray!=null && gRoasterIdArray.length>0)
		{
			$('#folderSharingTo').tokenInput("populateAllforEmployeePost.json",{
				theme: "facebook",
				resultsLimit: 10,
				placeholder: 'To',
				propertyToSearch: "name",
				//abortPrevCall:true,
				resultsFormatter: function(item){ return "<li><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" +
					"<div style='display: inline-block; padding-left: 10px;'><div class='full_name'>" + item.name +
					"</div><div class='email'>" + item.Desc + "</div></div></li>";},
					tokenFormatter: function(item) { return "<li><p><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" + item.name + "</p></li>";}
			});
		}else if(gBatchSemCapId!=null && gBatchSemCapId.length>0)
		{
			$('#folderSharingTo').tokenInput("populateAllforStudentPost.json",{
				theme: "facebook",
				resultsLimit: 10,
				placeholder: 'To',
				propertyToSearch: "name",
				//abortPrevCall:true,
				resultsFormatter: function(item){ return "<li><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" +
					"<div style='display: inline-block; padding-left: 10px;'><div class='full_name'>" + item.name +
					"</div><div class='email'>" + item.Desc + "</div></div></li>";},
					tokenFormatter: function(item) { return "<li><p><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" + item.name + "</p></li>";}
			});
		}

		$('#post-Folder-Sharing').click(function(){
			postDocumentSharingForMultiple();
		});
		
	}
}

function postDocumentSharingForMultiple()
{
	var allDocObjArr = showZipDownloadButton(1);
	if(allDocObjArr.folders.length>0 || allDocObjArr.uploads.length>0 || allDocObjArr.texts.length>0){
		flag = true;
	}else{
		flag = false;
	}
	if(flag == false){
		return false;
	}
	
	var alumniTextPost='';
	var alumUserIds='';
	var selfPostFlag=false;
	var canView=true;
	var canEdit=false;
	if($('input[name="readWriteChoice"]:checked').val()=='write')
		canEdit=true;

	if($('#folderSharingTo').val()!='' && $('#folderSharingTo').val()!=undefined){
		alumUserIds=$('#folderSharingTo').val();
		$('#folderSharingTo').focus();
		selfPostFlag=true;
	}else{
		selfPostFlag=false;
	} 
	var startDt = $('#dms_startDate').val();
	var endDt = $('#dms_endDate').val();
	var startTime = $('#dms_startTime').val();
	var endTime = $('#dms_endTime').val();
	if(selfPostFlag){

		if(allDocObjArr.folders.length>0){
			$.ajax({
				url:'addDocumentFolderSharing.json',
				dataType:'text',
				type:'POST',
				data:{alumUserIds:alumUserIds,alumniTextPost:alumniTextPost,canEdit:canEdit,canView:canView,type:"folder",
					documentIds:allDocObjArr.folders.toString(),
					startDate: startDt,
					endDate: endDt,
					startTime: startTime,
					endTime: endTime},
					async:false,
					beforeSend: function() {
						startCommonAjaxSpinner();
					},
					complete: function() {
						stopCommonAjaxSpinner();
					},
					success:function(messgae){
						
					},
					error:function(){
					}
			});
		}
		if(allDocObjArr.uploads.length>0){
			$.ajax({
				url:'addDocumentFolderSharing.json',
				dataType:'text',
				type:'POST',
				data:{alumUserIds:alumUserIds,alumniTextPost:alumniTextPost,canEdit:canEdit,canView:canView,type:"file",
					documentIds:allDocObjArr.uploads.toString(),
					startDate: startDt,
					endDate: endDt,
					startTime: startTime,
					endTime: endTime},
					async:false,
					beforeSend: function() {
						startCommonAjaxSpinner();
					},
					complete: function() {
						stopCommonAjaxSpinner();
					},
					success:function(messgae){
						
					},
					error:function(){
					}
			});
		}
		if(allDocObjArr.texts.length>0){
			$.ajax({
				url:'addDocumentFolderSharing.json',
				dataType:'text',
				type:'POST',
				data:{alumUserIds:alumUserIds,alumniTextPost:alumniTextPost,canEdit:canEdit,canView:canView,type:"docFile",
					documentIds:allDocObjArr.texts.toString(),
					startDate: startDt,
					endDate: endDt,
					startTime: startTime,
					endTime: endTime},
					async:false,
					beforeSend: function() {
						startCommonAjaxSpinner();
					},
					complete: function() {
						stopCommonAjaxSpinner();
					},
					success:function(messgae){
						
					},
					error:function(){
					}
			});
		}
		
		setTimeout(function(){
			$('#folderSharingTo').tokenInput("clear");
			$("#folderSharingTo").val("");
			$("#folderSharingTo").focus();
			$('#dmsFolderSharingDialog').modal('hide');
			
			$('.token-input-remove-searchableById-facebook-folderSharingTo').remove();
			refreshUplodedFiles();
			jAlert('Document shared successfully','success');
		},2000);
		
	}

}


function multipleDeleteOwnerCreatedFolderFileAndDoc(){
	
	jConfirm('Are you sure? Do you want to delete this folder? If you have shared some file(s) from folder then they will be removed from shared content!', 'Confirmation Dialog', function(response) {
		if (response) {

			var allDocObjArr = showZipDownloadButton(1);
			if(allDocObjArr.folders.length>0 || allDocObjArr.uploads.length>0 || allDocObjArr.texts.length>0){
				flag = true;
			}else{
				flag = false;
			}
			if(flag == false){
				jAlert('Please select atleast one record!')
				return false;
			}
			
			$.ajax({
				url : 'deleteAuthFolderUploadedFileDocFromDMS.json',
				data : {
					docCatIds : allDocObjArr.folders.toString(),
					docIds: allDocObjArr.texts.toString(),
					docPathIds: allDocObjArr.uploads.toString()
				},
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				type : 'POST',
				success : function(txt) {
					jAlert(txt);
					refreshUplodedFiles();
				}
			});
		}
	});
}

function deleteOwnerCreatedTextDpcument(docId){
	
	jConfirm('Are you sure? Do you want to delete this folder? If you have shared some file(s) from folder then they will be removed from shared content!', 'Confirmation Dialog', function(response) {
		if (response) {
			$.ajax({
				url : 'deleteAuthFolderUploadedFileDocFromDMS.json',
				data : {
					docIds: docId,
				},
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				type : 'POST',
				success : function(txt) {
					jAlert(txt);
					refreshUplodedFiles();
				}
			});
		}
	});
}

function remmoveSharedDocumentUserId(id){
	jConfirm('Are you sure? This File Or Folder not visible to User after remove!', 'Confirmation Dialog', function(response) {
		if (response) {
			$.ajax({
				url : 'removeSharedDocFOlderByUserData.json',
				data : {
					thredId: id,
				},
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				type : 'POST',
				success : function(txt) {
					$('#dmsFolderSharingDialog').modal('hide');
					jAlert(txt);
				}
			});
		}
	});
}

function getPublicCreatedByFolderEmpWithDocumentCount(){
	
	$.ajax({
		url:'getPublicCreatedByFolderEmpWithDocumentCount.json',
		dataType:'json',
		type:'GET',
		beforeSend: function() {
			startCommonAjaxSpinner();
		},
		complete: function() {
			stopCommonAjaxSpinner();
		},
		success:function(json){
			var boiler = '';
			json.forEach(function(jObj, i){
				boiler+=`<tr><td class="gems_integer">${(i+1)}</td><td>${jObj.f_name} ${jObj.l_name}</td>
					<td>
						<a href="javascript:void(0)" onclick="createTree('AuthorWiseCats','${jObj.docCatIds}')">
						[ ${jObj.docCount} ]
						</a>
					</td>
				</tr>`;
			});
			$("#subFolder").html(`<span class="btn btn-inverse btn-mini pull-right" onclick="$('#tdFileAndTextWindow').show();$('#subFolder').hide();">Back</span>
			<table class="table table-bordered">
			<thead><tr><th>Sr.No.</th><th>Author Name</th><th>Documents</th></tr></thead>
			${boiler}
			</table>`);
			
			$("#tdFileAndTextWindow").hide();
			$("#subFolder").show();
		}
	});
}


function initializeFilters(){
    //Initialize the show filters link
    $('a[href="display-filters"]').click(function(){
        var filtersForm = $('form#aspect_discovery_SimpleSearch_div_search-filters');
        filtersForm.show();
        filtersForm.css('visibility', 'visible');
        $(this).hide();
        return false;
    });

    $('[name^="add-filter_"]').click(function(){
        addFilterRow();

        //Disable "normal" button actions
        return false;
    });
    $('[name^=remove-filter_]').click(function(){
        removeFilterRow($(this));
        return false;
    });
    //Disable the enter key !
    $('input[name^=filter_][type=text]').keypress(function(event){
        if(event.which == 13){
            //Entered pressed, do NOT submit the form, add a new filter instead !
            addFilterRow();
            event.preventDefault();
        }
    });

}

function removeFilterRow(button){
    var parentRow = button.parents('tr:first');

    //Check if we are removing a new filter AND our last new filter at that, if so removes values instead of the row
    if(parentRow.is('[id^="aspect_discovery_SimpleSearch_row_filter-new-"]')
        && parentRow.parents('table:first').find('tr[id^="aspect_discovery_SimpleSearch_row_filter-new-"]').length == 1){
        //Hide ourselves & clear our values!
        parentRow.find('input[type=text]", select').val('');
    }else{
        if(parentRow.is('[id^="aspect_discovery_SimpleSearch_row_used-filters-"]') && parentRow.parents('table:first').find('tr[id^="aspect_discovery_SimpleSearch_row_used-filters-"]').length == 1)
        {
            parentRow.next().remove();
            parentRow.prev().remove();
        }
        parentRow.remove();
    }
}

function addFilterRow(){
    var previousFilterRow = $('tr#aspect_discovery_SimpleSearch_row_filter-controls').prev();
    //Duplicate our element & give it a new index !
    var newFilterRow = previousFilterRow.clone();
    //Alter the html to update the index
    var rowIdentifier = newFilterRow.attr('id');
    var oldIndex = parseInt(rowIdentifier.substr(rowIdentifier.lastIndexOf('-')+1, rowIdentifier.length));
    //Add one to the index !
    var newIndex = oldIndex + 1;
    //Update the index of all inputs & our list
    newFilterRow.attr('id', newFilterRow.attr('id').replace('-' + oldIndex, '-' + newIndex));
    newFilterRow.find('input, select').each(function(){
        var $this = $(this);
        //Update the index of the name (if present)
        $this.attr('name', $this.attr('name').replace('_' + oldIndex, '_' + newIndex));
        $this.attr('id', $this.attr('id').replace('_' + oldIndex, '_' + newIndex));
    });
    //Clear the values
    newFilterRow.find('input[type=text], select').val('');

    previousFilterRow = newFilterRow.insertAfter(previousFilterRow);
    //Initialize the add button
    previousFilterRow.find('[name^="add-filter_"]').click(function(){
        addFilterRow();
        return false;
    });
    //Initialize the remove button
    
    previousFilterRow.find('[name^=remove-filter_]').click(function(){
        removeFilterRow($(this));
        return false;
    });
}

function applyBooleanFilterDMS(){

	/*var filter_arr = new Array();
	$('.search-filter').each(function(){
	  var type = $(this).find('.field_filtertype_cls').val();
	  var rel_operator = $(this).find('.filter_relational_operator_cls').val();
	  var input = $(this).find('.discovery-filter-input').val();
	  filter_arr.push({
	      type:type,
	      rel_operator:rel_operator,
	      input:input
	    });
	});

	console.log(filter_arr);
	getFolderFilesDocumentsByParentId(0, undefined, "BOOLEAN_FILTER", encodeURIComponent(JSON.stringify(filter_arr)));*/
	
	createTree();
}


function showItemDetails(obj) {
	console.log("Test123");
	var boiler = '<b>Name: </b>' + $(obj).attr('data-name');
	if($(obj).attr('data-createdByEmp')!=undefined && $(obj).attr('data-createdByEmp')!='')
		boiler += '</br><b>Created By: </b>' + $(obj).attr('data-createdByEmp');
	if($(obj).attr('data-dirCount') == undefined && $(obj).attr('data-fileCount') == undefined)
	{}
	else
		{
			if($(obj).attr('data-dirCount') == 0 && $(obj).attr('data-fileCount') == 0)
				boiler += '<br/><b>Items: </b>Empty';
			else if($(obj).attr('data-dirCount') == 0)
				boiler += '<br/><b>Items: </b>' + $(obj).attr('data-fileCount') + ' File(s)';
			else if($(obj).attr('data-fileCount') == 0)
				boiler += '<br/><b>Items: </b>' + $(obj).attr('data-dirCount') + ' Folder(s)';
			else
				boiler += '<br/><b>Items: </b>' + $(obj).attr('data-dirCount') + ' Folder(s), ' + $(obj).attr('data-fileCount') + ' File(s)';
		}
	if($(obj).find('.folderTagsCls')!=undefined && $(obj).find('.folderTagsCls').text()!='' && $(obj).find('.folderTagsCls').html!=null){
		boiler += '<br/><b>Tags: </b>' +$(obj).find('.folderTagsCls').html();
	}
	$('#dms_item_details').html(boiler);
}


function showItemDetails(obj) {
	console.log("Test123");
	var boiler = '<b>Name: </b>' + $(obj).attr('data-name');
	if($(obj).attr('data-createdByEmp')!=undefined && $(obj).attr('data-createdByEmp')!='')
		boiler += '</br><b>Created By: </b>' + $(obj).attr('data-createdByEmp');
	if($(obj).attr('data-dirCount') == undefined && $(obj).attr('data-fileCount') == undefined)
	{}
	else
		{
			if($(obj).attr('data-dirCount') == 0 && $(obj).attr('data-fileCount') == 0)
				boiler += '<br/><b>Items: </b>Empty';
			else if($(obj).attr('data-dirCount') == 0)
				boiler += '<br/><b>Items: </b>' + $(obj).attr('data-fileCount') + ' File(s)';
			else if($(obj).attr('data-fileCount') == 0)
				boiler += '<br/><b>Items: </b>' + $(obj).attr('data-dirCount') + ' Folder(s)';
			else
				boiler += '<br/><b>Items: </b>' + $(obj).attr('data-dirCount') + ' Folder(s), ' + $(obj).attr('data-fileCount') + ' File(s)';
		}
	if($(obj).find('.folderTagsCls')!=undefined && $(obj).find('.folderTagsCls').text()!='' && $(obj).find('.folderTagsCls').html!=null){
		boiler += '<br/><b>Tags: </b>' +$(obj).find('.folderTagsCls').html();
	}
	$('#dms_item_details').html(boiler);
}
function downloadZipUploadedFile(documentCategoryId,folderName){
	window.open('downloadUploadedFileZip.json?categoryId='+documentCategoryId+'&folderName='+folderName);		
}        < x      20250331133932-8l uZs8   https://erp.cmrit.ac.in/scripts/dms/DMSmanageDocument.js       
/**
 * @name manageDocument.js
 * @purpose for management of documents
 * @since: 27th march 2012
 * @function_List: 1. createTree(); 2. clearAddDocumentCategoryForm() 3.
 *                 showAddDocumentCategoryForm() 4. getDocumentCategory() 5.
 *                 addDocumentCategoryCheckPoint1() 6.
 *                 addDocumentCategoryCheckPoint2(v,m,f) 7.
 *                 addDocumentCategoryAjax() 8.
 *                 removeDocumentCategoryCheckPoint1() 9.
 *                 removeDocumentCategory() 10. getUploadedFiles(nodeId) 11.
 *                 getTextFiles(nodeId) 12. reload() 13. getChildren() 14.
 *                 getSelected() 15. collapse() 16. collapseAll() 17.
 *                 expandAll() 18. find(id) 19. showTextDocumentIcons() 20.
 *                 showUploadedDocumentIcon() 21. showFiles(nodeId) 22.
 *                 addTextDocumentCheckPoint() 23.
 *                 showAddTextDocumentNamePrompt() 24.
 *                 checkTextDocumentNameDuplicacy(strName) 25.
 *                 showAddEditTextDocumentForm() 26. saveTextDocument() 27.
 *                 showText(docId) 28. uploadDocumentCheckPoint() 29.
 *                 getCategoryPath(nodeId) 30. showUploadDocumentForm() 31.
 *                 showCategoryProperties() 32. deleteFiles() 33.
 *                 showFileDetail(id) 34. searchDocumentFile() 35.
 *                 showSearchResultDocumentIcon(searchText,intSearchCout) 36.
 *                 refreshCategoryTree()
 */
var menu3 = '';
var ArrayTags = new Array();
var TRIM_FILE_NAME_LENGTH = 25;

var dmsSettingsObj = {
		FOLDER_ICON:'img/FileSystem/Folder2.png',//'img/FileSystem/Folder.png',//'img/folderNew.png',
		FOLDER_EMPTY_ICON : 'img/FileSystem/Folder2.png'//'img/folder_emptyNew.png' 
};

$(function() {
	$('#chkIncludeDMS').attr('checked',false);
	$('#addDocumentCategoryDialog').modal({
		backdrop : 'static',
		keyboard : false,
		show : false
	}).css({
		width : '400px',
		'margin-left' : function() {
			return -($(this).width() / 2);
		}
	});
	
	$('#showTextDocumentDialog').modal({
		//backdrop : 'static',
		keyboard : false,
		show : false
	}).css({
		width : '1000px',
		'margin-left' : function() {
			return -($(this).width() / 2);
		}
	});
	
	$('#showTextDocumentDialog').modal({
		//backdrop : 'static',
		keyboard : false,
		show : false
	}).css({
		width : '1000px',
		'margin-left' : function() {
			return -($(this).width() / 2);
		}
	});

	$('#addCourseFileDocumentFromDMS').modal({
		backdrop : 'static',
		keyboard : false,
		show : false
	}).css({
		width : '800px',
		'margin-left' : function() {
			return -($(this).width() / 2);
		}
	});
	
	$('#txtSearch2').keypress(function(event){
	    var keycode = (event.keyCode ? event.keyCode : event.which);
	    if(keycode == '13'){
	    	//searchDocumentFile();
	    	if($.trim($(this).val())=='' || $(this).val().indexOf('#')!=-1){
	    		refreshCategoryTree();//searchTagTxt
	    	}
	    }
	});
	
	gemsCommonPopupModalCssLayout('#imageViewrSlides', '1000px');
	
});
/*$(function() {
	$('#textDocumentNameDialog').dialog({
		autoOpen : false,
		width : 450,
		height : 150,
		modal : true

	});
});*/

$(function() {

	$('#uploadDocumentDialog').modal({
		backdrop : 'static',
		keyboard : false,
		show : false
	}).css({
		width : '600px',
		'margin-left' : function() {
			return -($(this).width() / 2);
		}
	});

	$('#uploadDocumentDialog').on('hidden', function() {
		var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
		//showFiles(node.id);
	});
});

$(function() {
	$('#renameFileDialog').dialog({
		autoOpen : false,
		width : 450,
		height : 200,
		modal : true
	});
});

$(function() {
	$('#organizeFile').dialog({
		autoOpen : false,
		width : 600,
		height : 600,
		modal : true
	});
});

$(function() {
	$('#categoryPropertiesDialog').dialog({
		autoOpen : false,
		width : 400,
		height : 500,
		modal : true

	});
});

/** @DOCUMENT_TYPE_CLASS */

var DMSDocType = {
		UPLOADED : 'UPLOADED',
		TEXT : 'TEXT'
};

/** @Global_Variables */
var gjArrTextDocument = "";
/** @purpose: for storing the list of Text Document list */
var gjArrUploadedDocument = "";
/** @purpose: for storing the list of Uploaded Document list */
var gjArrSearchResultDocument = "";
/** @purpose: for storing the list of searched Document list */
var gTextDocSaveFlag = false;
var gTextDocumentCommandFlag = '';
/** @purpose: for storing command text */
var gFileId = '';
var gCommentCnt = 1;
var gProfileImgPath = '';
var gGender = '';
var gDMSCategoryTreeId = null;
var gDMSCategoryTreeName = null;
var gCategoryType = '';
/** @purpose storing the selected category type */
var gParentCategoryType = '';
/** @purpose storing the selected parent category type */
var gCategoryPath = '';
/** @purpose storing the selected parent category path */
var gCategoryTypeAll = new Array();

/*******************************************************************************
 * @purpose for keeping the all category types to be shown on page. Each page
 *          will explicitly specify all types of the category. e.g:
 *          [dms,coursefile,announcement,notice,communication]
 ******************************************************************************/

var gSearchInCategory = new Array();
var gNodeId = '';
var gExtensionArray = [ 'doc', 'docx', 'xls', 'xlsx', 'pdf', 'jpg', 'text',
                        'png', 'gif', 'ppt', 'zip','r' ];

var gDefaultCategoryArray = [ "SHARED", "EVENT", "EXPENSE", "COMMUNICATION",
                              "FEES", "PROFILE", "COURSE_FILE", "MY_DRIVE", "MY_PROJECTS" ];

var gShowAttachmentBar = false;
/** To take decision that attachement bar should show only when doc already saved */

gEvaluationType = '';
/**
 * @Name: createTree()
 * @Author: Vimal Kr.
 * @Date: 27 Mar 2012
 * @param categoryPath
 *            used for fetching the document category of the specified path
 * @default is undefined
 * @param typeArray
 *            used for type associated with Category. This is an array which
 *            contains one or more than one type
 * 
 * @Purpose: initializing the document Management tree
 */

function _doCreateTree(jArray,elementId){
	var j = jArray.length;
	reload(elementId);
	for(var i=0;i<j;i++)
	{
		if(jArray[i]["name"] != 'SHARED'){
			if((jArray[i]["refDocumentCategoryId"]) == undefined) { //parent
				if(elementId == undefined){
					$('#'+gDMSCategoryTreeId).tree('append',{
						data:[{
							id:jArray[i]["documentCategoryId"],
							text:jArray[i]["name"],
						}]
					});
				} else {
					$('#'+elementId).tree('append',{
						data:[{
							id:jArray[i]["documentCategoryId"],
							text:jArray[i]["name"],
						}]
					});
				}	
			} else {
				var parent = jArray[i]["refDocumentCategoryId"];
				var text   = jArray[i]["name"];
				var node   = $('#'+gDMSCategoryTreeId).tree('find',parent);
				if(elementId == undefined){
					$('#'+gDMSCategoryTreeId).tree('append',{
						parent: (node?node.target:null),
						data:[{
							id:jArray[i]["documentCategoryId"],
							text:text,
						}]
					});
				} else {
					$('#'+elementId).tree('append',{
						parent: (node?node.target:null),
						data:[{
							id:jArray[i]["documentCategoryId"],
							text:text,
						}]
					});
				}	
				if(elementId == undefined){
					$('#'+gDMSCategoryTreeId).tree('collapseAll', node.target);
				} else {
					$('#'+elementId).tree('collapseAll', node.target);	
				}
			}
		}
	}
	if(elementId == undefined){
		$('#'+gDMSCategoryTreeId).tree('expandAll');
		$('#'+gDMSCategoryTreeId).tree('collapseAll');
	} else {
		$('#'+elementId).tree('expandAll');
		$('#'+elementId).tree('collapseAll');
	}
}
function fetchAllDocumnetsWithDMS(rdoType){

	if(window.req_param_categoryId!=null){
		getFolderFilesDocumentsByParentId(window.req_param_categoryId);
		
		return false;
	}
	
	$('#fileDropdowMenuTopBar').show();
	setTimeout(function(){
		$('#filterGroup').addClass('open');
	},50);
	
	var categoryPath = '';
	var rootRquired='';
	/*var isHideEmptyFolders=false;
	$('#chkIncludeSharedDMS').attr('checked',false);
	if($('#chkHideEmtyFolders').is(':checked'))
		isHideEmptyFolders=true;*/
	
	var parentType = new Array();
	var typeArray = new Array();
	console.log(rdoType);
	if('Academic' == rdoType){
		parentType.push('dms');
		typeArray.push('Academic');
		categoryPath = 'Academic';
	}else if($('#chkIncludeDMS').is(':checked')){
		
		
		
		parentType.push('dmsNew','dms');
		typeArray.push('dmsNew','dms');
		
		/*$.ajax({
			url : 'getDocumentCategoryAjaxDMS.json?categoryPath=' + categoryPath
			+ '&typeArray=' + typeArray + '&parentType=' + parentType
			+ '&root=' + rootRquired+'&isHideEmptyFolders='+isHideEmptyFolders,
			dataType : 'json',
			beforeSend : function() {
				startCommonAjaxSpinner();
				$("body").css("cursor", "progress");
			},
			complete : function() {
				stopCommonAjaxSpinner();
				setTimeout(function(){$("body").css("cursor", "default");},1000)
			},
			success : function(jArray) {
				doCreateTree(jArray);
				doCreateOrganizeFolderTree(jArray);
			},
			error : function() {
			}
		});*/
		
	}else{
		 typeArray ='dmsNew';
		 parentType = 'dmsNew';
	}
	createTree(categoryPath, typeArray, parentType, rootRquired);
}

var gCreateTreeArr = null;
function createTree(categoryPath, typeArray, parentType, rootRquired, tagSearch, flg) {

	/*if($('#hdnUserRole').val()=='student'){
		$('#chkIncludeSharedDMS').prop('checked', true);
		$('#chkIncludeSharedDMS').trigger('click');
		return;
	}*/
	var searchTagTxt = '';
	if('AuthorWiseCats'==categoryPath){
		searchTagTxt = '&searchTagTxt='+typeArray+'&s_searchType=AuthorWiseCats';
		
		categoryPath = undefined;
		typeArray= undefined;
	}
	if('CharSearch'==categoryPath){
		searchTagTxt = '&searchTagTxt='+typeArray+'&s_searchType=CharSearch';
		
		
		if($('#chkIncludeSharedDMS').is(':checked')){
			$('#txtSearch2').tagit("removeAll");
			$('#txtSearch2').tagit("createTag", typeArray);
			return false;
	    }

		categoryPath = undefined;
		typeArray= undefined;
	}
	if('recentAdded'==categoryPath){
		searchTagTxt = '&searchTagTxt='+typeArray+'&s_searchType=recentAdded';
		
		categoryPath = undefined;
		typeArray= undefined;
	}
	
	var isHideEmptyFolders=false;
	if($('#chkHideEmtyFolders').attr('checked'))
		isHideEmptyFolders=true;
	
	
	if($('#chooseYearFilter').val()!='0'){
		searchTagTxt = '&searchTagTxt='+$('#chooseYearFilter').val()+'&s_searchType=YearFilter';
	}
	if(tagSearch==true && $.trim($('#txtSearch2').val())!=''){
		var tgTxt = $('#txtSearch2').val();
		searchTagTxt = '&searchTagTxt='+tgTxt;
	}
	
	
	if($('#chkIncludeDMS').is(':checked')){		
		parentType = new Array();
		typeArray = new Array();
		parentType.push('dms');//'dmsNew',
		typeArray.push('dms');
	}else{
		parentType='dmsNew';
		typeArray='dmsNew';
	}
	$("#subFolder, #tdFileAndTextWindow").html('<div style="text-align:center;margin: 5px 0px;" class="simpleSpinnerCls"><i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i></div>');
	if(flg != undefined && flg==true && gCreateTreeArr!=null){
		doCreateTree(gCreateTreeArr);
		doCreateOrganizeFolderTree(gCreateTreeArr);
	}else{
		$.ajax({
			url : 'getDocumentCategoryAjaxDMS_Sp.json?categoryPath=' + categoryPath
			+ '&typeArray=' + typeArray.toString() + '&parentType=' + parentType.toString()
			+ '&root=' + rootRquired+'&isHideEmptyFolders='+isHideEmptyFolders+''+searchTagTxt,
			dataType : 'json',
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			success : function(jArray) {
				gCreateTreeArr = jArray;
				doCreateTree(jArray);
				
				//alert(jArray.length);
				doCreateOrganizeFolderTree(jArray);
				showZipDownloadButton();
			},
			error : function() {
			}
		});
	}	
	

}

/**
 * @Name: createTree()
 * @Author: Vimal Kr.
 * @Date: 27 Mar 2012
 * @param categoryPath
 *            used for fetching the document category of the specified path
 * @default is undefined
 * @param typeArray
 *            used for type associated with Category. This is an array which
 *            contains one or more than one type
 * 
 * @Purpose: initializing the document Management tree
 */
function createHierarchyTree(categoryPath, typeArray, parentType) {
	$.ajax({
		url : 'getDocumentCategoryHierarchyAjax.json?categoryPath='
			+ categoryPath + '&typeArray=' + typeArray + '&parentType='
			+ parentType,
			dataType : 'json',
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			success : function(jArray) {
				doCreateTree(jArray);
				doCreateOrganizeFolderTree(jArray);
			},
			error : function() {
			}
	});
}

function doCreateTree(jArray, elementId) {
	console.log("Test123");
	$("#subFolder").html('');
	$("#tdFileAndTextWindow").html('');
	var j = jArray.length;
	reload(elementId);
	var flag=8;
	var menuBoiler='';
	$('#my-menu').html('');
	var boiler1='<div class="DMS_content">';
	var boilerList =folderCommonHeader();//Kiran List View Header
	if(j==0){
		boiler1+=`<div style="text-align: center;color: gray; margin-top: 50px;">
			<i class="fa fa-exclamation-triangle fa-4x"></i>
			<br>
			<b>This folder is empty</b>
		</div>`;
		
	}
	for ( var i = 0; i < j; i++) {
		var fullName = jArray[i]["name"];
		try{fullName = decodeURIComponent(fullName); }catch(e){}
		var dirCount = jArray[i]["childDirectoryCount"];
		var fileCount = jArray[i]["childUploadedFileCount"] + jArray[i]["childCreatedFileCount"];
		var isShared = false;//jArray[i]["isShared"]!=null?jArray[i]["isShared"]:'false';
		if(jArray[i]["sharedStatus"]!=undefined && jArray[i]["sharedStatus"]!=0){
			isShared = true;
		}
		
		var canEdit = jArray[i]["canEdit"]!=null?jArray[i]["canEdit"]:false;
		var createdByEmp = jArray[i]["createdByEmp"]!=null?jArray[i]["createdByEmp"]:"";
		var createdTimetamp= jArray[i]["createdTime"]!=null?jArray[i]["createdTime"]:"";
		var folderIcon = dmsSettingsObj.FOLDER_ICON;
		var name = jArray[i]["name"].length<TRIM_FILE_NAME_LENGTH?jArray[i]["name"]:jArray[i]["name"].substring(0,TRIM_FILE_NAME_LENGTH)+'...';
		if(jArray[i]["isEmpty"]==true)
			folderIcon = dmsSettingsObj.FOLDER_EMPTY_ICON;
			
		
		boiler1+=`<div id="optionDmsFolder-${jArray[i]["documentCategoryId"]}" 
			class="DMS_content_item dms_tile_view_property" 
			data-name="${fullName}" 
			data-dirCount="${dirCount}" 
			data-fileCount="${fileCount}" 
			isShared="${isShared}"
			canEdit="${canEdit}"
			data-createdByEmp="${createdByEmp}"
			style="height: auto; float: left;text-align: left;" 
			ondblclick="getFolderFilesDocumentsByParentId(${jArray[i]["documentCategoryId"]},'${escape(fullName)}',undefined, undefined ,${jArray[i].canEdit})">
			<div style="float: left;">
			<img src="${folderIcon}" class="dmsFolder" ondragstart="return false" style="width: 40px;">
			</div>
			<div style="float: left;width: 79%;">
				<p class="text-center">${name} <br/> <span style="color: gray;">Items: <b>${dirCount+fileCount}</b></span></p>
				<span class="folderTagsCls">${documentTagsBoiler(jArray[i]["tags"])}</span>
			</div>
		</div>`;
		/*boiler1+='<div id="optionDmsFolder-'+jArray[i]["documentCategoryId"]+'" class="DMS_content_item" data-name="'+fullName+'" data-dirCount="'+dirCount+'" data-fileCount="'+fileCount+'" isShared="'+isShared+'" '+
		'canEdit="'+canEdit+'" data-createdByEmp="'+createdByEmp+'" ondblclick="getFolderFilesDocumentsByParentId('+jArray[i]["documentCategoryId"]+',\''+escape(fullName)+'\')">';
		boiler1+='<img src="' + folderIcon + '" class="dmsFolder" ondragstart="return false"><p class="text-center">'+name+'</p>';
		boiler1+='<span class="folderTagsCls" style="display:none;">'+documentTagsBoiler(jArray[i]["tags"])+'</span>';
		boiler1+='</div>';*/
		
		boilerList+='<tr id="optionDmsFolder-'+jArray[i]["documentCategoryId"]+'" class="DMS_content_item" data-name="'+fullName+'" data-dirCount="'+dirCount+'" data-fileCount="'+fileCount+'" isShared="'+isShared+'" '+
		`canEdit="${canEdit}" data-createdByEmp="${createdByEmp}" ondblclick="getFolderFilesDocumentsByParentId(${jArray[i]["documentCategoryId"]},'${escape(fullName)}',undefined, undefined, ${jArray[i].canEdit}))"`;
		boilerList+='<td></td>';
		boilerList+='<td><a href="javascript:void(0);"><i class="fa fa-circle"></i> <b>'+fullName+'</b></a></td><td>Folder</td>';
		boilerList+='<td title="Directory/File Count"> '+(dirCount)+' Folder(s) & '+(fileCount)+' File(s).</td>';
		boilerList+='<td title="Created By Employee">'+(createdByEmp)+'</td>';
		boilerList+='<td title="Can Edit">'+(canEdit==true?'No':'Yes')+'</td>';
		boilerList+='<td title="Shared">'+(isShared==true?'Shared':'-')+'</td>';
		boilerList+='<td>-</td>';
		boilerList+='<td>'+documentTagsBoiler(jArray[i]["tags"])+'</td>'+
			'<td>'+createdTimetamp+'</td>'+'<td></td></tr>';
		
		if(jArray[i]["parentCategoryType"]!=null && (jArray[i]["parentCategoryType"]!='dms' && jArray[i]["parentCategoryType"]!='DMS'))
		{
			$('#menuFoldr-'+ jArray[i]["documentCategoryId"]).remove();
			if($('#hdnUserRole').val()!='student'){
				menuBoiler += '<div id="menuFoldr-'+ jArray[i]["documentCategoryId"] +'"><ul>';
				menuBoiler += '<li onclick="configureUploadedFolderSharingView('+jArray[i]["documentCategoryId"]+',\'folder\',\''+name+'\')"><a href="javascript:void(0);"><i class="fa fa-share fa-lg"></i> Share</a></li>';
				if(jArray[i]["childUploadedFileCount"]>0){
				menuBoiler += '<li onclick="downloadZipUploadedFile('+jArray[i]["documentCategoryId"]+',\''+name+'\')"><a href="javascript:void(0);"><i class="fa fa-file-archive-o" aria-hidden="true"></i> Download Zip</a></li>';
				}
				menuBoiler += '<li onclick="deleteOwnerCreatedFolder('+i+')"><a href="javascript:void(0);"><i class="fa fa-trash fa-lg"></i> Delete</a></li>';
				menuBoiler += '<li onclick="showDocumentFolderProperties(\'folder\','+i+')"><a href="javascript:void(0);"><i class="fa fa-info-circle fa-lg"></i> Properties</a></li>';
				menuBoiler += '</ul></div>';
			}
		}
		
	}
	boiler1+='</div>';
	boilerList+='</tbody></table>';
	
	if($('#folderViewChangeId').hasClass('fa-th-large')){
		$("#tdFileAndTextWindow").html(boilerList);
		$('.DMS_content_item').css('float', 'inherit');
		dataTableListView();
	}else{
		$("#tdFileAndTextWindow").html(boiler1);
		$('.DMS_content_item').css('float', 'left');
	}
	$("#tdFileAndTextWindow").show();
	$("#fileMap").val("/home");//<span onclick='showFileAndTextWindow();' style='cursor:pointer;'>
	$("#fileMapLocation").html("/<a onclick='showFileAndTextWindow();' style='cursor:pointer;'>home</a>");
	showZipDownloadButton();
	$('#fileMap').keypress(function(event){
	    var keycode = (event.keyCode ? event.keyCode : event.which);
	    if(keycode == '13'){
	    	if($('#chkIncludeSharedDMS').is(':checked')==true){
	    		fetchAllSharedDocuments();
	    	}else{
	    		getFileAndFolderByPath();
	    	}
	    }
	});
	
	$('.DMS_content_item')
		.mouseenter(function(e) {
			//console.log(this);
			showItemDetails(this);
			var tp = $(this).offset().top;
			var lft = $(this).offset().left;
			$('.movable').css({'top': tp+62,'left': lft+45});
			//$('.movable').css({'top': e.pageY,'left': e.pageX});
			$('#dms_item_details').show();
		})
		.mouseleave(function() {
			//$('#dms_item_details').hide();
		})
		.click(function (){
			$('.DMS_content_item').removeClass('DMS_content_item_selected');
			$(this).addClass('DMS_content_item_selected');
		});
	$('body').click(function(){
		$('#dms_item_details').hide();
	});
	if($('#hdnUserRole').val()!='student'){
		$('#my-menu').append(menuBoiler);

		for ( var i = 0; i < jArray.length; i++) {
			if(jArray[i]["parentCategoryType"]!=null && (jArray[i]["parentCategoryType"]!='dms' && jArray[i]["parentCategoryType"]!='DMS'))
			{
				/*var isShared = jArray[i]["isShared"]!=null?jArray[i]["isShared"]:'false';
				var canEdit = jArray[i]["canEdit"]!=null?jArray[i]["canEdit"]:'false';
				if(isShared=='false' || (isShared=='true' && canEdit=='true'))
				{*/
					$("#optionDmsFolder-"+ jArray[i]["documentCategoryId"]).ClassyContextMenu({
						menu: 'menuFoldr-'+ jArray[i]["documentCategoryId"],
						mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
						isMenu: true,
						minWidth: 120,
						maxWidth: 0,
						delay: 500, 
					});
				//}
			}
		}
	}
}


/**
 * @param jArray
 * @purpose this function has been used for create the tree with same structure
 *          for copy/move the document
 */
function doCreateOrganizeFolderTree(jArray) {
	$('#ulTargetTree').tree('reload');
	var j = jArray.length;
	for ( var i = 0; i < j; i++) {
		if ((jArray[i]["refDocumentCategoryId"]) == undefined) { // parent
			$('#ulTargetTree').tree('append', {
				data : [ {
					id : jArray[i]["documentCategoryId"],
					text : jArray[i]["name"]
				} ]
			});
		} else {
			var parent = jArray[i]["refDocumentCategoryId"];
			var text = jArray[i]["name"];
			var node = $('#ulTargetTree').tree('find', parent);
			$('#ulTargetTree').tree('append', {
				parent : (node ? node.target : null),
				data : [ {
					id : jArray[i]["documentCategoryId"],
					text : text,
				} ]
			});
			try{
			$('#ulTargetTree').tree('collapseAll', node.target);
			}catch(e){}
		}
	}
}
/**
 * @Name: clearAddDocumentForm()
 * @Author: Vimal Kr.
 * @Date: 27 Mar 2012
 * @Purpose: for clearing the addDocumentCategoryForm
 */
function clearAddDocumentCategoryForm() {
	$('#documentCategoryName').val("");
	$('#documentDescription').val("");
}

/**
 * @Name: showAddDocumentCategoryForm()
 * @Author: Vimal Kr.
 * @Date: 27 Mar 2012
 * @Purpose: for showing the addDocumentCategoryForm
 */
function showAddDocumentCategoryForm() {
	clearAddDocumentCategoryForm();
	$('#addDocumentCategoryDialog').modal('show');
}

/**
 * @Name: getDocumentCategory()
 * @Author: Vimal Kr.
 * @Date: 27 Mar 2012
 * @Purpose: for fetching the category list of the Document with AJAX method
 */
function getDocumentCategory() {

	$.ajax({
		url : 'getDocumentCategoryAjax.json',
		dataType : 'json',
		success : function(jArray) {

		},
		error : function() {
		}
	});
}

/**
 * @Name: addDocumentCategoryCheckPoint1()
 * @Author: Vimal Kr.
 * @Date: 28 Mar 2012
 * @Purpose: for checking the parent selection before adding the
 *           DocumentCategory
 */
function addDocumentCategoryCheckPoint1() {
	$('#txtDocumentTags').tagit('removeAll');
	var parentCatId = gDMSCategoryTreeId;
	if (parentCatId == null) {
		//$.prompt('Creating document with no parent category. Proceed?', {
		$.prompt('Creating folder with no parent folder. Proceed?', {
			callback : addDocumentCategoryCheckPoint2,
			buttons : {
				Proceed : true,
				Cancel : false
			}
		});
	} else {
		$('#chkNewDocFlag, #chkNewDocFlagTbx').removeAttr('checked');
		$('#hdnParentCategoryId, #hdnParentCategoryIdTbx').val(parentCatId);
		showAddDocumentCategoryForm();
	}
}

/**
 * @Name: addDocumentCategoryCheckPoint2()
 * @Author: Vimal Kr.
 * @Date: 28 Mar 2012
 * @Purpose: for checking the parent selection before adding the
 *           DocumentCategory
 */
function addDocumentCategoryCheckPoint2(e, v, m, f) {
	if (v) {
		$('#chkNewDocFlag, #chkNewDocFlagTbx').attr('checked', 'checked');
		showAddDocumentCategoryForm();
	}
}

/**
 * @Name: addDocumentCategoryAjax()
 * @Author: Vimal Kr.
 * @Date: 28 Mar 2012
 * @Purpose: for adding the document category
 * @param documentCategoryName
 *            name of the category
 * @param documentDescription
 *            description about the category
 * @param categoryType
 *            type of the category e.g: dms/courseFile/mentoring/event etc
 * @param parentCategoryType
 *            e.g.: dms/communication/announcement/notices etc
 * @param newDocFlag
 *            Whether it is root category or child category
 */
function addDocumentCategoryAjax(documentCategoryName, documentDescription,
		categoryType, parentCategoryType, newDocFlag) {

	/**
	* to ensure that if category has been added from outside(not from dialog
	* box) the it must be root category
	*/

	if (documentCategoryName == undefined){
		documentCategoryName = $('#documentCategoryName').val();
		if(isValidFileName(documentCategoryName)==false){
			$('#documentCategoryName').css('border', '1px solid red');
			jAlert("Please enter valid Folder Name!");
			return;
		}
	}
	if (documentDescription == undefined)
		documentDescription = $('#documentDescription').val();
	if (categoryType == undefined)
		categoryType = getSelectedCategoryType();
	if (parentCategoryType == undefined)
		parentCategoryType = getSelectedParentCategoryType();

	categoryPath = getCategoryRetrievalPath();
	/** Will return undefined if proper path is not available */
	var prevWhileAttchFlag = false;
	if (newDocFlag == undefined) {
		newDocFlag = $('#chkNewDocFlag').is(':checked');
		prevWhileAttchFlag = $('#chkPrevToAttachmentFlag').is(':checked');
		if(prevWhileAttchFlag==true){
			categoryType = 'DMS';
			parentCategoryType = 'DMS';
		}
	} else {
		newDocFlag = true;
	}
	/**
	* Doesn't matter if undefined or anything because it has been taken on
	* server side by session
	* 
	*/
	var employeeId = $('#hdnDocumentPerson').val();
	var parentCatId = "null";
	var path = "";
	if (!newDocFlag) {
		parentCatId = $('#hdnParentCategoryId').val();
		path = getCategoryPath(parentCatId);
	}
	var documentTag = $('#txtDocumentTags').val();
	var isPrivacyPublic = $('#folderIsPublic').is(':checked');
	$.ajax({
		url : 'addDocumentCategoryAjax.json?documentCategoryName='
			+ documentCategoryName + '&documentDescription='
			+ documentDescription + '&employeeId=' + employeeId
			+ '&parentCatId=' + parentCatId + '&path=' + path
			+ '&categoryType=' + categoryType + '&parentCategoryType='
			+ parentCategoryType + '&documentTag='+documentTag+'&isPrivacyPublic='+isPrivacyPublic,
			dataType : 'json',
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			success : function(jArray) {
				$('#addDocumentCategoryDialog').modal('show');
				if (jArray[0].responseFlag == '1') {
					//showSuccessMessage(jArray[0].responseText, 5000);
				} else {
					//showErrorMessage(jArray[0].responseText, 5000);
					jArray(jArray[0].responseText);
				}
				/**
				* @comment such function to be called which can be overriden by
				*          another pluggins so that proper parameter could be
				*          called!!!
				*/
				if(window.req_param_categoryId!=null){
					getFolderFilesDocumentsByParentId(window.req_param_categoryId);
					
				}else if (newDocFlag) {
					fetchAllDocumnetsWithDMS(isAcademicFolder);
				} else {
					//refreshFolder();
					//getDocumentByParentId(gDMSCategoryTreeId,escape(gDMSCategoryTreeName));
					//fetchAllDocumnetsWithDMS();
					getFileAndFolderByPath();
				}
				$('#addDocumentCategoryDialog').modal('hide');
				$('#chkPrevToAttachmentFlag').prop('checked', false);
				$('#txtDocumentTags').tagit('removeAll');
			},
			error : function() {

			}
	});
}

/**
 * @since 11th May 2012
 */
/**
 * @since 11 may 2012
 */
function createCategoryHirarchy(categoryPathArr, typeArray, parentType) {
	$.ajax({
		url : 'createHirarchicalCategoryAjax.json?categoryHirarchyArr='
			+ categoryPathArr + '&categoryType=' + typeArray
			+ '&parentCategoryType=' + parentType,
			dataType : 'json',
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			success : function(jArray) {
				if (jArray[0].responseFlag == '1') {
					showSuccessMessage(jArray[0].responseText, 15000);
				} else {
					showErrorMessage(jArray[0].responseText, 15000);
				}
				var catPath = categoryPathArr.join("/");
				createTree(catPath, typeArray, parentType);
			},
			error : function() {

			}
	});
}

/**
 * @since 1 mar 2013
 * @author vimal
 */
function createCategoryHirarchy1(categoryPathArr, categoryPathNameArr,
		typeArray, parentType, callback) {

	categoryPathArr = categoryPathArr.join(",");
	categoryPathNameArr = categoryPathNameArr.join("~");
	docCategoryId = '0';
	$
	.ajax({
		url : 'createHirarchicalCategoryAjaxNew1.json',
		data : {
			categoryHirarchyArr : categoryPathArr,
			categoryHirarchyNameArr : encodeURIComponent(categoryPathNameArr+''),
			categoryType : typeArray,
			parentCategoryType : parentType
		},
		type : 'POST',
		dataType : 'json',
		beforeSend : function() {
			startCommonAjaxSpinner();
		},
		complete : function() {
			stopCommonAjaxSpinner();
		},
		success : function(jArray) {
			if (jArray[0].responseFlag == '1') {
				docCategoryId = jArray[0].CategoryHierarchyList[0].documentCategoryId;
				
				//new
				getFolderFilesDocumentsByParentId(docCategoryId, gDMSCategoryTreeName);
				getFolderFilesDocumentsByParentId(docCategoryId, gDMSCategoryTreeName);
				//new
				
				showSuccessMessage(jArray[0].responseText, 15000);
			} else {
				showErrorMessage(jArray[0].responseText, 15000);
			}
			doCreateTree(jArray[0].CategoryHierarchyList);
			try {
				callback(jArray[0].CategoryHierarchyList[0].documentCategoryId);
			} catch (e) {
				alert(e);
			}
		},
		error : function() {
			alert('error');
		}
	});
}

/**
 * @since 17 Apr 2013
 * @author vimal
 */
function createTrainingCategoryHirarchy(categoryPathArr) {

	categoryPathArr = categoryPathArr.join(",");
	$.ajax({
		url : 'createHirarchicalCategoryForTrainingAjax.json',
		data : {
			categoryHirarchyArr : categoryPathArr,
		},
		type : 'POST',
		dataType : 'json',
		beforeSend : function() {
			startCommonAjaxSpinner();
		},
		complete : function() {
			stopCommonAjaxSpinner();
		},
		success : function(jArray) {
			if (jArray[0].responseFlag == '1') {
				showSuccessMessage(jArray[0].responseText, 15000);
			} else {
				showErrorMessage(jArray[0].responseText, 15000);
			}
			doCreateTree(jArray[0].CategoryHierarchyList);
		},
		error : function() {

		}
	});
}

/**
 * @Name: removeDocumentCategoryCheckPoint1()
 * @Author: Vimal Kr.
 * @Date: 29 Mar 2012
 * @Purpose: for removing the document category
 */
function removeDocumentCategoryCheckPoint1() {
	var parentCatId = getSelected();
	alert(parentCatId);
	if (parentCatId == null) {
		$.prompt('Please choose a document category to delete.');
	} else {
		var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
		if ($.inArray(node.text, gDefaultCategoryArray) == -1) {
			$.prompt('Are you sure to delete?', {
				callback : removeDocumentCategory,
				buttons : {
					Proceed : true,
					Cancel : false
				}
			});
		} else {
			jAlert('Default category(folder) cannot be deleted');
		}
	}
}

/**
 * @Name: removeDocumentCategory()
 * @Author: Vimal Kr.
 * @Date: 29 Mar 2012
 * @Purpose: for removing the document category
 */
function removeDocumentCategory(e, v, m, f) {

	if (v) {
		var categoryId = gDMSCategoryTreeId;
		var path = getCategoryPath(categoryId);
		$.ajax({
			url : 'removeDocumentCategoryAjax.json?categoryId='
				+ categoryId + '&path=' + path,
				dataType : 'text',
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				async : false,
				success : function(response) {
					if (response == 'Deleted') {
						$('#tdDocumentFilesWindow').html("");
						showSuccessMessage(
								'Directory successfully deleted', 500000);
						var node = getParent();
						if (node) {
							/** If deleted folder is child of some folder */
							refreshFolder(node);
						} else {
							/** If deleted folder is root parent */
							node = find(categoryId);
							/** Current selected folder object */
							deleteFolder(node);
						}
					} else {
						jAlert('Deletion Failed!!');
					}

				},
				error : function() {

				}
		});
	}
}

/**
 * @Name: getUploadedFiles(nodeId)
 * @Author: Vimal Kr.
 * @Date: 28 Mar 2012
 * @Purpose: for adding the document category
 * @param: nodeId- category id of the clicked category
 */
function getUploadedFiles(nodeId) {
	
	gNodeId = nodeId;
	$('#chkIncludeDMS').attr('checked',false);
	$('#chkHideEmtyFolders').attr('checked',false);
	$('#chkIncludeSharedDMS').attr('checked',false);
	$.ajax({
		url : 'getUploadedDocumentAjax.json?categoryid=' + gNodeId,
		dataType : 'json',
		beforeSend : function() {
			startCommonAjaxSpinner();
			$("body").css("cursor", "progress");
		},
		complete : function() {
			stopCommonAjaxSpinner();
			setTimeout(function(){$("body").css("cursor", "default");},1000)
		},
		async : true,
		success : function(jArray) {
			gjArrUploadedDocument = jArray;
			showUploadedDocumentIcon();
			stopCommonAjaxSpinner();
		},
		error : function() {
			alert('error');
		}

	});
}

/**
 * @Name: getTextFiles(nodeId)
 * @Author: Vimal Kr.
 * @Date: 28 Mar 2012
 * @Purpose: for adding the document category
 * @param: nodeId- category id of the clicked category
 */
function getTextFiles(nodeId) {
	gNodeId = nodeId;
	$.ajax({
		url : 'getTextDocumentListAjax.json?categoryid=' + nodeId,
		dataType : 'json',
		beforeSend : function() {
			startCommonAjaxSpinner();
			$("body").css("cursor", "progress");
		},
		complete : function() {
			stopCommonAjaxSpinner();
			setTimeout(function(){$("body").css("cursor", "default");},1000);
			
		},
		async : true,
		success : function(jArray) {
			gjArrTextDocument = jArray;
			showTextDocumentIcons();

		},
		error : function() {
			alert('error');
		}
	});
}

function reload(elementId) {
	if (elementId == undefined)
		$('#' + gDMSCategoryTreeId).tree('reload');
	else
		$('#' + elementId).tree('reload');
}

function getChildren() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	var children = new Array();
	if (node) {
		children = $('#' + gDMSCategoryTreeId).tree('getChildren', node.target);
	} else {
		children = $('#' + gDMSCategoryTreeId).tree('getChildren');
	}
	var s = '';
	for ( var i = 0; i < children.length; i++) {
		s += children[i].text + ',';
	}
}

function getParent() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	if (node) {
		return $('#' + gDMSCategoryTreeId).tree('getParent', node.target);
	} else {
		return null;
	}
}
function getSelected() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	/*var node = '';
	if (node != null)
		return node.id;
	else {
		return null;
	}*/
	return node;
}

function collapse() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	$('#' + gDMSCategoryTreeId).tree('collapse', node.target);
}

function setSelected(categoryId) {
	$('.tree-node[node-id="' + categoryId + '"]').find('.tree-icon.tree-folder').click();
}
function expand() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	$('#' + gDMSCategoryTreeId).tree('expand', node.target);
}
function expandNode(node) {
	$('#' + gDMSCategoryTreeId).tree('expand', node.target);
}

function collapseNode(node) {
	$('#' + gDMSCategoryTreeId).tree('collapse', node.target);
}

function collapseAll() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	if (node) {
		$('#' + gDMSCategoryTreeId).tree('collapseAll', node.target);
	} else {
		$('#' + gDMSCategoryTreeId).tree('collapseAll');
	}
}
function expandAll() {
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	if (node) {
		$('#' + gDMSCategoryTreeId).tree('expandAll', node.target);
	} else {
		$('#' + gDMSCategoryTreeId).tree('expandAll');
	}
}

function find(id) {

	var node = $('#' + gDMSCategoryTreeId).tree('find', id);
	return node;
}

/**
 * @name showTextDocumentIcons()
 * @since 29th Mar 2012
 * @purpose for showing the icons of the text documents
 */
function showTextDocumentIcons() {
	$('#textDocumentNameDialog').modal('hide');
	
	var boiler1 = '<table class="">';
	var boilerList = '';
	var link = "";
	var menuBoiler = '';
	var flag = 8;
	link += '<tr><td><div id="showPrivateCommentDiv"></div></td></tr>';
	gFileId = 1;
	for ( var i = 0; i < gjArrTextDocument.length; i++) {

		var iconPath = '';
		if (gjArrTextDocument[i]["hasAttachment"] != undefined)
			if (gjArrTextDocument[i]["hasAttachment"].toLowerCase() == 'yes') {
				//iconPath = 'css/images/icon_attachment.gif';
				iconPath = 'img/files/txt.png';
			} else {
				//iconPath = 'css/images/tree_file.gif';
				iconPath = 'img/files/txt.png';
			}
		
		
		//new s
		if(i==flag)
		{
			boiler1+='</tr><tr>';
			flag+=8;
		}
		var name = gjArrTextDocument[i]["name"].length<11?gjArrTextDocument[i]["name"].gemsDecode():gjArrTextDocument[i]["name"].gemsDecode().substring(0,11)+'...';
		boiler1+='<td style="padding:20px;">';
		boiler1+='<div id="options-'+ gjArrTextDocument[i]["documentId"] + '" data-name='+name+' style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink DMS_content_item" id = "tdFileListIcon-text-'
		+ gjArrTextDocument[i]["documentId"]+ '"><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false"'
		//+ gjArrTextDocument[i]["documentId"]+ '"><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false" onmouseover = "showFileDetail(\'tdFileListIcon-text-'+ gjArrTextDocument[i]["documentId"]\')
		+ '"><p class="text-center">'+name+'</p>';
		
		boiler1+='</div>';
		boiler1+='</td>';
		if(i==flag)
		{
			boiler1+='</tr>';
		}
		$('#menu-'+ gjArrTextDocument[i]["documentId"]).remove();
		var canEdit='false';
		var isShared='false';
		isShared = $('#optionDmsFolder-'+gjArrTextDocument[i]["categoryId"]).attr('isShared');
		canEdit = $('#optionDmsFolder-'+gjArrTextDocument[i]["categoryId"]).attr('canEdit');
		menuBoiler += '<div id="menu-'+ gjArrTextDocument[i]["documentId"] +'"><ul>'+
		'<li onclick = "showText(\''+ gjArrTextDocument[i]["documentId"] + '\',\'view\')"><a href="javascript:void(0);">View</a></li>';
		if($('#hdnUserRole').val()!='student'){
			if((gjArrTextDocument[i]["isShared"]==null && isShared=='false' && canEdit=='false') || (isShared=='true' && canEdit=='true') || (gjArrTextDocument[i]["isShared"]=='true' && gjArrTextDocument[i]["canEdit"]=='true'))
			{
				menuBoiler += '<li onclick = "showText(\''+ gjArrTextDocument[i]["documentId"] + '\',\'edit\')"><a href="javascript:void(0);">Edit</a></li>';
				menuBoiler += '<li onclick="configureCourseFileDocSharingView(\'\','+gjArrTextDocument[i]["documentId"]+')"><a href="javascript:void(0);">Share</a></li>';
				menuBoiler += '<li onclick="configureUploadedFolderSharingView(\''+gjArrTextDocument[i]["documentId"]+'\',\'docFile\',\''+name+'\')"><a href="javascript:void(0);">Share in DMS</a></li>';
			}
		}
		menuBoiler +='</ul></div>';
		//new e

		link += '<tr>'
			+ '<td  class="ui-state-default" width="40px">'
			+ '<input type = "checkbox"  id = "chkFileListIcon-text-'
			+ gjArrTextDocument[i]["documentId"]
		+ '"  class = "chkFileListIcon"  name = "chkFileListIcon">'
		+ '</td>'
		+ '<td class="context-menu-one tooltiplink ui-state-default" id = "tdFileListIcon-text-'
		+ gjArrTextDocument[i]["documentId"]
		/*+ '" onmouseover = "showFileDetail(\'tdFileListIcon-text-'
		+ gjArrTextDocument[i]["documentId"]\')*/
		+ '" style =  "cursor:pointer;" onclick = "showText(\''
		+ gjArrTextDocument[i]["documentId"] + '\')">'
		+ '<image src = "' + iconPath + '" height=25 />&nbsp;&nbsp;'
		+ gjArrTextDocument[i]["name"] + '</td>';

		if (gjArrTextDocument[i]["sharedStatus"] != 0)
			link += '<td id="shaEmp'
				+ gFileId
				+ '" width="20px;" class="ui-state-default"><a href="javascript:void(0);" onclick="showSharedEmployeeList('
				+ gjArrTextDocument[i]["documentId"]
		+ ',\'textfile\','
		+ gFileId
		+ ')" title=""><img src="img/share.png" alt="Shared" />Shared With Section</a></td>';
		else
			link += '<td id="shaEmp' + gFileId+ '" width="20px;" class="ui-state-default"></td>';

		if(!$('.courseFileTabs .active').data('isFreeze'))
		{
			link+= '<td style="width:70px;text-align:center" class="context-menu-one ui-state-default"><a class="btn btn-mini docListOpt btnDocOpts" href="javascript:void(0);" id="btnDocOptDocShared" title="Share with Others" onclick="configureCourseFileDocSharingView(\'\','+gjArrTextDocument[i]["documentId"]+')"><i class="icon-user"></i></a></td>';
			/*
			link += '<td style="width:80px;" class="context-menu-one ui-state-default">'
				+ '<div class="btn-group">'
				+ '<a data-toggle="dropdown" style="color:#FFFFFF;" class="btn btn-mini btn-inverse dropdown-toggle" href="javascript:void(0);">'
				+ '<i class="icon-cog icon-white"></i> Option '
				+ '<span class="caret"></span>'
				+ '</a>'
				+ '<ul class="dropdown-menu options pull-right">';

			if (gCategoryType == 'mentoring')
				link += '<li><a href="javascript:void(0)" onclick="showMentoringStudentShare('+ gFileId + ','+ gjArrTextDocument[i]["documentId"] + ',\'textfile\')" ><i class="icon-user"></i> Share with Student(s)</a></li>';

			else if (gCategoryType == 'RESEARCH') {
				link += '<li><a href="javascript:void(0)" onclick="showResearchEmployeeShare('+ gFileId + ',' + gjArrTextDocument[i]["documentId"] + ',\'textfile\')" >'
				+ '<i class="icon-user"></i> Share with Employee </a></li>'
				+ '<li><a href="javascript:void(0)" onclick="showResearchStudentShare(' + gFileId + ',' + gjArrTextDocument[i]["documentId"] + ',\'textfile\')" >'
				+ '<i class="icon-user"></i> Share with Students </a></li>';

				for ( var k = 0; k < gDepartmentName.length; k++) {
					var temp = gDepartmentName[k];
					temp = temp.replace(/\./g, "-");
					temp = temp.replace(/\ /g, "-");
					temp = temp.replace(/\&/g, "-");
					link += '<li>'
						+ '<a href="javascript:void(0)" onclick="showEmployeeShare(\''+ temp + '\',' + gFileId + ',' + k + ','+ gjArrTextDocument[i]["documentId"]+ ',\'textfile\',\'' + gDepartmentName[k] + '\')">'
						+ '<i class="icon-user"></i> Share with '+ gDepartmentName[k] + ' Staff' + '</a>' + '</li>';
				}
			} else if (gCategoryType == 'courseFile') {
					
			link += '<li>'
				 *//*** Replace sharing code ***//* 
					+ '<a href="javascript:void(0)" onclick="configureCourseFileDocSharingView(\'\','+gjArrTextDocument[i]["documentId"]+')" >'
						+ '<i class="icon-user"></i> Share'
					+ '</a>'+'</li>';



				link += '<li>'
					*//*** Replace sharing code ***//* 
					+ '<a href="javascript:void(0)" onclick="configureCourseFileDocSharingViewCurrentBatch(\'\','+gjArrTextDocument[i]["documentId"]+')" >'
					+ '<i class="icon-user"></i> Share with Current Batch'
					+ '</a>'+'</li>';

				*//*** Replace sharing code ***//* 


			} else {

				for ( var k = 0; k < gBatchSemester.length; k++) {
					var temp = gBatchSemester[k];
					temp = temp.replace(/\./g, "-");
					temp = temp.replace(/\ /g, "-");
					temp = temp.replace(/\&/g, "-");
					link += '<li>'
						+ '<a href="javascript:void(0)" onclick="showStudentShare(\''
						+ temp + '\',' + gFileId + ',' + k + ','
						+ gjArrTextDocument[i]["documentId"]
					+ ',\'textfile\',\'' + gBatchSemester[k] + '\')" >'
					+ '<i class="icon-user"></i> Share with '
					+ gBatchSemester[k] + ' Student(s)' + '</a>' + '</li>';
				}

				for ( var k = 0; k < gDepartmentName.length; k++) {
					var temp = gDepartmentName[k];
					temp = temp.replace(/\./g, "-");
					temp = temp.replace(/\ /g, "-");
					temp = temp.replace(/\&/g, "-");
					link += '<li>'
						+ '<a href="javascript:void(0)" onclick="showEmployeeShare(\''
						+ temp + '\',' + gFileId + ',' + k + ','
						+ gjArrTextDocument[i]["documentId"]
					+ ',\'textfile\',\'' + gDepartmentName[k] + '\')">'
					+ '<i class="icon-user"></i> Share with '
					+ gDepartmentName[k] + ' Staff' + '</a>' + '</li>';
				}
			}

			link += '<li class="divider"></li>';

			if (gjArrTextDocument[i]["sharedStatus"] == 1) {

				link += '<li>'
					+ '<a href="javascript:void(0);" class="has_down_arrow trigger first" onclick="showComment('
					+ gFileId
					+ ','
					+ gjArrTextDocument[i]["documentId"]
				+ ',\'textfile\','
				+ i
				+ ')">'
				+ '<i class="icon-comment"></i> Comment'
				+ '</a>'
				+ '</li>'
				+ '<li class="divider"></li>'
				+ '</ul>'
				+ '</div>'
				+ '</td>'
				+ '</tr>'
				+ '<tr id="trshowComment'
				+ gFileId
				+ '" style="display:none;">'
				+ '<td colspan="3">'
				+ '<div id="commentConfig' + gFileId + '"></div>' + '</td>';

			} else
				link += '</ul>' + '</div>' + '</td>';
		*/}

		link += '</tr>'
			+ '<tr id="trshowStudentShare'
			+ gFileId
			+ '" style="display:none;"><td colspan="6"><div id="showStudentShare'
			+ gFileId
			+ '"></div></td></tr>'
			+ '<tr id="trshowEmployeeShare'
			+ gFileId
			+ '" style="display:none;"><td colspan="6"><div id="showEmployeeShare'
			+ gFileId
			+ '"></div></td></tr>'
			+ '<tr id="trshowPrivateComment'
			+ gFileId
			+ '" style="display:none;"><td colspan="6"><div id="showPrivateComment'
			+ gFileId + '"></div></td></tr>';
		gFileId++;
		
		
		boilerList+='<tr id="options-'+ gjArrTextDocument[i]["documentId"] + '" data-name='+name+' style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink" id = "tdFileListIcon-text-'
		+ gjArrTextDocument[i]["documentId"]+ '">'+
		'<td><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false" style="width:25px;height:25px;"> '+gjArrTextDocument[i]["name"].gemsDecode()+'</td>';//isShared canEdit hasAttachment
		
		boilerList+='<td>File</td><td>-</td><td>-</td>';
		/*boilerList+='<td title="Can Edit">'+(canEdit=='true'?'Not Readonly':'Readonly')+'</td>';*/
		boilerList+='<td title="Is Shared">'+(isShared=='true'?'Shared':'-')+'</td>';
		boilerList+='<td title="has Attahcments">'+(gjArrTextDocument[i]["hasAttachment"]+''=='true'?'Yes':'No')+'</td>';
		boilerList+='</tr>';
	}
	$('#documentsList').show();
	
	
	if($('#folderViewChangeId').hasClass('fa-th-large')){
		//$('#documentsList').html(boilerList);
		$("#subFolder .tableWithoutPadding").append(boilerList);
		dataTableListView();
	}else{
		$('#documentsList').html(boiler1);
	}
	$('#my-menu').append(menuBoiler);
	
	
	for ( var i = 0; i < gjArrTextDocument.length; i++)
	{

		$("#options-"+ gjArrTextDocument[i]["documentId"]).ClassyContextMenu({
			menu: 'menu-'+ gjArrTextDocument[i]["documentId"],
			mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
			isMenu: true,
			minWidth: 120,
			maxWidth: 0,
			delay: 500, 
		});

	}
	$(document).ready(function() {
		$('.commentMark').elastic();
	});
	jQuery(function() {
		jQuery('.jbar').jbar();
	});
	/**
	 * file detail data association with checkbox and td element id using jquery
	 * data function
	 */
	for ( var i = 0; i < gjArrTextDocument.length; i++) {
		$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Type', 'text');
		$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Id', gjArrTextDocument[i]["documentId"]);
		$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'CreationDate', gjArrTextDocument[i]["creationDate"]);
		$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Name', gjArrTextDocument[i]["name"]);
		$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Parent', gjArrTextDocument[i]["catName"]);
		$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Description', gjArrTextDocument[i]["description"]);
		$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Type', 'text');
		$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Id', gjArrTextDocument[i]["documentId"]);
		$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'CreationDate', gjArrTextDocument[i]["creationDate"]);
		$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Name', gjArrTextDocument[i]["name"]);
		$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Parent', gjArrTextDocument[i]["name"]);
		$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
				'Description', gjArrTextDocument[i]["description"]);
	}

}

/**
 * @name showUploadedDocumentIcon()
 * @since 29th Mar 2012
 * @purpose for showing the icons of the uploaded documents
 */
function showUploadedDocumentIcon() {
	var link = ""; var flag1= 8;
	var boiler = '<table class="">';
	var menuBoiler = '';
	var boilerList ='';
	link += '<tr><td><div id="showPrivateCommentDiv"></div></td></tr>';
	for ( var i = 0; i < gjArrUploadedDocument.length; i++) {

		gFileId++;
		
		if(i==flag1)
		{
			boiler+='</tr><tr>';
			flag1+=8;
		}
		if (gjArrUploadedDocument[i]["documentBody"] != undefined) {
			downloadLink = (juno.label['url.download.json'].setIndexedArgs((gjArrUploadedDocument[i]["eDocPathId"]!=undefined?gjArrUploadedDocument[i]["eDocPathId"]:gjArrUploadedDocument[i]["documentPathId"]), "UPLOADED", encodeURIComponent(gjArrUploadedDocument[i]["name"])))
		}
		
		var canEdit='false';
		var isShared='false';
		isShared = $('#optionDmsFolder-'+gjArrUploadedDocument[i]["categoryId"]).attr('isShared');
		canEdit = $('#optionDmsFolder-'+gjArrUploadedDocument[i]["categoryId"]).attr('canEdit');
		
		var fileType = gjArrUploadedDocument[i]["extension"].toLowerCase();
		iconPath = gFileTypeIcon[fileType];
		
		var temp = gjArrUploadedDocument[i]["name"];
		temp = temp.replace(/\ /g, "-");
		temp = temp.replace(/\&/g, "-");
		var name = gjArrUploadedDocument[i]["name"].length<20?gjArrUploadedDocument[i]["name"]:gjArrUploadedDocument[i]["name"].substring(0,20)+'...';
		boiler+='<td style="padding:20px;" style="text-align:center;">';
		boiler+='<div id="Upload-'+ gjArrUploadedDocument[i]["documentPathId"] +'" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink DMS_content_item" data-name='+temp+'><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false"><p class="text-center">'+name+'</p></div>';
		//boiler+='<div oncontextmenu="rightClick();" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;"><a href="'+downloadLink+'"><img src="'+iconPath+'"><p class="text-center">'+name+'</a></p>';
		boiler+= '<div style="text-align:center;">';
		boiler+= '</div>';
		boiler+='</td>';

		boilerList+='<tr id="Upload-'+ gjArrUploadedDocument[i]["documentPathId"] +'" class="tooltiplink DMS_content_item" data-name="'+temp+'" style="cursor:pointer;">';
		boilerList+='<td><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false" style="width:25px;height:25px;"/></td><td>'+name+'</td>';
		boilerList+='<td>Folder</td><td title="Directory/File Count">-</td>';
		boilerList+='<td title="Created By Employee">-</td>';
		/*boilerList+='<td title="Can Edit">'+(canEdit=='true'?'Not Readonly':'Readonly')+'</td>';*/
		boilerList+='<td title="Is Shared">'+(isShared=='true'?'Shared':'-')+'</td>';
		boilerList+='<td>-</td>';
		boilerList+='</tr>';
		
		if(i==flag1)
		{
			boiler+='</tr>';
		}
		
		menuBoiler += '<div id="Uploadmenu-'+ gjArrUploadedDocument[i]["documentPathId"] +'"><ul>';
		if(fileType=='doc' || fileType=='docx' || fileType=='ppt' || fileType=='pptx' || fileType=='xls' || fileType=='xlsx')
		{
			menuBoiler+= '<li onclick="showDocumentPreview('+gjArrUploadedDocument[i]["documentPathId"]+');"><a href="javascript:void(0);">Preview</a></li></a>';
		}
		menuBoiler += '<li><a href="'+downloadLink+'">Download</a></li>';
		
		if($('#hdnUserRole').val()!='student'){
			if((gjArrUploadedDocument[i]["isShared"]==null && isShared=='false' && canEdit=='false') || (isShared=='true' && canEdit=='true') || (gjArrUploadedDocument[i]["isShared"]=='true' && gjArrUploadedDocument[i]["canEdit"]=='true'))
			{
				menuBoiler += '<li onclick="configureUploadedFileDocSharingView('+gjArrUploadedDocument[i]["documentPathId"]+',\'uploaded\',\''+name+'\',\''+gjArrUploadedDocument[i]["categoryId"]+'\')"><a href="javascript:void(0);">Share</a></li>';
				menuBoiler += '<li onclick="configureUploadedFolderSharingView('+gjArrUploadedDocument[i]["documentPathId"]+',\'file\',\''+name+'\')"><a href="javascript:void(0);">Share in DMS </a></li>';
				menuBoiler+= '<li onclick="deleteDocumentFromDMS('+gjArrUploadedDocument[i]["documentPathId"]+')"><a href="javascript:void(0);">Delete</a></li></ul></div>';
			}
		}
	}
	boiler+='</table>';
	//boilerList+='</table>';
	//$("#fileList").html(boiler);
	if($('#folderViewChangeId').hasClass('fa-th-large')){
		$("#subFolder table").append(boilerList);
		$('.DMS_content_item').css('float', 'inherit');
		dataTableListView();
	}else{
		$("#fileList").html(boiler);
		$('.DMS_content_item').css('float', 'left');
	}
	$("#tdFileAndTextWindow").hide();
	//$('.tblFileIconList').append(link);
	$("#fileList").show();
	//$("#fileList").html(link);
	$('#myUploadmenu').html(menuBoiler);

	for ( var i = 0; i < gjArrUploadedDocument.length; i++) {
		$("#Upload-"+ gjArrUploadedDocument[i]["documentPathId"]).ClassyContextMenu({
			menu: 'Uploadmenu-'+ gjArrUploadedDocument[i]["documentPathId"],
			mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
			isMenu: true,
			minWidth: 120,
			maxWidth: 0,
			delay: 500, 
		});
	}
	
	$(document).ready(function() {
		$('.commentMark').elastic();
	});
	jQuery(function() {
		jQuery('.jbar').jbar();
	});
	/**
	 * file detail data association with checkbox and td element id using jquery
	 * data function
	 */
	for ( var i = 0; i < gjArrUploadedDocument.length; i++) {
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data("Type", "uploaded");
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Id', gjArrUploadedDocument[i]["documentId"]);
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('CreationDate', gjArrUploadedDocument[i]["creationDate"]);
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Name', gjArrUploadedDocument[i]["name"]);
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Parent', gjArrUploadedDocument[i]["catName"]);
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Description', gjArrUploadedDocument[i]["description"]);
		$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('DocumentPath', gjArrUploadedDocument[i]["documentPath"]);
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data("Type", "uploaded");
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Id', gjArrUploadedDocument[i]["documentId"]);
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('CreationDate', gjArrUploadedDocument[i]["creationDate"]);
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Name', gjArrUploadedDocument[i]["name"]);
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Parent', gjArrUploadedDocument[i]["catName"]);
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Description', gjArrUploadedDocument[i]["description"]);
		$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('DocumentPath', gjArrUploadedDocument[i]["documentPath"]);
	}

}

/**
 * @name showFiles(nodeId)
 * @param nodeId:
 *            target node(category-tree) Id on which mouse click event has been
 *            fired
 * @since 29th Mar 2012
 * @purpose for showing the icons of the selected category(tree node)
 */

function showDocumentPreview(documentId, fileType)
{
	var domain = "http://"+window.location.host;
	var path = domain+'/'+(juno.label['url.download.json'].setIndexedArgs((documentId), "UPLOADED", 'NA'));
	var encodedPath = encodeURIComponent(path);
	var boiler = '';
	if(fileType != undefined && (fileType == 'jpg' || fileType == 'png'|| fileType == 'gif'))
		boiler = '<img style="width:100%;height:550px;" src="https://view.officeapps.live.com/op/view.aspx?src='+encodedPath+'"/>';
	else
		boiler = '<iframe style="width:100%;height:550px;" src="https://view.officeapps.live.com/op/view.aspx?src='+encodedPath+'"/>';
	
	$('#showDocumentPreviewDialog').find('.documentBody').html(boiler);
	$('#showDocumentPreviewDialog').modal('show').css({
		width: '100%',
		height:'100%',
		left:'0px',
		top:'0px',
		margin:'0'
	});
	
	$('#showDocumentPreviewDialog').css('z-index', '1100');
}

function showFiles(nodeId) {

	$('.tblFileIconList').removeClass('smalltable');

	$('.tblFileIconList').removeClass('table-bordered');

	if ($('#editing_field1').val() != undefined) {
		removeDocumentEditor();
	}
	$('.divDocumentListWindowTitle').show();
	var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
	setWorkingAreaTitle(node.text);
	clearDMSWorkingArea();

	try {
		loadEmployeeRoasterMappingAjax();
	} catch (Exception) {
	}
	if (node.text == 'SHARED') {
		getSharedFiles();
	} else {
		getFolderFilesDocumentsByParentId(nodeId, gDMSCategoryTreeName);
		getFolderFilesDocumentsByParentId(nodeId, gDMSCategoryTreeName);
	}
	/*$('#tdMenuFileDelete').hide();
	$('.docListOpt').hide();*/


	$('.chkFileListIcon').bind('click', function() {
		if ($('input[name=chkFileListIcon]').is(':checked')) {
			$('#tdMenuFileDelete').show();
			$('.docListOpt').show();
		} /*else {
			$('#tdMenuFileDelete').hide();
			$('.docListOpt').hide();
		}*/
	});

	try {
		onShowFilesFinish();
	} catch (Exception) {
	}

}

/**
 * @name addTextDocumentCheckPoint()
 * @since 29th Mar 2012
 * @purpose for showing the icons of the uploaded documents
 */

function addTextDocumentCheckPoint() {
	//var nodeId = getSelected();
	gTextDocSaveFlag = false;
	var nodeId = gDMSCategoryTreeId;
	if (nodeId != null) {
		showAddEditTextDocumentForm(undefined);
	} else {
		jAlert('Can not Upload and Create File in /Home (Root) directory!');
	}
}

/**
 * @name showAddTextDocumentNamePrompt()
 * @since 29th Mar 2012
 * @purpose for showing the icons of the uploaded documents
 */
function showAddTextDocumentNamePrompt() {

	if (gTextDocSaveFlag == false) {
		$('#showTextDocumentDialog').modal('hide');
		$('#txtDocumentName').val("");
		$('#textDocumentNameDialog').modal('show');
	} else {
		var textDocumentName = $('#txtDocumentName').val();
		$('#showTextDocumentDialog').modal('hide');
		saveTextDocument(textDocumentName);
	}
}

/**
 * @name checkTextDocumentNameDuplicacy()
 * @return: true on success(duplicacy found) false (on duplicacy found)
 * @since 29th Mar 2012
 * @purpose for checking the duplicacy of the text document name in a given
 *          category
 */
function checkTextDocumentNameDuplicacy() {
	//var nodeId = getSelected();
	var nodeId = gDMSCategoryTreeId;
	var name = $('#txtDocumentName').val();
	var returnResponse = false;
	$.ajax({
		url : 'checkTextDocumentNameAjax.json?categoryId=' + nodeId + '&name='
		+ name.gemsEncode(2),
		dataType : 'json',
		async : false,
		success : function(jArray) {
			if (jArray[0].responseFlag == '1') {
				returnResponse = true;
			} else if (jArray[0].responseFlag == '0') {
				returnResponse = false;
			}
		},
		error : function() {
			return false;
		}
	});
	return returnResponse;
}

/**
 * @name showAddEditTextDocumentForm()
 * @since 29th Mar 2012
 * @purpose for showing the icons of the uploaded documents
 */
function showAddEditTextDocumentForm(documentId, callback) {
	
	var custHelper = $('#customerHelper').val();
	
	var fileExtAvailable = custHelper=='HPTU' || $('#productionServer').val()=='false'?'All File Types Allowed.':'.doc, .docx, .xls, .xlsx, .pdf, .jpg, .text, .png, .gif, .ppt, .pptx files only';
	removeAllTemporaryAttachment();
	/** Seting blank to each control/fields of the addText document form */
	var addTextDocumentFormBoilerPlate = `
		<div class="modal-header" id="divTextDocumentFileTitle"><a href="javascript:void(0);" class="label alert-danger pull-right" data-dismiss="modal" style="background-color:">X</a> <h3>New Text Document</h3></div>
		<div class="modal-body">
		<table align="center" class="table">
		<input type = "hidden" id = "hdnDocumentId"/>
		<input type = "hidden" id = "hdnDocumentCategoryId"/>
		<tr>
		<td style="display:none">
		<a class="button" style="display:none" id = "btnTextDocumentDelete" style = "display:none;" title="Delete" href="javascript:void(0)"><span class="icon icon186"></span></a>
		<a class="button" style="display:none" id = "btnTextDocumentReplicate" title="Replicate" href="javascript:void(0)"><span class="icon icon55"></span></a>
		<a class="button" style="display:none" id = "btnTextDocumentCancel" onclick="cancelTextDocumentFormCheckPoint()" title="Close" href="javascript:void(0)"><span class="icon icon56"></span></a>
		</td></tr><tr>
		<td>
		<textarea style="height:100px; width:100%" id="editing_field1"></textarea>
		</td>
		</tr>
		<tr>
		<tr><td><div class = "label label-info" style = "font-size:14px;height:15px">Description</div></td></tr>
		<tr>
		<td>
		<textarea style="height:50px; width:100%" id="txtDescription"></textarea>
		</td>
		</tr>
		<tr>
		<td>
		<fieldset>
		<legend><i class="fa fa-paperclip fa-lg fa-rotate-270" aria-hidden="true"></i> Attachments  </legend>
		<div id = "tblAttachementList">No Attachments!</div>
		</fieldset>
		</td>
		</tr>
		<tr>
		<td style="" id="idattachmentbar">
		<div class="upload-btn-wrapper" style="width:30%">
		<button class="btn btn-info full-upload-btn" type="button"><i class="fa fa-upload" aria-hidden="true"></i> Upload attachments</button>
		<input type="file" id="txtFileAttachment" name="fileData" />
		</div>
		<br>
		<div class = "alert alert-info">
		<i class = "icon-hand-right"></i>&nbsp;&nbsp; ${fileExtAvailable}<br />
		<i class = "icon-hand-right"></i>&nbsp;&nbsp; Maximum file size limit &nbsp;&nbsp;<strong class = "fileSizeAllowedCls">20</strong>&nbsp;MB<br />
		</div></td>
		</tr>
		<tr>
		<td>
		<div class="label label-info">Add Tags</div>
		<input type="text" id="textFileTagsInput" value=""/>
		</td> </tr> </table> </div>
		<div class="modal-footer" style="text-align:right;">
		 <input type="button" id = "btnTextDocumentSave" class = "btn btn-inverse btn-mini" value="Save" onclick = "showAddTextDocumentNamePrompt()" >
		 <input type="button" id = "btnTextDocumentCancel" class = "btn btn-danger btn-mini" value="Close" onclick = "cancelTextDocumentFormCheckPoint()" data-dismiss="modal">
		</div>`;

	/**
	 * Hiding the content title of the middle td. WHich need to be shown later(
	 * After saving the text file)
	 */
	$('.divDocumentListWindowTitle').hide();
	//$('.tblFileIconList').html(addTextDocumentFormBoilerPlate);
	//$('#showTextDocumentDialog').find('.TextDocumentDetail').html(addTextDocumentFormBoilerPlate);
	$('#showTextDocumentDialog').html(addTextDocumentFormBoilerPlate);
	$('#showTextDocumentDialog').modal('show');
	
	$('#textFileTagsInput').tagit();
    $('#textFileTagsInput').tagit({//K-i-r-a-n
    	caseSensitive:false,
    	tagLimit:10,
    	availableTags: ArrayTags
    });
    
	$('.replicateDoc').data('docId', documentId);
	$('#btnTextDocumentReplicate').data('docId', documentId);
	$('#btnTextDocumentReplicate').click(function() {
		configureReplicateToOtherBatch(this, gEvaluationType);
	});

	if (documentId != undefined) {// If document is unsaved, Delete button has
		// to be hidden and vice-versa

		$('#btnTextDocumentDelete').show();
		$('#btnTextDocumentDelete').unbind();
		$('#btnTextDocumentDelete').click(function() {
			deleteFiles(documentId, 'text');
		});

	}
	
	var fileSizeAllowed = AllowedFileSize.DOCUMENT_UPLOAD / (1024 * 1024);
	$('#fileSizeAllowed, .fileSizeAllowedCls').text(fileSizeAllowed);
	$('#hdnDocumentCategoryId').val(gDMSCategoryTreeId);
	createEditor('editing_field1'); // function call to convert the textarea
	// into richtextbox
	initAttachmentBar();
	$('#btnTextDocumentCancel').bind('click', function() {
		gTextDocumentCommandFlag = 'cancel';
	});
	$('#btnTextDocumentReset').bind('click', function() {
		gTextDocumentCommandFlag = 'reset';
	});
	$('#btnTextDocumentSave').bind('click', function() {
		gTextDocumentCommandFlag = 'save';
	});
	try {
		callback();
	} catch (e) {
		// alert(e);
	}
}

/**
 * @name saveTextDocument()
 * @since 30th Mar 2012
 * @purpose for adding the text documents against a category
 */
function saveTextDocument(textDocumentName) {

	$('#textDocumentNameDialog').modal('hide');
	var saveFlag = true;
	if (textDocumentName == undefined || textDocumentName == '') {
		textDocumentName = getDocumentTitle();
	}else{
		if(isValidFileName(textDocumentName)==false){
			jAlert("Please enter valid File Name!");
			return;
		}
	}
	/**
	 * Check point for already save of the document. If already save no need to
	 * check duplicacy and if not check for duplicacy. 'saveFlag used for
	 * checking the call'
	 */
	if (gTextDocSaveFlag == false) {
		if (checkTextDocumentNameDuplicacy() == true)
			saveFlag = true;
		else
			saveFlag = false;
	}
	
	if (saveFlag == true) {
		var text = CKEDITOR.instances.editing_field1.getData();
		var docId = $('#hdnDocumentId').val();
		//var categoryId = getSelected();
		var categoryId = gDMSCategoryTreeId;
		var description = $('#txtDescription').val();
		var tagsTxt = $('#textFileTagsInput').val();
		
		$.ajax({
			url : 'saveTextDocumentAjax.json',
			data : {
				documentId : docId,
				text : text,
				description : description,
				categoryId : categoryId,
				name : textDocumentName.gemsEncode(),
				files_uploaded : '',
				tags: tagsTxt
			},
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			dataType : 'json',
			type : 'POST',
			success : function(jArray) {
				var responseText = '';
				var text = jArray[0].responseText;
	   			var docId = text.split('-')[1];
				responseText = text.split('-')[0];
				if (jArray[0].responseFlag == '1') {
					$('#idattachmentbar').show();
					/**
					 * @comment empty the global variable 'files_uploaded' to
					 *          avoid dirty data
					 */
					files_uploaded = '';
					/**
					 * Putting save true false to make the system know that
					 * current document is saved
					 */
					gTextDocSaveFlag = true;
					setDocumentTitle(textDocumentName);
					$('#btnTextDocumentDelete').unbind();
					$('#btnTextDocumentDelete').click(function() {
						deleteFiles(docId, 'text');
					});
					$('#btnTextDocumentDelete').show();
					$('#hdnDocumentId').val(docId);
					//getAttachmentListAjax1(docId);
					//getTextFiles(categoryId);
					//showSuccessMessage("Saved Successfully", 5000);
					getFileAndFolderByPath();
					
					jAlert("Saved Successfully");
					/** to save the text editor */
					// tinyMCE.triggerSave();
				} else {
					showErrorMessage(responseText, 5000);
					/**
					 * Putting save flag false to make the system know that
					 * there is no any text doc pending to be saved
					 */
					gTextDocSaveFlag = false;
				}
				/**
				 * If cancel was pressed then following script should run
				 */
				if (gTextDocumentCommandFlag == 'cancel') {
					gTextDocSaveFlag = false;
					/** to save the text editor */
					// tinyMCE.triggerSave();
					/** Removes the editor instance */
					removeDocumentEditor();
					//var nodeId = getSelected();
					var nodeId = gDMSCategoryTreeId;
					/** show the list of file in the selected category */
					showFiles(nodeId);
				}
			},
			error : function() {

			}
		});
	} else {
		jAlert('Name already exist');
	}
}

/**
 * @name showText(docId)
 * @param docId:
 *            'text document ID' on which click event has been fired
 * @since 30th Mar 2012
 * @purpose for showing the text documents on double click against a document ID
 */
var gTextVeiwTypeFlag = false;
function showText(docId,type) {
	
	if(type!=undefined && type=='view')
	{
		gTextDocSaveFlag = false;
	}else{
		gTextDocSaveFlag = true;
	}
	$('#tdFileListIcon-text-'+docId).popover('destroy');
	$('#docSettings').hide();
	$('#tdMenuFileDelete').hide();

	showAddEditTextDocumentForm(docId, function() {
		if(type!=undefined && type=='view')
		{
			gTextVeiwTypeFlag = false;
			$('#btnTextDocumentSave').hide();
			$('#idattachmentbar').hide();
			$('#btnTextDocumentCance').off('click');
		}
		else
		{
			gTextVeiwTypeFlag = true;
			$('#btnTextDocumentSave').show();
			$('#idattachmentbar').show();
		}
		getTextDocumentData(docId);
	});
}

function getTextDocumentData(docId) {

	$.ajax({
		url : 'getTextDocumentAjax.json?d__documentId=' + docId,
		beforeSend : function() {
			startCommonAjaxSpinner();
		},
		complete : function() {
			stopCommonAjaxSpinner();
		},
		dataType : 'json',
		async : false,
		success : function(jArray) {
			if (jArray.length > 0) {
				gTextDocSaveFlag = true;
				/**
				 * Seting each control/fields of the addText document form with
				 * the current document information
				 */
				CKEDITOR.instances.editing_field1
				.setData(jArray[0]["documentBody"]);
				$('#hdnDocumentId').val(jArray[0]["documentId"]); /*
				 * Hidden
				 * document
				 * id that
				 * will help
				 * us in
				 * editing
				 * the same
				 * document
				 * overthe
				 * controller
				 */
				setDocumentTitle(jArray[0]["name"]);
				$('#txtDescription').val(jArray[0]["description"].gemsDecode());
				$('#txtDocumentName').val(jArray[0]["name"].gemsDecode());
				
				$('#hdnDocumentCategoryId').val(jArray[0]["documentCategoryId"]);
					
				$('#docCatIdDNS').val(jArray[0]["documentCategoryId"]);

				/** Attaching the attachments attached with current text document */
				getAttachmentListAjax1(jArray[0]["eDocId"]);
			}
		},
		error : function() {

		}
	});
}

/**
 * @name uploadDocumentCheckPoint()
 * @since 30th Mar 2012
 * @purpose for checking the selection of category
 */
function uploadDocumentCheckPoint() {
	var nodeId = gDMSCategoryTreeId;
	if (nodeId != null) {
		showUploadDocumentForm(nodeId);
	} else {
		jAlert('Can not Upload and Create File in /Home (Root) directory!');
	}
}

/**
 * @name getCategoryPath(nodeId)
 * @param nodeId:
 *            target node(category) ID for which path requires
 * @since 30th Mar 2012
 * @purpose returns the category path of the document the upload form for
 *          uploading the file
 */
function getCategoryPath(nodeId, callback) {
	var catPath = "";
	$.ajax({
		url : 'getCategoryPathAjax.json?categoryId=' + nodeId,
		dataType : 'text',
		async : false,
		success : function(response) {
			try {
				callback(response);
			} catch (e) {
				catPath = response;
			}
		},
		error : function() {

		}
	});
	return catPath;
}

/**
 * @name showUploadDocumentForm()
 * @since 30th Mar 2012
 * @purpose for showing the upload form for uploading the file
 * @param dialogId
 *            'id' of the dialog box on which uploading form has to be shown
 * @author vimal
 */
/*function showUploadDocumentForm(dialogClass, nodeId) {
	try {
		if (dialogClass == undefined) {
			dialogClass = 'tblFileIconList';
		}
		if (nodeId == undefined) {
			nodeId = getSelected();
		}
		initDocumentUploadForm(nodeId);
		setDocumentCategoryId(nodeId);
	} catch (e) {

	}
}*/
//new
function showUploadDocumentForm(nodeId) {
	try {
		/*if (dialogClass == undefined) {
			dialogClass = 'tblFileIconList';
		}*/
		if (nodeId == undefined) {
			nodeId = gDMSCategoryTreeId;
		}
		
		$('#descriptionUpload').show();
	   	$('#docUploadSection').hide();
		
		initDocumentUploadForm(nodeId);
		setDocumentCategoryId(nodeId);
	} catch (e) {

	}
}

function uploadDocumentFormNextBtn(){
	$('#descriptionUpload').hide();
	$('#docUploadSection').show();
}

function uploadDocumentFormBackBtn(){
	$('#descriptionUpload').show();
	$('#docUploadSection').hide();
}
//

function initDocumentUploadFormDialog(dialogId) {

	$('#' + dialogId).dialog({
		autoOpen : false,
		width : 600,
		height : 400,
		modal : true

	});
}

/**
 * @name showCategoryProperties()
 * @since 30th Mar 2012
 * @purpose for showing the properties for the selected category
 */
function showCategoryProperties() {
	var nodeId = getSelected();
	$.ajax({
		url : 'getCategoryProperties.json?categoryId=' + nodeId,
		dataType : 'json',
		async : false,
		success : function(jArray) {
			$('#lblCategoryPath').html(jArray[0]["categoryPath"]);
			$('#lblCategoryName').html(jArray[0]["name"]);
			$('#lblCategorySize').html(jArray[0]["categorySize"]);
			$('#lblCategorySize').append('&nbsp;&nbsp; KB');
			$('#categoryPropertiesDialog').dialog('open');
		},
		error : function() {

		}
	});

}

/**
 * @name deleteFiles()
 * @since 1st Apr 2012
 * @purpose for deleting the file from a percular category
 */
function deleteFiles(docId, docType) {

	jConfirm('Are you sure?', 'Confirmation Dialog', function(response) {

		if (response) {
			var ids = new Array();
			var fileTypes = new Array();
			var i = 0;
			if (docId != undefined && docType != undefined) {
				ids.push(docId);
				fileTypes.push(docType);
			} else {
				$('input[name=chkFileListIcon]:checked').each(function() {
					var temp = $(this).attr('id');
					ids[i] = temp.split("-")[2];
					fileTypes[i] = temp.split("-")[1];

					i++;
				});
			}

			$.ajax({
				url : 'deleteFiles.json?ids=' + ids + '&fileTypes=' + fileTypes,
				dataType : 'text',
				async : false,
				success : function(text) {
					jAlert("Success");
//					gCategoryType='courseFile';
//					setEvaluationSchemaId(id);
//					showFiles(documentCategoryId);
//					gCategoryType = '';
					$('#commonDocumentDialog').modal('hide');

					var nodeId = getSelected();

					showFiles(nodeId);
				},
				error : function() {

				}
			});
		}
	});

}

/**
 * @name showFileDetail(id)
 * @id id of the 'td' element(inside which file list is showing), on which
 *     mouseover event has been fired
 * @since: 1st Apr 2012
 * @purpose for showing the properties for the selected category
 */
function showFileDetail(id, toolTipText) {

	if (toolTipText == undefined) {
		if (gEvaluationType != 'Lecture Notes'
			&& gEvaluationType != 'University Question bank'
				&& gEvaluationType != 'Sample Assignment') {
			toolTipText = 
				'<button style="color:red;float:right;margin-right:-10px;margin-top:-20px;" data-dismiss="modal" class="close" type="button" id="close-'+id+'">x</button>'+
				'<table id="dpop" class = "smalltable">' + '<tbody>'
				+ '<tr>' + '<th>File:</th>' + '<td>'
				+ $('#' + id).data("Name")
				+ '</td>'
				+ '</tr>'
				+ '<tr>'
				+ '<th>Created On:</th>'
				+ '<td>'
				+ $('#' + id).data("CreationDate")
				+ '</td>'
				+ '</tr>'
				+ '<tr>'
				+ '<th>Category:</th>'
				+ '<td>'
				+ $('#' + id).data("Parent")
				+ '</td>'
				+ '</tr>'
				+ '<tr>'
				+ '<th>Type</th>'
				+ '<td>'
				+ $('#' + id).data("Type")
				+ '</td>'
				+ '</tr>'
				+ '<tr>'
				+ '<th>Description</th>'
				+ '<td>'
				+ $('#' + id).data("Description")
				+ '</td>'
				+ '</tr>'
				+ '</tbody>'
				+ '</table>';
		}
	}


	$('#close-'+id).click(function(){
		closeTooltip(this);
	});

	$('#'+id).popover('destroy');
	var toolTipObj = $('#'+id).popover({trigger:'hover',placement:'top',html:true,content:toolTipText});
	$('#'+id).popover('show');
	$('#close-'+id).data('toolTipObj',toolTipObj);


}

function closeTooltip(toolTipObj)
{
	toolTipObj = $(toolTipObj).popover('toolTipObj');
	$(toolTipObj).popover('destroy');
}


/**
 * @name hideFileDetail(id)
 * @param id:
 *            id of the 'td' element(inside which file list is showing), on
 *            which mouseout event has been fired
 * @since: 1st Apr 2012
 * @purpose for showing the properties for the selected category
 */
function hideFileDetail(id) {
	$('#' + id).qtip("destroy");
}

/**
 * @name: searchDocumentFile()
 * @since: 1st April 2012
 * @purpose: for searching document file in entire category with proper path
 */
function searchDocumentFile() {
	//var searchText = $('#txtSearch').val().trim();
	//var searchType = $('input[name="searchType"]:checked').val();
	var searchText = $('#txtSearch2').val().trim();
	var searchType = $('#searchTypeCmb option:selected').val();
	$('#searchFileList').html('');
	$('#subFolder').html('');
	$('#documentsList').html('');
	
	$('#tdFileAndTextWindow').hide();
	
	if (searchText != '') {
		$
		.ajax({
			url : 'searchDocumentFile.json?searchText=' + searchText
			+ '&searchInCategory=' + gSearchInCategory
			+ '&searchType=' + searchType,
			dataType : 'json',
			async : false,
			success : function(jArray) {
				gjArrSearchResultDocument = jArray;
				//gjArrUploadedDocument = jArray;
				//showUploadedDocumentIcon();
				if (jArray[0].responseFlag == undefined) {
					showSearchResultDocumentIcon(searchText,
							gjArrSearchResultDocument.length);
					
				} else {
					$('.tblFileIconList').html(jArray[0].responseText);
					/**
					 * changing the title of the file window(which is in
					 * middle) with search result related information
					 */
					$(".divDocumentListWindowTitle")
					.html(
							'<h5 align="center" class="box-title">'
							+ (gjArrSearchResultDocument.length - 1)
							+ '&nbsp;search result(s) found for-&nbsp;"'
							+ searchText + '"</h5>');
				}
			},
			error : function() {
			}
		});
	} else {
		jAlert('Please enter search text!!!!');
	}
}

/**
 * @name showSearchResultDocumentIcon(searchText,searchCount)
 * @param searchText:
 *            search text entered by user
 * @param searchCount:
 *            no of search results
 * @since 1st Apr 2012
 * @purpose for showing the searched icons of the files(text + uploaded
 *          document) followed by path
 */
function showSearchResultDocumentIcon(searchText, searchCount) {
	$('.tblFileIconList').html("");
	$("#documentsList").html('');
	$('#my-menu').html('');
	$('#load').show();
	
	/**
	 * changing the title of the file window(which is in middle) with search
	 * result related information
	 */
	var boiler1 = '';
	$('#fileList').hide();
	$('#searchFileList').show();
	$('#searchFileList').html('');
	$('#tdFileAndTextWindow').hide();
	
	boiler1 +=
			'<h5 align="center" class="box-title" style="">' + searchCount
			+ '&nbsp;search result(s) found for-&nbsp;"' + searchText
			+ '"</h5>';
	
	var link = "";
	var flag=8;
	var menuBoiler = '';
	boiler1 +='<table class=""><tr>';

	/** loop for showing list of files on a perticular search with path */
	for ( var i = 0; i < gjArrSearchResultDocument.length; i++) {

		var downloadLink = '';
		var fullName = gjArrSearchResultDocument[i]["name"];
		// gjArrUploadedDocument[i]["documentPathId"]+'&type=uploaded"
		if (gjArrSearchResultDocument[i]["documentBody"] != undefined) {
			downloadLink = (juno.label['url.download.json'].setIndexedArgs((gjArrSearchResultDocument[i]["eDocId"]!=undefined?gjArrSearchResultDocument[i]["eDocId"]:gjArrSearchResultDocument[i]["documentId"]), "UPLOADED", fullName));
		} else {
			downloadLink = 'downloadDocument.json?Path='
				+ gjArrSearchResultDocument[i]["documentPath"];
		}

		var catPath = getCategoryPath(gjArrSearchResultDocument[i]["categoryId"]);
		catPath = decodeURIComponent(replaceAll(catPath, '/', ' / '));
		
		if(i==flag)
		{
			boiler1+='</tr><tr>';
			flag+=8;
		}
		
		if (gjArrSearchResultDocument[i]['type'] == 'text') { 
			// condition to check for the text document file
			
			//new
			
			var name = gjArrSearchResultDocument[i]["name"].length<15?gjArrSearchResultDocument[i]["name"]:gjArrSearchResultDocument[i]["name"].substring(0,15)+'...';
			boiler1+='<td style="padding:10px;width:12.5%">';
			boiler1+='<div id="options-'+ gjArrSearchResultDocument[i]["documentId"] + '" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink" id = "tdFileListIcon-text-'
			+ gjArrSearchResultDocument[i]["documentId"]+ '"><img class="dmsFolder" src="img/files/txt.png" title="'+catPath+''+fullName+'" ondragstart="return false"'
			//+ gjArrSearchResultDocument[i]["documentId"]+ '"><img class="dmsFolder" src="img/files/txt.png" title="'+catPath+''+fullName+'" ondragstart="return false" onmouseover = "showFileDetail(\'tdFileListIcon-text-'+ gjArrSearchResultDocument[i]["documentId"]\')
			+ '"><p class="text-center">'+name+'</p>';
			
			menuBoiler += '<div id="menu-'+ gjArrSearchResultDocument[i]["documentId"] +'"><ul><li onclick = "showText(\''+ gjArrSearchResultDocument[i]["documentId"] + '\')"><a href="javascript:void(0);">Edit</a></li>';
			menuBoiler += '<li onclick="configureCourseFileDocSharingView(\'\','+gjArrSearchResultDocument[i]["documentId"]+')"><a href="javascript:void(0);">Share</a></li></ul></div>';
			//new
			
			
			link += '<tr><td  class="ui-state-default" width="40px"><input type = "checkbox"  id = "chkFileListIcon-text-'
				+ gjArrSearchResultDocument[i]["documentId"]
			+ '"  class = "chkFileListIcon"  name = "chkFileListIcon"></td><td width="150px" class="context-menu-one tooltiplink ui-state-default" id = "tdFileListIcon-text-'
			+ gjArrSearchResultDocument[i]["documentId"]
			/*+ '"  onmouseover = "showFileDetail(\'tdFileListIcon-text-'
			+ gjArrSearchResultDocument[i]["documentId"]\')
*/			+ '" style =  "cursor:pointer;" onclick = "showText(\''
			+ gjArrSearchResultDocument[i]["documentId"]
			+ '\')"><image src = "css/images/tree_file.gif" />&nbsp;&nbsp;'
			+ gjArrSearchResultDocument[i]["name"]
			+ '</td><td class="ui-state-default" width = "100px">'
			+ catPath + '</td></tr>';
		} else if (gjArrSearchResultDocument[i]['type'] == 'uploaded') { 
			// condtion for the uploaded document file
			
			//new
			var fileType = gjArrSearchResultDocument[i]["extension"];
			var iconPath = gFileTypeIcon[fileType];
			var name = gjArrSearchResultDocument[i]["name"].length<15?gjArrSearchResultDocument[i]["name"]:gjArrSearchResultDocument[i]["name"].substring(0,15)+'...';
			boiler1+='<td style="padding:10px;width:12.5%"">';
			boiler1+='<div id="options-'+ gjArrSearchResultDocument[i]["documentId"] + '" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink" id = "tdFileListIcon-text-'
			+ gjArrSearchResultDocument[i]["documentId"]+ '"><img class="dmsFolder" src="'+iconPath+'" title="'+catPath+''+fullName+'" ondragstart="return false"'
			//+ gjArrSearchResultDocument[i]["documentId"]+ '"><img class="dmsFolder" src="'+iconPath+'" title="'+catPath+''+fullName+'" ondragstart="return false" onmouseover = "showFileDetail(\'tdFileListIcon-text-'+ gjArrSearchResultDocument[i]["documentId"]\')
			+ '"><p class="text-center">'+name+'</p>';
			
			menuBoiler += '<div id="menu-'+ gjArrSearchResultDocument[i]["documentId"] +'"><ul>';
			if(fileType=='doc' || fileType=='docx' || fileType=='ppt' || fileType=='pptx' || fileType=='xls' || fileType=='xlsx')
			{
				menuBoiler+= '<li onclick="showDocumentPreview('+gjArrSearchResultDocument[i]["documentId"]+');"><a href="javascript:void(0);">Preview</a></li></a>';
			}
			menuBoiler += '<li onclick="configureUploadedFileDocSharingView('+gjArrSearchResultDocument[i]["documentId"]+',\'uploaded\',\''+name+'\',\''+gjArrSearchResultDocument[i]["categoryId"]+'\')"><a href="javascript:void(0);">Share</a></li>';
			menuBoiler+= '<li><a href="'+downloadLink+'">Download</a></li></ul></div>';
			
			//new
			
			
			link += '<tr><td  class="ui-state-default" width="40px"><input type = "checkbox" id = "chkFileListIcon-uploaded-'
				+ gjArrSearchResultDocument[i]["documentId"]
			+ '"  class = "chkFileListIcon" name = "chkFileListIcon" ></td><td width="150px" class="context-menu-one tooltiplink ui-state-default" id = "tdFileListIcon-uploaded-'
			+ gjArrSearchResultDocument[i]["documentPathId"]
			/*+ '"  onmouseover = "showFileDetail(\'tdFileListIcon-uploaded-'
			+ gjArrSearchResultDocument[i]["documentId"]\')
*/			+ '" style =  "cursor:pointer"><a class="ui-state-default" href = "'
			+ downloadLink
			+ '" ><span><image src = "css/images/add_attachment_icon.png" /></span>&nbsp;&nbsp;'
			+ gjArrSearchResultDocument[i]["name"]
			+ '</a></td><td width = "100px" class="ui-state-default">'
			+ catPath
			+ '&nbsp;&nbsp;&nbsp;&nbsp;<img src = "css/icons/DownloadIcon.png" title = "download" /></td></tr>';
		}
		boiler1+='</div>';
		boiler1+='</td>';
		if(i==flag)
		{
			boiler1+='</tr>';
		}
	}
	
	
	$('#my-menu').html(menuBoiler);
	$('#searchFileList').append(boiler1);
	$('#load').hide();
	//$('.tblFileIconList').append(link);
	for ( var i = 0; i < gjArrSearchResultDocument.length; i++) {
		$("#options-"+ gjArrSearchResultDocument[i]["documentId"]).ClassyContextMenu({
			menu: 'menu-'+ gjArrSearchResultDocument[i]["documentId"],
			mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
			isMenu: true,
			minWidth: 120,
			maxWidth: 0,
			delay: 500, 
		});
	}

	/**
	 * file detail data association with checkbox and td element id using jquery
	 * data function
	 */
	for ( var i = 0; i < gjArrUploadedDocument.length; i++) {
		if (gjArrSearchResultDocument[i]['type'] == 'text') {
			$(
					'#chkFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Type', 'text');
			$(
					'#chkFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Id', gjArrSearchResultDocument[i]["documentId"]);
			$(
					'#chkFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'CreationDate',
							gjArrSearchResultDocument[i]["creationDate"]);
			$(
					'#chkFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Name', gjArrSearchResultDocument[i]["name"]);
			$(
					'#chkFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"])
					.data(
							'Parent',
							gjArrSearchResultDocument[i]["documentCategoryObj"]["name"]);
			$(
					'#chkFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Description', gjArrSearchResultDocument[i]["description"]);
			$(
					'#tdFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Type', 'text');
			$(
					'#tdFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Id', gjArrSearchResultDocument[i]["documentId"]);
			$(
					'#tdFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'CreationDate',
							gjArrSearchResultDocument[i]["creationDate"]);
			$(
					'#tdFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Name', gjArrSearchResultDocument[i]["name"]);
			$(
					'#tdFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"])
					.data(
							'Parent',
							(gjArrSearchResultDocument[i]["documentCategoryObj"]!=null?gjArrSearchResultDocument[i]["documentCategoryObj"]["name"]:""));
			$(
					'#tdFileListIcon-text-'
					+ gjArrSearchResultDocument[i]["documentId"]).data(
							'Description', gjArrSearchResultDocument[i]["description"]);
		} else if (gjArrSearchResultDocument[i]['type'] == 'uploaded') {
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							"Type", "uploaded");
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Id', gjArrUploadedDocument[i]["documentPathId"]);
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'CreationDate', gjArrUploadedDocument[i]["creationDate"]);
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Name', gjArrUploadedDocument[i]["name"]);
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Parent',
							(gjArrUploadedDocument[i]["documentCategoryObj"]!=null?gjArrUploadedDocument[i]["documentCategoryObj"]["name"]:""));
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Description', gjArrUploadedDocument[i]["description"]);
			$(
					'#chkFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'DocumentPath', gjArrUploadedDocument[i]["documentPath"]);

			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							"Type", "uploaded");
			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Id', gjArrUploadedDocument[i]["documentPathId"]);
			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'CreationDate', gjArrUploadedDocument[i]["creationDate"]);
			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Name', gjArrUploadedDocument[i]["name"]);
			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Parent',
							(gjArrUploadedDocument[i]["documentCategoryObj"]!=null?gjArrUploadedDocument[i]["documentCategoryObj"]["name"]:""));
			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'Description', gjArrUploadedDocument[i]["description"]);
			$(
					'#tdFileListIcon-uploaded-'
					+ gjArrUploadedDocument[i]["documentId"]).data(
							'DocumentPath', gjArrUploadedDocument[i]["documentPath"]);
		}

	}
	/**
	 * binding the right click action on each 'td' element inside which file has
	 * been shown
	 */
	/*$('.docListOpt').hide();
	$('#tdMenuFileDelete').hide();*/
	/**
	 * binding click event on the checkbox so dat clicking on it can show the
	 * action button associated with dat file
	 */
	$('.chkFileListIcon').bind('click', function() {

		if ($('input[name=chkFileListIcon]').is(':checked')) {
			$('.docListOpt').show();
			$('#tdMenuFileDelete').show();
		} /*else {
			$('#tdMenuFileDelete').hide();
			$('.docListOpt').hide();
		}*/

	});
}

/**
 * @name refreshCategoryTree()
 * @since 1st Apr 2012
 * @purpose for refreshing the entire tree(category view)
 */
function refreshCategoryTree(catTypeArray, flg) {
	var categoryRetrievalPath = getCategoryRetrievalPath();
	var categoryType = getSelectedCategoryType();
	var parentCategoryType = getSelectedParentCategoryType();
	createTree(categoryRetrievalPath, categoryType, parentCategoryType,undefined,undefined,flg);
	reload();
}

/**
 * @name: cancelTextDocumentFormCheckPoint()
 * @since 4th Apr 2012
 */

function cancelTextDocumentFormCheckPoint() {
	if(gTextVeiwTypeFlag==false){
		return true;
	}
	var evaluationName = $('.divDocumentListWindowTitle').text();
	if (CKEDITOR.instances.editing_field1 != undefined) {
		if (isDocumentDirty()) {
			$.prompt('Do you want to save '+evaluationName+'?', {
				callback : cancelTextDocumentForm,
				buttons : {
					Save : 1,
					Abort : 2,
					Cancel : 3
				}
			});
		} else {
			/** Removes the editor instance */
			removeDocumentEditor();
			removeAllTemporaryAttachment();
			var nodeId = getSelected();
			showFiles(nodeId);
			gTextDocSaveFlag = false;
			$('#docSettings').show();
		}
	} else {
		var node = $('#' + gDMSCategoryTreeId).tree('getSelected');
		showFiles(node.id);
		$('#docSettings').show();
	}

	/***************************************************************************
	 * Anil kateliya Replicate doc
	 */
	$('.replicateDoc').data('docId', '-1');

}

/**
 * @name: cancelTextDocumentForm()
 * @since 4th Apr 2012
 */
function cancelTextDocumentForm(e, v, m, f) {

	if (v == 1) { // condition to save
		/**
		 * Ask for the name of the file if current file is unsaved ohter wise
		 * save it with previous name
		 */
		showAddTextDocumentNamePrompt();

	} else if (v == 2) { // condition to abort
		/**
		 * Putting save flag false to make the system know that there is no any
		 * text doc pending to be saved
		 */
		gTextDocSaveFlag = false;
		removeAllTemporaryAttachment();
		var nodeId = getSelected();
		/** show the list of file in the selected category */
		showFiles(nodeId);
	} else if (v == 3) {
		// No Action
	}
}

/**
 * @name: uploadTextDocumentAttachment()
 * @since 4th Apr 2012
 * @see upload.js
 */
function uploadTextDocumentAttachment() {
	upload('DMS-TextDocumentAttachment', getCategoryPath(getSelected()));
}

/**
 * @name: removeAttachmentAjax(Id)
 * @since 4th Apr 2012
 */
function removeAttachmentAjax(id, fileName) {
	fileName = fileName.replace(/~/g, ' ');
	var documentId = id.split('-')[1];
	$('#' + id + '').data('removeFileHtml', $('#' + id + '').html());
	if (documentId != undefined && fileName != undefined) {
		if (documentId != '0') {
			$
			.ajax({
				url : 'removeAttachmentAjax.json?d__documentId='
					+ documentId + '&attachmentName=' + fileName,
					async : false,
					dataType : 'text',
					success : function(response) {
						/**
						 * Attaching the attachments attached with current
						 * text document
						 */
						if (response == 'success') {
							var undoBoiler = '<td colspan = "2">This document has been deleted successfully. You can <a href = "javascript:void(0)" onclick = "undoAttachmentRemoveAction(\''
								+ id
								+ '\',\''
								+ documentId
								+ '\',\''
								+ fileName
								+ '\')"> <span class="label">undo</span></a> this action.</td>';
							$('#' + id).html(undoBoiler);
						}else{
							jAlert(response);
						}
					},
					error : function() {
					}
			});
		} else {
			$('#' + id).remove();
		}
		getTextDocumentData(id);
		//refreshTemporaryAttachmentList();
	}
}

function undoAttachmentRemoveAction(trId, documentId, attachmentFileName) {
	$.ajax({
		url : 'undoAttachmentRemoveAction.json',
		data : {
			attachmentName : attachmentFileName,
			documentId : documentId
		},
		dataType : 'text',
		type : 'POST',
		success : function(text) {
			if (text == 'success') {
				// jAlert($('#'+trId+'').data('removeFileHtml'));
				$('#' + trId + '').html(
						$('#' + trId + '').data('removeFileHtml'));
			} else {

			}
		}
	});
}
/**
 * @name getAttachmentListAjax(documentId)
 */
function getAttachmentListAjax(documentId, tableId) {
	$
	.ajax({
		url : 'getTextDocumentAjax.json?d__documentId=' + documentId,
		async : false,
		dataType : 'json',
		success : function(jArray) {
			/**
			 * Attaching the attachments attached with current text
			 * document
			 */
			var attachedFiles = jArray[0]["documentPath"] + "";
			var arrAttachedFile = attachedFiles.split(";");
			var attachementBoiler = "";
			for ( var i = 0; i < arrAttachedFile.length - 1; i++) {
				var attachmentFileName = arrAttachedFile[i];
				attachmentFileName = attachmentFileName
				.substring(attachmentFileName.lastIndexOf('/') + 1);
				var fileName = attachmentFileName.replace(/ /g, '~')
				.trim();
				var trId = 'trAttachmentFile-'
					+ jArray[0]["documentId"] + '-' + i;
				attachementBoiler += '<tr id = "'
					+ trId
					+ '"><td><img src="images/attachments.png" />&nbsp;&nbsp;&nbsp;&nbsp;<a href = "downloadDocument.json?Path='
					+ arrAttachedFile[i]
				+ '">'
				+ attachmentFileName
				+ '</a></td><td><img style = "cursor:pointer" title = "remove" src = "img/remove-icon.png" onclick = "removeAttachmentAjax(\''
				+ trId
				+ '\',\''
				+ fileName
				+ '\')" />&nbsp;&nbsp;&nbsp;&nbsp<img src = "../css/icons/DownloadIcon.png" title = "download"></td></tr>';

			}
			if (tableId == undefined)
				$('#tblAttachementList').html(attachementBoiler);
			else
				$('#' + tableId).html(attachementBoiler);
		},
		error : function() {

		}
	});
}

/**
 * @name getAttachmentListAjax(documentId)
 */
function getAttachmentListAjax1(documentId, tableId, isOwner, callback) {
	try {
		$.ajax({
			url : 'getAttachmentList.json?d__documentId=' + documentId,
			async : false,
			dataType : 'json',
			beforeSend : function() {
				$('#tblAttachementList').html(
				'<div class = "preview-large"></div>');
				$('.preview-large').addClass('loading-large');
			},
			complete : function() {
				$('.preview-large').removeClass('loading-large');

			},
			success : function(jArray) {
				$('#tblAttachementList').find('.preview-large').remove();
				populateAttachmentList(jArray, tableId, documentId, isOwner);
				callback();
			},
			error : function() {

			}
		});
	} catch (e) {

	}
}

/**
 * @name getTemporaryAttachmentListAjax1(documentId)
 */
function getTemporaryAttachmentListAjax1(callback) {
	try {
		$.ajax({
			url : 'getTemporaryAttachmentList.json',
			async : false,
			dataType : 'json',
			beforeSend : function() {
				$('#tblAttachementList').html(
				'<div class = "preview-large"></div>');
				$('.preview-large').addClass('loading-large');
			},
			complete : function() {
				$('.preview-large').removeClass('loading-large');
			},
			success : function(jArray) {
				populateTemporaryAttachmentList(jArray);
				try {
					callback();
				} catch (e) {

				}
			},
			error : function() {

			}
		});
	} catch (e) {

	}
}

function populateAttachmentList(jArray, tableId, documentId, isOwner) {
	var attachementBoiler = "";
	if (jArray.length > 0) {
		for ( var i = 0; i < jArray.length; i++) {
			var attachmentFileName = jArray[i]["name"].toString();
			var trId = 'trAttachmentFile-' + documentId + '-' + i;

			var fileType = jArray[i]["type"];
			iconPath = gFileTypeIcon[fileType];
			if (isOwner == undefined || isOwner) {
				
				
				/*Kiran*/
				var downloadLinkTmp = (juno.label['url.download.json'].setIndexedArgs((documentId), "TEXT", encodeURIComponent(attachmentFileName)));
				attachementBoiler += '<div id = "'+ trId+ '" align="center" class="label label-info" style="min-width:300px;text-align: left;background: #eaeaea;margin: 5px;">'
				+juno.label['a.download.json'].setIndexedArgs((documentId), "TEXT", encodeURIComponent(attachmentFileName), '<i class = "fa fa-download fa-lg pull-right"></i>')
				+'<img src="'+ iconPath + '" style="width:22x;height:22px;margin:1px;"/>';
				if($('#customerHelper').val() == "GOKHALE_INSTITUTE"){
					attachementBoiler += '<a style="color: #000000;font-weight: initial;" href="javascript:void(0);" clickHref = "'+downloadLinkTmp+'" target="_blank" onclick="return false;">'+attachmentFileName+'</a>';	
				}else{
					attachementBoiler += '<a style="color: #000000;font-weight: initial;" href="javascript:void(0);" clickHref = "'+downloadLinkTmp+'" target="_blank" onclick="imageViewerModal(this, \''+fileType+'\');">'+ attachmentFileName + '</a>';
				}
				
				
				
				attachementBoiler += '<a title="Remove" id = "delete-'+ documentId+ '" href="javascript:void(0)" onclick="removeAttachmentAjax(\''+ trId+ '\',\''+ attachmentFileName+ '\')">'
				+'<i class="fa fa-times-circle fa-lg" style="color:#f00;margin-left:15px;float: right;margin-top: -15px;"></i></a></div>';
				
				
			} else {
				var downloadLinkTmp = (juno.label['a.download.json'].setIndexedArgs((documentId), "TEXT", encodeURIComponent(attachmentFileName), attachmentFileName));
				attachementBoiler += '<tr id = "'
					+ trId
					+ '"><td><img src="'
					+ iconPath
					+ '" />&nbsp;&nbsp;&nbsp;&nbsp;'
					+ downloadLinkTmp
					+ '</td><td>&nbsp;&nbsp;&nbsp;&nbsp'
					+ (juno.label['a.download.json'].setIndexedArgs((documentId), "TEXT", encodeURIComponent(attachmentFileName), '<i class = "fa fa-download fa-lg"></i>'))+'</td></tr>';
				
				/*Kiran*/
				attachementBoiler += '<div id = "'+ trId+ '" align="center" class="label label-info" style="min-width:300px;text-align: left;background: #eaeaea;margin: 5px;"><img src="'+ iconPath + '" style="width:22x;height:22px;margin:1px;"/> '
				+ '<span style="color: #000000;font-weight: initial;">'+downloadLinkTmp
				+ '</span></div>';
			}
			

		}
		if (tableId == undefined)
			$('#tblAttachementList').html(attachementBoiler);
		else
			$('#' + tableId).html(attachementBoiler);
	} else {
		$('#' + tableId)
		.html(
		'<div class="alert alert-info" style="padding:2px"><strong style="color:red">No attachments!!!</strong></div>');
	}
}

/**
 * @name populateTemporaryAttachmentList()
 * @since 4th Apr 2012
 */
function populateTemporaryAttachmentList(jArray, elementId) {
	var attachementBoiler = '';
	$('#tblAttachementList').html(attachementBoiler);
	for ( var i = 0; i < jArray.length; i++) {
		var attachmentFileName = jArray[i]["name"].toString();
		var fileType = jArray[i]["type"].toString();
		var documentId = jArray[i]["documentId"].toString();
		iconPath = gFileTypeIcon[fileType];
		var trId = 'trAttachmentFile-' + documentId + '-' + i;
		if (attachmentFileName != '') {
			var downLink = 'downloadTemporaryAttachmentByTmpDocId.json?id='+ documentId+'&name='+attachmentFileName;
			/*Kiran*/
			attachementBoiler = '<div id = "'+ trId+ '" align="center" class="label label-info" style="min-width:300px;text-align: left;background: #eaeaea;margin: 5px;">'
			+'<a href="'+downLink+'" target="_blank"><i class="fa fa-download fa-lg pull-right"></i></a>'
			+'<img src="'+ iconPath + '" style="width:22x;height:22px;margin:1px;"/> '
			+'<a style="color: #000000;font-weight: initial;" clickHref = "'+downLink
			+'" onclick="imageViewerModal(this, \''+fileType+'\');" href="javascript:void(0)">'+ attachmentFileName + '</a>'
			
			+ '<a title="Remove" id = "delete-'+ documentId+ '" href="javascript:void(0)" onclick="removeTemporaryAttachmentAjax(\''+ trId+ '\',\''+ documentId+ '\' '+(jArray[i]["sType"]!=undefined?',\''+jArray[i]["sType"]+'\'':'')+')">'
			+'<i class="fa fa-times-circle fa-lg" style="color:#f00;margin-left:15px;float: right;margin-top: -15px;"></i></a></div>';
			//alert(downLink);
			/*attachementBoiler += 
				'<tr id = "'+ trId+ '"><td><div class="hvr-sweep-to-bottom download" id = "'+trId+'" style="background-color:#eee;height:65px;width:26%;margin:2px;" onmouseover="showDownloads('+documentId+')" onmouseleave="hideButton('+documentId+');">'+
				'<div style="float:left;border-right:1px solid lightgray;padding:5px;margin-top:2px;"><img src="'+iconPath+'"></div>'+
				'<p style="font-size:12px;padding:5px;" title="'+attachmentFileName+'">&nbsp;&nbsp;&nbsp;&nbsp;'+attachmentFileName.substring(0,30)+'</p>';
			
			attachementBoiler += '<div id="buttonDownload-'+documentId+'" style="display:none;">'+
				'<a class="btn btn-default" style="margin-left:10px;" href = "javascript:void(0);" onclick = "removeTemporaryAttachmentAjax(\''+ trId+ '\',\''+ documentId+ '\')" >Remove Attachment</a></div>';
			
			attachementBoiler += '</div></div><td></tr>';*/
			$('#'+(elementId!=undefined?elementId:'tblAttachementList')).append(attachementBoiler);
			
			
		}
	}

}

function showDownloads(documentId)
{
	$("#buttonDownload-"+documentId).show();
}

function hideButton(documentId)
{
	$("#buttonDownload-"+documentId).hide();
}

function removeTemporaryAttachmentAjax(trId, tempDocId, stypee) {
	try {
		$.ajax({
			url : 'removeTemporaryAttachmentList.json?d__documentId=' + tempDocId + (stypee!=undefined?"&stype="+stypee:''),
			dataType : 'json',
			type : 'POST',
			success : function(jArray) {
				$('#' + trId).remove();
				refreshTemporaryAttachmentList();
			},
			error : function() {

			}
		});
	} catch (e) {

	}
}

function refreshTemporaryAttachmentList(elementId, type) {
	try {
		$.ajax({
			url : 'getTemporaryAttachmentList.json'+(type!=undefined?'?type='+type:''),
			dataType : 'json',
			success : function(jArray) {
				populateTemporaryAttachmentList(jArray, elementId);
			},
		});
	} catch (e) {

	}
}

function removeDocumentEditor() {
	var instance = CKEDITOR.instances['editing_field1'];
	if (instance) {
		CKEDITOR.remove(instance);
	}
}

function isDocumentDirty() {
	return CKEDITOR.instances.editing_field1.checkDirty();
}

function setDocumentTitle(txtTitle) {
	$("#divTextDocumentFileTitle").html(
			'<h5 align="left" style="margin-top:5px;margin-left:15px;">'
			+ txtTitle + '</h5>');
}

function getDocumentTitle() {
	var title = $("#divTextDocumentFileTitle").find('h5').html();
	return title;
}

function getDocumentId(object) {
	var tdId = '' + $(object).attr('id');
	var docId = tdId.substring(tdId.lastIndexOf('-') + 1);
	return docId;
}

function openRenamingDialog(oldFileName, fileType, docId) {

	$('#txtNewDocumentName').val(oldFileName);
	$('#txtNewDocumentName').data('fileType', fileType);
	if (fileType.toLowerCase() == 'uploaded') {
		temp = oldFileName.substring(0, oldFileName.lastIndexOf('.'));
		if (temp.trim() != '')
			$('#txtNewDocumentName').val(temp);
		else
			$('#txtNewDocumentName').val(oldFileName);
	}
	$('#txtNewDocumentName').data('docId', docId);

	$('#renameFileDialog').dialog('open');
}

function closeRenamingDialog() {
	$('#renameFileDialog').dialog('close');
}

function renameDocument(oldName, newName) {
	var newName = $('#txtNewDocumentName').val();
	if (newName.trim() == '') {
		closeRenamingDialog();
	} else if (newName.trim() == oldName) {
		closeRenamingDialog();
	} else {
		if (validateFileName(newName)) {
			var fileType = $('#txtNewDocumentName').data('fileType');
			var docId = $('#txtNewDocumentName').data('docId');
			$
			.ajax({
				url : 'renameDocumentAjax.json?newName=' + newName
				+ '&d__documentId=' + docId + '&documentType='
				+ fileType,
				dataType : 'json',
				success : function(jArray) {
					if (jArray[0].responseFlag == '1') {
						var nodeId = getSelected();
						showFiles(nodeId);
						showSuccessMessage(
								'Document has been renamed successfully.',
								5000);
						closeRenamingDialog();
					} else {
						jAlert('Name already exist!');
					}
				}
			});
		} else {
			closeRenamingDialog();
			jAlert("this file name is invalid");
		}
	}
}

/**
 * to do later for setting the name dynamically to the td of the file list icon
 */
function setFileTitle() {

}

/**
 * 
 * @param str
 * @returns {Boolean}
 */
function validateFileName(str) {
	if (/^[A-Za-z0-9\' '\-_]+$/.test(str)) {
		return true;
	} else {
		return false;
	}
}

/**
 * @since 19th June
 */
function clearDMSWorkingArea() {
	$('.tblFileIconList').html("");
}

function setWorkingAreaTitle(title) {
	$(".divDocumentListWindowTitle").html('<h5 align="center" style="" class="box-title">' + title + '</h5>');
}

function openOrganizeFileDialog() {
	$('#organizeFile').dialog('open');
}

function closeOrganizeFileDialog() {
	$('#organizeFile').dialog('close');
}

function getSelectedTargetFolder() {
	var node = $('#ulTargetTree').tree('getSelected');

	if (node != null)
		return node.id;
	else {
		return null;
	}
}

/**
 * 
 * @param targetCategoryId
 * @param action
 *            move/copy
 */
function organizeFile(sourceCategoryId, targetCategoryId, selectedDocumentJSON,
		action) {
	/**
	 * @getting documentId as per clicked
	 */
	var documentId = '';
	var documentType = '';

	if (action == null || action == undefined) {
		jAlert('Select action!');
		return;
	} else if (targetCategoryId == null || targetCategoryId == undefined) {
		jAlert('Select target folder!');
		return;
	} else {
		var document = new Array();
		if (selectedDocumentJSON.document.length > 0) {
			for ( var i = 0; i < selectedDocumentJSON.document.length; i++) {
				docId = selectedDocumentJSON.document[i].DocumentId;
				docType = selectedDocumentJSON.document[i].DocumentType;
				document.push(docId + '-' + docType);
			}
		} else {
			/**
			 * <input type="hidden" id = "documentId"><input type="hidden" id =
			 * "documentType">
			 */
			docId = $('#documentId').val();
			docType = $('#documentType').val();
			document.push(docId + '-' + docType);
		}
		try {
			$.ajax({
				url : 'fileOrgization.json?sourceCategoryId=' + sourceCategoryId
				+ '&targetCategoryId=' + targetCategoryId + '&action='
				+ action + '&document=' + document,
				dataType : 'json',
				type : 'POST',
				success : function(jArray) {
					if (jArray["responseFlag"] == '1') {
						closeOrganizeFileDialog();
					}
					jAlert(jArray["responseText"]);
				}

			});
		} catch (e) {

		}
	}
}

/**
 * @since 16th Jul 2012
 * @returns {JSON list}
 * @functionality returns the list of selected document Id associated with
 *                type(TEXT/UPLOADED) of the document with key DocumentId and
 *                DocumentType
 */
function getSelectedDocument() {
	var selectedDocumentJSONObject = {
			document : []
	};
	$('input[name=chkFileListIcon]:checked').each(function() {
		selectedDocumentJSONObject.document.push({
			"DocumentId" : $(this).data('Id'),
			"DocumentType" : $(this).data('Type'),
		});
	});
	return selectedDocumentJSONObject;
}

function getDocumentCategoryTreeTitle() {
	$('#divCategoryHeader').find('h5').html();
}

function getSelectedCategoryType() {
	return gCategoryType;
}

function setDocumentCategoryTreeTitle(title) {
	$('#divCategoryHeader').find('h5').html(title);
}

function getDocumentWindowTitle() {
	$('.divDocumentListWindowTitle').find('h5').html();
}

function setDocumentWindowTitle(title) {
	$('.divDocumentListWindowTitle').find('h5').html(title);
}

function getSelectedParentCategoryType() {
	return gParentCategoryType;
}

function setSelectedParentCategoryType(catType) {
	gParentCategoryType = catType;
}

function setCategoryRetrievalPath(path) {
	gCategoryPath = path;
}

function getCategoryRetrievalPath() {
	return gCategoryPath;
}

function restrictNewCategory() {
	$('#chkNewDocFlag, #chkNewDocFlagTbx').attr('disabled', 'disabled');
}

function showMainMenu() {
	window.location.href = 'home.htm?type=owner';
}

/**
 * for initializing the file type input to accept file and send it server as
 * multipart to save it
 * 
 * @autor vimal
 * @since 23 Aug 2012
 */
function initAttachmentBar() {
	$(document).ready(
			function() {
				new AjaxUpload('txtFileAttachment', {
					action : 'uploadAttachments.json',
					name : 'fileData',
					size : AllowedFileSize.DOCUMENT_UPLOAD,
					data : {},
					onSubmit : function(file, extension) {
						if ($.inArray(extension.toString().toLowerCase(),
								gExtensionArray) != -1) {
							$('div.preview').addClass('loading');
							
							$('#tblAttachementList').append(
							'<div class="label label-info file-upload-progress-Bar" style="min-width:100px;width:100px;text-align: left;background: #f2dede;margin: 5px;" align="center"><img src="'+gFileTypeIcon[extension]+'" style="width:22x;height:15px;margin:1px;"> <a style="color: #000000;font-weight: initial;" href="#">'+
							file+'</a></div>'
							);//<span style="float:right" class="file-upload-progress-span"></span>
							
							$(".file-upload-progress-Bar").animate({ 
				                  width: "80%"
				            }, {
				                duration: 3000,
				            });
							this.setData({
								'categoryId' : $("#hdnDocumentCategoryId")
								.val(),
								'documentId' : $("#hdnDocumentId").val(),
								'fileSize' : AllowedFileSize.DOCUMENT_UPLOAD
							});
							return true;
						} else {
							jAlert('File type is not valid!');
							return false;
						}
					},
					onComplete : function(file, response) {
						response = eval('(' + response + ')');
						//$('.file-upload-progress-Bar').remove();
						//$('div.preview').removeClass('loading');
						if (response[0].responseFlag == '1') {
							try {
								/** To be overrriden by pluggins */
								/** ****************************** */
								var documentId = response[1].DocumentId;
								if (documentId != undefined){ 
									getAttachmentListAjax1(documentId,'tblAttachementList');
								}else{
									setTimeout(function(){
										getTemporaryAttachmentListAjax1();
									},2000);
									
								}
									
							} catch (e) {

							}
						}

					}
				});
			});
}

/**
 * for the showing the upload form
 * 
 * @param dialogClass
 *            class of the div under which form has to be shown
 */
function paintDocumentUploadForm(dialogClass, callback) {
	var boiler = '<form id = "uploadDocument" action="uploadDocument.json" method="POST" enctype="multipart/form-data">'
		+ '	<table align="Center" class="smalltable">'
		+ '	<input type="hidden" id="hdnDocumentCategory"  path="documentCategoryObj.documentCategoryId" />'
		+ '	<input type="hidden" id="hdnDocumentPath" path="documentPath" />'
		+ '	<tr>'
		+ '		<td colspan="2"><label>Description:</label>&nbsp;&nbsp;<textarea style="height:100px; width:80%" id="txtUploadDescription" name="description"></textarea></td>'
		+ '	</tr>'
		+ '<tr>'
		+ '		<td><label>Barcode:</label>'
		+ '			<input type="text" name="barcode" id="barcode"/>'
		+ '			<input type="hidden" name="barcodeOld" id="barcodeOld"/>'
		+ '				<div class="login" style="float: left;margin-left:5px"><input type="button" class = "btn btn-inverse btn-mini  " value="Show" onclick="getBarcodeFromControl(\'barcode\',\'barcodeImg\')"/>'
		+ '				</div>'
		+ '				<div style="float: left; margin-left:20px; height: 30px; overflow:hidden;">'
		+ '				<span id="barcodeImg"></span>'
		+ '				</div>'
		+ '		</td>'
		+ '	</tr>'
		+ '	<tr>'
		+ '		<td><label>Browse File:</label>'
		+ '<div class = "preview"></div>'
		+ '		<input type="file" id="txtUploadDocument"  name="fileData" /></td>'
		+ '	</tr>'
		+ '	<tr>'
		+ '		<td><label style = "color:red"><sup>*</sup>&nbsp;File size should be less than 10 MB</label></td>'
		+ '	</tr>'
		+ '	<tr>'
		+ '		<td>'
		+ '			<input type="button" class = "btn btn-inverse btn-mini  " value="Cancel" onclick = "try{showFiles(getSelected())} catch(e){}">'
		+ '		</td>' + '	</tr>' + '</table>' + '</form>';
	$('.' + dialogClass).html(boiler);
	$('#uploadDocument').reset();
	callback();
}

function setDocumentCategoryId(nodeId) {
	$('#hdnDocumentCategory').val(nodeId);
}

/**
 * for the showing the upload form
 * 
 * @param Any
 *            element id under which upload bar has to be shown
 */
function paintDocumentUploadBar(tableId) {
	var boiler = '<form id = "uploadDocument" action="uploadDocument.json" method="POST" enctype="multipart/form-data">'
		+ '<table class = "table">'
		+ '<tr>'
		+ '<th>'
		+ '<input type="hidden" id="hdnDocumentCategory"  name="documentCategoryObj.documentCategoryId" />'
		+ '		 <label>Browse file:</label>'
		+ '</th>'
		+ '<td>'
		+ '<div class = "preview"></div>'
		+ '<input type="file" id="txtUploadDocument"  name="fileData" />'
		+ '</td>' + '</tr>' + '</table>' + '</form>';

	$('#' + tableId).html(boiler);
	$('#uploadDocument').reset();
	initDocumentUploadForm();
}

function deletePlugginAttachment(docId) {
	try {
		$.ajax({
			url : 'deletePlugginAttachment.json',
			data : {
				docId : docId
			},
			success : function() {
			}
		});
	} catch (e) {
		alert(e);
	}
}

function getDocumentCategoryByParentId(categoryId, callback) {
	//alert(categoryId);
	try {
		$.ajax({
			url : 'getCategoriesByParentCategory.json',
			data : 'categoryId=' + categoryId,
			dataType : 'json',
			success : function(jArray) {
				callback(jArray);
			},
			error : function(e) {

			}

		});
	} catch (e) {

	}
}

function createChildCategoryTree(jArray) {
	// reload();
	for ( var i = 0; i < jArray.length; i++) {
		var parent = jArray[i]["refDocumentCategoryObj"]["documentCategoryId"];
		var text = jArray[i]["name"];
		var node = $('#' + gDMSCategoryTreeId).tree('find', parent);
		$('#' + gDMSCategoryTreeId).tree('append', {
			parent : (node ? node.target : null),
			data : [ {
				id : jArray[i]["documentCategoryId"],
				text : text,
			} ]
		});
	}
}

function setSearchInCategory(categoryId) {
	gSearchInCategory.push(categoryId);
}

/**
 * 
 * @param catName
 * @returns encoded string of string is valid else return blank string
 */
function getEncodedDMSCategoryName(catName) {
	if (catName == undefined)
		return "";

	if (catName != '') {
		var result = catName.replace(/[^A-Za-z0-9]/g, "");
		return result;
	} else {
		return "";
	}
}

function refreshFolder(node) {
	if (node == undefined)
		node = $('#' + gDMSCategoryTreeId).tree('getSelected');

	getDocumentCategoryByParentId(node.id,
			function(jArray) {
		var children = $('#' + gDMSCategoryTreeId).tree('getChildren',
				node.target);
		for ( var i = 0; i < children.length; i++) {
			$('#' + gDMSCategoryTreeId).tree('remove',
					children[i].target);
		}
		;
		createChildCategoryTree(jArray);
		expandNode(node);
		children = $('#' + gDMSCategoryTreeId).tree('getChildren',
				node.target);
		for ( var i = 0; i < children.length; i++) {
			$('#' + gDMSCategoryTreeId).tree('expand',
					children[i].target);
			$('#' + gDMSCategoryTreeId).tree('collapse',
					children[i].target);
		}
		;
	});
}

function deleteFolder(node) {
	$('#' + gDMSCategoryTreeId).tree('remove', node.target);
}

function removeAllTemporaryAttachment() {
	$.ajax({
		url : 'removeAllTemporaryAttachmentList.json',
		type : 'POST',
		success : function(text) {

		}
	});
}

function initDocumentUploadForm(documentCategoryId) {
    var custHelper = $('#customerHelper').val();
    var uploadDocument = new UploadDocument();
    
    var fileTypesArr = [ 'doc', 'docx', 'pdf', 'xls', 'xlsx', 'txt', 'zip', 'png', 'bmp', 'jpg', 'jpeg', 'ppt', 'pptx' ];
    if(custHelper=='HPTU' || custHelper=='HPTELIBRARY'){
    	fileTypesArr = ['ALL'];
    }else if(custHelper=='WESCHOOL'){
    	fileTypesArr = ['py', 'ipynb', 'csv', 'twb', 'twb', 'twbx', 'tds', 'tdsx', 'tde', 'tbm', 'tms', 'tps', 'sav', 'spo', 
    	                'flv', 'asf','qt','mov', 'mpg', 'mpeg', 'avi', 'm4v', 'wmv', 'mp4', 
    	                '3gp', 'mp3', 'wma', 'wav',
    	                'doc', 'docx', 'pdf', 'xls', 'xlsx', 'txt', 'zip', 
    	                'png', 'bmp', 'jpg', 'jpeg', 'ppt', 'pptx'];
    }
	var uploadFileSize = AllowedFileSize.DOCUMENT_UPLOAD;
	if(custHelper=='GMR_SA'){
		uploadFileSize = AllowedFileSize.DOCUMENT_UPLOAD_50MB
	}
    
    uploadDocument.init({
        categoryId : documentCategoryId,
        elementId : 'divUploadingBar',
        caption : 'Upload Document',
        fileType : fileTypesArr,
                     onUpload : function() {
                         uploadDocument.setData({
                             desc : $('#txtUploadDescription').val(),
                             barcode : $('#barcode').val(),
                             tags: $('#tagsFrUploadedDoc').val(),
                             subjectName : $('#subjectNameFrUploadedDoc').val(),
                             fileSize: uploadFileSize
                         });
                         return true;
                     }
    }, function(documentId) {
        uploadDocument.getDocument(documentCategoryId, function(jArray) {
                showUploadedDocumentForDMS(jArray, 'uploadedDocList', false);
        });
        $('#uploadDocument').reset();
        $('#tagsFrUploadedDoc').tagit('removeAll');
        $('#subjectNameFrUploadedDoc').val('');
    });

    uploadDocument.getDocument(documentCategoryId, function(jArray) {
            showUploadedDocumentForDMS(jArray, 'uploadedDocList', false);
    });
    
    $('#subjectNameFrUploadedDoc').val('');
    $('#tagsFrUploadedDoc').tagit('removeAll');
    $('#uploadDocumentDialog').modal('show');
    
    var fileSizeAllowed = Math.floor(uploadFileSize / (1024 * 1024));
    $('#fileSizeAllowed, .fileSizeAllowedCls').text(fileSizeAllowed);
}

function showUploadedDocumentForDMS(jArray, elementId, isCreator) {
	if (jArray.length > 0) {
		var attachementBoiler = "<table class = 'table'>";
		for ( var i = 0; i < jArray.length; i++) {
			var attachmentFileName = jArray[i]["name"].toString();
			var documentId = jArray[i]["documentId"];
			var eDocPathId = jArray[i]["eDocPathId"]!=undefined?jArray[i]["eDocPathId"]:jArray[i]["documentId"];
			var isTemporary = jArray[i]["isTemporary"];

			var trId = 'trAttachmentFile-' + eDocPathId;

			var fileType = jArray[i]["type"];
			iconPath = gFileTypeIconMapping[fileType];
			if (!isTemporary) {
				attachementBoiler += '<tr id = "'
					+ trId
					+ '"><td><img src="'
					+ iconPath
					+ '" />&nbsp;&nbsp;&nbsp;&nbsp;'+(juno.label['a.download.json'].setIndexedArgs((eDocPathId), "UPLOADED", encodeURIComponent(attachmentFileName), attachmentFileName))+'</td>';
				
				//if (isCreator) {
					attachementBoiler += '<td><img style = "cursor:pointer" title = "remove" src = "img/remove-icon.png" onclick = "deleteUploadedDMSDocument(this,\''
						+ eDocPathId + '\')" /></td>';
				//}
				attachementBoiler += '</tr>';
			} else {
				attachementBoiler += '<tr id = "'
					+ trId
					+ '"><td><img src="'
					+ iconPath
					+ '" />&nbsp;&nbsp;&nbsp;&nbsp;<a href = "#">'
					+ attachmentFileName
					+ '</a></td><td><img style = "cursor:pointer" title = "remove" src = "img/remove-icon.png" onclick = "deleteUploadedCV(\''
					+ eDocPathId
					+ '\')" />&nbsp;&nbsp;&nbsp;&nbsp<img src = "img/unsaved.png" title = "Unsaved"/></td></tr>';
			}
		}
		attachementBoiler += "</table>";
		if (elementId == undefined)
			$('#uploadedDocList').html(attachementBoiler);
		else
			$('#' + elementId).html(attachementBoiler);
	} else {
		$('#' + elementId).html('No document uploaded!!!');
	}
}

function showAddDocumentFromDMSDialog(targetDocumentId) {
	var uploadDocument = new UploadDocument();
	uploadDocument.getAllUserRootFolder(undefined, 'dms', function(jArray) {
		instantiateCourseFileAttachmentTree('ulDMSCourseFileAttachmentTree');
		_doCreateTree(jArray, 'ulDMSCourseFileAttachmentTree');
	});
	getAllCourseFileRelatedDocumentAttachment(function(jArray) {
		showDocumentForCourseFileAttachment(jArray);
	});

	$('.btnInsertFileToDocument').attr('disabled', 'disabled');
	$('.btnInsertFileToDocument').unbind();
	$('.btnInsertFileToDocument').bind('click', function() {
		insertAndShowSelectedFileToDocument(targetDocumentId);
	});

	/**
	 * Binding Search Event
	 */
	var boiler = '<input type="text" class="inputSearch" style="margin-left:10px" placeholder="Search Text">';
	$('.divSearch').html(boiler);
	$(".inputSearch")
	.tokenInput(
			'getSearchedUserDocument.json',
			{
				theme : "facebook",
				tokenLimit : 1,
				preventDuplicates : true,
				propertyToSearch : "documentName",
				placeholder : 'Search in all folder',
				noResultsText : 'No result found',
				onAdd : function(item) {
					var documentArray = '';
					documentArray = '[';

					var documentId = item.documentId;
					var documentType = item.documentType;
					var fileName = item.documentName;
					var categoryId = item.categoryId;
					documentArray += '{' + '\"documentId\":\"'
					+ documentId + '\",'
					+ '\"documentType\":\"' + documentType
					+ '\",' + '\"fileName\":\"' + fileName
					+ '\",' + '\"categoryId\":\"' + categoryId
					+ '\"' + '}';

					documentArray += ']';

					var documentJSON = documentArray;// documentArray.replace(/\s+/g,
					// '');

					if (documentJSON != '' && documentJSON != '[]') {
						insertSelectedFilesToDocument(
								documentJSON,
								targetDocumentId,
								function(jArray) {
									populateAttachmentList(jArray,
											undefined, targetDocumentId);
									$('#addCourseFileDocumentFromDMS')
									.modal('hide');
								});
					}
				},
				onDelete : function(item) {
				},
				resultsFormatter : function(item) {

					var fileType = item.fileType;
					var iconPath = gFileTypeIconMapping[fileType];
					return "<li><img src='"
					+ iconPath
					+ "' title='"
					+ item.documentName
					+ "'  />"
					+ "<div style='display: inline-block; padding-left: 10px;'><div class='full_name'>"
					+ item.documentName + "</div></div></li>";
				},
				tokenFormatter : function(item) {
					var fileType = item.fileType;
					var iconPath = gFileTypeIconMapping[fileType];
					return "<li><p><img src='" + iconPath + "' title='"
					+ item.documentName + "' />"
					+ item.documentName + "</p></li>";
				}
			});
	$('#addCourseFileDocumentFromDMS').modal('show');
}

function showDocumentForCourseFileAttachment(jArray) {
	var boiler = '<table cellpadding="0" class="table table-bordered documentFileTable" id="documentFileTable">';
	boiler += '<thead>';
	boiler += '<tr id = "' + trId + '" class="">';
	boiler += '<th class="documentId" style="display:none"></th>';
	boiler += '<th class="documentType" style="display:none"></th>';
	boiler += '<th class="categoryId" style="display:none"></th>';
	boiler += '<th class="checkbox1"><input type="checkbox" class="document" title="Select All"></th>';
	boiler += '<th class="icon"></th>';
	boiler += '<th class="fileName" style="text-align:left">Document Name</th>';
	boiler += '<th class="createdDate" style="text-align:left">Created Date</th>';
	boiler += '</tr>';
	boiler += '</thead><tbody>';
	for ( var i = 0; i < jArray.length; i++) {
		var attachmentFileName = jArray[i].documentName;
		var documentId = jArray[i].documentId;
		var trId = 'trourseFileAttachmentFile-' + i;
		var fileType = jArray[i].fileType;
		var documentType = jArray[i].documentType;
		var categoryId = jArray[i].categoryId;
		var createdDate = jArray[i].createdDate;
		iconPath = gFileTypeIconMapping[fileType];
		boiler += '<tr id = "' + trId + '" class="documentFileRow">';
		boiler += '<td class="documentId" style="display:none">' + documentId
		+ '</td>';
		boiler += '<td class="documentType" style="display:none">'
			+ documentType + '</td>';
		boiler += '<td class="categoryId" style="display:none">' + categoryId
		+ '</td>';
		if (fileType != 'folder') {
			boiler += '<td class="checkbox1"><input type="checkbox" class="document"></td>';
		} else {
			boiler += '<td class="checkbox1"></td>';
		}
		boiler += '<td class="icon"><img src="' + iconPath + '" /></td>';
		if (fileType != 'folder') {
			boiler += '<td class="fileName">' + attachmentFileName + '</td>';
		} else {
			boiler += '<td class="fileName pointer" onclick="">'
				+ attachmentFileName + '</td>';
		}

		boiler += '<td class="createdDate">' + createdDate + '</td>';
		boiler += '</tr>';
	}
	boiler += '</tbody></table>';
	$('.divUserFileList').html(boiler);
	$('.documentFileTable')
	.dataTable(
			{
				"sDom" : "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid<'span6'i><'span6'p>>",
				"iDisplayLength" : -1,
				"sWrapper" : "dataTables_wrapper form-inline",
			});

	$('.dataTables_length').addClass('hide');
	$('.documentFileTable').find('.document').bind(
			'click',
			function() {
				if ($(this).is(':checked')) {
					$(this).closest('tr').addClass('rowSelected');
				} else {
					$(this).closest('tr').removeClass('rowSelected');
				}
				if ($('.documentFileTable').find('.documentFileRow').hasClass(
				'rowSelected')) {
					$('.btnInsertFileToDocument').removeAttr('disabled');
				} else {
					$('.btnInsertFileToDocument').attr('disabled', 'disabled');
				}
			});

	var uploadDocument = new UploadDocument();
	$('.documentFileTable').find('.fileName').bind(
			'click',
			function() {

				var documentType = $(this).closest('tr').find('.documentType')
				.text();
				var documentCategoryId = $(this).closest('tr').find(
				'.documentId').text();
				if (documentType == 'cat') {
					/**
					 * @if documentType == folder then documentId is actually
					 *     documentCategoryId
					 */
					uploadDocument.getFilesForCourseFileAttachment(
							documentCategoryId, function(jArray) {
								showDocumentForCourseFileAttachment(jArray);
							});
					uploadDocument.getCategoryPathWithId(documentCategoryId,
							function(jsonArray) {
						showCategoryPath(jsonArray);
					});
				}
			});
}

function getDocumentTableData(documentCategoryId) {
	var uploadDocument = new UploadDocument();
	uploadDocument.getFilesForCourseFileAttachment(documentCategoryId,
			function(jArray) {
		showDocumentForCourseFileAttachment(jArray);
	});
	uploadDocument.getCategoryPathWithId(documentCategoryId,
			function(jsonArray) {
		showCategoryPath(jsonArray);
	});
}
function showCategoryPath(jsonArray) {
	var pathArray = new Array();
	var boiler = '';
	if (jsonArray.length > 1) {
		for ( var int = jsonArray.length - 1; int >= 0; int--) {
			boiler = '<span class="documentCategoryId pointer" id="'
				+ jsonArray[int].id + '" onclick="getDocumentTableData(\''
				+ jsonArray[int].id + '\')">' + jsonArray[int].name
				+ '</span>';
			pathArray.push(boiler);
		}
		pathArray = pathArray
		.join(' <i class="icon-play icon-white"></i> ');
		$('.searchPath').html(pathArray);
		var uploadDocument = new UploadDocument();
		$('.searchPath').find('.documentCategoryId').bind(
				'click',
				function() {
					var documentCategoryId = $(this).attr('id');
					uploadDocument.getFilesForCourseFileAttachment(
							documentCategoryId, function(jArray) {
								showDocumentForCourseFileAttachment(jArray);
							});
				});
		$('.searchPath').show();
	} else {
		$('.searchPath').hide();
	}
}

//uploadDocument.getCategoryPathWithIdAjax.json
function getAllUserRootFolder(typeArray, parentType, callback) {
	gDMSCategoryTreeId = null;
	gDMSCategoryTreeName = null;
	$
	.ajax({
		url : 'getDocumentCategoryAjax.json?categoryPath=undefined&typeArray=undefined&parentType='
			+ parentType + '&root=undefined',
			dataType : 'json',
			beforeSend : function() {
				$('.ulDMSCourseFileAttachmentTree').html(
				'<div class="preview-large"></div>');
				$('.ulDMSCourseFileAttachmentTree').find('.preview-large')
				.addClass('loading-large');
			},
			complete : function() {
				$('.ulDMSCourseFileAttachmentTree').find('.preview-large')
				.removeClass('loading-large');
			},
			success : function(jArray) {
				callback(jArray);
			},
			error : function() {
			}
	});
}

function getAllCourseFileRelatedDocumentAttachment(callback) {
	$.ajax({
		url : 'getAllCourseFileRelatedDocumentAttachment.json',
		dataType : 'json',
		beforeSend : function() {
			$('.divUserFileList').html('<div class="preview-large"></div>');
			$('.divUserFileList').find('.preview-large').addClass(
			'loading-large');
		},
		complete : function() {
			$('.divUserFileList').find('.preview-large').removeClass(
			'loading-large');
		},
		success : function(jArray) {
			callback(jArray);
		},
		error : function() {
		}
	});
}

function instantiateCourseFileAttachmentTree(treeId) {
	$('#' + treeId).tree(
			{
				animate : true,
				dnd : false,
				onClick : function(e, node) {
					var node = $('#' + treeId).tree('getSelected');
					var uploadDocument = new UploadDocument();
					uploadDocument.getFilesForCourseFileAttachment(node.id,
							function(jArray) {
						showDocumentForCourseFileAttachment(jArray);
					});
				}
			});
}

function instantiateCourseFileAttachmentTree(treeId) {
	$('#' + treeId).tree(
			{
				animate : true,
				dnd : false,
				onClick : function(e, node) {
					var node = $('#' + treeId).tree('getSelected');
					var uploadDocument = new UploadDocument();
					uploadDocument.getFilesForCourseFileAttachment(node.id,
							function(jArray) {
						showDocumentForCourseFileAttachment(jArray);
					});
				}
			});
}

function insertAndShowSelectedFileToDocument(targetDocumentId) {
	var documentArray = '';
	documentArray = '[';
	$('.documentFileTable').find('tr.documentFileRow').each(
			function() {
				var chkObj = $(this).find('.document');
				if ($(chkObj).is(':checked')) {
					var documentId = $(this).find('.documentId').text();
					var documentType = $(this).find('.documentType').text();
					var fileName = $(this).find('.fileName').text();
					var categoryId = $(this).find('.categoryId').text();
					documentArray += '{' + '\"documentId\":\"' + documentId
					+ '\",' + '\"documentType\":\"' + documentType
					+ '\",' + '\"fileName\":\"' + fileName + '\",'
					+ '\"categoryId\":\"' + categoryId + '\"' + '},';
				}
			});
	documentArray = documentArray.substring(0, documentArray.length - 1);
	documentArray += ']';

	var documentJSON = documentArray;// documentArray.replace(/\s+/g, '');

	if (documentJSON != '' && documentJSON != '[]') {
		insertSelectedFilesToDocument   (documentJSON, targetDocumentId, function(
				jArray) {
			populateAttachmentList(jArray, undefined, targetDocumentId);
			$('#addCourseFileDocumentFromDMS').modal('hide');
		});
	}
}
function insertSelectedFilesToDocument(documentArray, targetDocumentId,
		callback) {
	if (targetDocumentId == undefined || targetDocumentId == 'undefined') {
		targetDocumentId = undefined;
	}
	var targetCategoryId = gDMSCategoryTreeId;
	$.ajax({
		url : 'insertSelectedFilesToDMSDocument.json',
		dataType : 'json',
		type : 'POST',
		data : {
			documentIdsWithTypeAndName : documentArray,
			targetDocumentId : targetDocumentId,
			targetCategoryId : targetCategoryId
		},
		success : function(jObject) {
			if (jObject.responseFlag == 1) {
				callback(jObject.documentArray);
			} else {
				jAlert('<strong>' + jObject.responseText + '</strong>');
			}
		},
		error : function() {

		}
	});
}
function getFilesForCourseFileAttachment(categoryId, callback) {
	$.ajax({
		url : 'getAllUserDocumentByCategoryId.json',
		dataType : 'json',
		data : 'categoryId=' + categoryId,
		beforeSend : function() {
			$('.divUserFileList').html('<div class="preview-large"></div>');
			$('.divUserFileList').find('.preview-large').addClass(
			'loading-large');
		},
		complete : function() {
			$('.divUserFileList').find('.preview-large').removeClass(
			'loading-large');
		},
		success : function(jArray) {
			callback(jArray);
		},
		error : function() {
		}
	});
}

function deleteUploadedDMSDocument(thisObj,doumentId){
	removeUploadedDocumentById(doumentId,function(jObject){
		if(jObject.responseFlag == '1') {
			$(thisObj).closest('tr').remove();
		} else {
			jAlert('Deletion failed');
		}
	});
}

//new

function showFileAndTextWindow()
{
	$("#tdFileAndTextWindow").show();
	$("#documentsList").html('');
	$("#searchFileList").html('');
	$(".tblFileIconList").html('');
	gDMSCategoryTreeId = null;
	gDMSCategoryTreeName = null;
	$("#subFolder").hide();
	$("#fileList").hide();
	fileNameArray.splice(1, fileNameArray.length);
	fileIdArray.splice(1, fileIdArray.length);
	refreshMap();
	//$("#fileMap").html(fileNameArray[0]);
	$("#fileMapLocation").html("/<a onclick='showFileAndTextWindow();' style='cursor:pointer;'>home</a>");
	
	$('#btnAddDoc').hide();
	$('#btnUploadDoc').hide();
	$('#btnAddFolder').show();
	$('.lblIncludeDMS').show();
	
	if(window.req_param_categoryId!=null){
		getFolderFilesDocumentsByParentId(window.req_param_categoryId);
		
		return false;
	}
	
	if($('#chkIncludeSharedDMS').is(':checked')){
		fetchAllSharedDocuments();
	}else{
		fetchAllDocumnetsWithDMS(isAcademicFolder);
	}
	
}

var fileNameArray = ["Home"];//<span onclick='showFileAndTextWindow();' style='cursor:pointer;'>
var fileIdArray = ["-"];
function getDocumentByParentId(categoryId,fname) {
	console.log("Test123");
	$('#btnAddDoc').show();
	$('#btnUploadDoc').show();
	$('.lblIncludeDMS').hide();
	
	$('#dms_item_details').hide();
	gDMSCategoryTreeId = categoryId;
	//var boiler = '';
	var name = unescape(fname);
	
	if(fileIdArray.indexOf(categoryId)==-1){
		fileNameArray.push(name);
		fileIdArray.push(categoryId);
		refreshMap();
	}
	gDMSCategoryTreeName = fname;
	
	$('#load').show();
	//$('#my-menu').html('');
	var canEdit='false';
	var isShared='false';
	isShared = $('#optionDmsFolder-'+categoryId).attr('isShared');
	canEdit = $('#optionDmsFolder-'+categoryId).attr('canEdit');
	if(isShared=='true'){
		if(canEdit=='false'){
			$('#btnAddDoc').hide();
			$('#btnUploadDoc').hide();
			$('#btnAddFolder').hide();
		}else
		{
			$('#btnAddDoc').show();
			$('#btnUploadDoc').show();
			$('#btnAddFolder').show();
		}
	}
	else
	{
		$('#btnAddDoc').show();
		$('#btnUploadDoc').show();
		$('#btnAddFolder').show();
	}
	try {
		getUploadedFiles(categoryId);
		getTextFiles(categoryId);
		$.ajax({
			url : 'getCategoriesByParentCategory.json',
			data : 'categoryId=' + categoryId,
			dataType : 'json',
			success : function(jArray) {
				var j = jArray.length;
				var flag=8;
				var menuBoiler='';
				var boiler1='<table class=""><tr>';
				var boilerList =folderCommonHeader();//Kiran List View Header
				for ( var i = 0; i < j; i++) {

					if(i==flag)
					{
						boiler1+='</tr><tr>';
						flag+=8;
					}
					var fullName = jArray[i]["name"];
					try{fullName = decodeURIComponent(fullName); }catch(e){}
					var name = jArray[i]["name"].length<11?jArray[i]["name"]:jArray[i]["name"].substring(0,11)+'...';
					var createdByEmp= jArray[i]["createdByEmp"]!=null?jArray[i]["createdByEmp"]:"";
					boiler1+='<td style="padding:10px;">';
					if(jArray[i]["isEmpty"]==true){
						boiler1+='<div id="optionDmsFolder-'+ jArray[i]["documentCategoryId"]+'" isShared="'+isShared+'" canEdit="'+canEdit+'" data-createdByEmp="'+createdByEmp+'" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="DMS_content_item" data-name="'+jArray[i]["name"]+'" data-dirCount="'+jArray[i]["childDirectoryCount"]+'"  data-fileCount="'+jArray[i]["childCreatedFileCount"]+'" ondblclick="getFolderFilesDocumentsByParentId('+jArray[i]["documentCategoryId"]+',\''+escape(fullName)+'\',undefined,undefined,' +jArray[i].canEdit+')">)"><img class="dmsFolder" title="'+fullName+'" src="img/folder_emptyNew.png" ondragstart="return false">';
						try{
							boiler1+= '<p class="text-center">'+decodeURIComponent(name)+'</p>';
						}
						catch(e){
							boiler1+= '<p class="text-center">'+name+'</p>';
						}
					}
					else
					{		
						boiler1+='<div id="optionDmsFolder-'+ jArray[i]["documentCategoryId"]+'" isShared="'+isShared+'" canEdit="'+canEdit+'" data-createdByEmp="'+createdByEmp+'"  style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="DMS_content_item" data-name="'+jArray[i]["name"]+'" data-dirCount="'+jArray[i]["childDirectoryCount"]+'" data-fileCount="'+jArray[i]["childCreatedFileCount"]+'" ondblclick="getFolderFilesDocumentsByParentId('+jArray[i]["documentCategoryId"]+',\''+escape(fullName)+'\',undefined,undefined,' +jArray[i].canEdit+')">)"><img class="dmsFolder" title="'+fullName+'" src="img/folderNew.png" ondragstart="return false">';
						try{
							boiler1+= '<p class="text-center">'+decodeURIComponent(name)+'</p>';
						}
						catch(e){
							boiler1+= '<p class="text-center">'+name+'</p>';
						}
					}
					boiler1+= '<span class="folderTagsCls" style="display:none;">'+documentTagsBoiler(jArray[i]["tags"])+'</span>';
					var folderIcon = dmsSettingsObj.FOLDER_ICON;
					if(jArray[i]["isEmpty"]==true)
						folderIcon = dmsSettingsObj.FOLDER_EMPTY_ICON;
					
					boilerList+='<tr id="optionDmsFolder-'+jArray[i]["documentCategoryId"]+'" class="DMS_content_item" data-name="'+fullName+'" isShared="'+isShared+'" '+
					'canEdit="'+canEdit+'" data-createdByEmp="'+createdByEmp+'" ondblclick="getFolderFilesDocumentsByParentId('+jArray[i]["documentCategoryId"]+',\''+escape(fullName)+'\',undefined,undefined,' +jArray[i].canEdit+')">)">';
					boilerList+='<td><input type="checkbox" class="multiSelectDMSFileCls" data-file-type="folder" value="'+i+'"/></td>';
					boilerList+='<td><img src="' + folderIcon + '" class="dmsFolder" ondragstart="return false" style="width:25px;height:25px;"> '+fullName+'</td><td>Folder</td>';
					boilerList+='<td title="Directory/File Count"> </td>';
					boilerList+='<td title="Created By Employee">'+(createdByEmp)+'</td>';
					boilerList+='<td title="Can Edit">-</td>';
					boilerList+='<td title="Is Shared">'+(isShared==true?'Shared':'-')+'</td>';
					boilerList+='<td>-</td><td>'+ documentTagsBoiler(jArray[i]["tags"])+'</td>';
					boilerList+='<td></td>';
					boilerList+='</tr>';
					
					boiler1+='</div>';
					boiler1+='</td>';
					if(i==flag)
					{
						boiler1+='</tr>';
					}
					if(jArray[i]["parentCategoryType"]!=null && (jArray[i]["parentCategoryType"]!='dms' && jArray[i]["parentCategoryType"]!='DMS'))
					{
						var a=(isShared=='false' || (isShared=='true' && canEdit=='true'))?true:false;
						console.log(a);
						if(isShared=='false' || (isShared=='true' && canEdit=='true'))
						{
							$('#menuFoldr-'+ jArray[i]["documentCategoryId"]).remove();
							
							menuBoiler += '<div id="menuFoldr-'+ jArray[i]["documentCategoryId"] +'"><ul>';
							try
							{
								menuBoiler += '<li onclick="configureUploadedFolderSharingView('+jArray[i]["documentCategoryId"]+',\'folder\',\''+escape(name)+'\')"><a href="javascript:void(0);">Share</a></li>';
							}catch(e)
							{
								menuBoiler += '<li onclick="configureUploadedFolderSharingView('+jArray[i]["documentCategoryId"]+',\'folder\',\''+name+'\')"><a href="javascript:void(0);">Share</a></li>';
							}

							menuBoiler += '</ul></div>';
						}
					}
				}
				boiler1+='</tr></table>';
				boilerList+='</tbody></table>';
				
				if($('#folderViewChangeId').hasClass('fa-th-large')){
					$("#subFolder").html(boilerList);
					$('.DMS_content_item').css('float', 'inherit');
					//dataTableListView();
				}else{
					$("#subFolder").html(boiler1);
					$('.DMS_content_item').css('float', 'left');
				}
				
				$("#tdFileAndTextWindow").hide();
				$("#subFolder").show();
				$('#load').hide();
				
				$('.DMS_content_item').mousemove(function(e) {
					showItemDetails(this);
					console.log("a");
					console.log(this);
					//$('.movable').css({'top': e.pageY,'left': e.pageX});
					var tp = $(this).offset().top;
					var lft = $(this).offset().left;
					$('.movable').css({'top': tp+62,'left': lft+45});
					$('#dms_item_details').show();
				}).mouseleave(function() {
					//$('#dms_item_details').hide();
				}).click(function (){
					$('.DMS_content_item').removeClass('DMS_content_item_selected');
					$(this).addClass('DMS_content_item_selected');
				});
				$('body').click(function(){
					$('#dms_item_details').hide();
				});
				$('#my-menu').append(menuBoiler);
				for ( var i = 0; i < jArray.length; i++) {
					if(jArray[i]["parentCategoryType"]!=null && (jArray[i]["parentCategoryType"]!='dms' && jArray[i]["parentCategoryType"]!='DMS'))
					{
						/*var a=(isShared=='false' || (isShared=='true' && canEdit=='true'))?true:false;
						console.log(a);
						if(isShared=='false' || (isShared=='true' && canEdit=='true'))
						{*/
							$("#optionDmsFolder-"+ jArray[i]["documentCategoryId"]).ClassyContextMenu({
								menu: 'menuFoldr-'+ jArray[i]["documentCategoryId"], // get menu by categoryId
								mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
								isMenu: true,
								minWidth: 120,
								maxWidth: 0,
								delay: 500, 
							});
						//}
					}
				}
				
				
				showZipDownloadButton();
				
			},
			error : function(e) {

			}

		});
		
	} catch (e) {

	}
	
}

var flag = 0;
function getFolderDetail(categoryId,name)
{
	var index = fileIdArray.indexOf(categoryId);
	fileIdArray.splice(index, fileNameArray.length);
	fileNameArray.splice(index, fileNameArray.length);
	
	getFolderFilesDocumentsByParentId(categoryId,name);
	//refreshMap();
}
function getFolderDetail2(categoryId,name, flg)
{
	/*var index = fileIdArray.indexOf(categoryId);
	fileIdArray.splice(index, fileNameArray.length);
	fileNameArray.splice(index, fileNameArray.length);*/
	
	getFolderFilesDocumentsByParentId(categoryId,name, flg);
	//refreshMap();
}
var fileMapClickArray = new Array();
function refreshMap()
{

	console.log(fileNameArray);
	var boiler = '', boilerLocation='';
	boilerLocation +='/<a onclick="showFileAndTextWindow();" style="cursor:pointer;">home</a>';
	boiler+= '/'+fileNameArray[0];//showFileAndTextWindow();
	for(var i=1;i<fileNameArray.length;i++)
	{
		boilerLocation+= '/<a onclick="getFolderDetail('+fileIdArray[i]+',\''+escape(fileNameArray[i])+'\');" style="cursor:pointer;">'+fileNameArray[i]+'</a>';
		boiler+= '/'+fileNameArray[i];
		console.log(i + " -- "+fileIdArray[i]);
		fileMapClickArray[boiler] = {
			categoryId : fileIdArray[i],
			name: escape(fileNameArray[i])//Kiran Badave
		};
		/** new code **/
		try{
		$("#optionDmsFolder-"+ fileIdArray[i]).ClassyContextMenu({
			menu: 'menuFoldr-'+ fileIdArray[i], // get menu by categoryId
			mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
			isMenu: true,
			minWidth: 120,
			maxWidth: 0,
			delay: 500, 
		});
		}catch(e){console.log(e)}
		/** end **/
	}
	
	
	$("#fileMapLocation").html(boilerLocation);
	$("#fileMap").val(boiler);
	
}
function getFileAndFolderByPath(flg){
	var fileMapVal = $('#fileMap').val().trim();
	if(fileMapVal[fileMapVal.length-1]=='/'){
		fileMapVal = fileMapVal.substring(0, fileMapVal.length-1);
		$('#fileMap').val(fileMapVal);
	}
	if(fileMapVal=='' || fileMapVal=='/home'){
		$('#fileMap').val('/home')
		showFileAndTextWindow();//Kiran Badave
	}else{
		if(fileMapClickArray[fileMapVal]!=undefined){
			getFolderDetail2(fileMapClickArray[fileMapVal].categoryId, fileMapClickArray[fileMapVal].name, flg);
		}else{
			getFolderDetail2(0, "Path", fileMapVal);
			
		}
	}
}
function backBtnLocationPath(){//Kiran Badave
	LocationPathAndPathEditorToggle(1);
	if(!$('#fileMapLocation').is(':visible')){
		$('.searchHideShowCls').hide();
		$('#fileMapLocation').show();
	}
	
	var fileMapVal = $('#fileMap').val().trim();
	if(fileMapVal[fileMapVal.length-1]=='/'){
		fileMapVal = fileMapVal.substring(0, fileMapVal.length-1);
	}
	if(fileMapVal.lastIndexOf('/')!=-1 && fileMapVal.lastIndexOf('/')!=0){
		fileMapVal = fileMapVal.substring(0, fileMapVal.lastIndexOf('/'));
		$('#fileMap').val(fileMapVal);
		if(fileMapVal=='' || fileMapVal=='/home'){
			$('#fileMap').val('/home')
			if($('#chkIncludeSharedDMS').is(':checked')==true){
				fetchAllSharedDocuments();
			}else{
				showFileAndTextWindow();
			}
		}else{
			if(fileMapClickArray[fileMapVal]!=undefined){
				
				var index = fileIdArray.indexOf(fileMapClickArray[fileMapVal].categoryId)+1;
				fileIdArray.splice(index, fileIdArray.length);
				fileNameArray.splice(index, fileNameArray.length);
				
				getFolderDetail2(fileMapClickArray[fileMapVal].categoryId, fileMapClickArray[fileMapVal].name);//Kiran Badave
			}
		}
	}else{
		if($('#chkIncludeSharedDMS').is(':checked')==true){
			$('#fileMap').val('/home')
			fetchAllSharedDocuments();
		}else{
			showFileAndTextWindow();
		}
		
	}
}
function refreshUplodedFiles()
{
	if($('#chkIncludeSharedDMS').is(':checked')){
		toggleSwitchDropdown(1);
	}else if(fileIdArray!=null && fileIdArray.length>1){
		getFolderFilesDocumentsByParentId(gDMSCategoryTreeId, gDMSCategoryTreeName);
	}else{
		fetchAllDocumnetsWithDMS(isAcademicFolder);
	}
}
function showDocumentViewer(documentId,KEY,attachmentFileName,fileType)
{
	var domain = window.location.origin; //"http://"+window.location.host;
	var path = domain+'/'+(juno.label['url.download.json'].setIndexedArgs(documentId, "UPLOADED", encodeURIComponent(attachmentFileName),attachmentFileName))
	if((KEY) && (KEY != undefined)){
		 path = domain+'/downloadWithPath.json?id='+documentId+'&n='+attachmentFileName+'&t='+fileType+'';
	}
	var encodedPath = encodeURIComponent(path);
	console.log(encodedPath);
	var boiler = '';
		boiler = '<iframe style="width:100%;height:550px;" src="https://docs.google.com/viewer?url='+encodedPath+'&embedded=true"/>';
	$('#showDocumentPreviewDialog').find('.documentBody').html(boiler);
	$('#showDocumentPreviewDialog').modal('show').css({
		width: '100%',
		height:'100%',
		left:'0px',
		top:'0px',
		margin:'0'
	});
	
	$('#showDocumentPreviewDialog').css('z-index', '1100');
}
/*
 * @param 
 * documentCategoryId ,
 * type -- e.g. file,folder
 * folderName
 * 
 * */
function configureUploadedFolderSharingView(documentCategoryId,type,folderName)
{
	var docArray = new Array();
	var flag = true;
	if(documentCategoryId==undefined || documentCategoryId==null || documentCategoryId=='')
	{
		jAlert('No folder found..!!','warning');
		flag = false;
	}
	else
		docArray.push(documentCategoryId);

	if(flag && docArray.length>0)
	{
		var boiler ='<div id="sharingDetails"></div><div style="width:100%;">'+
			'<fieldset><legend><b>File/Folder Access</b></legend>'+
			'<input type="radio" id="viewChoice" name="readWriteChoice" checked="checked" value="read">&nbsp;<b>Read Access</b>&nbsp;&nbsp;&nbsp;&nbsp;'+
			'<input type="radio" id="editChoice" name="readWriteChoice" value="write">&nbsp;<b>Read and write Access</b>'+
			//'<br/><b>Accessibility End Date:</b> <input type="text" id="durationPeriodOfShare" value=""/>'+
			//'<br/><b>Start Date and Time:</b><input type="text" id="dms_startDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_startTime" placeholder="Start Time" style="width:70px;" readonly>'+
			//'<b>End Date and Time:</b><input type="text" id="dms_endDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_endTime" style="width:70px;" placeholder="End Time" readonly>'+
			'<table class="table table-condenced table-bordered">'+
			'<tr><td style="width:100px;vertical-align: middle;">Start Date and Time :</td><td style="width: 150px;"><input type="text" id="dms_startDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_startTime" placeholder="Start Time" style="width:70px;" readonly></td><td style="width:100px;vertical-align: middle;">End Date and Time :</td><td style="width: 150px;"><input type="text" id="dms_endDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_endTime" style="width:70px;" placeholder="End Time" readonly></td></tr>'+
			'</table>'+
			'</fieldset></div>'+
			'<fieldset><legend><b>Share with</b></legend>'+
			'<div style="width:100%;">'+
			'<input id="folderSharingTo" style="width:400px; " placeholder="Share with..." type="text"/>'+
			'</div></fieldset>';
		$('#dmsFolderSharingBody').html(boiler);

		$('#dmsFolderSharingDialogHeader').html('Document sharing');
		//$('#durationPeriodOfShare').datepicker({dateFormat:"M dd, yy"});
		$("#dms_startDate").datepicker({
			dateFormat:"M dd,yy",
			changeMonth : true,
			changeYear : true,
			minDate :new Date(),
			onSelect:function(date){
				$("#dms_endDate").datepicker("option","minDate", date);

			}
		});
		$("#dms_endDate" ).datepicker({
			dateFormat:"M dd,yy",
			changeMonth : true,
			changeYear : true,
			minDate :new Date(),
			onSelect: function(date){
			}
		});

		$('#dms_startTime').timepicker({
			showPeriod: true,
			showLeadingZero: true,
		});

		$('#dms_endTime').timepicker({
			showPeriod: true,
			showLeadingZero: true,
		});
		boiler =
			'<input type="button" id="post-Folder-Sharing" value="Post" class="btn btn-primary btn-mini" >'+
			'<input type="button" class="btn btn-danger btn-mini" value="Close" data-dismiss="modal">';
		$('#dmsFolderSharingFooter').html(boiler);

		$('#dmsFolderSharingDialog').modal('show').css({
			width:'800px',
			'margin-left': function () {
				return -($(this).width() / 2);
			}
		});
		
		/***** code to check sharing details*****/
		$.ajax({
			url:'getAllSharedWithUserData.json',
			dataType:'json',
			type:'POST',
			data:{type:type,
				documentIds:docArray+''
				},
				async:false,
				beforeSend: function() {
					startCommonAjaxSpinner();
				},
				complete: function() {
					stopCommonAjaxSpinner();
				},
				success:function(jArray){
					if(jArray.length>0)
					{
						var boiler='<div style="max-height:400px;overflow:auto;"><table class="table table-bordered"><tr><th colspan="4">Shared with user list</th></tr>';
						boiler+='<tr><th>Sr.No.</th><th>Name</th><th>View/Write</th><th></th></tr>';
						for(var i=0; i<jArray.length;i++)
						{
							boiler+='<tr><td>'+(i+1)+'</td><td>'+jArray[i]["userName"]+'</td>';
							if(jArray[i]["canEdit"]==true || jArray[i]["canEdit"]=='true')
								boiler+='<td>Write</td>';
							else
								boiler+='<td>View</td>';
							
							boiler+='<td><span class="btn btn-danger btn-mini" onclick="remmoveSharedDocumentUserId(\''+jArray[i]["thredId"]+'\')"><i class="fa fa-trash"></i> Remove</span></td>';
							boiler+='</tr>';
						}

						boiler+='</table></div>';
						$('#sharingDetails').html(boiler);
					}
				},
				error:function(){
				}
		});
		
		/***** END ****/
		
		$('.token-input-remove-searchableById-facebook-folderSharingTo').remove();
		if(gRoasterIdArray!=null && gRoasterIdArray.length>0)
		{
			$('#folderSharingTo').tokenInput("populateAllforEmployeePost.json",{
				theme: "facebook",
				resultsLimit: 10,
				placeholder: 'To',
				propertyToSearch: "name",
				//abortPrevCall:true,
				resultsFormatter: function(item){ return "<li><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" +
					"<div style='display: inline-block; padding-left: 10px;'><div class='full_name'>" + item.name +
					"</div><div class='email'>" + item.Desc + "</div></div></li>";},
					tokenFormatter: function(item) { return "<li><p><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" + item.name + "</p></li>";}
			});
		}else if(gBatchSemCapId!=null && gBatchSemCapId.length>0)
		{
			$('#folderSharingTo').tokenInput("populateAllforStudentPost.json",{
				theme: "facebook",
				resultsLimit: 10,
				placeholder: 'To',
				propertyToSearch: "name",
				//abortPrevCall:true,
				resultsFormatter: function(item){ return "<li><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" +
					"<div style='display: inline-block; padding-left: 10px;'><div class='full_name'>" + item.name +
					"</div><div class='email'>" + item.Desc + "</div></div></li>";},
					tokenFormatter: function(item) { return "<li><p><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" + item.name + "</p></li>";}
			});
		}

		$('#post-Folder-Sharing').click(function(){
			postDocumentSharing(docArray,type);
		});
		
	}
}

function postDocumentSharing(docArray,type)
{
	var alumniTextPost='';
	var alumUserIds='';
	var selfPostFlag=false;
	var canView=true;
	var canEdit=false;
	if($('input[name="readWriteChoice"]:checked').val()=='write')
		canEdit=true;

	if($('#folderSharingTo').val()!='' && $('#folderSharingTo').val()!=undefined){
		alumUserIds=$('#folderSharingTo').val();
		$('#folderSharingTo').focus();
		selfPostFlag=true;
	}else{
		selfPostFlag=false;
	}
	/*if($('#dms_startDate').val()==''||$('#dms_endDate').val()==''||$('#dms_startTime').val()==''||$('#dms_endTime').val()==''){
		jAlert('Please enter valid From and To date time!');
		return;
	}*/
	//var shareDuration = $('#durationPeriodOfShare').val(); 
	if(selfPostFlag){
		$.ajax({
			url:'addDocumentFolderSharing.json',
			dataType:'text',
			type:'POST',
			data:{alumUserIds:alumUserIds,alumniTextPost:alumniTextPost,canEdit:canEdit,canView:canView,type:type,
				documentIds:docArray+'',
				startDate: $('#dms_startDate').val(),
				endDate: $('#dms_endDate').val(),
				startTime: $('#dms_startTime').val(),
				endTime: $('#dms_endTime').val()},
				async:false,
				junoSpinner:true,
				beforeSend: function() {
					startCommonAjaxSpinner();
				},
				complete: function() {
					stopCommonAjaxSpinner();
					$('#folderSharingTo').tokenInput("clear");
					$("#folderSharingTo").val("");
					$("#folderSharingTo").focus();
					$('#dmsFolderSharingDialog').modal('hide');
				},
				success:function(messgae){
					$('.token-input-remove-searchableById-facebook-folderSharingTo').remove();
					refreshUplodedFiles();
					jAlert('Document shared successfully','success');
				},
				error:function(){
				}
		});
	}

}

function fetchAllSharedDocuments(flg)
{
	$('#fileDropdowMenuTopBar').hide();
	setTimeout(function(){
		$('#filterGroup').addClass('open');
	},50);
	var categoryPath = '';
	var rootRquired='';
	var isHideEmptyFolders=false;
	$('#chkIncludeDMS').attr('checked',false);
	//$('#chkHideEmtyFolders').attr('checked',false);
	if($('#chkHideEmtyFolders').attr('checked'))
		isHideEmptyFolders=true;
	$('#searchFileList').html('');
	if($('#chkIncludeSharedDMS').attr('checked')){
		
		var parentType = new Array();
		var typeArray = new Array();
		
		parentType.push('dmsNew','dms');
		typeArray.push('dmsNew','dms');
		var searchTagTxt = {};
		if(flg!=undefined && flg=="tagSearch"){
			searchTagTxt = {searchTagTxt:$('#txtSearch2').val()};
		}
		$.ajax({
			url : 'getSharedDocumentCategory.json',
			data:searchTagTxt,
			dataType : 'json',
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			success : function(jArray) {
			
				gjArrUploadedDocument = jArray[0]["path"];
				//showUploadedDocumentIcon();
				gjArrTextDocument = jArray[0]["documents"];
				//showTextDocumentIcons();
				//doCreateTree(jArray[0]["category"]);
				//doCreateOrganizeFolderTree(jArray[0]["category"]);
				gFolderFilesDocumentsObj = {
						folders: jArray[0]["category"],
						textFiles: jArray[0]["documents"],
						uploadedFiles: jArray[0]["path"]
				};
				getFolderFilesDocumentsByParentId(0, undefined, true);
				
			},
			error : function() {
			}
		});
		
	}else{
		 typeArray ='dmsNew';
		 parentType = 'dmsNew';
		 $("#tdFileAndTextWindow").html('');
		 $('#documentsList').html('');
		 $("#fileList").html('');
		 createTree(categoryPath, typeArray, parentType, rootRquired);
	}
}

/**
 * April 10,2019
 * @Purpose : to create menu list on right click
 * 
 * **/
function loadMainMenu()
{
	$('#allMenu').remove();
	
	var menuBoiler='';
	menuBoiler += '<div id="allMenu"><ul>';
	menuBoiler += '<li onclick="addDocumentCategoryCheckPoint1()" id="btnAddFolder" ><a href="javascript:void(0);"><i class="fa fa-folder-o fa-lg"></i> New Folder...</a></li>';
	menuBoiler += '<li onclick="addTextDocumentCheckPoint()" id="btnAddDoc"  ><a href="javascript:void(0);"><i class="fa fa-file-o fa-lg"></i> New Document...</a></li>';
	menuBoiler += '<li onclick="uploadDocumentCheckPoint()" id="btnUploadDoc" ><a href="javascript:void(0);"><i class="fa fa-upload fa-lg"></i> Upload Document...</a></li>';
	menuBoiler += '</ul></div>';
	$('#my-AllMenu').html(menuBoiler);
	
	$("#allDataDiv").ClassyContextMenu({
		menu: 'allMenu',
		mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
		isMenu: true,
		minWidth: 120,
		maxWidth: 0,
		delay: 100, 
		keyboard: false,
		hoverIntent: true
	});
	
	if(fileIdArray!=null && fileIdArray.length<=1){
		$('#btnAddDoc').hide();
		$('#btnUploadDoc').hide();
	}
	/*setTimeout(function(){
		$(document).ClassyContextMenu("close");
		}, 10000);*/
}

function folderViewChange(src){
	if($(src).hasClass('fa-th-large')){
		$(src).removeClass('fa-th-large').addClass('fa-list').attr('title', 'List View');
	}else{
		$(src).removeClass('fa-list').addClass('fa-th-large').attr('title', 'Icon View');
	}
	
	if($('#chkIncludeSharedDMS').is(':checked')==true){
		getFolderFilesDocumentsByParentId(0, undefined, true);
	}else if($('#fileMap').val()=='/home' || $('#fileMap').val()==''){
		$('#fileMap').val('/home');
		showFileAndTextWindow();
		refreshCategoryTree(undefined, true);
	}else{
		getFileAndFolderByPath(true);
	}
}

function searchBarAndLocationToggle(flg){//flg = search
	if(flg==undefined || (flg!=undefined && flg=='search')){
		$('.searchHideShowCls').fadeIn('slow');
		$('.label .tagit').fadeIn('slow')
			.css('display','inline-block')
			.css('background','#fff');
		$('.label .tagit input[type="text"]').prop('placeholder','Search your file(s) or folder(s).');
		$('#fileMap, #fileMapLocation').hide();
	}else{
		$('.searchHideShowCls, .label .tagit, #fileMapLocation').hide();
		$('#fileMap').fadeIn('slow');
		$('#txtSearch2').tagit('removeAll');
	}
}
function LocationPathAndPathEditorToggle(flg){
	if(!$('#fileMapLocation').is(':visible') || flg!=undefined){
		$('#fileMapLocation').fadeIn('slow');
		$('#fileMap').hide();
		$('.searchHideShowCls, .label .tagit').hide();
	}else{
		$('.searchHideShowCls, .label .tagit, #fileMapLocation').hide();
		$('#fileMap').fadeIn('slow');
	}
	$('#txtSearch2').tagit('removeAll');
	
}

function folderCommonHeader(){
	return '<table class="table table-bordered tableWithoutPadding"><thead><tr><th></th><th style="width:200px">Name</th><th>Type</th><th>Size</th><th style="width:125px;">Created By</th>'
	+'<th>Edit Access</th><th>Share Status</th><th>Attachments</th><th style="width:100px;">Tags</th><th>Date Modified</th><th></th></tr></thead><tbody>';//Kiran List View Header
}
function dataTableListView(){
	setTimeout(function(){
		/*$('.tableWithoutPadding').dataTable( {
			"sDom": "<'row-fluid'<'span4'l><'span8'f>r><'row-fluid't><'row-fluid'<'span4'i><'span8'p>>",
			"oLanguage": {
				"sLengthMenu": "_MENU_ Records Per Page"
			},
			"bJQueryUI": true,
			"bPaginate" : false,
			"bProcessing": false,
			"bDeferRender": false
		} );*/
		$('.tableWithoutPadding').dataTable({
			"sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid<'span6'i><'span6'p>>",
		  "iDisplayLength" : -1,
		  "sWrapper" : "dataTables_wrapper form-inline",
		  "bPaginate" : false
		});
	},100);
}




function addDocumentCategoryAjaxToolBox(documentCategoryName, documentDescription,
		categoryType, parentCategoryType, newDocFlag) {

	/**
	* to ensure that if category has been added from outside(not from dialog
	* box) the it must be root category
	*/

	if (documentCategoryName == undefined)
		documentCategoryName = $('#documentCategoryNameTbx').val();
	if (documentDescription == undefined)
		documentDescription = $('#documentDescriptionTbx').val();
	if (categoryType == undefined)
		categoryType = getSelectedCategoryType();
	if (parentCategoryType == undefined)
		parentCategoryType = getSelectedParentCategoryType();

	categoryPath = getCategoryRetrievalPath();
	/** Will return undefined if proper path is not available */
	var prevWhileAttchFlag = false;
	if (newDocFlag == undefined) {
		if($('#fileMap').val()=='/home'){
			newDocFlag = true;
		}else{
			newDocFlag = $('#chkNewDocFlagTbx').is(':checked');
		}
		
		prevWhileAttchFlag = $('#chkPrevToAttachmentFlagTbx').is(':checked');
		if(prevWhileAttchFlag==true){
			categoryType = 'DMS';
			parentCategoryType = 'DMS';
		}
	} else {
		newDocFlag = true;
	}
	/**
	* Doesn't matter if undefined or anything because it has been taken on
	* server side by session
	* 
	*/
	var employeeId = $('#hdnDocumentPerson').val();
	var parentCatId = "null";
	var path = "";
	if (!newDocFlag) {
		parentCatId = gDMSCategoryTreeId;//$('#hdnParentCategoryIdTbx').val();
		if(parentCatId!=null){
			path = getCategoryPath(parentCatId);
			newDocFlag = false;
		}else{
			newDocFlag = true;
			parentCatId = "null";
		}
	}
	var documentTag = $('#txtDocumentTagsTbx').val();
	$.ajax({
		url : 'addDocumentCategoryAjax.json',
		data:{documentCategoryName:documentCategoryName,
			documentDescription:documentDescription,
			employeeId:employeeId,
			parentCatId: parentCatId,
			path: path,
			categoryType: categoryType,
			parentCategoryType: parentCategoryType,
			documentTag: documentTag
		},
		dataType : 'json',
		async:false,
		success : function(jArray) {
			if (jArray[0].responseFlag == '1') {
				//showSuccessMessage(jArray[0].responseText, 5000);
			} else {
				jAlert(jArray[0].responseText);
				//showErrorMessage(jArray[0].responseText, 5000);
			}
			if (newDocFlag) {
				fetchAllDocumnetsWithDMS(isAcademicFolder);
			} else {
				//fetchAllDocumnetsWithDMS();
				getFileAndFolderByPath();
			}
			
			clearToolBoxFields();
			$('.minimize_msg_box').trigger('click');
			
		},
		error : function() {

		}
	});
}

function clearToolBoxFields(){
	$('#hdnDocumentId, #hdnDocumentCategoryId').val('');
	$('.recepientCss').val('');
	$('#txtDocumentTagsTbx').tagit('removeAll');
	$('#chkPrevToAttachmentFlagTdx').prop('checked', false);
	$('#tblAttachementList').html('No Attachments!');
	$('#btnTextDocumentSave, #btnTextDocumentDelete, #btnTextDocumentReplicate, #btnTextDocumentCancel').hide();
}

/**
 * @name showAddEditTextDocumentFormToolBox()
 * @since 10th June 2019
 * 
 */
function showAddEditTextDocumentForm23(documentId, callback) {

	$('#createDocRadioKrn').prop('checked',true);
	//folderModificationSwitch();
	
	/** Seting blank to each control/fields of the addText document form */
	$('.divDocumentListWindowTitle').hide();

	$('.replicateDoc').data('docId', documentId);
	$('#btnTextDocumentReplicate').data('docId', documentId);
	$('#btnTextDocumentReplicate').click(function() {
		configureReplicateToOtherBatch(this, gEvaluationType);
	});

	if (documentId != undefined) {// If document is unsaved, Delete button has
		// to be hidden and vice-versa

		$('#btnTextDocumentDelete').show();
		$('#btnTextDocumentDelete').unbind();
		$('#btnTextDocumentDelete').click(function() {
			deleteFiles(documentId, 'text');
		});

	}
	$("#divTextDocumentFileTitle").html(
	'<h5 align="left" style="margin-top:5px;">New Text Document<button type="button" class="close badge" data-dismiss="modal">X Close</button></h5>');
	var fileSizeAllowed = AllowedFileSize.DOCUMENT_UPLOAD / (1024 * 1024);
	$('#fileSizeAllowed, .fileSizeAllowedCls').text(fileSizeAllowed);
	$('#hdnDocumentCategoryId').val(gDMSCategoryTreeId);
	//createEditor('editing_field1'); // function call to convert the textarea
	// into richtextbox
	initAttachmentBar();
	$('#btnTextDocumentCancel').bind('click', function() {
		gTextDocumentCommandFlag = 'cancel';
	});
	$('#btnTextDocumentReset').bind('click', function() {
		gTextDocumentCommandFlag = 'reset';
	});
	$('#btnTextDocumentSave').bind('click', function() {
		gTextDocumentCommandFlag = 'save';
	});
	try {
		callback();
	} catch (e) {
		// alert(e);
	}
	setTimeout(function(){
		$('.minimize_msg_box').trigger('click');
	},1500);
}

function createLightCKEditor(id)
{
	var instance = CKEDITOR.instances[id];
	//console.log(instance);
	if(instance!=undefined){
		instance.setData('');
		//CKEDITOR.remove(instance);
	}else{


		CKEDITOR.replace(id,{uiColor: '#FFFFFF',height:'20%',
			/*toolbar:[['Font','FontSize','-','scayt','Bold','Italic', 'Underline','Strike','Subscript','Superscript','RemoveFormat','-','NumberedList', 'BulletedList', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','SCAYT','scayt','Scayt','-','equation']]
			 */
			toolbar :
				[
				 { name: 'styles', items: [ 'Font', 'FontSize','-' ] },
				 { name: 'basicstyles', items : [ 'Bold','Italic','Underline','-' ] },
				 { name: 'paragraph', items : [ 'NumberedList','BulletedList','-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock' ], },
				 { name: 'editing', items : [ 'Scayt','-' ] },
				 { name: 'tools', items : [ 'Maximize','-' ] },
				 { name: 'Multimedia', items : [ 'Image','Smiley','Iframe','-' ] }
				 ]
		});
	}
}


/**
 * @name saveTextDocument()
 * @since 30th Mar 2012
 * @purpose for adding the text documents against a category
 */
function saveTextDocumentToolBox() {

	var textDocumentName = $('#txtDocumentName').val();
	var saveFlag = true;
	if (textDocumentName == undefined || textDocumentName == '') {
		textDocumentName = getDocumentTitle();
	}
	/**
	 * Check point for already save of the document. If already save no need to
	 * check duplicacy and if not check for duplicacy. 'saveFlag used for
	 * checking the call'
	 */
	if (gTextDocSaveFlag == false) {
		if (checkTextDocumentNameDuplicacy() == true)
			saveFlag = true;
		else
			saveFlag = false;
	}

	if (saveFlag == true) {
		var text = CKEDITOR.instances.editing_field1.getData();
		var docId = $('#hdnDocumentId').val();
		var categoryId = gDMSCategoryTreeId;
		var description = $('#txtDescription').val();
		$.ajax({
			url : 'saveTextDocumentAjax.json',
			data : {
				documentId : docId,
				text : text,
				description : description,
				categoryId : categoryId,
				name : textDocumentName.gemsEncode(),
				files_uploaded : ''
			},
			beforeSend : function() {
				startCommonAjaxSpinner();
			},
			complete : function() {
				stopCommonAjaxSpinner();
			},
			dataType : 'json',
			type : 'POST',
			success : function(jArray) {
				var responseText = '';
				var text = jArray[0].responseText;
				var docId = text.split('-')[1];
				responseText = text.split('-')[0];
				if (jArray[0].responseFlag == '1') {
					$('#idattachmentbar').show();
					/**
					 * @comment empty the global variable 'files_uploaded' to
					 *          avoid dirty data
					 */
					files_uploaded = '';
					/**
					 * Putting save true false to make the system know that
					 * current document is saved
					 */
					gTextDocSaveFlag = true;
					setDocumentTitle(textDocumentName);
					$('#btnTextDocumentDelete').unbind();
					$('#btnTextDocumentDelete').click(function() {
						deleteFiles(docId, 'text');
					});
					$('#btnTextDocumentDelete').show();
					$('#hdnDocumentId').val(docId);
					getAttachmentListAjax1(docId);
					getTextFiles(categoryId);
					showSuccessMessage("Saved Successfully", 5000);
					jAlert("Saved Successfully");
					/** to save the text editor */
					// tinyMCE.triggerSave();
				} else {
					showErrorMessage(responseText, 5000);
					/**
					 * Putting save flag false to make the system know that
					 * there is no any text doc pending to be saved
					 */
					gTextDocSaveFlag = false;
				}
				/**
				 * If cancel was pressed then following script should run
				 */
				if (gTextDocumentCommandFlag == 'cancel') {
					gTextDocSaveFlag = false;
					/** to save the text editor */
					// tinyMCE.triggerSave();
					/** Removes the editor instance */
					removeDocumentEditor();
					//var nodeId = getSelected();
					var nodeId = gDMSCategoryTreeId;
					/** show the list of file in the selected category */
					showFiles(nodeId);
				}
			},
			error : function() {

			}
		});
	} else {
		jAlert('Name already exist');
	}
}


function imageViewerModal(src, fileType){
	var link = $(src).attr('clickHref');
	var imgFilesArr = ['jpg','png', 'gif', 'jpeg'];
	if(fileType != undefined && (imgFilesArr.indexOf(fileType.toLowerCase())!=-1)){
		$('#imageViewrSlides').modal('show');
		$('#imageViewrTag').attr('src', link);
		$('#imageViewrTagDownload').off('click').click(function(){
			window.location.href = link;
		});
		
	}else if(false && fileType == 'pdf'){
		var boiler = `<iframe style="width:100%;height:900px;" src="Viewer.js/index.html#../${link}&f=.pdf" allowfullscreen webkitallowfullscreen/>`;
		juno.modal({
			header:'Document Preview',
			body:boiler,
			width:'1000px',
			height: '500px'
		});
	}else{
		//window.location.href = link;
		//var _encLink = encodeURIComponent(window.location.origin+'/'+link);
		juno.documentPreview(link, fileType, true);
		/*$.documentPreview({
			url:link,
			viewer:'google'
		});*/
	}	
}

function junoDocumentOrImageViewer(docId, fileType){
	var link = (juno.label['url.download.json'].setIndexedArgs(docId, "UPLOADED", ""));
	juno.documentPreview(link, fileType);
}

function searchClickByTagName(tagName){
	if(tagName!=""){
		//$('#txtSearch2').tagit("removeAll");
		searchBarAndLocationToggle('search');
		$('#txtSearch2').tagit("createTag", tagName);
	}
}



//getDocumentByParentId
var gFolderWiseDataArrObj = new Array();
var gFolderFilesDocumentsObj = null;
function getFolderFilesDocumentsByParentId(categoryId,fname, flg, filter_value, canEditParent) {
	console.log(categoryId);
	console.log(fname);
	console.log(flg);
	console.log(filter_value);
	$('#btnAddDoc').show();
	$('#btnUploadDoc').show();
	//$('.lblIncludeDMS').hide();
	var folder_ViewId = '#subFolder';
	if($('#dynamicFolderDivId-'+categoryId).length){
		folder_ViewId = '#dynamicFolderDivId-'+categoryId;
	}else if($('.common_transaction_list_view_bind_cls:visible').length!=0){
		//folder_ViewId = '#dynamicFolderDivId-'+categoryId;
		var divId = $('.common_transaction_list_view_bind_cls:visible').parent().attr('id');
		folder_ViewId = '#'+createDynamicBlock('#'+divId, '');
	}else if($('.dynamicFolderDivId-cls:visible').length>0){
		var divId = $('.dynamicFolderDivId-cls:visible').attr('id');
		folder_ViewId = '#'+createDynamicBlock('#'+divId, '');
	}
	
	$(folder_ViewId).html('');
	$('#dms_item_details').hide();
	gDMSCategoryTreeId = categoryId;
	//var boiler = '';
	if(fname!=undefined){
		var name = unescape(fname);

		if(fileIdArray.indexOf(categoryId)==-1){
			fileNameArray.push(name);
			fileIdArray.push(categoryId);
			refreshMap();
		}
		gDMSCategoryTreeName = fname;
	}
	$('#load').show();
	$('#my-menu').html('');
	var sharedFolderTabFlg = $('#chkIncludeSharedDMS').is(':checked');

	var canEdit=false;
	var isShared=false;
	if(categoryId!=undefined && gFolderWiseDataArrObj[categoryId]!=undefined){
		if(gFolderWiseDataArrObj[categoryId].sharedStatus!=undefined && gFolderWiseDataArrObj[categoryId].sharedStatus!=0){
			isShared = true;
		}
	}
	try {
		/*getUploadedFiles(categoryId);
		getTextFiles(categoryId);*/
		
		var bindFoldersAndDocs = function(jMainOnj){ //K-I-R-A-N
			var jArray = jMainOnj.folders;
			gjArrTextDocument = jMainOnj.textFiles;
			gjArrUploadedDocument = jMainOnj.uploadedFiles ? jMainOnj.uploadedFiles:[];
			var j = jArray.length;
			var flag=8;
			var menuBoiler='';
			var boiler1='';
			var boilerList =folderCommonHeader();//Kiran List View Header
			//Folder
			if(jArray.length==0 && gjArrTextDocument.length == 0 && gjArrUploadedDocument.length == 0){
				boiler1+=`<div style="text-align: center;color: gray;margin-top: 50px;">
					<i class="fa fa-exclamation-triangle fa-4x"></i>
					<br>
					<b>This folder is empty</b>
				</div>`;
				
			}
			for ( var i = 0; i < jArray.length; i++) {
				gFolderWiseDataArrObj[jArray[i]["documentCategoryId"]] = jArray[i];
				var fullName = jArray[i]["name"];
				var name = jArray[i]["name"];
				try{ fullName = decodeURIComponent(fullName); }catch(e){}
				name = fullName.length<TRIM_FILE_NAME_LENGTH?fullName:fullName.substring(0,TRIM_FILE_NAME_LENGTH)+'...';
				var createdByEmp= jArray[i]["createdByEmp"]!=null?jArray[i]["createdByEmp"]:"";
				var dirCount = jArray[i]["childDirectoryCount"];
				var fileCount = jArray[i]["childUploadedFileCount"] + jArray[i]["childCreatedFileCount"];
				var createdByEmp = jArray[i]["createdByEmp"]!=null?jArray[i]["createdByEmp"]:"";
				var createdTimetamp= jArray[i]["createdTime"]!=null?jArray[i]["createdTime"]:"";
				var folderEditAccess = '-';
				var boolFolderCanEdit = jArray[i]["canEdit"]!=undefined?eval(jArray[i]["canEdit"]):false;
				if(sharedFolderTabFlg==false || (sharedFolderTabFlg==true && boolFolderCanEdit==true))
					folderEditAccess = 'Yes';
				
				var isFolderShared = false;
				if(isShared==false){
					if(jArray[i].sharedStatus!=undefined && jArray[i].sharedStatus!=0){
						isFolderShared = true;
					}
				}else{
					isFolderShared = true;
				}
					
				
				var folderIcon = dmsSettingsObj.FOLDER_ICON;
				if(jArray[i]["isEmpty"]==true)
					folderIcon = dmsSettingsObj.FOLDER_EMPTY_ICON;
				
				
				boiler1+=`<div id="optionDmsFolder-${jArray[i]["documentCategoryId"]}" 
					class="DMS_content_item dms_tile_view_property" 
					data-name="${fullName}" 
					data-dirCount="${dirCount}" 
					data-fileCount="${fileCount}" 
					isShared="${isShared}"
					canEdit="${canEdit}"
					data-createdByEmp="${createdByEmp}"`;
				if(fileCount==0 && dirCount==0 && $('#chkHideEmtyFolders').attr('checked')){
					boiler1+=`style="height: auto; float: left;text-align: left; display:none"`;
				}else{
					boiler1+=`style="height: auto; float: left;text-align: left; "`;
				} 
				console.log(jArray[i],"sssssssssssss")
				boiler1+=`ondblclick="getFolderFilesDocumentsByParentId(${jArray[i]["documentCategoryId"]},'${escape(fullName)}', undefined, undefined,${jArray[i].canEdit})">
					<div style="float: left;">
					<img src="${folderIcon}" class="dmsFolder" ondragstart="return false" style="width: 40px;">
					</div>
					<div style="float: left;width: 79%;">
						<p class="text-center">${name} <br/> <span style="color: gray;">Items: <b>${dirCount+fileCount}</b></span></p>
						<span class="folderTagsCls">${documentTagsBoiler(jArray[i]["tags"])}</span>
					</div>
				</div>`;
				
				//Thumbnail View
				/*boiler1+='<div id="optionDmsFolder-'+ jArray[i]["documentCategoryId"]+'" isShared="'+isFolderShared+'" canEdit="'+boolFolderCanEdit+'" data-createdByEmp="'+createdByEmp+'" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="DMS_content_item" data-name="'+jArray[i]["name"]+'" data-dirCount="'+jArray[i]["childDirectoryCount"]+'"  data-fileCount="'+jArray[i]["childCreatedFileCount"]+'" ondblclick="getFolderFilesDocumentsByParentId('+jArray[i]["documentCategoryId"]+',\''+escape(fullName)+'\')">'
				+'<img class="dmsFolder" title="'+fullName+'" src="'+folderIcon+'" ondragstart="return false">';
				boiler1+= '<p class="text-center">'+name+'</p>';
				boiler1+= '<span class="folderTagsCls" style="display:none;">'+documentTagsBoiler(jArray[i]["tags"])+'</span>';
				boiler1+='</div>';*/
				
				//List View
				boilerList+='<tr id="optionDmsFolder-'+jArray[i]["documentCategoryId"]+'" class="DMS_content_item" data-name="'+fullName+'" isShared="'+isFolderShared+'" '+
				'canEdit="'+canEdit+'" data-createdByEmp="'+createdByEmp+'" ondblclick="getFolderFilesDocumentsByParentId('+jArray[i]["documentCategoryId"]+',\''+escape(fullName)+'\',undefined,undefined,' +jArray[i].canEdit+')">';
				boilerList+='<td></td>';
				boilerList+='<td style="width:200px;"><a href="javascript:void(0);"><i class="fa fa-circle"></i> <b>'+fullName+'</b></a></td><td>Folder</td>';
				boilerList+='<td title="Directory/File Count"> '+(dirCount)+' Folder(s) & '+(fileCount)+' File(s).</td>';
				boilerList+='<td style="width:125px;" title="Created By Employee">'+(createdByEmp)+'</td>';
				boilerList+='<td title="Can Edit">'+(folderEditAccess)+'</td>';
				boilerList+='<td title="Shared">'+(isFolderShared==true?'Shared':'-')+'</td>';
				boilerList+='<td>-</td>';
				boilerList+='<td style="width:100px;">'+documentTagsBoiler(jArray[i]["tags"])+'</td>';
				boilerList+='<td>'+createdTimetamp+'</td>';
				boilerList+='<td></td>';
				boilerList+='</tr>';
				
				$('#menuFoldr-'+ jArray[i]["documentCategoryId"]).remove();
				if(jArray[i]["parentCategoryType"]!=null && (jArray[i]["parentCategoryType"]!='dms' && jArray[i]["parentCategoryType"]!='DMS'))
				{
					menuBoiler += '<div id="menuFoldr-'+ jArray[i]["documentCategoryId"] +'"><ul>';
					if($('#hdnUserRole').val()!='student'){
						if(sharedFolderTabFlg==false || (sharedFolderTabFlg==true && jArray[i]["canEdit"]==true))
							menuBoiler += '<li onclick="configureUploadedFolderSharingView('+jArray[i]["documentCategoryId"]+',\'folder\',\''+(jArray[i]["name"])+'\')"><a href="javascript:void(0);"><i class="fa fa-share fa-lg"></i> Share</a></li>';
					}
					if(!sharedFolderTabFlg)
						menuBoiler += '<li onclick="deleteOwnerCreatedFolder('+i+')"><a href="javascript:void(0);"><i class="fa fa-trash fa-lg"></i> Delete</a></li>';
					if(jArray[i]["childUploadedFileCount"]>0){
					menuBoiler += '<li onclick="downloadZipUploadedFile('+jArray[i]["documentCategoryId"]+',\''+(jArray[i]["name"])+'\')"><a href="javascript:void(0);"><i class="fa fa-file-archive-o" aria-hidden="true"></i> Download Zip</a></li>';
					}
					menuBoiler += '<li onclick="showDocumentFolderProperties(\'folder\','+i+')"><a href="javascript:void(0);"><i class="fa fa-info-circle fa-lg"></i> Properties</a></li>';
					menuBoiler += '</ul></div>';
				}
			}
			
			//Text Files
			for ( var i = 0; i < gjArrTextDocument.length; i++) {

				var fullName = gjArrTextDocument[i]["name"];
				var tags = gjArrTextDocument[i]["tags"]!=null?gjArrTextDocument[i]["tags"]:new Array();
				var createdByEmp = gjArrTextDocument[i]["createdByEmp"]!=null?gjArrTextDocument[i]["createdByEmp"]:"";
				var createdTimetamp= gjArrTextDocument[i]["createdTime"]!=null?gjArrTextDocument[i]["createdTime"]:"";
				
				var boolTextCanEdit = gjArrTextDocument[i]["canEdit"]!=undefined?eval(gjArrTextDocument[i]["canEdit"]):false;
				var textEditAccess = '-';
				if(sharedFolderTabFlg==false || (sharedFolderTabFlg==true && boolTextCanEdit==true))
					textEditAccess = 'Yes';
				
				var name = gjArrTextDocument[i]["name"];
				try{ fullName = decodeURIComponent(fullName); }catch(e){}
				name = fullName.length<TRIM_FILE_NAME_LENGTH?fullName:fullName.substring(0,TRIM_FILE_NAME_LENGTH)+'...';
				
				var iconPath = '';
				if (gjArrTextDocument[i]["hasAttachment"] != undefined && gjArrTextDocument[i]["hasAttachment"].toLowerCase() == 'yes') {
					iconPath = 'img/files/txt.png';
				} else {
					iconPath = 'img/files/txt.png';
				}
				var isTextShared = false;
				if(isShared==false){
					if(gjArrTextDocument[i].sharedStatus!=undefined && gjArrTextDocument[i].sharedStatus!=0){
						isTextShared = true;
					}
				}else{
					isTextShared = true;
				}
				
				
				
				boiler1+=`<div id="options-${gjArrTextDocument[i]["documentId"]}" 
					class="tooltiplink DMS_content_item dms_tile_view_property" 
					data-name="${fullName}" 
					style="height: auto; float: left;text-align: left;" 
					ondblclick="showText('${gjArrTextDocument[i]["documentId"]}','view')">
					<div style="float: left;">
					<img src="${iconPath}" class="dmsFolder" ondragstart="return false" style="width: 40px;">
					</div>
					<div style="float: left;width: 79%;">
						<p class="text-center">${name}</p>
						<span class="folderTagsCls">${documentTagsBoiler(gjArrTextDocument[i]["tags"])}</span>
					</div>
				</div>`;
				
				/*boiler1+='<div id="options-'+ gjArrTextDocument[i]["documentId"] + '" data-name='+fullName+' style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink DMS_content_item" id = "tdFileListIcon-text-'
				+ gjArrTextDocument[i]["documentId"]+ '" ondblclick="showText(\''+ gjArrTextDocument[i]["documentId"] + '\',\'view\')"><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false"'
				+ '"><p class="text-center">'+name+'</p>';
				boiler1+='</div>';*/
				
				boilerList+='<tr id="options-'+ gjArrTextDocument[i]["documentId"] + '" data-name='+name+' style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink DMS_content_item" id = "tdFileListIcon-text-'
				+ gjArrTextDocument[i]["documentId"]+ '" ondblclick="showText(\''+ gjArrTextDocument[i]["documentId"] + '\',\'view\')">';
				boilerList+='<td></td>';
				boilerList+='<td style="width:200px;"><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false" style="width:25px;height:25px;"> '+gjArrTextDocument[i]["name"].gemsDecode()+'</td>';//isShared canEdit hasAttachment
				boilerList+='<td>Text</td><td>-</td>';
				boilerList+='<td style="width:125px;" title="Created By Employee">'+(createdByEmp)+'</td>';
				boilerList+='<td title="Can Edit">'+(textEditAccess)+'</td>';
				boilerList+='<td title="Is Shared">'+(isTextShared==true?'Shared':'-')+'</td>';
				boilerList+='<td title="has Attahcments">'+(gjArrTextDocument[i]["hasAttachment"]!=undefined?gjArrTextDocument[i]["hasAttachment"]:"-")+'</td>';
				boilerList+='<td style="width:100px;">'+documentTagsBoiler(gjArrTextDocument[i]["tags"])+'</td>';
				boilerList+='<td>'+createdTimetamp+'</td>';
				boilerList+='<td></td>';
				boilerList+='</tr>';
				
				
				$('#menu-'+ gjArrTextDocument[i]["documentId"]).remove();
				menuBoiler += '<div id="menu-'+ gjArrTextDocument[i]["documentId"] +'"><ul>'+
				'<li onclick = "showText(\''+ gjArrTextDocument[i]["documentId"] + '\',\'view\')"><a href="javascript:void(0);"><i class="fa fa-eye fa-lg"></i>  View</a></li>';
				if($('#hdnUserRole').val()!='student'){
					if(sharedFolderTabFlg==false || (sharedFolderTabFlg==true && boolTextCanEdit==true)){
						menuBoiler += '<li onclick = "showText(\''+ gjArrTextDocument[i]["documentId"] + '\',\'edit\')"><a href="javascript:void(0);"><i class="fa fa-pencil fa-lg"></i> Edit</a></li>';
						/*menuBoiler += '<li onclick="configureCourseFileDocSharingView(\'\','+gjArrTextDocument[i]["documentId"]+')"><a href="javascript:void(0);">Share</a></li>';*/
						menuBoiler += '<li onclick="configureUploadedFolderSharingView(\''+gjArrTextDocument[i]["documentId"]+'\',\'docFile\',\''+name+'\')"><a href="javascript:void(0);"><i class="fa fa-share fa-lg"></i> Share</a></li>';
						if(!sharedFolderTabFlg)
							menuBoiler += '<li onclick="deleteOwnerCreatedTextDpcument(\''+(gjArrTextDocument[i]["documentId"])+'\')"><a href="javascript:void(0);"><i class="fa fa-trash fa-lg"></i> Delete</a></li>';
					}					
				}
				menuBoiler += '<li onclick="showDocumentFolderProperties(\'text\','+i+')"><a href="javascript:void(0);"><i class="fa fa-info-circle fa-lg"></i> Properties</a></li>';
				menuBoiler +='</ul></div>';
			}
			
			//Uploaded Files
			var downloadLink='';
			for ( var i = 0; i < gjArrUploadedDocument.length; i++) {
				
				var createdByEmp = gjArrUploadedDocument[i]["createdByEmp"]!=null?gjArrUploadedDocument[i]["createdByEmp"]:"";
				var createdTimetamp= gjArrUploadedDocument[i]["modifiedTime"]!=null?gjArrUploadedDocument[i]["modifiedTime"]:"";
				
				var boolUploadedCanEdit = gjArrUploadedDocument[i]["canEdit"]!=undefined?eval(gjArrUploadedDocument[i]["canEdit"]):false;
				var uploadedEditAccess = '-';
				if(sharedFolderTabFlg==false || (sharedFolderTabFlg==true && boolUploadedCanEdit==true)){
					uploadedEditAccess = 'Yes';
				}
	
				if(sharedFolderTabFlg && gjArrUploadedDocument[i]["canEdit"]=='false'){
					
					$('#fileDropdowMenuTopBar, #btnAddFolder, #btnAddDoc, #btnUploadDoc').hide();
				}else{
					$('#fileDropdowMenuTopBar, #btnAddFolder, #btnAddDoc, #btnUploadDoc').show();
				}

				if (gjArrUploadedDocument[i]["documentBody"] != undefined) {
					
					downloadLink = (juno.label['url.download.json'].setIndexedArgs(gjArrUploadedDocument[i]["eDocPathId"]!=undefined?gjArrUploadedDocument[i]["eDocPathId"]:gjArrUploadedDocument[i]["documentPathId"], "UPLOADED", gjArrUploadedDocument[i]["name"]));
				}
				
				var isUploadedShared = false;
				if(isShared==false){
					if(gjArrUploadedDocument[i].sharedStatus!=undefined && gjArrUploadedDocument[i].sharedStatus!=0){
						isUploadedShared = true;
					}
				}else{
					isUploadedShared = true;
				}
				var isShared3 = gjArrUploadedDocument[i].sharedStatus!=undefined&&gjArrUploadedDocument[i].sharedStatus!='0'?true:false;//$('#optionDmsFolder-'+gjArrUploadedDocument[i]["categoryId"]).attr('isShared');
				var canEdit3 = $('#optionDmsFolder-'+gjArrUploadedDocument[i]["categoryId"]).attr('canEdit');
				
				var fileType = gjArrUploadedDocument[i]["extension"].toLowerCase();
				var iconPath = gFileTypeIcon[fileType];
				
				var fullNametemp = gjArrUploadedDocument[i]["name"];
				try{ fullNametemp = decodeURIComponent(fullNametemp); }catch(e){}
				
				var temp = gjArrUploadedDocument[i]["name"];
				temp = temp.replace(/\ /g, "-");
				temp = temp.replace(/\&/g, "-");
				var name = fullNametemp.length<20?fullNametemp:fullNametemp.substring(0,20)+'...';
				
				
				
				boiler1+=`<div id="Upload-${gjArrUploadedDocument[i]["documentPathId"]}" 
					class="tooltiplink DMS_content_item dms_tile_view_property" 
					data-name="${temp}" 
					style="height: auto; float: left;text-align: left;" 
					ondblclick="imageViewerModal(this, '${fileType}')"
					clickHref="${downloadLink}"
					>
					<div style="float: left;">
					<img src="${iconPath}" class="dmsFolder" ondragstart="return false" style="width: 40px;">
					</div>
					<div style="float: left;width: 79%;">
						<p class="text-center">${name}</p>
						<span class="folderTagsCls">${documentTagsBoiler(gjArrUploadedDocument[i]["tags"])}</span>
					</div>
				</div>`;
				
				if(sharedFolderTabFlg && gjArrUploadedDocument[i]["canEdit"]=='false'){
					$('#fileDropdowMenuTopBar, #btnAddFolder, #btnAddDoc, #btnUploadDoc').hide();
				}else{
					$('#fileDropdowMenuTopBar, #btnAddFolder, #btnAddDoc, #btnUploadDoc').show();
				}
				
				/*boiler1+='<div id="Upload-'+ gjArrUploadedDocument[i]["documentPathId"] +'" style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink DMS_content_item" data-name='+temp+' '+
				' ondblclick="imageViewerModal(this, \''+fileType+'\')" clickHref = "'+downloadLink+'"><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false"><p class="text-center">'+name+'</p>';
				boiler1+= '<span class="folderTagsCls" style="display:none;">'+documentTagsBoiler(gjArrUploadedDocument[i]["tags"])+'</span></div>';
				boiler1+= '<div style="text-align:center;">';
				boiler1+= '</div>';*/
				

				boilerList+='<tr id="Upload-'+ gjArrUploadedDocument[i]["documentPathId"] +'" class="tooltiplink DMS_content_item" data-name="'+temp+'" style="cursor:pointer;" ondblclick="imageViewerModal(this, \''+fileType+'\')" clickHref = "'+downloadLink+'">';
				boilerList+='<td></td>';
				boilerList+='<td style="width:200px;"><img class="dmsFolder" src="'+iconPath+'" ondragstart="return false" style="width:25px;height:25px;"/> '+fullNametemp+'</td>';
				boilerList+='<td>'+(gjArrUploadedDocument[i]["extension"]!=undefined?gjArrUploadedDocument[i]["extension"].toUpperCase():"")+' File</td>'
				+'<td title="Directory/File Count">'+(gjArrUploadedDocument[i]["size"]!=undefined?gjArrUploadedDocument[i]["size"]:"-")+'</td>';
				boilerList+='<td style="width:125px;" title="Created By Employee">'+(createdByEmp)+'</td>';
				boilerList+='<td title="Can Edit">'+(uploadedEditAccess)+'</td>';
				boilerList+='<td title="Shared">'+(isUploadedShared==true?'Shared':'-')+'</td>';
				boilerList+='<td>-</td>';
				boilerList+='<td style="width:100px;">'+documentTagsBoiler(gjArrUploadedDocument[i]["tags"])+'</td>';
				boilerList+='<td>'+createdTimetamp+'</td>';
				boilerList+='<td></td>';
				boilerList+='</tr>';
				
				$('#Uploadmenu-'+ gjArrUploadedDocument[i]["documentPathId"]).remove();
				menuBoiler += '<div id="Uploadmenu-'+ gjArrUploadedDocument[i]["documentPathId"] +'"><ul>';
				if(fileType=='doc' || fileType=='docx' || fileType=='ppt' || fileType=='pptx' || fileType=='xls' || fileType=='xlsx')
				{
					menuBoiler+= '<li onclick="showDocumentPreview('+gjArrUploadedDocument[i]["documentPathId"]+');"><a href="javascript:void(0);"><i class="fa fa-eye fa-lg"></i> Preview</a></li></a>';
				}
				menuBoiler += '<li><a href="'+downloadLink+'" target="_blank"><i class="fa fa-download fa-lg"></i> Download</a></li>';
				
				if($('#hdnUserRole').val()!='student'){
					/*if((canEdit3=='false') || (isShared3=='true' && canEdit3=='true') || (gjArrUploadedDocument[i]["isShared"]=='true' && gjArrUploadedDocument[i]["canEdit"]=='true'))
					{*/
						/*menuBoiler+= '<li onclick="editOrRenameUploadedDocumentNameOrTag('+i+')"><a href="javascript:void(0);">Edit</a></li>';*/
						/*menuBoiler += '<li onclick="configureUploadedFileDocSharingView('+gjArrUploadedDocument[i]["documentPathId"]+',\'uploaded\',\''+name+'\',\''+gjArrUploadedDocument[i]["categoryId"]+'\')"><a href="javascript:void(0);">Share</a></li>';*/
						if(sharedFolderTabFlg==false || (sharedFolderTabFlg==true && gjArrUploadedDocument[i]["canEdit"]==true))
							menuBoiler += '<li onclick="configureUploadedFolderSharingView('+gjArrUploadedDocument[i]["documentPathId"]+',\'file\',\''+name+'\')"><a href="javascript:void(0);"><i class="fa fa-share fa-lg"></i> Share</a></li>';
						if(!sharedFolderTabFlg)
							menuBoiler+= '<li onclick="deleteDocumentFromDMS(\''+(gjArrUploadedDocument[i]["eDocPathId"]!=undefined?gjArrUploadedDocument[i]["eDocPathId"]:gjArrUploadedDocument[i]["documentPathId"])+'\')"><a href="javascript:void(0);"><i class="fa fa-trash fa-lg"></i> Delete</a></li>';
					//}
				}
			   menuBoiler += '<li onclick="showDocumentFolderProperties(\'uploaded\','+i+')"><a href="javascript:void(0);"><i class="fa fa-info-circle fa-lg"></i> Properties</a></li>';
			   menuBoiler += '</ul></div>';
			}
			
			boilerList+='</tbody></table>';
			
			if($('#folderViewChangeId').hasClass('fa-th-large')){
				$(folder_ViewId).html(boilerList);
				$('.DMS_content_item').css('float', 'inherit');
				dataTableListView();
			}else{
				$(folder_ViewId).html(boiler1);
				$('.DMS_content_item').css('float', 'left');
			}
			
			$("#tdFileAndTextWindow").hide();
			$(folder_ViewId).show();
			$('#load').hide();
			
			$('.DMS_content_item').mousemove(function(e) {
				showItemDetails(this);
				//$('.movable').css({'top': e.pageY,'left': e.pageX});
				var tp = $(this).offset().top;
				var lft = $(this).offset().left;
				$('.movable').css({'top': tp+62,'left': lft+45});
				$('#dms_item_details').show();
			}).mouseleave(function() {
				//$('#dms_item_details').hide();
			}).click(function (){
				$('.DMS_content_item').removeClass('DMS_content_item_selected');
				$(this).addClass('DMS_content_item_selected');
			});
			$('body').click(function(){
				$('#dms_item_details').hide();
			});

			
			$('#my-menu').append(menuBoiler);
			for ( var i = 0; i < jArray.length; i++) {
				/*if(jArray[i]["parentCategoryType"]!=null && (jArray[i]["parentCategoryType"]!='dms' && jArray[i]["parentCategoryType"]!='DMS'))
				{*/
					try{
						$("#optionDmsFolder-"+ jArray[i]["documentCategoryId"]).ClassyContextMenu({
							menu: 'menuFoldr-'+ jArray[i]["documentCategoryId"], // get menu by categoryId
							mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
							isMenu: true,
							minWidth: 120,
							maxWidth: 0,
							delay: 500, 
						});
					}catch(e){}
				//}
			}
			
			for ( var i = 0; i < gjArrTextDocument.length; i++)
			{
				try{
						$("#options-"+ gjArrTextDocument[i]["documentId"]).ClassyContextMenu({
							menu: 'menu-'+ gjArrTextDocument[i]["documentId"],
							mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
							isMenu: true,
							minWidth: 120,
							maxWidth: 0,
							delay: 500, 
						});
				}catch(e){}

				$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Type', 'text');
				$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Id', gjArrTextDocument[i]["documentId"]);
				$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'CreationDate', gjArrTextDocument[i]["creationDate"]);
				$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Name', gjArrTextDocument[i]["name"]);
				$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Parent', gjArrTextDocument[i]["catName"]);
				$('#chkFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Description', gjArrTextDocument[i]["description"]);
				$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Type', 'text');
				$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Id', gjArrTextDocument[i]["documentId"]);
				$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'CreationDate', gjArrTextDocument[i]["creationDate"]);
				$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Name', gjArrTextDocument[i]["name"]);
				$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Parent', gjArrTextDocument[i]["name"]);
				$('#tdFileListIcon-text-' + gjArrTextDocument[i]["documentId"]).data(
						'Description', gjArrTextDocument[i]["description"]);

			}
			
			
			for ( var i = 0; i < gjArrUploadedDocument.length; i++) {
				try{
				$("#Upload-"+ gjArrUploadedDocument[i]["documentPathId"]).ClassyContextMenu({
					menu: 'Uploadmenu-'+ gjArrUploadedDocument[i]["documentPathId"],
					mouseButton: 'right', // sets which button causes the menu to appear, can be left or right
					isMenu: true,
					minWidth: 120,
					maxWidth: 0,
					delay: 500, 
				});
				}catch(e){console.log(e);}
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data("Type", "uploaded");
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Id', gjArrUploadedDocument[i]["documentId"]);
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('CreationDate', gjArrUploadedDocument[i]["creationDate"]);
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Name', gjArrUploadedDocument[i]["name"]);
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Parent', gjArrUploadedDocument[i]["catName"]);
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Description', gjArrUploadedDocument[i]["description"]);
				$('#chkFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('DocumentPath', gjArrUploadedDocument[i]["documentPath"]);
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data("Type", "uploaded");
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Id', gjArrUploadedDocument[i]["documentId"]);
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('CreationDate', gjArrUploadedDocument[i]["creationDate"]);
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Name', gjArrUploadedDocument[i]["name"]);
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Parent', gjArrUploadedDocument[i]["catName"]);
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["documentPathId"]).data('Description', gjArrUploadedDocument[i]["description"]);
				$('#tdFileListIcon-uploaded-'+ gjArrUploadedDocument[i]["document   PathId"]).data('DocumentPath', gjArrUploadedDocument[i]["documentPath"]);
			}
			$(document).ready(function() {
				$('.commentMark').elastic();
			});
			jQuery(function() {
				jQuery('.jbar').jbar();
			});
			
			
			showZipDownloadButton();
			
		};
		
		if(gFolderFilesDocumentsObj!=null && flg!=undefined && flg==true){
			bindFoldersAndDocs(gFolderFilesDocumentsObj);
		}else{
			var fileMapTxt = undefined;
			if(flg!=undefined && flg.indexOf('Home')!=-1){
				fileMapTxt = flg;
				$('#fileMap').val(fileMapTxt);
			}
			var searchTagTxt = undefined;
			if(flg!=undefined && (flg=="tagSearch" || flg=="tagSearch-shared")){
				searchTagTxt = $('#txtSearch2').val();
			}
			if(flg!=undefined && flg=="BOOLEAN_FILTER" && filter_value!=undefined){
				searchTagTxt = filter_value;
			}
			$.ajax({
				url : 'getCategoriesUploadedAndTextFileByParentCategory.json',
				data : {categoryId:categoryId, fileMap:fileMapTxt, searchTagTxt:searchTagTxt, search_flag:flg, canEdit:canEditParent},
				type: 'POST',
				dataType : 'json',
				beforeSend : function() {startCommonAjaxSpinner();},
				complete : function() {stopCommonAjaxSpinner();},
				success : function(jMainOnj) {
					gFolderFilesDocumentsObj = jMainOnj; 
					bindFoldersAndDocs(jMainOnj);
					console.log(jMainOnj,"sd");
					if(jMainOnj.canEdit == false){
					
					$('#fileDropdowMenuTopBar, #btnAddFolder, #btnAddDoc, #btnUploadDoc').hide();	
					}
				},
				error : function(e) {

				}

			});
		}
		
	} catch (e) {

	}
	
}
function documentTagsBoiler(tagsArr){
	var tags = tagsArr!=null?tagsArr:new Array();
	var tagsBoiler = '';
	for(var tg in tags){
		tagsBoiler+=(tg!=0?', ':'')+'<a href="javascript:void(0);" onclick="searchClickByTagName(\''+tags[tg].nm+'\');"><i class="fa fa-tag"></i> '+tags[tg].nm+'</a>';	
	}
	return tagsBoiler;
}

function isValidFileName(fname){
	var rg1=/^[^\\/:\*\?"<>\|&^!/{/}:;,`]+$/; // forbidden characters \ / : * ? " < > |
	var rg2=/^\./; // cannot start with dot (.)
	var rg3=/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i; // forbidden file names
	return rg1.test(fname)&&!rg2.test(fname)&&!rg3.test(fname);
}


function removeDocumentCategoryfg() {
		var categoryId = gDMSCategoryTreeId;
		var path = getCategoryPath(categoryId);
		$.ajax({
			url : 'removeDocumentCategoryAjax.json?categoryId='
				+ categoryId + '&path=' + path,
				dataType : 'text',
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				async : false,
				success : function(response) {
					if (response == 'Deleted') {
						$('#tdDocumentFilesWindow').html("");
						showSuccessMessage(
								'Directory successfully deleted', 500000);
						var node = getParent();
						if (node) {
							/** If deleted folder is child of some folder */
							refreshFolder(node);
						} else {
							/** If deleted folder is root parent */
							node = find(categoryId);
							/** Current selected folder object */
							deleteFolder(node);
						}
					} else {
						jAlert('Deletion Failed!!');
					}

				},
				error : function() {

				}
		});
}

function editOrRenameUploadedDocumentNameOrTag(i){
	//gjArrUploadedDocument[i]["eDocPathId"]!=undefined?gjArrUploadedDocument[i]["eDocPathId"]:gjArrUploadedDocument[i]["documentPathId"]
	if(gFolderFilesDocumentsObj==null){
		jArray("Something went wrong! Please try again!");
		return;
	}
	var tmpjArrUploadedDocument = gFolderFilesDocumentsObj.uploadedFiles;

	var fullName = tmpjArrUploadedDocument[i]["name"];
	try{ fullName = decodeURIComponent(fullName); }catch(e){}
	
	var boiler = '<table class="table table-bordered"><tr>'
	+ '<th>Rename File</th>'
	+ '<td><input type="text" id="textRenameFileInput" value="'+fullName+'"/></td>' 
	+ '</tr>'	
	+ '<th>Add tags</th>'
	+ '<td><input type="text" id="textFileTagsInputEdit" value=""/></td>' 
	+ '</tr>' + '</table>';
	$('#gemsCommonDialogModal .modal-header h3').text("Edit Uploaded Document");
	$('#gemsCommonDialogModal .modal-body').html(boiler);
	$('#gemsCommonDialogModal .modal-footer').html('<input onclick="updateEditedTagsOrRename(\'uploaded\','+i+')" class="btn btn-success btn-mini" value="Update" type="button"><input class="btn btn-inverse btn-mini" data-dismiss="modal" value="Close" type="button">');
	
	$('#gemsCommonDialogModal').modal('show');
	
	$('#textFileTagsInputEdit').tagit();
    $('#textFileTagsInputEdit').tagit({//K-i-r-a-n
    	caseSensitive:false,
    	tagLimit:10,
    	availableTags: ArrayTags
    });
    
    var tags = tmpjArrUploadedDocument[i]["tags"]!=null?tmpjArrUploadedDocument[i]["tags"]:new Array();
	var tagsBoiler = '';
	for(var tg in tags){
		$('#textFileTagsInputEdit').tagit("createTag", tags[tg].nm);//K-i-r-a-n
	}
	
	
}


function updateEditedTagsOrRename(type, i){
	jConfirm('Are you sure? If you have shared some file(s) from folder then they will be removed from shared content!', 'Confirmation Dialog', function(response) {
		if (response) {
			var jObjUploadedDocument = null;

			var docId = 0;
			if(type=='folder'){
				if(fileNameArray.length==1 && gCreateTreeArr!=undefined){
					jObjUploadedDocument = gCreateTreeArr[i];
				}else{
					jObjUploadedDocument = gFolderFilesDocumentsObj.folders[i];
				}
				docId = jObjUploadedDocument.documentCategoryId;
			}else if(type=='text'){
				jObjUploadedDocument = gFolderFilesDocumentsObj.textFiles[i];
				docId = jObjUploadedDocument["eDocId"]!=undefined?jObjUploadedDocument["eDocId"]:jObjUploadedDocument["documentId"];
			}else{
				jObjUploadedDocument = gFolderFilesDocumentsObj.uploadedFiles[i];
				docId = jObjUploadedDocument["eDocPathId"]!=undefined?jObjUploadedDocument["eDocPathId"]:jObjUploadedDocument["documentPathId"];
			}
			var renameDocNameTxt = $.trim($('#textRenameFileInput').val());
			var tagsNames = $('#textFileTagsInputEdit').val();
			var docFolderDesc = $('#prop-descriptionTxt').val();
			
			if(renameDocNameTxt!='' && !isValidFileName(renameDocNameTxt)){
				jAlert("Please enter valid file name!");
				return;
			}
			var fullName = jObjUploadedDocument["name"];
			try{ fullName = decodeURIComponent(fullName); }catch(e){}

			$.ajax({
				url : 'updateUploadDocumentNameOrTags.json',
				data : {
					d__docId : docId,
					rnmDocName:(renameDocNameTxt==fullName?undefined:renameDocNameTxt),
					tags:tagsNames,
					type:type,
					desc: docFolderDesc
				},
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				type : 'POST',
				success : function(txt) {
					$('#gemsCommonDialogModal').modal('hide');
					jAlert(txt);
					refreshUplodedFiles();
				}
			});
		}
	});
}

function showDocumentFolderProperties(type,i){
	var docId = 0;
	var shareType = 'docFile';
	if(type=='uploaded'){
		shareType = 'file';
		var jObjUploadedDocument = gFolderFilesDocumentsObj.uploadedFiles[i];
		
		docId = jObjUploadedDocument.documentPathId;
		var fullName = jObjUploadedDocument["name"];
		try{ fullName = decodeURIComponent(fullName); }catch(e){}
		
		var fileType = jObjUploadedDocument["extension"].toLowerCase();
		var iconPath = gFileTypeIcon[fileType];
		var size = jObjUploadedDocument["size"];
		var folderName = $('#fileMap').val();
		try{
			folderName = folderName.substring(folderName.lastIndexOf('/'), folderName.length);
		}catch(e){}
		var createdByEmp = jObjUploadedDocument["createdByEmp"]!=null?jObjUploadedDocument["createdByEmp"]:"";
		var createdTimetamp= jObjUploadedDocument["modifiedTime"]!=null?jObjUploadedDocument["modifiedTime"]:"";
		var docDescription= jObjUploadedDocument["description"]!=null?jObjUploadedDocument["description"]:"";
		
		
		var boiler = '<div id="tabs" class="tabbable tabs">'
		+'<ul class="nav nav-pills">'
		+'<li class="active"><a href="#prop-tabs-1" data-toggle="tab">Basic</a></li>'
		//+'<li><a href="#prop-tabs-2" data-toggle="tab">Permission</a></li>'
		//+'<li><a href="#prop-tabs-3" data-toggle="tab">Open With</a></li>'
		+'<li><a href="#prop-tabs-4" data-toggle="tab">Shared With</a></li>'
		+'<li><a href="#prop-tabs-5" data-toggle="tab">Notes</a></li>'
		+'</ul>'
		+'<div class="tab-content">'
		
			+'<div id="prop-tabs-1" class="tab-pane active">'
			+ '<img src="'+iconPath+'" style="width:50px;height:50px;display:inline;"/>'
			+ '<table style="display: inline-table;width: 80%;margin-left: 25px;">'
			+ '<tr><td>Name:</td><td><input type="text" id="textRenameFileInput" value="'+fullName+'"/></td></tr>'
			+ '<tr><td>Type:</td><td>'+fileType.toUpperCase()+'</td></tr>'
			+ '<tr><td>Size: <br/><br/></td><td>'+size+' <br/><br/></td></tr>'
			+ '<tr><td>Location:</td><td>'+$('#fileMap').val()+'</td></tr>'
			+ '<tr><td>Folder: <br/><br/></td><td>'+folderName+' <br/><br/></td></tr>'
			+ '<tr><td>Owner:</td><td>'+createdByEmp+'</td></tr>'
			+ '<tr><td>Modified:<br/><br/></td><td>'+createdTimetamp+'<br/><br/></td></tr>'
			+ '<tr><td>Tags:</td><td><input type="text" id="textFileTagsInputEdit" value=""/></td></tr>'
			+ '</table>'
			+ '</div>'
			
			+'<div id="prop-tabs-2" class="tab-pane">'
			
			+ '</div>'
			
			
			+'<div id="prop-tabs-3" class="tab-pane">'
			
			+ '</div>'
			
			+'<div id="prop-tabs-4" class="tab-pane">'
			+'<div id="propertiesSharedWithMeTab"></div>'
			+ '</div>'
			
			+'<div id="prop-tabs-5" class="tab-pane">'
			+'<textarea id="prop-descriptionTxt">'+docDescription+'</textarea>'
			+ '</div>'
		+ '</div>'
		+ '</div>';
		$('#gemsCommonDialogModal .modal-header h3').text(fullName+" Properties");
		$('#gemsCommonDialogModal .modal-body').html(boiler);
		if($('#hdnUserRole').val()!='student' && $('#chkIncludeSharedDMS').is(':checked')!=true){
			$('#gemsCommonDialogModal .modal-footer').html('<input onclick="updateEditedTagsOrRename(\'uploaded\','+i+')" class="btn btn-success btn-mini" value="Update" type="button"><input class="btn btn-inverse btn-mini" data-dismiss="modal" value="Close" type="button">');
		}
		$('#textFileTagsInputEdit').tagit();
	    $('#textFileTagsInputEdit').tagit({//K-i-r-a-n
	    	caseSensitive:false,
	    	tagLimit:10,
	    	availableTags: ArrayTags
	    });
	    
	    var tags = jObjUploadedDocument["tags"]!=null?jObjUploadedDocument["tags"]:new Array();
		var tagsBoiler = '';
		for(var tg in tags){
			$('#textFileTagsInputEdit').tagit("createTag", tags[tg].nm);//K-i-r-a-n
		}
		$('#gemsCommonDialogModal').modal('show');
	}else if(type=='text'){
		/*var jArray = jMainOnj.folders;*/
		shareType = 'docFile';
		
		var jObjTextDocument = gFolderFilesDocumentsObj.textFiles[i];
		docId = jObjTextDocument.documentId;
		
		var fullName = jObjTextDocument["name"];
		try{ fullName = decodeURIComponent(fullName); }catch(e){}
		
		var fileType = 'txt';
		var iconPath = gFileTypeIcon[fileType];
		var size = jObjTextDocument["size"];
		var folderName = $('#fileMap').val();
		try{
			folderName = folderName.substring(folderName.lastIndexOf('/'), folderName.length);
		}catch(e){}
		var createdByEmp = jObjTextDocument["createdByEmp"]!=null?jObjTextDocument["createdByEmp"]:"";
		var createdTimetamp= jObjTextDocument["createdTime"]!=null?jObjTextDocument["createdTime"]:"";
		var docDescription= jObjTextDocument["description"]!=null?jObjTextDocument["description"]:"";
		var attachsLen = jObjTextDocument.attachs!=undefined?jObjTextDocument.attachs.length:0;
		
		var boiler = '<div id="tabs" class="tabbable tabs">'
		+'<ul class="nav nav-pills">'
		+'<li class="active"><a href="#prop-tabs-1" data-toggle="tab">Basic</a></li>'
		//+'<li><a href="#prop-tabs-2" data-toggle="tab">Permission</a></li>'
		//+'<li><a href="#prop-tabs-3" data-toggle="tab">Open With</a></li>'
		+'<li><a href="#prop-tabs-4" data-toggle="tab">Shared With</a></li>'
		+'<li><a href="#prop-tabs-5" data-toggle="tab">Notes</a></li>'
		+'</ul>'
		+'<div class="tab-content">'
		
			+'<div id="prop-tabs-1" class="tab-pane active">'
			+ '<img src="'+iconPath+'" style="width:50px;height:50px;display:inline;"/>'
			+ '<table style="display: inline-table;width: 80%;margin-left: 25px;">'
			+ '<tr><td>Name:</td><td><input type="text" id="textRenameFileInput" value="'+fullName+'"/></td></tr>'
			+ '<tr><td>Type:</td><td>'+fileType.toUpperCase()+'</td></tr>'
			+ '<tr><td>Attachment(s):</td><td>'+attachsLen+'</td></tr>'
			+ '<tr><td>Size: <br/><br/></td><td>'+size+'<br/><br/></td></tr>'
			+ '<tr><td>Location:</td><td>'+$('#fileMap').val()+'</td></tr>'
			+ '<tr><td>Folder: <br/><br/></td><td>'+folderName+' <br/><br/></td></tr>'
			+ '<tr><td>Owner:</td><td>'+createdByEmp+'</td></tr>'
			+ '<tr><td>Modified:<br/><br/></td><td>'+createdTimetamp+'<br/><br/></td></tr>'
			+ '<tr><td>Tags:</td><td><input type="text" id="textFileTagsInputEdit" value=""/></td></tr>'
			+ '</table>'
			+ '</div>'
			
			+'<div id="prop-tabs-2" class="tab-pane">'
			
			+ '</div>'
			
			
			+'<div id="prop-tabs-3" class="tab-pane">'
			
			+ '</div>'
			
			+'<div id="prop-tabs-4" class="tab-pane">'
			+'<div id="propertiesSharedWithMeTab"></div>'
			+ '</div>'
			
			+'<div id="prop-tabs-5" class="tab-pane">'
			+'<textarea id="prop-descriptionTxt">'+docDescription+'</textarea>'
			+ '</div>'
		+ '</div>'
		+ '</div>';
		$('#gemsCommonDialogModal .modal-header h3').text(fullName+" Properties");
		$('#gemsCommonDialogModal .modal-body').html(boiler);
		if($('#hdnUserRole').val()!='student' && $('#chkIncludeSharedDMS').is(':checked')!=true){
			$('#gemsCommonDialogModal .modal-footer').html('<input onclick="updateEditedTagsOrRename(\'text\','+i+')" class="btn btn-success btn-mini" value="Update" type="button"><input class="btn btn-inverse btn-mini" data-dismiss="modal" value="Close" type="button">');
		}
		$('#textFileTagsInputEdit').tagit();
	    $('#textFileTagsInputEdit').tagit({//K-i-r-a-n
	    	caseSensitive:false,
	    	tagLimit:10,
	    	availableTags: ArrayTags
	    });
	    
	    var tags = jObjTextDocument["tags"]!=null?jObjTextDocument["tags"]:new Array();
		var tagsBoiler = '';
		for(var tg in tags){
			$('#textFileTagsInputEdit').tagit("createTag", tags[tg].nm);//K-i-r-a-n
		}
		$('#gemsCommonDialogModal').modal('show');
	}else{
		shareType = 'folder';
		var jObjFolders = null;
		
		if(fileNameArray.length==1 && gCreateTreeArr!=undefined){
			jObjFolders = gCreateTreeArr[i];
		}else{
			jObjFolders = gFolderFilesDocumentsObj.folders[i];
		}
		docId = jObjFolders.documentCategoryId;
		
		var dirCount = jObjFolders["childDirectoryCount"];
		var fileCount = jObjFolders["childUploadedFileCount"] + jObjFolders["childCreatedFileCount"];
		
		var fullName = jObjFolders["name"];
		try{ fullName = decodeURIComponent(fullName); }catch(e){}
		
		var fileType = 'txt';
		var iconPath = gFileTypeIcon[fileType];
		var size = dirCount+' Folder(s) & '+fileCount+' File(s)';
		var folderName = $('#fileMap').val();
		try{
			folderName = folderName.substring(folderName.lastIndexOf('/'), folderName.length);
		}catch(e){}
		var createdByEmp = jObjFolders["createdByEmp"]!=null?jObjFolders["createdByEmp"]:"";
		var createdTimetamp= jObjFolders["createdTime"]!=null?jObjFolders["createdTime"]:"";
		var docDescription= jObjFolders["description"]!=null?jObjFolders["description"]:"";
		
		var boiler = '<div id="tabs" class="tabbable tabs">'
		+'<ul class="nav nav-pills">'
		+'<li class="active"><a href="#prop-tabs-1" data-toggle="tab">Basic</a></li>'
		//+'<li><a href="#prop-tabs-2" data-toggle="tab">Permission</a></li>'
		//+'<li><a href="#prop-tabs-3" data-toggle="tab">Open With</a></li>'
		+'<li><a href="#prop-tabs-4" data-toggle="tab">Shared With</a></li>'
		+'<li><a href="#prop-tabs-5" data-toggle="tab">Notes</a></li>'
		+'</ul>'
		+'<div class="tab-content">'
		
			+'<div id="prop-tabs-1" class="tab-pane active">'
			+ '<img src="'+iconPath+'" style="width:50px;height:50px;display:inline;"/>'
			+ '<table style="display: inline-table;width: 80%;margin-left: 25px;">'
			+ '<tr><td>Name:</td><td><input type="text" id="textRenameFileInput" value="'+fullName+'"/></td></tr>'
			+ '<tr><td>Type:</td><td>'+fileType.toUpperCase()+'</td></tr>'
			+ '<tr><td>Size: <br/><br/></td><td>'+size+'<br/><br/></td></tr>'
			+ '<tr><td>Location:</td><td>'+$('#fileMap').val()+'</td></tr>'
			+ '<tr><td>Folder: <br/><br/></td><td>'+folderName+' <br/><br/></td></tr>'
			+ '<tr><td>Owner:</td><td>'+createdByEmp+'</td></tr>'
			+ '<tr><td>Modified:<br/><br/></td><td>'+createdTimetamp+'<br/><br/></td></tr>'
			+ '<tr><td>Tags:</td><td><input type="text" id="textFileTagsInputEdit" value=""/></td></tr>'
			+ '</table>'
			+ '</div>'
			
			+'<div id="prop-tabs-2" class="tab-pane">'
			
			+ '</div>'
			
			
			+'<div id="prop-tabs-3" class="tab-pane">'
			
			+ '</div>'
			
			+'<div id="prop-tabs-4" class="tab-pane">'
			+'<div id="propertiesSharedWithMeTab"></div>'
			+ '</div>'
			
			+'<div id="prop-tabs-5" class="tab-pane">'
			+'<textarea id="prop-descriptionTxt">'+docDescription+'</textarea>'
			+ '</div>'
		+ '</div>'
		+ '</div>';
		$('#gemsCommonDialogModal .modal-header h3').text(fullName+" Properties");
		$('#gemsCommonDialogModal .modal-body').html(boiler);
		if($('#hdnUserRole').val()!='student' && $('#chkIncludeSharedDMS').is(':checked')!=true){
			$('#gemsCommonDialogModal .modal-footer').html('<input onclick="updateEditedTagsOrRename(\'folder\','+i+')" class="btn btn-success btn-mini" value="Update" type="button"><input class="btn btn-inverse btn-mini" data-dismiss="modal" value="Close" type="button">');
		}
		$('#textFileTagsInputEdit').tagit();
	    $('#textFileTagsInputEdit').tagit({//K-i-r-a-n
	    	caseSensitive:false,
	    	tagLimit:10,
	    	availableTags: ArrayTags
	    });
	    
	    var tags = jObjFolders["tags"]!=null?jObjFolders["tags"]:new Array();
		var tagsBoiler = '';
		for(var tg in tags){
			$('#textFileTagsInputEdit').tagit("createTag", tags[tg].nm);//K-i-r-a-n
		}
		$('#gemsCommonDialogModal').modal('show');
	}
	setTimeout(function(){
		$.ajax({
			url:'getAllSharedWithUserData.json',
			dataType:'json',
			type:'POST',
			data:{type:shareType,
				documentIds:docId+''
			},
			success:function(jArray){
				if(jArray.length>0)
				{
					var boiler='<table class="table table-bordered"><tr><th colspan="3">Shared with user list</th></tr>';
					boiler+='<tr><th>Sr.No.</th><th>Name</th><th>View/Write</th></tr>';
					for(var i=0; i<jArray.length;i++)
					{
						boiler+='<tr><td>'+(i+1)+'</td><td>'+jArray[i]["userName"]+'</td>';
						if(jArray[i]["canEdit"]==true || jArray[i]["canEdit"]=='true')
							boiler+='<td>Write</td>';
						else
							boiler+='<td>View</td>';
						boiler+='</tr>';
					}
					boiler+='</table>';
					$('#propertiesSharedWithMeTab').html(boiler);
				}
			},
			error:function(){
			}
		});
	},1000);
}

function showZipDownloadButton(flg){
	var folderArr = new Array();
	var uploadedArr = new Array();
	var txtArr = new Array();
	if(flg==undefined){
		$('.multiSelectDMSFileCls').off('click').click(function(){
			showZipDownloadButton(1);
		});
	}
	$('.multiSelectDMSFileCls:visible:checked').each(function(){
		if($(this).attr('data-file-type')=='folder'){
			var fIndx = $(this).val();
			var jObjFolders = null;
			try{
				if(fileNameArray.length==1 && gCreateTreeArr!=undefined){
					jObjFolders = gCreateTreeArr[fIndx];
				}else{
					jObjFolders = gFolderFilesDocumentsObj.folders[fIndx];
				}
				folderArr.push(jObjFolders.documentCategoryId);
			}catch(e){}
		}
		if($(this).attr('data-file-type')=='uploaded'){
			try{
				var fIndx = $(this).val();
				var jObjUploadedDocument = gFolderFilesDocumentsObj.uploadedFiles[fIndx];
				uploadedArr.push(jObjUploadedDocument.documentPathId);
			}catch(e){}
		}
		if($(this).attr('data-file-type')=='text'){
			try{
				var fIndx = $(this).val();
				var jObjTextDocument = gFolderFilesDocumentsObj.textFiles[fIndx];
				txtArr.push(jObjTextDocument.documentId);
			}catch(e){}
		}
	});
	if(folderArr.length>0 || uploadedArr.length>0 || txtArr.length>0){
		$('#downloadZipFileBtn, #shareMultipleFileBtn, #deleteMultipleFileBtn').show();
	}else{
		$('#downloadZipFileBtn, #shareMultipleFileBtn, #deleteMultipleFileBtn').hide();
	}
	return {folders:folderArr, uploads:uploadedArr, texts:txtArr};
}

function deleteOwnerCreatedFolder(i){
	jConfirm('Are you sure? Do you want to delete this folder? If you have shared some file(s) from folder then they will be removed from shared content!', 'Confirmation Dialog', function(response) {
		if (response) {

			var jObjFolders = null;
			
			if(fileNameArray.length==1 && gCreateTreeArr!=undefined){
				jObjFolders = gCreateTreeArr[i];
			}else{
				jObjFolders = gFolderFilesDocumentsObj.folders[i];
			}
			
			var docId = jObjFolders.documentCategoryId;
			$.ajax({
				url : 'deleteAuthFolderUploadedFileDocFromDMS.json',
				data : {
					docCatIds : docId
				},
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				type : 'POST',
				success : function(txt) {
					jAlert(txt);
					refreshUplodedFiles();
				}
			});
		}
	});
}


function multipleFileUploadedFolderSharingView()
{
	var flag = true;

	var allDocObjArr = showZipDownloadButton(1);
	if(allDocObjArr.folders.length>0 || allDocObjArr.uploads.length>0 || allDocObjArr.texts.length>0){
		flag = true;
	}else{
		flag = false;
	}
	
	if(flag)
	{
		var boiler ='<div id="sharingDetails"></div><div style="width:100%;">'+
			'<fieldset><legend><b>File/Folder Access</b></legend>'+
			'<input type="radio" id="viewChoice" name="readWriteChoice" checked="checked" value="read">&nbsp;<b>Read Access</b>&nbsp;&nbsp;&nbsp;&nbsp;'+
			'<input type="radio" id="editChoice" name="readWriteChoice" value="write">&nbsp;<b>Read and write Access</b>'+
			'<table class="table table-condenced table-bordered">'+
			'<tr><td style="width:100px;vertical-align: middle;">Start Date and Time :</td><td style="width: 150px;"><input type="text" id="dms_startDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_startTime" placeholder="Start Time" style="width:70px;" readonly></td><td style="width:100px;vertical-align: middle;">End Date and Time :</td><td style="width: 150px;"><input type="text" id="dms_endDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_endTime" style="width:70px;" placeholder="End Time" readonly></td></tr>'+
			'</table>'+
			'</fieldset></div>'+
			'<fieldset><legend><b>Share with</b></legend>'+
			'<div style="width:100%;">'+
			'<input id="folderSharingTo" style="width:400px; " placeholder="Share with..." type="text"/>'+
			'</div></fieldset>';
		$('#dmsFolderSharingBody').html(boiler);

		$('#dmsFolderSharingDialogHeader').html('Document sharing');
		
		$("#dms_startDate").datepicker({
			dateFormat:"M dd,yy",
			changeMonth : true,
			changeYear : true,
			minDate :new Date(),
			onSelect:function(date){
				$("#dms_endDate").datepicker("option","minDate", date);

			}
		});
		$("#dms_endDate" ).datepicker({
			dateFormat:"M dd,yy",
			changeMonth : true,
			changeYear : true,
			minDate :new Date(),
			onSelect: function(date){
			}
		});

		$('#dms_startTime').timepicker({
			showPeriod: true,
			showLeadingZero: true,
		});

		$('#dms_endTime').timepicker({
			showPeriod: true,
			showLeadingZero: true,
		});
		boiler =
			'<input type="button" id="post-Folder-Sharing" value="Post" class="btn btn-primary btn-mini" >'+
			'<input type="button" class="btn btn-danger btn-mini" value="Close" data-dismiss="modal">';
		$('#dmsFolderSharingFooter').html(boiler);

		$('#dmsFolderSharingDialog').modal('show').css({
			width:'800px',
			'margin-left': function () {
				return -($(this).width() / 2);
			}
		});
		
		$('.token-input-remove-searchableById-facebook-folderSharingTo').remove();
		if(gRoasterIdArray!=null && gRoasterIdArray.length>0)
		{
			$('#folderSharingTo').tokenInput("populateAllforEmployeePost.json",{
				theme: "facebook",
				resultsLimit: 10,
				placeholder: 'To',
				propertyToSearch: "name",
				//abortPrevCall:true,
				resultsFormatter: function(item){ return "<li><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" +
					"<div style='display: inline-block; padding-left: 10px;'><div class='full_name'>" + item.name +
					"</div><div class='email'>" + item.Desc + "</div></div></li>";},
					tokenFormatter: function(item) { return "<li><p><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" + item.name + "</p></li>";}
			});
		}else if(gBatchSemCapId!=null && gBatchSemCapId.length>0)
		{
			$('#folderSharingTo').tokenInput("populateAllforStudentPost.json",{
				theme: "facebook",
				resultsLimit: 10,
				placeholder: 'To',
				propertyToSearch: "name",
				//abortPrevCall:true,
				resultsFormatter: function(item){ return "<li><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" +
					"<div style='display: inline-block; padding-left: 10px;'><div class='full_name'>" + item.name +
					"</div><div class='email'>" + item.Desc + "</div></div></li>";},
					tokenFormatter: function(item) { return "<li><p><img src='" + item.imageUrl + "' title='" + item.name + "' style='height:25px; width:25px;' />" + item.name + "</p></li>";}
			});
		}

		$('#post-Folder-Sharing').click(function(){
			postDocumentSharingForMultiple();
		});
		
	}
}

function postDocumentSharingForMultiple()
{
	var allDocObjArr = showZipDownloadButton(1);
	if(allDocObjArr.folders.length>0 || allDocObjArr.uploads.length>0 || allDocObjArr.texts.length>0){
		flag = true;
	}else{
		flag = false;
	}
	if(flag == false){
		return false;
	}
	
	var alumniTextPost='';
	var alumUserIds='';
	var selfPostFlag=false;
	var canView=true;
	var canEdit=false;
	if($('input[name="readWriteChoice"]:checked').val()=='write')
		canEdit=true;

	if($('#folderSharingTo').val()!='' && $('#folderSharingTo').val()!=undefined){
		alumUserIds=$('#folderSharingTo').val();
		$('#folderSharingTo').focus();
		selfPostFlag=true;
	}else{
		selfPostFlag=false;
	} 
	var startDt = $('#dms_startDate').val();
	var endDt = $('#dms_endDate').val();
	var startTime = $('#dms_startTime').val();
	var endTime = $('#dms_endTime').val();
	if(selfPostFlag){

		if(allDocObjArr.folders.length>0){
			$.ajax({
				url:'addDocumentFolderSharing.json',
				dataType:'text',
				type:'POST',
				data:{alumUserIds:alumUserIds,alumniTextPost:alumniTextPost,canEdit:canEdit,canView:canView,type:"folder",
					documentIds:allDocObjArr.folders.toString(),
					startDate: startDt,
					endDate: endDt,
					startTime: startTime,
					endTime: endTime},
					async:false,
					beforeSend: function() {
						startCommonAjaxSpinner();
					},
					complete: function() {
						stopCommonAjaxSpinner();
					},
					success:function(messgae){
						
					},
					error:function(){
					}
			});
		}
		if(allDocObjArr.uploads.length>0){
			$.ajax({
				url:'addDocumentFolderSharing.json',
				dataType:'text',
				type:'POST',
				data:{alumUserIds:alumUserIds,alumniTextPost:alumniTextPost,canEdit:canEdit,canView:canView,type:"file",
					documentIds:allDocObjArr.uploads.toString(),
					startDate: startDt,
					endDate: endDt,
					startTime: startTime,
					endTime: endTime},
					async:false,
					beforeSend: function() {
						startCommonAjaxSpinner();
					},
					complete: function() {
						stopCommonAjaxSpinner();
					},
					success:function(messgae){
						
					},
					error:function(){
					}
			});
		}
		if(allDocObjArr.texts.length>0){
			$.ajax({
				url:'addDocumentFolderSharing.json',
				dataType:'text',
				type:'POST',
				data:{alumUserIds:alumUserIds,alumniTextPost:alumniTextPost,canEdit:canEdit,canView:canView,type:"docFile",
					documentIds:allDocObjArr.texts.toString(),
					startDate: startDt,
					endDate: endDt,
					startTime: startTime,
					endTime: endTime},
					async:false,
					beforeSend: function() {
						startCommonAjaxSpinner();
					},
					complete: function() {
						stopCommonAjaxSpinner();
					},
					success:function(messgae){
						
					},
					error:function(){
					}
			});
		}
		
		setTimeout(function(){
			$('#folderSharingTo').tokenInput("clear");
			$("#folderSharingTo").val("");
			$("#folderSharingTo").focus();
			$('#dmsFolderSharingDialog').modal('hide');
			
			$('.token-input-remove-searchableById-facebook-folderSharingTo').remove();
			refreshUplodedFiles();
			jAlert('Document shared successfully','success');
		},2000);
		
	}

}


function multipleDeleteOwnerCreatedFolderFileAndDoc(){
	
	jConfirm('Are you sure? Do you want to delete this folder? If you have shared some file(s) from folder then they will be removed from shared content!', 'Confirmation Dialog', function(response) {
		if (response) {

			var allDocObjArr = showZipDownloadButton(1);
			if(allDocObjArr.folders.length>0 || allDocObjArr.uploads.length>0 || allDocObjArr.texts.length>0){
				flag = true;
			}else{
				flag = false;
			}
			if(flag == false){
				jAlert('Please select atleast one record!')
				return false;
			}
			
			$.ajax({
				url : 'deleteAuthFolderUploadedFileDocFromDMS.json',
				data : {
					docCatIds : allDocObjArr.folders.toString(),
					docIds: allDocObjArr.texts.toString(),
					docPathIds: allDocObjArr.uploads.toString()
				},
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				type : 'POST',
				success : function(txt) {
					jAlert(txt);
					refreshUplodedFiles();
				}
			});
		}
	});
}

function deleteOwnerCreatedTextDpcument(docId){
	
	jConfirm('Are you sure? Do you want to delete this folder? If you have shared some file(s) from folder then they will be removed from shared content!', 'Confirmation Dialog', function(response) {
		if (response) {
			$.ajax({
				url : 'deleteAuthFolderUploadedFileDocFromDMS.json',
				data : {
					docIds: docId,
				},
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				type : 'POST',
				success : function(txt) {
					jAlert(txt);
					refreshUplodedFiles();
				}
			});
		}
	});
}

function remmoveSharedDocumentUserId(id){
	jConfirm('Are you sure? This File Or Folder not visible to User after remove!', 'Confirmation Dialog', function(response) {
		if (response) {
			$.ajax({
				url : 'removeSharedDocFOlderByUserData.json',
				data : {
					thredId: id,
				},
				beforeSend : function() {
					startCommonAjaxSpinner();
				},
				complete : function() {
					stopCommonAjaxSpinner();
				},
				type : 'POST',
				success : function(txt) {
					$('#dmsFolderSharingDialog').modal('hide');
					jAlert(txt);
				}
			});
		}
	});
}

function getPublicCreatedByFolderEmpWithDocumentCount(){
	
	$.ajax({
		url:'getPublicCreatedByFolderEmpWithDocumentCount.json',
		dataType:'json',
		type:'GET',
		beforeSend: function() {
			startCommonAjaxSpinner();
		},
		complete: function() {
			stopCommonAjaxSpinner();
		},
		success:function(json){
			var boiler = '';
			json.forEach(function(jObj, i){
				boiler+=`<tr><td class="gems_integer">${(i+1)}</td><td>${jObj.f_name} ${jObj.l_name}</td>
					<td>
						<a href="javascript:void(0)" onclick="createTree('AuthorWiseCats','${jObj.docCatIds}')">
						[ ${jObj.docCount} ]
						</a>
					</td>
				</tr>`;
			});
			$("#subFolder").html(`<span class="btn btn-inverse btn-mini pull-right" onclick="$('#tdFileAndTextWindow').show();$('#subFolder').hide();">Back</span>
			<table class="table table-bordered">
			<thead><tr><th>Sr.No.</th><th>Author Name</th><th>Documents</th></tr></thead>
			${boiler}
			</table>`);
			
			$("#tdFileAndTextWindow").hide();
			$("#subFolder").show();
		}
	});
}


function initializeFilters(){
    //Initialize the show filters link
    $('a[href="display-filters"]').click(function(){
        var filtersForm = $('form#aspect_discovery_SimpleSearch_div_search-filters');
        filtersForm.show();
        filtersForm.css('visibility', 'visible');
        $(this).hide();
        return false;
    });

    $('[name^="add-filter_"]').click(function(){
        addFilterRow();

        //Disable "normal" button actions
        return false;
    });
    $('[name^=remove-filter_]').click(function(){
        removeFilterRow($(this));
        return false;
    });
    //Disable the enter key !
    $('input[name^=filter_][type=text]').keypress(function(event){
        if(event.which == 13){
            //Entered pressed, do NOT submit the form, add a new filter instead !
            addFilterRow();
            event.preventDefault();
        }
    });

}

function removeFilterRow(button){
    var parentRow = button.parents('tr:first');

    //Check if we are removing a new filter AND our last new filter at that, if so removes values instead of the row
    if(parentRow.is('[id^="aspect_discovery_SimpleSearch_row_filter-new-"]')
        && parentRow.parents('table:first').find('tr[id^="aspect_discovery_SimpleSearch_row_filter-new-"]').length == 1){
        //Hide ourselves & clear our values!
        parentRow.find('input[type=text]", select').val('');
    }else{
        if(parentRow.is('[id^="aspect_discovery_SimpleSearch_row_used-filters-"]') && parentRow.parents('table:first').find('tr[id^="aspect_discovery_SimpleSearch_row_used-filters-"]').length == 1)
        {
            parentRow.next().remove();
            parentRow.prev().remove();
        }
        parentRow.remove();
    }
}

function addFilterRow(){
    var previousFilterRow = $('tr#aspect_discovery_SimpleSearch_row_filter-controls').prev();
    //Duplicate our element & give it a new index !
    var newFilterRow = previousFilterRow.clone();
    //Alter the html to update the index
    var rowIdentifier = newFilterRow.attr('id');
    var oldIndex = parseInt(rowIdentifier.substr(rowIdentifier.lastIndexOf('-')+1, rowIdentifier.length));
    //Add one to the index !
    var newIndex = oldIndex + 1;
    //Update the index of all inputs & our list
    newFilterRow.attr('id', newFilterRow.attr('id').replace('-' + oldIndex, '-' + newIndex));
    newFilterRow.find('input, select').each(function(){
        var $this = $(this);
        //Update the index of the name (if present)
        $this.attr('name', $this.attr('name').replace('_' + oldIndex, '_' + newIndex));
        $this.attr('id', $this.attr('id').replace('_' + oldIndex, '_' + newIndex));
    });
    //Clear the values
    newFilterRow.find('input[type=text], select').val('');

    previousFilterRow = newFilterRow.insertAfter(previousFilterRow);
    //Initialize the add button
    previousFilterRow.find('[name^="add-filter_"]').click(function(){
        addFilterRow();
        return false;
    });
    //Initialize the remove button
    
    previousFilterRow.find('[name^=remove-filter_]').click(function(){
        removeFilterRow($(this));
        return false;
    });
}

function applyBooleanFilterDMS(){

	/*var filter_arr = new Array();
	$('.search-filter').each(function(){
	  var type = $(this).find('.field_filtertype_cls').val();
	  var rel_operator = $(this).find('.filter_relational_operator_cls').val();
	  var input = $(this).find('.discovery-filter-input').val();
	  filter_arr.push({
	      type:type,
	      rel_operator:rel_operator,
	      input:input
	    });
	});

	console.log(filter_arr);
	getFolderFilesDocumentsByParentId(0, undefined, "BOOLEAN_FILTER", encodeURIComponent(JSON.stringify(filter_arr)));*/
	
	createTree();
}


function showItemDetails(obj) {
	console.log("Test123");
	var boiler = '<b>Name: </b>' + $(obj).attr('data-name');
	if($(obj).attr('data-createdByEmp')!=undefined && $(obj).attr('data-createdByEmp')!='')
		boiler += '</br><b>Created By: </b>' + $(obj).attr('data-createdByEmp');
	if($(obj).attr('data-dirCount') == undefined && $(obj).attr('data-fileCount') == undefined)
	{}
	else
		{
			if($(obj).attr('data-dirCount') == 0 && $(obj).attr('data-fileCount') == 0)
				boiler += '<br/><b>Items: </b>Empty';
			else if($(obj).attr('data-dirCount') == 0)
				boiler += '<br/><b>Items: </b>' + $(obj).attr('data-fileCount') + ' File(s)';
			else if($(obj).attr('data-fileCount') == 0)
				boiler += '<br/><b>Items: </b>' + $(obj).attr('data-dirCount') + ' Folder(s)';
			else
				boiler += '<br/><b>Items: </b>' + $(obj).attr('data-dirCount') + ' Folder(s), ' + $(obj).attr('data-fileCount') + ' File(s)';
		}
	if($(obj).find('.folderTagsCls')!=undefined && $(obj).find('.folderTagsCls').text()!='' && $(obj).find('.folderTagsCls').html!=null){
		boiler += '<br/><b>Tags: </b>' +$(obj).find('.folderTagsCls').html();
	}
	$('#dms_item_details').html(boiler);
}


function showItemDetails(obj) {
	console.log("Test123");
	var boiler = '<b>Name: </b>' + $(obj).attr('data-name');
	if($(obj).attr('data-createdByEmp')!=undefined && $(obj).attr('data-createdByEmp')!='')
		boiler += '</br><b>Created By: </b>' + $(obj).attr('data-createdByEmp');
	if($(obj).attr('data-dirCount') == undefined && $(obj).attr('data-fileCount') == undefined)
	{}
	else
		{
			if($(obj).attr('data-dirCount') == 0 && $(obj).attr('data-fileCount') == 0)
				boiler += '<br/><b>Items: </b>Empty';
			else if($(obj).attr('data-dirCount') == 0)
				boiler += '<br/><b>Items: </b>' + $(obj).attr('data-fileCount') + ' File(s)';
			else if($(obj).attr('data-fileCount') == 0)
				boiler += '<br/><b>Items: </b>' + $(obj).attr('data-dirCount') + ' Folder(s)';
			else
				boiler += '<br/><b>Items: </b>' + $(obj).attr('data-dirCount') + ' Folder(s), ' + $(obj).attr('data-fileCount') + ' File(s)';
		}
	if($(obj).find('.folderTagsCls')!=undefined && $(obj).find('.folderTagsCls').text()!='' && $(obj).find('.folderTagsCls').html!=null){
		boiler += '<br/><b>Tags: </b>' +$(obj).find('.folderTagsCls').html();
	}
	$('#dms_item_details').html(boiler);
}
function downloadZipUploadedFile(documentCategoryId,folderName){
	window.open('downloadUploadedFileZip.json?categoryId='+documentCategoryId+'&folderName='+folderName);		
}h  U         U\v+      menu3      K)E	      ArrayTags      n"m/      TRIM_FILE_NAME_LENGTH      J      dmsSettingsObj     /      FOLDER_ICON    @R      img/FileSystem/Folder2.png     H      FOLDER_EMPTY_ICON      n(      #chkIncludeDMS     A      attr	   :0      checked
          #addDocumentCategoryDialog           modal      ]i      backdrop   a@      keyboard   HK      show   >      css    J      width      z)%      400px      (:      margin-left    +      #showTextDocumentDialog    u;      1000px     -      #addCourseFileDocumentFromDMS      x#      800px      p      #txtSearch2    V      keypress   IIP      event      3      keycode    5      keyCode    0      which      b      trim   &      val    E      indexOf     Y      refreshCategoryTree!    W5      gemsCommonPopupModalCssLayout"      8h      #imageViewrSlides#      3j      #uploadDocumentDialog$      ;N      600px%      W      hidden&     &`      node'   0!      gDMSCategoryTreeId(      m      tree)         getSelected*    {      #renameFileDialog+      m      dialog,     qO      autoOpen-         height.     al      #organizeFile/      [      #categoryPropertiesDialog0      *M
      DMSDocType1           UPLOADED2   ;      TEXT3   S
N      gjArrTextDocument4      	$Q      gjArrUploadedDocument5      n      gjArrSearchResultDocument6            gTextDocSaveFlag7         gTextDocumentCommandFlag8   @.!      gFileId9    "kr      gCommentCnt:     E      gProfileImgPath;    )Z      gGender<          gDMSCategoryTreeName=   h      gCategoryType>      _      gParentCategoryType?     M3      gCategoryPath@            gCategoryTypeAllA   yx
      gSearchInCategoryB            gNodeIdC    g	      gExtensionArrayD    ?U3      docE    L      docxF   MUe      xlsG    + i      xlsxH   ew      pdfI    t      jpgJ    3      textK   $=      pngL    Eo      gifM    v      pptN    8      gDefaultCategoryArrayO      k      SHAREDP     AQ$      EVENTQ      @tZ      EXPENSER    ya      COMMUNICATIONS       c2x      FEEST   j      PROFILEU    a      COURSE_FILEV    J^      MY_DRIVEW   l91      MY_PROJECTSX    j<x      gShowAttachmentBarY     U	      gEvaluationTypeZ    '&      _doCreateTree[      z      jArray\     Nu	      elementId]      MT      reload^     aVB      refDocumentCategoryId_      B-      append`     6(      dataa   p1      documentCategoryIdb     2      parentc           collapseAlld     R	      expandAlle            fetchAllDocumnetsWithDMSf   U<      rdoTypeg    2      windowh           req_param_categoryIdi   !      getFolderFilesDocumentsByParentIdj            #fileDropdowMenuTopBark     3At
      setTimeoutl     k      #filterGroupm   B|      addClassn   x5      openo   Sv1      categoryPathp   M6p/      rootRquiredq    *
      parentTyper     	      typeArrays      Q1      consolet    =X      logu          Academicv   u2      pushw   3i      dmsx    z      :checkedy   C|x      dmsNewz     5 
      createTree{     9      gCreateTreeArr|     7	      tagSearch}      y      flg~          searchTagTxt   so      AuthorWiseCats     m       &searchTagTxt=     ub\      &s_searchType=AuthorWiseCats   \
      CharSearch     ]Mu      &s_searchType=CharSearch   *      #chkIncludeSharedDMS   zz      tagit      B	      removeAll      {KHG	      createTag      z1      recentAdded    _6      &s_searchType=recentAdded      3f      isHideEmptyFolders     s      #chkHideEmtyFolders          #chooseYearFilter      7      &s_searchType=YearFilter         tgTxt      2]I       #subFolder, #tdFileAndTextWindow   X      html   y      <div style="text-align:center;margin: 5px 0px;" class="simpleSpinnerCls"><i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i></div>      H1      doCreateTree   fc      doCreateOrganizeFolderTree     d      ajax   0      getDocumentCategoryAjaxDMS_Sp.json?categoryPath=   
      &typeArray=          &parentType=   >      &root=     A       &isHideEmptyFolders=   Dow      dataType   
      beforeSend     qm+      startCommonAjaxSpinner     D      complete   *F      stopCommonAjaxSpinner      \9      success    cNY      showZipDownloadButton      tuW      error      T      createHierarchyTree    k3      getDocumentCategoryHierarchyAjax.json?categoryPath=          Test123    ip-
      #subFolder     v      #tdFileAndTextWindow         flag   	
      menuBoiler     J      #my-menu         boiler1    c      <div class="DMS_content">      @
      boilerList     nT9      folderCommonHeader           <div style="text-align: center;color: gray; margin-top: 50px;">
			<i class="fa fa-exclamation-triangle fa-4x"></i>
			<br>
			<b>This folder is empty</b>
		</div>    D      fullName   1      dirCount   &      childDirectoryCount    
	      fileCount      WT      childUploadedFileCount     I      childCreatedFileCount      S2      isShared   \      sharedStatus   kTFW      canEdit    K      createdByEmp   j      createdTimetamp    z      createdTime    &
      folderIcon     Y	      substring      ^Nz      ...    zA;      isEmpty    Re9      <div id="optionDmsFolder-      E      " 
			class="DMS_content_item dms_tile_view_property" 
			data-name="      9      " 
			data-dirCount="      >"y      " 
			data-fileCount="      _      " 
			isShared="   ?      "
			canEdit="     	      "
			data-createdByEmp="   }k      "
			style="height: auto; float: left;text-align: left;" 
			ondblclick="getFolderFilesDocumentsByParentId(    Y`      ,'           ',undefined, undefined ,   u&/      )">
			<div style="float: left;">
			<img src="    ~       " class="dmsFolder" ondragstart="return false" style="width: 40px;">
			</div>
			<div style="float: left;width: 79%;">
				<p class="text-center">    '}L,       <br/> <span style="color: gray;">Items: <b>   E0      </b></span></p>
				<span class="folderTagsCls">   31      documentTagsBoiler     m      tags         </span>
			</div>
		</div>     GR<      <tr id="optionDmsFolder-   #9&      " class="DMS_content_item" data-name="     4U0      " data-dirCount="      g=      " data-fileCount="     "T      " isShared="   `'      "      20	      canEdit="      `|      " data-createdByEmp="      20      " ondblclick="getFolderFilesDocumentsByParentId(   YHG      ',undefined, undefined,          ))"    E	      <td></td>      67B      <td><a href="javascript:void(0);"><i class="fa fa-circle"></i> <b>     hm4      </b></a></td><td>Folder</td>   mQY"      <td title="Directory/File Count">      b       Folder(s) &       u.       File(s).</td>     ,       <td title="Created By Employee">   .      </td>            <td title="Can Edit">      7      Yes          <td title="Shared">    5f      Shared     
      <td>-</td>           <td>         parentCategoryType     TA      DMS    Hm      #menuFoldr-    *N      remove     _lh      #hdnUserRole         student    sm      <div id="menuFoldr-    b      "><ul>     0      <li onclick="configureUploadedFolderSharingView(         ,'folder','    ZR      ')"><a href="javascript:void(0);"><i class="fa fa-share fa-lg"></i> Share</a></li>     uK%      <li onclick="downloadZipUploadedFile(      do      ')"><a href="javascript:void(0);"><i class="fa fa-file-archive-o" aria-hidden="true"></i> Download Zip</a></li>    $&      <li onclick="deleteOwnerCreatedFolder(     ( R      )"><a href="javascript:void(0);"><i class="fa fa-trash fa-lg"></i> Delete</a></li>     3      <li onclick="showDocumentFolderProperties('folder',    gR\      )"><a href="javascript:void(0);"><i class="fa fa-info-circle fa-lg"></i> Properties</a></li>   5      </ul></div>    ^      </div>     J      </tbody></table>   =f      #folderViewChangeId    7z      hasClass   r#      fa-th-large   R=pw      .DMS_content_item     [      float     D!%,      inherit   bC      dataTableListView     ]      left  s,      #fileMap  H      /home     -g      #fileMapLocation	  rYG      /<a onclick='showFileAndTextWindow();' style='cursor:pointer;'>home</a>
   t1      fetchAllSharedDocuments   S
      getFileAndFolderByPath    F
      mouseenter    du      showItemDetails   $      top   NAG      lft   -      .movable  (#rj      #dms_item_details     fN
      mouseleave    X      click     +      removeClass   C      DMS_content_item_selected     h;      body  v}      hide  :$5      #optionDmsFolder-     (      ClassyContextMenu     q      menu  Re
      menuFoldr-    LI      mouseButton    .      right     {o      isMenu    ;
      minWidth   ;x      maxWidth!  C      delay"     CD      #ulTargetTree#     o1      clearAddDocumentCategoryForm$  W      #documentCategoryName%     =Y7      #documentDescription&        showAddDocumentCategoryForm'         getDocumentCategory(          getDocumentCategoryAjax.json)        addDocumentCategoryCheckPoint1*          #txtDocumentTags+  Jh      parentCatId,   `      prompt-    dK/      Creating folder with no parent folder. Proceed?.         callback/  |      addDocumentCategoryCheckPoint20    \      buttons1   82P      Proceed2   &      Cancel3    -!      #chkNewDocFlag, #chkNewDocFlagTbx4     
      removeAttr5    (T-      #hdnParentCategoryId, #hdnParentCategoryIdTbx6     mMX      addDocumentCategoryAjax7    O      documentCategoryName8  3J      documentDescription9   sz      categoryType:  
%
      newDocFlag;    &B"t      isValidFileName<   p      border=    <      1px solid red>     p^      jAlert?    ~      Please enter valid Folder Name!@   -T]g      getSelectedCategoryTypeA   ep      getSelectedParentCategoryTypeB     tA      getCategoryRetrievalPathC        prevWhileAttchFlagD    s[      #chkNewDocFlagE    <Y      #chkPrevToAttachmentFlagF  GZS'
      employeeIdG          #hdnDocumentPersonH    ":k      pathI        #hdnParentCategoryIdJ  F      getCategoryPathK   ''D      documentTagL   #w      isPrivacyPublicM         #folderIsPublicN   K2      addDocumentCategoryAjax.json?documentCategoryName=O    u      &documentDescription=P     ';/      &employeeId=Q        &parentCatId=R     .      &path=S    nq      &categoryType=T    	      &parentCategoryType=U  4H      &documentTag=V     c      &isPrivacyPublic=W     G      responseFlagX  H}#      responseTextY  rX      isAcademicFolderZ  P      prop[  l      createCategoryHirarchy\    P      categoryPathArr]   n7      createHirarchicalCategoryAjax.json?categoryHirarchyArr=^   y8g      showSuccessMessage_    w      showErrorMessage`  'z      catPatha   <:      createCategoryHirarchy1b   <t      categoryPathNameArrc   
      docCategoryIdd     `i&      createHirarchicalCategoryAjaxNew1.jsone    i      categoryHirarchyArrf   (NFD      categoryHirarchyNameArrg   :      POSTh        CategoryHierarchyListi     Z      alertj     'c      createTrainingCategoryHirarchyk    s~-      createHirarchicalCategoryForTrainingAjax.jsonl     e=!      removeDocumentCategoryCheckPoint1m     HL,      Please choose a document category to delete.n  G      inArrayo   j      Are you sure to delete?p   `      removeDocumentCategoryq    (g*      Default category(folder) cannot be deletedr    
      categoryIds    )V+      removeDocumentCategoryAjax.json?categoryId=t   O      responseu  M      Deletedv         #tdDocumentFilesWindoww    1E      Directory successfully deletedx    7i	      getParenty     I      refreshFolderz           deleteFolder{  v:      Deletion Failed!!|     *_      getUploadedFiles}  /      nodeId~    2(      getUploadedDocumentAjax.json?categoryid=  N      cursor    P      progress        showUploadedDocumentIcon  rS{      getTextFiles  L#(      getTextDocumentListAjax.json?categoryid=  ]1      showTextDocumentIcons     Y.      getChildren   
}N      children  #      collapse  )      setSelected   0U      .tree-node[node-id="        "]    !m      .tree-icon.tree-folder    ^4#      expand    
      expandNode    $I      collapseNode  Z      #textDocumentNameDialog   L      <table class="">  I      link  KD8      <tr><td><div id="showPrivateCommentDiv"></div></td></tr>  VE      iconPath  Ty      hasAttachment     RDo      toLowerCase   g      yes   l9      img/files/txt.png     r	      </tr><tr>     L|
      gemsDecode    A      <td style="padding:20px;">    D      <div id="options-     OMM
      documentId    $      " data-name=  ~6       style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink DMS_content_item" id = "tdFileListIcon-text-  Tn      "><img class="dmsFolder" src="    !      </p>        </tr>     O      #menu-    k]      <div id="menu-    T>X      <li onclick = "showText('     ]6      ','view')"><a href="javascript:void(0);">View</a></li>    -j6      ','edit')"><a href="javascript:void(0);">Edit</a></li>    #2      <li onclick="configureCourseFileDocSharingView('',    H/      )"><a href="javascript:void(0);">Share</a></li>   41      <li onclick="configureUploadedFolderSharingView('           ','docFile','     i)7      ')"><a href="javascript:void(0);">Share in DMS</a></li>   ,2      " style =  "cursor:pointer;" onclick = "showText('    K      ')">  g9      " height=25 />&nbsp;&nbsp;    x      <td id="shaEmp    ug      " width="20px;" class="ui-state-default"><a href="javascript:void(0);" onclick="showSharedEmployeeList(   e      ,'textfile',  &T/P      )" title=""><img src="img/share.png" alt="Shared" />Shared With Section</a></td>  D.      " width="20px;" class="ui-state-default"></td>    .%      .courseFileTabs .active   <!
      isFreeze  x      <td style="width:70px;text-align:center" class="context-menu-one ui-state-default"><a class="btn btn-mini docListOpt btnDocOpts" href="javascript:void(0);" id="btnDocOptDocShared" title="Share with Others" onclick="configureCourseFileDocSharingView('',  .%      )"><i class="icon-user"></i></a></td>     XA      " style="display:none;"><td colspan="6"><div id="showStudentShare     B@      "></div></td></tr>    J@B      " style="display:none;"><td colspan="6"><div id="showEmployeeShare    uC      " style="display:none;"><td colspan="6"><div id="showPrivateComment   =&      <tr id="options-  >	T       style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink" id = "tdFileListIcon-text-   +      ">    F       <td><img class="dmsFolder" src="  ,m>      " ondragstart="return false" style="width:25px;height:25px;">     /6!      <td>File</td><td>-</td><td>-</td>     +{      <td title="Is Shared">    }a8      <td title="has Attahcments">  p      #documentsList    o      #subFolder .tableWithoutPadding   ]J	      #options-           menu-     O      document  
      ready     0o      .commentMark  1\      elastic   >/      jQuery    6L9      .jbar     ?L#      jbar  (      #chkFileListIcon-text-    'a      Type  f      CreationDate  mC      creationDate  F      Name  m      Parent          catName   {	B      Description         description   d+f      #tdFileListIcon-text-     ZJ      flag1     1f      boiler    #8f      documentBody  Yx      downloadLink  UI{      juno  U      url.download.json     \      setIndexedArgs    
      eDocPathId    '      documentPathId    3s>      fileType  0Gi	      extension     8      gFileTypeIcon     
      temp  #q4      \     tp      \&    5      <td style="padding:20px;" style="text-align:center;">     s	      <div id="Upload-  2      " style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink DMS_content_item" data-name=     7      ><img class="dmsFolder" src="     f+4      " ondragstart="return false"><p class="text-center">  IUq
      </p></div>    ^       <div style="text-align:center;">  lh      <tr id="Upload-   q2      " class="tooltiplink DMS_content_item" data-name="    r      " style="cursor:pointer;">    ;cIG      " ondragstart="return false" style="width:25px;height:25px;"/></td><td>   V56      <td>Folder</td><td title="Directory/File Count">-</td>    =&      <td title="Created By Employee">-</td>     ]"      <div id="Uploadmenu-  n      pptx  ]!      <li onclick="showDocumentPreview(     O6      );"><a href="javascript:void(0);">Preview</a></li></a>    7H      <li><a href="     -rS      ">Download</a></li>   Z1      <li onclick="configureUploadedFileDocSharingView(     i      ,'uploaded','           ','	   3M0      ')"><a href="javascript:void(0);">Share</a></li>
  
	      ,'file','     _8      ')"><a href="javascript:void(0);">Share in DMS </a></li>  )#      <li onclick="deleteDocumentFromDMS(   ti;      )"><a href="javascript:void(0);">Delete</a></li></ul></div>         </table>  t       #subFolder table  Py	      #fileList           #myUploadmenu     (]w      #Upload-  s      Uploadmenu-   4&      #chkFileListIcon-uploaded-    (O      uploaded  W      DocumentPath  g      documentPath  d[      #tdFileListIcon-uploaded-     `E      showDocumentPreview   w      domain    !      http://   0+QA      location  	(r      host  g      encodedPath   K(a]      <img style="width:100%;height:550px;" src="https://view.officeapps.live.com/op/view.aspx?src=      ^      "/>!   /g`      <iframe style="width:100%;height:550px;" src="https://view.officeapps.live.com/op/view.aspx?src="         #showDocumentPreviewDialog#    -fY      .documentBody$     ?y      100%%  lT      0px&   d9      margin'    /      z-index(   (      1100)  		      showFiles*     rj      .tblFileIconList+  [
      smalltable,    `u      table-bordered-    R      #editing_field1.   4%e      removeDocumentEditor/  ,'0      .divDocumentListWindowTitle0   1      setWorkingAreaTitle1   +      clearDMSWorkingArea2   p~      loadEmployeeRoasterMappingAjax3    t8.	      Exception4     %      getSharedFiles5    0F      .chkFileListIcon6        bind7  0e,p      input[name=chkFileListIcon]8         #tdMenuFileDelete9     NTs      .docListOpt:   Q|      onShowFilesFinish;     x      addTextDocumentCheckPoint<     JD\      showAddEditTextDocumentForm=   g9      Can not Upload and Create File in /Home (Root) directory!>     L~U      showAddTextDocumentNamePrompt?     #      #txtDocumentName@  
>      textDocumentNameA  [{      saveTextDocumentB  n      checkTextDocumentNameDuplicacyC    I      returnResponseD    dw*      checkTextDocumentNameAjax.json?categoryId=E    lz      &name=F    OB
      gemsEncodeG    ,d
      custHelperH    $      #customerHelperI         fileExtAvailableJ  6      HPTUK  #z      #productionServerL     V^      All File Types Allowed.M   y O      .doc, .docx, .xls, .xlsx, .pdf, .jpg, .text, .png, .gif, .ppt, .pptx files onlyN   B      removeAllTemporaryAttachmentO  3      addTextDocumentFormBoilerPlateP    a     
		<div class="modal-header" id="divTextDocumentFileTitle"><a href="javascript:void(0);" class="label alert-danger pull-right" data-dismiss="modal" style="background-color:">X</a> <h3>New Text Document</h3></div>
		<div class="modal-body">
		<table align="center" class="table">
		<input type = "hidden" id = "hdnDocumentId"/>
		<input type = "hidden" id = "hdnDocumentCategoryId"/>
		<tr>
		<td style="display:none">
		<a class="button" style="display:none" id = "btnTextDocumentDelete" style = "display:none;" title="Delete" href="javascript:void(0)"><span class="icon icon186"></span></a>
		<a class="button" style="display:none" id = "btnTextDocumentReplicate" title="Replicate" href="javascript:void(0)"><span class="icon icon55"></span></a>
		<a class="button" style="display:none" id = "btnTextDocumentCancel" onclick="cancelTextDocumentFormCheckPoint()" title="Close" href="javascript:void(0)"><span class="icon icon56"></span></a>
		</td></tr><tr>
		<td>
		<textarea style="height:100px; width:100%" id="editing_field1"></textarea>
		</td>
		</tr>
		<tr>
		<tr><td><div class = "label label-info" style = "font-size:14px;height:15px">Description</div></td></tr>
		<tr>
		<td>
		<textarea style="height:50px; width:100%" id="txtDescription"></textarea>
		</td>
		</tr>
		<tr>
		<td>
		<fieldset>
		<legend><i class="fa fa-paperclip fa-lg fa-rotate-270" aria-hidden="true"></i> Attachments  </legend>
		<div id = "tblAttachementList">No Attachments!</div>
		</fieldset>
		</td>
		</tr>
		<tr>
		<td style="" id="idattachmentbar">
		<div class="upload-btn-wrapper" style="width:30%">
		<button class="btn btn-info full-upload-btn" type="button"><i class="fa fa-upload" aria-hidden="true"></i> Upload attachments</button>
		<input type="file" id="txtFileAttachment" name="fileData" />
		</div>
		<br>
		<div class = "alert alert-info">
		<i class = "icon-hand-right"></i>&nbsp;&nbsp; Q     `f     <br />
		<i class = "icon-hand-right"></i>&nbsp;&nbsp; Maximum file size limit &nbsp;&nbsp;<strong class = "fileSizeAllowedCls">20</strong>&nbsp;MB<br />
		</div></td>
		</tr>
		<tr>
		<td>
		<div class="label label-info">Add Tags</div>
		<input type="text" id="textFileTagsInput" value=""/>
		</td> </tr> </table> </div>
		<div class="modal-footer" style="text-align:right;">
		 <input type="button" id = "btnTextDocumentSave" class = "btn btn-inverse btn-mini" value="Save" onclick = "showAddTextDocumentNamePrompt()" >
		 <input type="button" id = "btnTextDocumentCancel" class = "btn btn-danger btn-mini" value="Close" onclick = "cancelTextDocumentFormCheckPoint()" data-dismiss="modal">
		</div>R  n~      #textFileTagsInputS          caseSensitiveT     ZSy      tagLimitU        availableTagsV     Pw0      .replicateDocW     ,&      docIdX     *v      #btnTextDocumentReplicateY           configureReplicateToOtherBatchZ    c#v      #btnTextDocumentDelete[          unbind\    E*      deleteFiles]   ;      fileSizeAllowed^   h`      AllowedFileSize_   &      DOCUMENT_UPLOAD`   %      #fileSizeAllowed, .fileSizeAllowedClsa     sd      #hdnDocumentCategoryIdb    }>      createEditorc  x      editing_field1d    H&H      initAttachmentBare     o      #btnTextDocumentCancelf    [R      #btnTextDocumentResetg     W      reseth           #btnTextDocumentSavei        savej  b      saveFlagk  WA      getDocumentTitlel  y8W      Please enter valid File Name!m     (e      CKEDITORn  El\	      instanceso           getDatap   z      #hdnDocumentIdq    6      #txtDescriptionr   O      tagsTxts   :4      saveTextDocumentAjax.jsont     7      files_uploadedu    k<      #idattachmentbarv  |      setDocumentTitlew  E      Saved Successfullyx    x(5_      Name already existy    p+      gTextVeiwTypeFlagz     ($      showText{  4h      view|  4C      popover}         destroy~   9l#      #docSettings  3f      #btnTextDocumentCance           off   %      getTextDocumentData   '      getTextDocumentAjax.json?d__documentId=   n      setData   }      #docCatIdDNS  
OX      getAttachmentListAjax1    0k      eDocId    2      uploadDocumentCheckPoint  5      showUploadDocumentForm    y=$      getCategoryPathAjax.json?categoryId=  4f      #descriptionUpload    sEb      #docUploadSection     sG      initDocumentUploadForm    +Mt      setDocumentCategoryId     y_      uploadDocumentFormNextBtn           uploadDocumentFormBackBtn     ~w      initDocumentUploadFormDialog  60      dialogId  .      showCategoryProperties    fl&      getCategoryProperties.json?categoryId=          #lblCategoryPath  pf      #lblCategoryName  (      #lblCategorySize        categorySize  1^      &nbsp;&nbsp; KB   Cq      docType   Exz      jConfirm        Are you sure?     7      Confirmation Dialog         ids   (	      fileTypes     u#      input[name=chkFileListIcon]:checked         deleteFiles.json?ids=           &fileTypes=   V      Success   ~&      #commonDocumentDialog           showFileDetail          toolTipText   Zj      Lecture Notes     xX      University Question bank  xGO      Sample Assignment           <button style="color:red;float:right;margin-right:-10px;margin-top:-20px;" data-dismiss="modal" class="close" type="button" id="close-    /      #close-         closeTooltip  
      toolTipObj    !p      trigger   d      hover     sc	      placement     4W      content   @      hideFileDetail    Of      qtip  6      searchDocumentFile    n
      searchText    3`
      searchType    Vnv      #searchTypeCmb option:selected    "      #searchFileList   h.#         searchDocumentFile.json?searchText=   $'h      &searchInCategory=    0      &searchType=  A      showSearchResultDocumentIcon  %      <h5 align="center" class="box-title">     9W(      &nbsp;search result(s) found for-&nbsp;"  .      "</h5>    Iz      Please enter search text!!!!  }      searchCount   \9      #load     T.      <h5 align="center" class="box-title" style="">    1      <table class=""><tr>  t      downloadDocument.json?Path=   
      replaceAll    U       /    4%      <td style="padding:10px;width:12.5%">     F      " style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="tooltiplink" id = "tdFileListIcon-text-  Pq/8      "><img class="dmsFolder" src="img/files/txt.png" title="        "><ul><li onclick = "showText('   6/      ')"><a href="javascript:void(0);">Edit</a></li>   H`:      )"><a href="javascript:void(0);">Share</a></li></ul></div>    <d      <tr><td  class="ui-state-default" width="40px"><input type = "checkbox"  id = "chkFileListIcon-text-  H5      "  class = "chkFileListIcon"  name = "chkFileListIcon"></td><td width="150px" class="context-menu-one tooltiplink ui-state-default" id = "tdFileListIcon-text-    Y:      ')"><image src = "css/images/tree_file.gif" />&nbsp;&nbsp;    @B2      </td><td class="ui-state-default" width = "100px">    
      </td></tr>    J&      <td style="padding:10px;width:12.5%"">    z	      " title="           ">Download</a></li></ul></div>    lg      <tr><td  class="ui-state-default" width="40px"><input type = "checkbox" id = "chkFileListIcon-uploaded-   (      "  class = "chkFileListIcon" name = "chkFileListIcon" ></td><td width="150px" class="context-menu-one tooltiplink ui-state-default" id = "tdFileListIcon-uploaded-    =@      " style =  "cursor:pointer"><a class="ui-state-default" href = "  P      " ><span><image src = "css/images/add_attachment_icon.png" /></span>&nbsp;&nbsp;  z6      </a></td><td width = "100px" class="ui-state-default">    %_      &nbsp;&nbsp;&nbsp;&nbsp;<img src = "css/icons/DownloadIcon.png" title = "download" /></td></tr>   ,qW      documentCategoryObj   RD      catTypeArray        categoryRetrievalPath     %       cancelTextDocumentFormCheckPoint  >WX      evaluationName          isDocumentDirty   &aA      Do you want to save   A_K      cancelTextDocumentForm    6      Save  ,/)      Abort     H      -1    O;      uploadTextDocumentAttachment  o      upload    #	O      DMS-TextDocumentAttachment    i      removeAttachmentAjax  |KL8      removeFileHtml    A(      removeAttachmentAjax.json?d__documentId=  3      &attachmentName=  *=
      undoBoiler    HQ      <td colspan = "2">This document has been deleted successfully. You can <a href = "javascript:void(0)" onclick = "undoAttachmentRemoveAction('     <:      ')"> <span class="label">undo</span></a> this action.</td>    U6      undoAttachmentRemoveAction    %      trId  k      attachmentFileName          undoAttachmentRemoveAction.json   Z      attachmentName    #KX      getAttachmentListAjax     VNw      tableId    ET-      attachedFiles     9^      arrAttachedFile   %      attachementBoiler           lastIndexOf         trAttachmentFile-     W|
      <tr id = "    Fzh      "><td><img src="images/attachments.png" />&nbsp;&nbsp;&nbsp;&nbsp;<a href = "downloadDocument.json?Path=  8CDy      </a></td><td><img style = "cursor:pointer" title = "remove" src = "img/remove-icon.png" onclick = "removeAttachmentAjax('     &Be      ')" />&nbsp;&nbsp;&nbsp;&nbsp<img src = "../css/icons/DownloadIcon.png" title = "download"></td></tr>	     :      #tblAttachementList
   Jj~      isOwner   %      getAttachmentList.json?d__documentId=     Dy#      <div class = "preview-large"></div>   #      .preview-large    JHI      loading-large     Q      populateAttachmentList    o.!v      getTemporaryAttachmentListAjax1   +      getTemporaryAttachmentList.json   T      populateTemporaryAttachmentList   [      downloadLinkTmp         <div id = "   j[kt      " align="center" class="label label-info" style="min-width:300px;text-align: left;background: #eaeaea;margin: 5px;">  &      a.download.json   jS:1      <i class = "fa fa-download fa-lg pull-right"></i>     
      <img src="    	)-      " style="width:22x;height:22px;margin:1px;"/>     Yx      GOKHALE_INSTITUTE     CAX      <a style="color: #000000;font-weight: initial;" href="javascript:void(0);" clickHref = "  D*      " target="_blank" onclick="return false;">          </a>  _3      " target="_blank" onclick="imageViewerModal(this, '   %      ');">            <a title="Remove" id = "delete-!   xB;      " href="javascript:void(0)" onclick="removeAttachmentAjax('#         "><td><img src="$  o      " />&nbsp;&nbsp;&nbsp;&nbsp;%  gJ       </td><td>&nbsp;&nbsp;&nbsp;&nbsp&  q&      <i class = "fa fa-download fa-lg"></i>'    7m~      " align="center" class="label label-info" style="min-width:300px;text-align: left;background: #eaeaea;margin: 5px;"><img src="*    l      </span></div>+     }Lbl      <div class="alert alert-info" style="padding:2px"><strong style="color:red">No attachments!!!</strong></div>,  n      downLink-  ~.      downloadTemporaryAttachmentByTmpDocId.json?id=1    ,v#      " onclick="imageViewerModal(this, '2   1      ');" href="javascript:void(0)">3   9CD      " href="javascript:void(0)" onclick="removeTemporaryAttachmentAjax('4        ' 5    Xt      sType6     p'      )">7         tblAttachementList8          showDownloads9     *cOr      #buttonDownload-:  ;gl
      hideButton;    D      removeTemporaryAttachmentAjax<     R	      tempDocId=     ZwE#      stypee>    (1      removeTemporaryAttachmentList.json?d__documentId=?     a      &stype=@   D      refreshTemporaryAttachmentListA          ?type=B          instanceC  +g
      checkDirtyD    dxZ      txtTitleE  0      #divTextDocumentFileTitleF     3:      <h5 align="left" style="margin-top:5px;margin-left:15px;">G          </h5>H     E      titleI     o
_      getDocumentIdJ     `%!      tdIdK  2v      openRenamingDialogL          oldFileNameM   vc      #txtNewDocumentNameN   \*n      closeRenamingDialogO   %      renameDocumentP    *      oldNameQ   L      newNameR   (      validateFileNameS  W       renameDocumentAjax.json?newName=T  E      &d__documentId=U   $b      &documentType=V    >'      Document has been renamed successfully.W   Zx      Name already exist!X   }^      this file name is invalidY     ,<R      setFileTitleZ  61      str[   ('      ^[A-Za-z0-9\' '\-_]+$\     t(.      <h5 align="center" style="" class="box-title">]    7      openOrganizeFileDialog^          closeOrganizeFileDialog_   V `      getSelectedTargetFolder`   ^D      organizeFilea  x      sourceCategoryIdb        targetCategoryIdc  
      selectedDocumentJSONd  	      actione    i      documentTypef  |      Select action!g    Em      Select target folder!h     

      DocumentIdi    (      DocumentTypej  -      #documentIdk   _-      #documentTypel     .%      fileOrgization.json?sourceCategoryId=m     "      &targetCategoryId=n    w0      &action=o  Qfa
      &document=p    t)      getSelectedDocumentq   o      selectedDocumentJSONObjectr           getDocumentCategoryTreeTitles  TB      #divCategoryHeadert    ;d      setDocumentCategoryTreeTitleu  .      getDocumentWindowTitlev    =-r#      setDocumentWindowTitlew          setSelectedParentCategoryTypex     	      catTypey         setCategoryRetrievalPathz  "v      restrictNewCategory{   zw      disabled|  %      showMainMenu}  `X      href~  k;      home.htm?type=owner   IC
      AjaxUpload    Mz      txtFileAttachment     O      uploadAttachments.json    Cl      fileData  p~      onSubmit  =      file  {      div.preview   c      loading         <div class="label label-info file-upload-progress-Bar" style="min-width:100px;width:100px;text-align: left;background: #f2dede;margin: 5px;" align="center"><img src="    f      " style="width:22x;height:15px;margin:1px;"> <a style="color: #000000;font-weight: initial;" href="#">    C
      </a></div>    ax&      .file-upload-progress-Bar     q1      animate   k      80%   
7      duration        fileSize  >`      File type is not valid!   
      onComplete    Gq      paintDocumentUploadForm   #      dialogClass   A)K      #uploadDocument   Ft      #hdnDocumentCategory  K      paintDocumentUploadBar    U1      deletePlugginAttachment   xo      deletePlugginAttachment.json  %      getDocumentCategoryByParentId     7"      getCategoriesByParentCategory.json          categoryId=   o[      createChildCategoryTree   *0      refDocumentCategoryObj    ;      setSearchInCategory   _e      getEncodedDMSCategoryName     V.\      [^A-Za-z0-9]  $U%      removeAllTemporaryAttachmentList.json     SdS~      uploadDocument    kT      UploadDocument    ?;1      fileTypesArr        txt   d      bmp         jpeg  0g      HPTELIBRARY   ?      ALL   .k      WESCHOOL  m      ipynb     h      csv         twb   X      twbx  O      tds   /`XJ      tdsx  gFX      tde   /      tbm         tms   wKQ%      tps   jo      sav   DP      spo   PK      flv   {Qf      asf   ?      mov   X      mpg   :      mpeg        avi         m4v   T'      wmv         mp4         3gp   9Q      mp3   w_      wma   dQ      wav         uploadFileSize    N      GMR_SA    h>^      DOCUMENT_UPLOAD_50MB  u`      init  |_      divUploadingBar   w1S      caption   2B      Upload Document   \      onUpload  Zx      desc  JP      #txtUploadDescription     ^l      barcode   gX      #barcode  HU      #tagsFrUploadedDoc    S:      subjectName   ^Z      #subjectNameFrUploadedDoc     Z	      getDocument         showUploadedDocumentForDMS    Tw      uploadedDocList   `-      floor     P	      isCreator           <table class = 'table'>   2o      isTemporary   ]      gFileTypeIconMapping  ?>z      <td><img style = "cursor:pointer" title = "remove" src = "img/remove-icon.png" onclick = "deleteUploadedDMSDocument(this,'          ')" /></td>   O-*      " />&nbsp;&nbsp;&nbsp;&nbsp;<a href = "#">    fau      </a></td><td><img style = "cursor:pointer" title = "remove" src = "img/remove-icon.png" onclick = "deleteUploadedCV('     ,W      ')" />&nbsp;&nbsp;&nbsp;&nbsp<img src = "img/unsaved.png" title = "Unsaved"/></td></tr>   ,      #uploadedDocList  ^n      No document uploaded!!!   NZ      showAddDocumentFromDMSDialog  wP      targetDocumentId  $      getAllUserRootFolder   }#      instantiateCourseFileAttachmentTree   <!      ulDMSCourseFileAttachmentTree     <)      getAllCourseFileRelatedDocumentAttachment     ,.j#      showDocumentForCourseFileAttachment         .btnInsertFileToDocument  J#      insertAndShowSelectedFileToDocument   5Z      <input type="text" class="inputSearch" style="margin-left:10px" placeholder="Search Text">    Y(
      .divSearch    G      .inputSearch	  4
      tokenInput
    hqI      getSearchedUserDocument.json  r      theme     DvD      facebook  1s,
      tokenLimit    $      preventDuplicates     Na      propertyToSearch  ?8      documentName  :      placeholder   F>^7      Search in all folder  dM1      noResultsText     bI      No result found   uU      onAdd           item  %      documentArray     .H      documentJSON  k      []    {5      insertSelectedFilesToDocument      =jF      onDelete!  _      resultsFormatter"  }D      <li><img src='#    B<0b	      ' title='&     I      </div></div></li>'     A*U      tokenFormatter(    Y      <li><p><img src=')     x      ' />*  u	      </p></li>+     ]      <table cellpadding="0" class="table table-bordered documentFileTable" id="documentFileTable">,     z|      <thead>-   0      " class="">.   ?qs1      <th class="documentId" style="display:none"></th>/     f3      <th class="documentType" style="display:none"></th>0   2W1      <th class="categoryId" style="display:none"></th>1     wV      <th class="checkbox1"><input type="checkbox" class="document" title="Select All"></th>2     R      <th class="icon"></th>3    
?      <th class="fileName" style="text-align:left">Document Name</th>4   PfA      <th class="createdDate" style="text-align:left">Created Date</th>5     c      </thead><tbody>6   T      trourseFileAttachmentFile-7    F"J      createdDate8   {      " class="documentFileRow">9    ,      <td class="documentId" style="display:none">:  W .      <td class="documentType" style="display:none">;    
,      <td class="categoryId" style="display:none"><  =      folder=    RC      <td class="checkbox1"><input type="checkbox" class="document"></td>>   ,P      <td class="checkbox1"></td>?   0~      <td class="icon"><img src="@   V	      " /></td>A     Dk      <td class="fileName">B     I*](      <td class="fileName pointer" onclick="">C        <td class="createdDate">D        .divUserFileListE  C
      .documentFileTableF    8	      dataTableG     y&y      sDomH  5C      <'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid<'span6'i><'span6'p>>I   Y      iDisplayLengthJ          sWrapperK  9,v      dataTables_wrapper form-inlineL    t      .dataTables_lengthM    Oq	      .documentN     /      closestO   Q`      rowSelectedP   
Q      .documentFileRowQ  q	      .fileNameR           .documentTypeS     dy      .documentIdT   E*A      catU   :_z      getFilesForCourseFileAttachmentV   B*      getCategoryPathWithIdW     }z	      jsonArrayX     &Ktt      showCategoryPathY        getDocumentTableDataZ  v0	      pathArray[     O      int\   O-      <span class="documentCategoryId pointer" id="]     gR!      " onclick="getDocumentTableData('^           </span>_   59&       <i class="icon-play icon-white"></i> `    i      .searchPatha   x&      .documentCategoryIdb   S      getDocumentCategoryAjax.json?categoryPath=undefined&typeArray=undefined&parentType=c    M      &root=undefinedd   ?9{      .ulDMSCourseFileAttachmentTreee    Q!      <div class="preview-large"></div>f     C2q.      getAllCourseFileRelatedDocumentAttachment.jsong    e      treeIdh    oL      dndi   ;      onClickj         tr.documentFileRowk    O(d      chkObjl    p      .categoryIdn   %      insertSelectedFilesToDMSDocument.jsono     s	      documentIdsWithTypeAndNamep    V      jObjectq   H       <strong>r  r	      </strong>s     #      getAllUserDocumentByCategoryId.jsont         deleteUploadedDMSDocumentu     Z      thisObjv   V	      doumentIdw           removeUploadedDocumentByIdx    g      Deletion failedy   7%      showFileAndTextWindowz     JC      fileNameArray{     g      splice|    0      fileIdArray}   h
      refreshMap~    P
      #btnAddDoc    K?      #btnUploadDoc     gxY      #btnAddFolder     J      .lblIncludeDMS          Home  q      getDocumentByParentId     D>      fname     Nu      <td style="padding:10px;">    J      " canEdit="   )wz      " style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="DMS_content_item" data-name="    ]      "  data-fileCount="   P      ',undefined,undefined,    NS$      )">)"><img class="dmsFolder" title="  ;      " src="img/folder_emptyNew.png" ondragstart="return false">         <p class="text-center">   ^({      "  style="text-align:center; overflow: hidden;text-overflow: ellipsis;cursor:pointer;" class="DMS_content_item" data-name="   5      " src="img/folderNew.png" ondragstart="return false">     7>2      <span class="folderTagsCls" style="display:none;">    T(      )">)">    mX      <td><input type="checkbox" class="multiSelectDMSFileCls" data-file-type="folder" value="  '      "/></td>  sm      <td><img src="    aP      " class="dmsFolder" ondragstart="return false" style="width:25px;height:25px;">   (Y      </td><td>Folder</td>  z$'      <td title="Directory/File Count"> </td>   ;      <td title="Can Edit">-</td>         <td>-</td><td>    '      </tr></table>     cy	      mousemove     2      getFolderDetail   9r      getFolderDetail2        fileMapClickArray     hWs      boilerLocation    !< G      /<a onclick="showFileAndTextWindow();" style="cursor:pointer;">home</a>   \J6      /<a onclick="getFolderDetail(     <      ');" style="cursor:pointer;">     `//       --   ZR
      fileMapVal    Ep      Path  K"      backBtnLocationPath   z      LocationPathAndPathEditorToggle   SZK#      :visible  [      .searchHideShowCls    9      refreshUplodedFiles   :B      toggleSwitchDropdown   r      showDocumentViewer    ,@      KEY   =;      origin          /downloadWithPath.json?id=          &n=   @RB      &t=   Q      <iframe style="width:100%;height:550px;" src="https://docs.google.com/viewer?url=     M$      &embedded=true"/>     \"      configureUploadedFolderSharingView    /
      folderName    tj      docArray  ,D      No folder found..!!   K       warning   
S      #dmsFolderSharingBody     1e      #dmsFolderSharingDialogHeader     M#      Document sharing  n      #dms_startDate    JL
      datepicker    D~1
      dateFormat          M dd,yy   	6Y      changeMonth   R
      changeYear    v      minDate   hca      onSelect  8      #dms_endDate  |`      option    :      #dms_startTime    '
      timepicker    
      showPeriod          showLeadingZero   ]2      #dms_endTime        #dmsFolderSharingFooter   [      #dmsFolderSharingDialog   Hji      getAllSharedWithUserData.json     J:      documentIds   
B      <div style="max-height:400px;overflow:auto;"><table class="table table-bordered"><tr><th colspan="4">Shared with user list</th></tr>  UA      <tr><th>Sr.No.</th><th>Name</th><th>View/Write</th><th></th></tr>     W      <tr><td>  H	      </td><td>     GG      userName  Wx>      <td>Write</td>    +      <td>View</td>     %]CP      <td><span class="btn btn-danger btn-mini" onclick="remmoveSharedDocumentUserId('        thredId   g2      ')"><i class="fa fa-trash"></i> Remove</span></td>    F      </table></div>    VP      #sharingDetails   a=;      .token-input-remove-searchableById-facebook-folderSharingTo   m      gRoasterIdArray   &>vp      #folderSharingTo  1      populateAllforEmployeePost.json         resultsLimit  b*L      imageUrl  u#^%      ' style='height:25px; width:25px;' />     E      </div><div class='email'>     R      Desc  \]N      gBatchSemCapId          populateAllforStudentPost.json    ZG      #post-Folder-Sharing  0QT      postDocumentSharing   8D      alumniTextPost    g      alumUserIds   J|=      selfPostFlag  em      canView   %      input[name="readWriteChoice"]:checked     K      focus     L      addDocumentFolderSharing.json     Z]_	      startDate     7      endDate   I	      startTime     !N]      endTime   O      junoSpinner    /}      clear     >s      messgae   0\      Document shared successfully  ?$      getSharedDocumentCategory.json    K	      documents     A      gFolderFilesDocumentsObj  G"      folders         category  !@	      textFiles	           uploadedFiles
           loadMainMenu  wlL      #allMenu  oU      <div id="allMenu"><ul>    i,      <li onclick="addDocumentCategoryCheckPoint1()" id="btnAddFolder" ><a href="javascript:void(0);"><i class="fa fa-folder-o fa-lg"></i> New Folder...</a></li>   b      <li onclick="addTextDocumentCheckPoint()" id="btnAddDoc"  ><a href="javascript:void(0);"><i class="fa fa-file-o fa-lg"></i> New Document...</a></li>  s      <li onclick="uploadDocumentCheckPoint()" id="btnUploadDoc" ><a href="javascript:void(0);"><i class="fa fa-upload fa-lg"></i> Upload Document...</a></li>  >      #my-AllMenu         #allDataDiv   ^      allMenu   ;      hoverIntent   {VZ      folderViewChange        src   -G      fa-list   lAd	      List View     r	      Icon View     aN+      searchBarAndLocationToggle    U"      fadeIn    b{su      slow  L<g      .label .tagit     e}      display   U      inline-block  ,
      background           #fff!  qGU       .label .tagit input[type="text"]"  m!      Search your file(s) or folder(s).#     J}1      #fileMap, #fileMapLocation$    ZIS3      .searchHideShowCls, .label .tagit, #fileMapLocation%   }G!      .searchHideShowCls, .label .tagit(     
       .tableWithoutPadding)  :n	      bPaginate*     .      addDocumentCategoryAjaxToolBox+    w      #documentCategoryNameTbx,  LF      #documentDescriptionTbx-   D      #chkNewDocFlagTbx.     E      #chkPrevToAttachmentFlagTbx/   K      #txtDocumentTagsTbx0   P      addDocumentCategoryAjax.json1  	EE      clearToolBoxFields2    4)3      .minimize_msg_box3     (&      #hdnDocumentId, #hdnDocumentCategoryId4    ]}?      .recepientCss5     ;A      #chkPrevToAttachmentFlagTdx6   oP      No Attachments!7   Or_      #btnTextDocumentSave, #btnTextDocumentDelete, #btnTextDocumentReplicate, #btnTextDocumentCancel8   *      showAddEditTextDocumentForm239     8x;      #createDocRadioKrn:    {d      <h5 align="left" style="margin-top:5px;">New Text Document<button type="button" class="close badge" data-dismiss="modal">X Close</button></h5>;          createLightCKEditor<   xWK      uiColor=   |<      #FFFFFF>   F      20%?   3(      toolbar@   V
n      stylesA    #`      itemsB     Us      FontC  LN      FontSizeD  w      basicstylesE         BoldF  %      ItalicG     U>	      UnderlineH     	      paragraphI     g      NumberedListJ  JAX      BulletedListK  8+d      JustifyLeftL   J      JustifyCenterM     V       JustifyRightN  Lt|      JustifyBlockO  \      editingP         ScaytQ     F      toolsR     _      MaximizeS   n
      MultimediaT          ImageU           SmileyV    n      IframeW    )B      saveTextDocumentToolBoxX   `e      imageViewerModalY  A#	      clickHrefZ           imgFilesArr[   >	\      #imageViewrTag\    U,      #imageViewrTagDownload]    nF      <iframe style="width:100%;height:900px;" src="Viewer.js/index.html#../^    %yl0      &f=.pdf" allowfullscreen webkitallowfullscreen/>_  k      header`    F      Document Previewa  .      500pxb           documentPreviewc    P      junoDocumentOrImageViewerd     *KF      searchClickByTagNamee        tagNamef    "      gFolderWiseDataArrObjg     q      filter_valueh  6?      canEditParenti     2      folder_ViewIdj     u      #dynamicFolderDivId-k  l9.      .common_transaction_list_view_bind_cls:visiblel    R      divIdm     PBH      createDynamicBlockn    (      .dynamicFolderDivId-cls:visibleo   b&      sharedFolderTabFlgp    \      bindFoldersAndDocsq    S"      jMainOnjr  m      <div style="text-align: center;color: gray;margin-top: 50px;">
					<i class="fa fa-exclamation-triangle fa-4x"></i>
					<br>
					<b>This folder is empty</b>
				</div>s    Pv      folderEditAccesst  |      boolFolderCanEditu     '2      isFolderSharedv    :+aI      " 
					class="DMS_content_item dms_tile_view_property" 
					data-name="w     "      " 
					data-dirCount="x   C
      " 
					data-fileCount="y        " 
					isShared="z    D&      "
					canEdit="{  S?      "
					data-createdByEmp="|    H@      style="height: auto; float: left;text-align: left; display:none"}  Yf4      style="height: auto; float: left;text-align: left; "~        sssssssssssss     r.      ondblclick="getFolderFilesDocumentsByParentId(    f      ', undefined, undefined,  Bvs3      )">
					<div style="float: left;">
					<img src="   dR      " class="dmsFolder" ondragstart="return false" style="width: 40px;">
					</div>
					<div style="float: left;width: 79%;">
						<p class="text-center">     Vs+2      </b></span></p>
						<span class="folderTagsCls">    X2      </span>
					</div>
				</div>    8FW      <td style="width:200px;"><a href="javascript:void(0);"><i class="fa fa-circle"></i> <b>   V5      <td style="width:125px;" title="Created By Employee">     -_       <td style="width:100px;">           boolTextCanEdit   }      textEditAccess    )      isTextShared  U      " 
					class="tooltiplink DMS_content_item dms_tile_view_property" 
					data-name="     vWX      " 
					style="height: auto; float: left;text-align: left;" 
					ondblclick="showText('  ;      ','view')">
					<div style="float: left;">
					<img src="    u'      </p>
						<span class="folderTagsCls">         " ondblclick="showText('  (      ','view')">   8Do5      <td style="width:200px;"><img class="dmsFolder" src="     w/:      <td>Text</td><td>-</td>   eJ7W      ','view')"><a href="javascript:void(0);"><i class="fa fa-eye fa-lg"></i>  View</a></li>   Y      ','edit')"><a href="javascript:void(0);"><i class="fa fa-pencil fa-lg"></i> Edit</a></li>     
?-      <li onclick="deleteOwnerCreatedTextDpcument('     AFS      ')"><a href="javascript:void(0);"><i class="fa fa-trash fa-lg"></i> Delete</a></li>   51      <li onclick="showDocumentFolderProperties('text',            modifiedTime        boolUploadedCanEdit    0      uploadedEditAccess    AbD@      #fileDropdowMenuTopBar, #btnAddFolder, #btnAddDoc, #btnUploadDoc  D      isUploadedShared  f	      isShared3     Q6NC      canEdit3  5      fullNametemp  Tf      " 
					style="height: auto; float: left;text-align: left;" 
					ondblclick="imageViewerModal(this, '    %?c      ')"
					clickHref="  $8      "
					>
					<div style="float: left;">
					<img src="  P>      " style="cursor:pointer;" ondblclick="imageViewerModal(this, '    L      ')" clickHref = "     D6?      " ondragstart="return false" style="width:25px;height:25px;"/>    s      toUpperCase   %!      #Uploadmenu-  +,V      );"><a href="javascript:void(0);"><i class="fa fa-eye fa-lg"></i> Preview</a></li></a>    H      " target="_blank"><i class="fa fa-download fa-lg"></i> Download</a></li>  $      <li onclick="deleteDocumentFromDMS('  SL5      <li onclick="showDocumentFolderProperties('uploaded',     Tpy
      fileMapTxt    +!      tagSearch-shared        BOOLEAN_FILTER    Q5      getCategoriesUploadedAndTextFileByParentCategory.json     ;      fileMap   VE      search_flag   "      tagsArr   AQ
      tagsBoiler    ^v      ,     j:=      <a href="javascript:void(0);" onclick="searchClickByTagName('     Dz      ');"><i class="fa fa-tag"></i>          rg1   s      ^[^\\/:\*\?"<>\|&^!/{/}:;,`]+$          rg2         ^\.   :uhV      rg3   cn&      ^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)    x;      removeDocumentCategoryfg  ~%      editOrRenameUploadedDocumentNameOrTag     $a'      Something went wrong! Please try again!   4      tmpjArrUploadedDocument   s '      #gemsCommonDialogModal .modal-header h3   :      Edit Uploaded Document    	O"      #gemsCommonDialogModal .modal-body    \$      #gemsCommonDialogModal .modal-footer  M4      <input onclick="updateEditedTagsOrRename('uploaded',  (uU      )" class="btn btn-success btn-mini" value="Update" type="button"><input class="btn btn-inverse btn-mini" data-dismiss="modal" value="Close" type="button">    {75      #gemsCommonDialogModal    1      #textFileTagsInputEdit    /6      updateEditedTagsOrRename  4h      Are you sure? If you have shared some file(s) from folder then they will be removed from shared content!  L.      jObjUploadedDocument  0      renameDocNameTxt  ^      #textRenameFileInput  hK5/	      tagsNames           docFolderDesc     {      #prop-descriptionTxt  LI      Please enter valid file name!     Q	#      updateUploadDocumentNameOrTags.json         d__docId  |
      rnmDocName          showDocumentFolderProperties  p["	      shareType     5      docFile   aI      docDescription    )"       Properties   8?      jObjTextDocument  8P
      attachsLen    Y      attachs   S0      <input onclick="updateEditedTagsOrRename('text',  +&      jObjFolders   hL       File(s)  *2      <input onclick="updateEditedTagsOrRename('folder',    *W      <table class="table table-bordered"><tr><th colspan="3">Shared with user list</th></tr>   %8      <tr><th>Sr.No.</th><th>Name</th><th>View/Write</th></tr>  MM      #propertiesSharedWithMeTab    <S=[	      folderArr	     ,      uploadedArr
   y      txtArr    H]N      .multiSelectDMSFileCls    &      .multiSelectDMSFileCls:visible:checked    q      data-file-type    WDq      fIndx     wB      #downloadZipFileBtn, #shareMultipleFileBtn, #deleteMultipleFileBtn    4      uploads         texts     U      deleteOwnerCreatedFolder  %      Are you sure? Do you want to delete this folder? If you have shared some file(s) from folder then they will be removed from shared content!   7+      deleteAuthFolderUploadedFileDocFromDMS.json   	      docCatIds     kPl%      multipleFileUploadedFolderSharingView     {      allDocObjArr  bS      postDocumentSharingForMultiple    9      startDt   A      endDt     KGv*      multipleDeleteOwnerCreatedFolderFileAndDoc    >W!      Please select atleast one record!     n2      docIds     
      docPathIds    r      deleteOwnerCreatedTextDpcument     D      remmoveSharedDocumentUserId!   #v%C      Are you sure? This File Or Folder not visible to User after remove!"   $      removeSharedDocFOlderByUserData.json#  ,      getPublicCreatedByFolderEmpWithDocumentCount$  2_61      getPublicCreatedByFolderEmpWithDocumentCount.json%     
      GET&         jObj'  |-(      <tr><td class="gems_integer">(           f_name)          l_name*    Y      </td>
					<td>
						<a href="javascript:void(0)" onclick="createTree('AuthorWiseCats','+     BJ      ')">
						[ ,     %      docCount-  d"       ]
						</a>
					</td>
				</tr>.    mJ 4      <span class="btn btn-inverse btn-mini pull-right" onclick="$('#tdFileAndTextWindow').show();$('#subFolder').hide();">Back</span>
			<table class="table table-bordered">
			<thead><tr><th>Sr.No.</th><th>Author Name</th><th>Documents</th></tr></thead>
			/     hb5i      
			</table>0  q|Ru      initializeFilters1           a[href="display-filters"]2     }+n      filtersForm3   5      form#aspect_discovery_SimpleSearch_div_search-filters4     1 
      visibility5    ?Iq      visible6   v-      [name^="add-filter_"]7     bm      addFilterRow8  `jN      [name^=remove-filter_]9    +      removeFilterRow:   !X      input[name^=filter_][type=text];   B9      preventDefault<    U~      button=    Q~	      parentRow>     v=      parents?   #vi      tr:first@  #85      [id^="aspect_discovery_SimpleSearch_row_filter-new-"]A           table:firstB    z7      tr[id^="aspect_discovery_SimpleSearch_row_filter-new-"]C   E      input[type=text]", selectD     	7      [id^="aspect_discovery_SimpleSearch_row_used-filters-"]E   9      tr[id^="aspect_discovery_SimpleSearch_row_used-filters-"]F     >"      prevG  z      previousFilterRowH     M->4      tr#aspect_discovery_SimpleSearch_row_filter-controlsI        newFilterRowJ  4      cloneK     bA      rowIdentifierL     >      oldIndexM  6f      substrN    *6      newIndexO  C(5      input, selectP     K      $thisQ            input[type=text], selectR  (      insertAfterS   -
      applyBooleanFilterDMST     N#9      objU   r      <b>Name: </b>V     	      data-nameW           data-createdByEmpX     r5      </br><b>Created By: </b>Y  >c      data-dirCountZ     +      data-fileCount[    +5      <br/><b>Items: </b>Empty\  H      <br/><b>Items: </b>]   F
       Folder(s)^    Mi       Folder(s), _  +       .folderTagsCls`     U[      <br/><b>Tags: </b>a    &5      downloadZipUploadedFileb   B~(      downloadUploadedFileZip.json?categoryId=c  q      &folderName=d  Q      </td><td></td></tr>e   E5      " ondragstart="return false""><p class="text-center">f     )      "  class = "chkFileListIcon"  name = "chkFileListIcon"></td><td class="context-menu-one tooltiplink ui-state-default" id = "tdFileListIcon-text-g        ')"><image src = "h    tW|      </tr><tr id="trshowStudentSharei   -      "></div></td></tr><tr id="trshowEmployeeSharej     Cb.      "></div></td></tr><tr id="trshowPrivateCommentk    q"      "><td><img class="dmsFolder" src="l    u|O      ">x</button><table id="dpop" class = "smalltable"><tbody><tr><th>File:</th><td>m   &      </td></tr><tr><th>Created On:</th><td>n    xx$      </td></tr><tr><th>Category:</th><td>o  %n      </td></tr><tr><th>Type</th><td>p   Oz&      </td></tr><tr><th>Description</th><td>q    =      </td></tr></tbody></table>r    -z      ')"><i class="fa fa-times-circle fa-lg" style="color:#f00;margin-left:15px;float: right;margin-top: -15px;"></i></a></div>s    0#a      " style="width:22x;height:22px;margin:1px;"/> <span style="color: #000000;font-weight: initial;">t     .}      " align="center" class="label label-info" style="min-width:300px;text-align: left;background: #eaeaea;margin: 5px;"><a href="u     (gqO      " target="_blank"><i class="fa fa-download fa-lg pull-right"></i></a><img src="v   _k      " style="width:22x;height:22px;margin:1px;"/> <a style="color: #000000;font-weight: initial;" clickHref = "w   #      </a><a title="Remove" id = "delete-x   ey      )"><i class="fa fa-times-circle fa-lg" style="color:#f00;margin-left:15px;float: right;margin-top: -15px;"></i></a></div>y     Y     <form id = "uploadDocument" action="uploadDocument.json" method="POST" enctype="multipart/form-data">	<table align="Center" class="smalltable">	<input type="hidden" id="hdnDocumentCategory"  path="documentCategoryObj.documentCategoryId" />	<input type="hidden" id="hdnDocumentPath" path="documentPath" />	<tr>		<td colspan="2"><label>Description:</label>&nbsp;&nbsp;<textarea style="height:100px; width:80%" id="txtUploadDescription" name="description"></textarea></td>	</tr><tr>		<td><label>Barcode:</label>			<input type="text" name="barcode" id="barcode"/>			<input type="hidden" name="barcodeOld" id="barcodeOld"/>				<div class="login" style="float: left;margin-left:5px"><input type="button" class = "btn btn-inverse btn-mini  " value="Show" onclick="getBarcodeFromControl('barcode','barcodeImg')"/>				</div>				<div style="float: left; margin-left:20px; height: 30px; overflow:hidden;">				<span id="barcodeImg"></span>				</div>		</td>	</tr>	<tr>		<td><label>Browse File:</label><div class = "preview"></div>		<input type="file" id="txtUploadDocument"  name="fileData" /></td>	</tr>	<tr>		<td><label style = "color:red"><sup>*</sup>&nbsp;File size should be less than 10 MB</label></td>	</tr>	<tr>		<td>			<input type="button" class = "btn btn-inverse btn-mini  " value="Cancel" onclick = "try{showFiles(getSelected())} catch(e){}">		</td>	</tr></table></form>z     [}     <form id = "uploadDocument" action="uploadDocument.json" method="POST" enctype="multipart/form-data"><table class = "table"><tr><th><input type="hidden" id="hdnDocumentCategory"  name="documentCategoryObj.documentCategoryId" />		 <label>Browse file:</label></th><td><div class = "preview"></div><input type="file" id="txtUploadDocument"  name="fileData" /></td></tr></table></form>{           {"documentId":"|   Ti8      ","documentType":"}          ","fileName":"~     Xy      ","categoryId":"  Cv      "}    PT      '  /><div style='display: inline-block; padding-left: 10px;'><div class='full_name'>        "},   K      <div id="sharingDetails"></div><div style="width:100%;"><fieldset><legend><b>File/Folder Access</b></legend><input type="radio" id="viewChoice" name="readWriteChoice" checked="checked" value="read">&nbsp;<b>Read Access</b>&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" id="editChoice" name="readWriteChoice" value="write">&nbsp;<b>Read and write Access</b><table class="table table-condenced table-bordered"><tr><td style="width:100px;vertical-align: middle;">Start Date and Time :</td><td style="width: 150px;"><input type="text" id="dms_startDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_startTime" placeholder="Start Time" style="width:70px;" readonly></td><td style="width:100px;vertical-align: middle;">End Date and Time :</td><td style="width: 150px;"><input type="text" id="dms_endDate" style="width:70px;" readonly>&nbsp;&nbsp;<input type="text" id="dms_endTime" style="width:70px;" placeholder="End Time" readonly></td></tr></table></fieldset></div><fieldset><legend><b>Share with</b></legend><div style="width:100%;"><input id="folderSharingTo" style="width:400px; " placeholder="Share with..." type="text"/></div></fieldset>  Gs      <input type="button" id="post-Folder-Sharing" value="Post" class="btn btn-primary btn-mini" ><input type="button" class="btn btn-danger btn-mini" value="Close" data-dismiss="modal">     t      ' style='height:25px; width:25px;' /><div style='display: inline-block; padding-left: 10px;'><div class='full_name'>  x[A     <table class="table table-bordered tableWithoutPadding"><thead><tr><th></th><th style="width:200px">Name</th><th>Type</th><th>Size</th><th style="width:125px;">Created By</th><th>Edit Access</th><th>Share Status</th><th>Attachments</th><th style="width:100px;">Tags</th><th>Date Modified</th><th></th></tr></thead><tbody>     N~+       File</td><td title="Directory/File Count">   ,d1s      <table class="table table-bordered"><tr><th>Rename File</th><td><input type="text" id="textRenameFileInput" value="   l      "/></td></tr><th>Add tags</th><td><input type="text" id="textFileTagsInputEdit" value=""/></td></tr></table>  q}[     <div id="tabs" class="tabbable tabs"><ul class="nav nav-pills"><li class="active"><a href="#prop-tabs-1" data-toggle="tab">Basic</a></li><li><a href="#prop-tabs-4" data-toggle="tab">Shared With</a></li><li><a href="#prop-tabs-5" data-toggle="tab">Notes</a></li></ul><div class="tab-content"><div id="prop-tabs-1" class="tab-pane active"><img src="   u      " style="width:50px;height:50px;display:inline;"/><table style="display: inline-table;width: 80%;margin-left: 25px;"><tr><td>Name:</td><td><input type="text" id="textRenameFileInput" value="    Xa#      "/></td></tr><tr><td>Type:</td><td>   \|o+      </td></tr><tr><td>Size: <br/><br/></td><td>   o/       <br/><br/></td></tr><tr><td>Location:</td><td>   fI-      </td></tr><tr><td>Folder: <br/><br/></td><td>     -,       <br/><br/></td></tr><tr><td>Owner:</td><td>  9.      </td></tr><tr><td>Modified:<br/><br/></td><td>    r6u     <br/><br/></td></tr><tr><td>Tags:</td><td><input type="text" id="textFileTagsInputEdit" value=""/></td></tr></table></div><div id="prop-tabs-2" class="tab-pane"></div><div id="prop-tabs-3" class="tab-pane"></div><div id="prop-tabs-4" class="tab-pane"><div id="propertiesSharedWithMeTab"></div></div><div id="prop-tabs-5" class="tab-pane"><textarea id="prop-descriptionTxt">     r      </textarea></div></div></div>     P)      </td></tr><tr><td>Attachment(s):</td><td>     [l.      <br/><br/></td></tr><tr><td>Location:</td><td>    Y      fetchAllDocumnetsWithDMS/<    ?      doCreateTree/<    {      getUploadedFiles/complete/<   $,(      getTextFiles/complete/<   b      showTextDocumentIcons/<   w'c      showUploadedDocumentIcon/<    I0      showFiles/<         showAddEditTextDocumentForm/<     P      saveTextDocument/success/<    wS
      showText/<          deleteFiles/<     xn      deleteFiles/</<   ^P      showFileDetail/<  _.|      showSearchResultDocumentIcon/<    (      getSelectedDocument/<           initAttachmentBar/<   6       initAttachmentBar/</onComplete/<  KAm      refreshFolder/<   6.      initDocumentUploadForm/<  (X      initDocumentUploadForm/</<    [      showAddDocumentFromDMSDialog/<    jw$      showAddDocumentFromDMSDialog/onAdd/<   *K\%      showDocumentForCourseFileAttachment/<     *o'      showDocumentForCourseFileAttachment/</<         getDocumentTableData/<    =      showCategoryPath/<          showCategoryPath/</<  <T-      instantiateCourseFileAttachmentTree/onClick/<     V P%      insertAndShowSelectedFileToDocument/<     `.      deleteUploadedDMSDocument/<   5      getDocumentByParentId/success/<"   u$      configureUploadedFolderSharingView/<'  J      fetchAllSharedDocuments/<,     _?      dataTableListView/</   YS      showAddEditTextDocumentForm23/<3   to?!      saveTextDocumentToolBox/success/<5           imageViewerModal/<7    "6      getFolderFilesDocumentsByParentId/bindFoldersAndDocs/<@    .u@      updateEditedTagsOrRename/<D    n}.      showDocumentFolderProperties/<G    f      showZipDownloadButton/<H   ,hT      deleteOwnerCreatedFolder/<P    7'      multipleFileUploadedFolderSharingView/<U   Jqf       postDocumentSharingForMultiple/<V   ,      multipleDeleteOwnerCreatedFolderFileAndDoc/<Z  >i.       deleteOwnerCreatedTextDpcument/<^  5      remmoveSharedDocumentUserId/<e     6      getPublicCreatedByFolderEmpWithDocumentCount/success/<f    X      initializeFilters/<g   >EK      addFilterRow/<       p                %,                                                                                                                                                                                	                 	                 	                 	                                                                                                                                                                                       !                  "                  #                 $                 %                  &                  '                 (                 )                 *                 +                 ,                 -      #           .      #           /      #           0      #           1                 2      (           3      (           4      (           5      +                 (           6                  7      .           8      .           9      .           :      .           ;                  <                 =      4           >      4           ?      4           @      4           A                  B      9           C      9           D      ;           E      9           F      9           G                  H      ?           I      ?           J      A           K      ?           L      ?           M                  N                  O                  P                  Q                  R                  S                  T                  U                  V                  W                  X                  Y                  Z      Q           [      Q           \                  ]      T           ^      T           _                  `                  a      X                X           b      X                            c                  d                 e      ^           f      ^           g                 h      a           i      a           j      a           k      a           l      a           m      a                           n      h           o      h           p      h          q      k           r      h           s                 t      n           u                  v      p           w      p           x      p           y      p           z                  {                 |      v           }      w                 v           ~                        z                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              	               
                                                                                                                                                                                                                                                                                         !                                                $                %               %               %               %               %          !     %          "     %          #     %          $     $          %     $                           &                 '                 (     2                           )                 *                 +                 ,                -     8          .     8          /     8          0     8          1     8          2     8          3     8          4     8          5     8          6     8          7     8          8     8          9                 :     E          ;     E          <     E          =     E          >                 ?     J          @     J          A     J          B     J          C     J          D                 E                 F                 G                 H                 I                 J     U          K                L     W          M     W          N                 O                P     [          Q     [          R     [          S     [          T     [          U     [               [          V                 W                X     d          Y     d          Z     d         [     g          \     d          ]                ^     j          _                 `                 a                b     n      %   c     o                o               o               o          d     o          e     o          f     o          g     o               o               o               o          h     o          i     n          j     n          k     n          l     n          m     n                           n                 o                p               q               r               s               t                 u                               v               w                              x               y               z                {                                                                                                         |               }               ~                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       	                  
                                          Oc          [  ;  PX O ]   : | Pa < 3  P9   ;  @  P)  t  k  v  6  S  A 8  Pz   P/ Z    N y  Y    0  P   ;  8   =  P& 1  j  ^  5  PU I @ )      B  P d    z  :  P#   |   PN .    p Y      d i   ;      # ?  P J   u l 0  > `  7  P y    PK B   {  P *  P    <  P0  r  ; } f P]  4  P  a A  P 
 c   w '  P @ N  P7   Py PB 9  P    Pd    X 8  z Pc  | \   >  P' z  R    )  t  v _ 1 6  P x X  PA W 
 z  C  P P e     y  p             [  \  j  i  b  J  &              f  o  p  q  r                  	            o  r  q  p  |  }  ~                                                   [                               o  r  q                                               [                              [  \  j          i                  {           e                              e  Y                                                                  [  j  i  b  J  &           e                                                               [                                +              e  v  m  f              7 8 9   : PC F + H K L                                              [                               \ Pr  Pq  P                                            [  `                              \ b r  q  . P                                             [           e                               \                                              [                                + &              e  v  m  f  r PH                                             t &                               }                                                              [                               }                                                              [                               \                &   s  i                &                &                &               r               &               &               &                &                &               &  
   
                    i   {                                                           i        {                                                 H               } &           3                          3               }               @               } {  C P             [                               P. G I O ]                                                                                           e              @ Pj J  W r  r                                             [  X J  W P}                                              W P0 `                             W                                              [                                }              } . P` P             t          e                               }          e                                                              }              [                               W P P             t  P Pi `                              J  }                                                                                            P              [                                       i     ` {                                 }   9                  } &              e  v  m  f  }                              `  ` P            t                                P               J                 P            [      i                                     P P
 P. P                                             [                           e               . P                                             [           e                           e  
            [    
  i      	            [  \   i      ,                                           P< =              [                           e               \  P0               [           e                B                              D               H             u  J W              L  W                             P Q  W             [  }                              Z                              H                                               &              a b c d  e  i               [           e                 q P                                                              H                              H                              x              H                                                                  `  `  `                 `  `  `                               Pt P P  `  `  `                          e `             .               }                            W                          e               r . P             [               e           e              [  i  b  J  &               r                             &  P            [   i               &                               J              a  PG  P  P]                                            [               [              [  \    i                     P               [               [                                 e    r               [                                                 	         [   i      e r 7  P                               e a                  [               W             a                [               W             W Z  [  P              a                  [               r  q  . P                                             [                               . P                                             [                               g P            e  &                [               g P            e  &                [               P P               k  e    r                 [                . Pb              p                              r . P                                             [                               u Pv              p                             r  {    P  P            [  j          i    {      a           e           e           e           e              e  Y                                                                   e           e              r {                 r {  }                  i           e              }                                                     H               a  0 `  P                \                \                                                                [   i                                                                                                       0                                                                                  }  o  p    q  r  ~                                                               [                                                             }               }                                                  
            7 8 9   : PC F + H K              [                                               P. ]                                                                                           e                               B               @ Pj J  W r P                                             [  X J  W P}                                                PZ                              W                e              r P P}  Pg Ph Pi Pl P{ `o P  P  Pp P P~  P  `  `  `#             q P  `  ` P Pj `  P P P  P P P P  P{ `  Pi ` P  `  P  P Pt P  Ps P  P[  P P  P  P  P P Pu P P         e            e `          e `            e  Y                                                                e `          e `          e `                                                                             q              e            e `                P                               r PH                                             t &                              i         P          e               0 `i `            t  W               e                                                            0  i  W P P                 P                 e           e           e           e           e           e                              [   i                               }   P	 P
 P                                              e           e           e               i `            t  W                                                                                 \                \                                                                                            
   
                                                                                                                                                                                                                                                            t                                                             W P             t                                                            `             t                                                                                                            B   P             & i                                2                                                                < =               G I K L PN P              P                                                                 T              T               a                                                                                                                                                         &                                                  0        ~           [                               I$KE         `     
      J         `     
      J     
    b  `     
     J     
    b  `     
     J         J                   J               
                   !        `     
      J     
    b  `     
     J         J           
      . 0    
    1 2        J                   J               (    J  `  0                     e f 9      (      J  `  0                     e    
     . 0    
    1 2    #    J                  #   J                  #   J                           !              !          -    &         J                   S T U    (   J  `        0         #       J   r {  t      #   J                     J                   ,    -             J                   J                                 J                         !    
    . 0          2       J                   J  `    0       
              J              #     J                  #   J                     J    0              J            J            J    0                 
     h i        d {    `                                     r         J  `          W         J  `           
     b  `     
     J         J  0          r \                   
   2              ! '        G I J       J                   J                    h i        h i       J    0  `             o  b    #   J    `                J  `           
                    !    
    r {               !          -    &                              
          
         
        	   -    J    0  `                
     0              ! '            ! ' 
   2    J    0  `              
   2         0                     ~     #     J  `                    	    (         !             G I J )          J  `              (    7 8 F + H 9   K          < -  ?    
   {  A    
    {  A    
    {  A    
    {  A    
    {  A    
    {  A    (    J  `        0                J   r {  t        _    -     
                     !              !              !    (    J  `  0                     r  ~        #     J                     S T U       J  `      0               0           S T U       S T U       S T U       J    0  `         
    0                   J  `      0                                         
          
         
                   ! '            ! ' 	   -    J    0  `             
   2          0       	   -    J    0  `             
   2          0       	   -    J    0  `             
   2          0              J  `      0                    J  `      0                    J  `      0                    J    0                                       
          
           
           
           
                        
                       
              ,    -             ,    -             ,    -             1  1  2  2      l        D      E      F      G      H      I      J      K      L      M      r      r   	   Q          O      P      Q      R      S      T      U      V      W      	              	         -  &!!  x     M~x  r                ]                                          :          m   w     m   w     m   w     m   w     m   w    :                                                                                                                                                              :         :                                    :         :                                            Ee+e eHe;$`P4i`P4|`P4  `P4  `PD  eK  e e !e e' e e+e'e+e+e'e'e e e e@  e e+e e e`@ PeG eG Fe+eK eG #e@ ze  eG PT  >T                   A               s J      w        s J   9      <	   <
   <   s J   9      <   m   <   w        s J   9   <
   <   s J   9      <   m   <   w        s J   9   <
   <   s J   9      <   m   <   w        s J   9      <	   <
   <   s J   9      <   m   <   w        s J    m!   w "    #      w  `P P$`P
%%*&F"PJ	%*JPD`P
"E&FPJ	%*JPD`P
"E&FPJ	%*JPD#`P
(%*&F#%PJ'	%*J'PD.`P
PD8` P4:PX   X   #                                  s J   s  +&` P
P'QX   X   #                                  s J   s  +&` P
P'QX   X   #                                  s J   s  +&` P
P'QX   X   #                                  s J   s  +&` P
P'Q(  (                             J           J           J                        J         s J   s  s    4            s J   s  J   	   s          
    w     &` 	`@
`P
PP P
PP `OP   G   {                                 s J   9      <   <   <   s J	   9
      <   m   <   w        s J      m   w @`P
 %*&FPJ	%*JPD`P'P4PX   X   #                                  s J   s  +&` P
P'Q`   6gj`   )                                   &s J      s     `PPHPt   ^xt   ;                  	               s J   9   <   <    <   <   w  `P
%&((FP4Pt   _ht   ;                  	               s J   9   <   X<   X<   <   w  `P
%&((FP4Pt    rt   ;                  	               s J   9   <   <   <   <   w  `P
%%&((F!P4P  Gp                          J           w           "         KJ        	       KJ            p                &s J	   
   9   h   9       KJ   <       KJ   <   i    <   w i              &s J	   
   9   h   9       KJ   <       KJ   <   i    <   w .     .       KJ         KJ               &s J	        s        :             &s J	   
   9        A     J      B   B   <   h   9       KJ   <     <   i    <   w    K           &s J	   
   9        Q     J      R   R   <   h   9       KJ   <     <   i    <   w [     <   ]             &s J	        J   w 5   d           &s J	        J   w j     0(  l     W   n             &s J	      w           &s J	      w N   z           &s J	      w         &s J	      w     
`-`P$ `f ` `',`,`P'%% @ P> `P%% @P0 ` ` `P%P(`,`P'% % @ P>" `P% % @#PI+`,`P-	P `P$	PI`@3`,`PP$`PP `PP$`PP9:P             1  @  @           
       '          J                 J   w           s J   w      m   2w 	      	     
         
            J     w      A        J      w   J      w                    s J      s A   !     J         w   J         w    %             %                w @` `"
PD`1<F`P
P$`5B	PD`*`J` ` `P$`.` P$` 
P$` `PPM` P$` 
P>7 `*`O;`PPL   TL                                    s J      w  `PP$P  y	'           	       u                  (          &   &                          &   &          s J	   
   s K             s J      w        s J       w                 (          &   &                    s J      s                   s J   s     3   $             s J   s  &   &   *    8   ,      J          s J   s  s    4   6   5          s J   s         &   :          s J	   
   s W   ?                    J      w  J      w    G           G          s J       w   "   M       O   !   Q   -   R   "    !   w #    !   w    X      J$   9%   &     &'   & J(   s  &)   & J(   s  &*   & &+   &  &   &   &<,   -   <.   m/   <0   m1   <2   m3   <4   m5   <6   w u   @`*`.` O`%`J`.` O`PP-`PP$`P#P$`1WF`%`J`.` O`%`J"`&`PP-`K'`P
P ` [
P@*` [
PP `P
P(` O0`PP-`
P'`
P'`P$`
P `)`N9`P%P$` `P$`P `%;$ 
P

P$ #**JFJIJQJ>P9WP4   )rq4                                 w   `*P4   )rq4                                 w   `*Pt   t   3                                       w       w     w   `.`PD`P$`*P$   $                                   x   j                            J   9        &   & &   & &<      <	   m
   <   m   <   m   <   m   <   w  `%%
*)*J	JJJP4P4   )rq4                                 w   `*P4   )rq4                                 w   `*PX   a"#X                                  w       w  `P$`P$P$   $                                  H  
                ]     $   J      w        s J      w        s J      w   J	      
     w               s J      w          s                  &.                        KJ           s                     KJ         KJ       KJ   &  	      KJ       (       KJ   +      ,   	  ,       KJ      0       KJ      2   2   
      KJ      6       KJ      8      8         KJ      <       KJ      >      >        J         KJ   J	         F       KJ   -   H       KJ   J      s    &N         KJ      R      J     T             KJ!   1&"   &  1&#   &  1&$   &  1&%   &	  1&&   &
  1&'   &  1&(   &    KJ!   1&)   &*      s 1&+   &    KJ   1&,   &  1&-   &  1&.   &    &1&/   &0        KJ1   s 1&2   &&.    3       KJ!   &4   &  &5   &  &6   &  &7   &	  &8   &9   
  1&:   &  1&;   &    KJ!   1&)   &*      s 1&<   &    KJ   1&=   &&&.    >   &.    ?     &@   &&.    A     &B   &  &C   &&.    D     &E   &&.    F   
        G         H      &E   &&.    I   	        J         K      &E   &&.    L   &.    M   0        KJ1   s &N   &  &O   &&.      KJP   <          KJP   Q             KJP   R      ?         S       KJ!   &s JT   w      U   s JV   s  W           X       KJ!   &Y   &&.    Z       KJ!   &[   &  &\   &&.      KJ   9        ]       KJ!   &)   &  &^   &&.       _     &`   &&.    a     &b   &&.    c   &.       0(  [     d   &.    e   &.      f   s Jg   h   s Y             s J     w     i   s Jj   k   l   w m    w  J            s J     w     i   s Jj   k   n   w          s Jo   w      p   s JV   q   w     r   s J   s   w t    w      p   s Ju   mv   w     i   s Jw   mx   s Jy   mz   s J{   m|   w     }   s J{   m~   w     U   s JV   s  W   "  7         s J     w   ;      J	      >      KJP   <   B      KJP   Q      F      KJP   R   I  s   J             KJ!   &s J   9          KJ!   &<      <   <   x<   <   <   w [    0(  ]   ` P$`PP$`PP$
`-`P$`'`*`PP$`*`.` `@ `f/` aP ' ` `& `&` `K` ` ` `/`  FP ` `@&`	%@(,,,,,L/4 $P+@1L43	-#P@>`	' I+? $P+ ` `	Q `	2 `	0 `	% `	# ` `	P*@J` `P
1P$`P
P `	% `	A 1 ` `	6 &@S`	7 `	F `@`@Z` `@]`PP-`P
P$`P P$` `P
P$`P PIe`P
P$`PP$`PP$`*`P
PDt`P*PJ~P 
P `P
P `P
P `P
P 	 `f `@  `P
I% *&'&H  >PI  '`0  P  X     (             	                        	        D*                             J           J           J               Q             s J      s           w        	    w      ` 	` 
`PP/` `O	P  C                                  w       s J   s  J            s J   s  J            s J   9      >&<     -&<   w     	   s J
   w  F`P$`P
P-`P
P-`P
PD`P
P$P(   )(                               @   sO   B                                  s J      w        s J      w &`PP$`PP$PH   X>H                                    s J   w   `P
P$P  5VD                  7      $       s J      w   J                         KJ    j             s J      9   h   9	       KJ
   <       KJ   <   i    <   w          KJ         KJ            s J        s          s J      9        &     J      '   '   <   h   9       KJ
   <     <   i    <   w        s J        J   w    5        5     0(  P7    `PP$
`- `f/`',`P!%	% @P> ` ` `PP(`P!% 	% @P4!`P&	P @`0P                      ,          1     t   t   =                                 s J      w        s J      w  `PP$`PPPX   QX   )                              w         s J      w  `*`PPPx   T9x   >                  
           J   9      <      <   m   <	   m
   <   w @`%**JJP4P(   (                              @$   g$                                ,  b,                                  s J      w          I         J      9   	   <
   9   <   <   <   w O             s J      w        s J      w     w      `PP$`*`@` <%*%&KP> `P&P$`P
6P$`?Pt   ~t   @                          7             s J         w     w      `-`P &P$`?P  4    	             `              r             s J   s          s >   
          s J         w     	   w       &          
   s J   s                  s                  s             s            {   $          s J      s           s J      s          .           .      .      .          s J   s                 9   3          s J   s          s   9          s J   s           s J      s      J   9        &   & &   &  &    &  &!   &  &"   & &#   & &$   &  &%   &  &<&   '   <(   m)   <*   m+   <,   m-   <.   m/   <0   w @`,`P
P'`P/`P P$`P$`1`F`,`P
P,`,`P,`,`PL`PI`&`,`PP)`PP(` `)`0! `L)`P
P(`*`*`/`P
P(`PM0`P
P(`PP(`%%*
'% % 
% **J=J@J\J2P4`P4   )rq4                                 w   `*P4   )rq4                                 w   `*P  !                    %              s J      w   KJ                       KJ   w       J	   #      
       J	   w <                      w           w            s J      w        s J      w        s J      w  `PP$	`0@`
PI` `"
PN`/`P@`O`PP$`P P$`PP$P(   l(                               @   	hWT                                           J   9         &   &   &   &   &<      <	   m
   <   m   <   m   <   m   <   w  `%%%& *J	JJJP4P4   )rq4                                 w   `*P4   )rq4                                 w   `*P   :                             KJ      &            KJ   :w !            KJ   :w       J      s                 w  	` `P `PI` P(`	P$P(   l(                               @@  E^@     	                           J      s    J      s              J   9   	   <
   9     <           &s <    <    <   <      <      <   m   <   m   <   m   <   m   <   w @`"P'`*P'` `,%*%(-	P((M**JJJ+JP4/P4   3
4                                 w   `*P4   3
4                                 w   `*P  UD                   %      $  KJ      j           KJ   KJ                w           w       KJ	   :w !      
      KJ	   :w          KJ   w       KJ   KJ   w '   #                 w %    ` `@`"P$`"PD	`P `PI`
P!`	 P +`PJP                            <   FF<                                    w  `P$P   ?#                              J      s      J   9      <   9     <	   <
      <      <   m   <   m   <   m   <   m   <   w @`"P'`%*%M**JJJJP4P4   3
4                                 w   `*P4   3
4                                 w   `*P   w   l                           KJ      &            KJ   :w !            KJ   :w          KJ   w  ` `P `PI`
P$P(   )(                               @l  Kl                   "            s            w    $         J      w    	             &s J      s      J	     J
      s I         J      9      <   9   <   <   <   w               w "    `.`P$` ` P `PP(`
	P ` $%*%&KP> `P9P   .7                                               s       J   9         &   &   &<   	   <
   m   <   m   <   <   m   <   m   <   w    @`-`+`P(`%%**JJ&J$JP9)P4   A4                                 w   `*P4   A4                                 w   `*P,  `o,                                            s J      w        	 w     s              	       w +      
       s           w                 w     
` `PP$`IPD`.`N`P@`PH`P0 `PIP(   Nd(                               @,  ,                                          s J      w        s J      w        s J      w    J   9	   
      &<      <   m   <   m   <   <   m   <   m   <   w @`.`P P$`P P$`P P$`%3+*JJ&JJP4P`   L`   .                              w         s J         w  `*`P 	P$PP   P                                 w      m   w  `*`P$PT   tIT   $                                 s J         w  `P 	PPP   \P   #                                     w      w   `.`*`*P<   FF<                                    w  `P$P   Q   j                                    J   9        &<      <   m	   <
   m   <   <   m   <   m   <   w  `.`%3)*J	J&JJP4P`   L`   .                              w         s J         w  `*`P 	P$PP   7IP                                 w      m   w  `*`PDPT   tIT   $                                 s J         w  `P 	PPD   hD                                        w   `.`JP<   FF<                                    w  `P$P      e                            3                &s J      w ,               &s J      w     `,`PPN`PPP  g5                                   &s J      s                @   	             &s J         J   s   2                &s J      s      	              J
   9            KJ      &&.    0(      `PP(` `.`P0	P `PPM
`* `f `@	(`0P            M      3-k   u                                   &s J      s       <                &s J         J   s           `PP(`.`	P.	P3; `1Vh   h   .                                   &s J      s        `PPH`Q      V                                   &s J      s              &s J         J   w  `PP(`P,	PPl   wl   3                                  &   &s J      s J   w   `
P-P
PP   F   V                                   &s J      s              &s J         J   w  `PP(`P*	PPh   h   -                                   &s J        J   w  `P*PPh   h   -                                   &s J        J   w  `P,PP                                         &s J      s       <                &s J         J   w .                &s J      w     `PP(`.`P/	P `PP9P   1C                                      &s J      s       <                &s J         J   w .                &s J      w     `PP(`.`P-	P `PP9Pp   p   1                                  &s J        s       @`P(P(`Q  !fn  2      
                       s J      w                             &.               	   J
   "          	     KJ    Q      	     KJ   J   s                                  '            &.     &.     	     KJ   J
   (   !   	     KJ   J   s  6   &   	     KJ   J   s  J   s    &.           &.         	     KJ   &   &  &   &	     KJ   &   &  &   &  &   &&.         &.         &.          D         &.   E          	     KJ   &s J    w  !     !   	      "   	     KJ#   &s J$   %   s 	      "   	     KJ#   &s J$   &   s     '   	     KJ   &(   &	     KJ   &)   &&.      *   s J+   s  ,   E  n   	     KJ%   *   s   	  !      u     !   v   o   w   	  -      y     -   z   @   {   	     KJ%   -          	     KJ&   -              .   	     KJ   &/   &&.    0   	     KJ   &1   &&.    2   	     KJ   &3   &  &4   &&.       5   &.    6   	     KJ   &7   &	     KJ   &8   &	     KJ   &9   &  &:   &	     KJ   &   &&.  	     KJ;   M        <      &=   &	     KJ   &>   &   &?   &&.  &        <      &@   &&.         A   s JB   C   s 0        D   	     KJ   &E   &&.       F      &G   &   &H   &   &I   &   &J   &   &K   &   &L   &&.        0(     M   	     KJ   &   &  &N   &	     KJ   &O   &  &P   &	     KJ   J   s  &   &&.    Q   &.    R   	  -        S        T     &   &&.    U   	     KJ      &-        V        W     &   &&.       &.    0(        X   s JY   w      Z   s J[   \   s 6         ]   s J^     w _    w  '          X   s J`      w $      a   s J^     w   (    	   J
      ,      b   	     KJ   &s Jc   9d   e   	     KJ   &<f   g   <h   <i   x<j   <k   <l   w   0(  iA      m   s Jn   mo   w p    mq   w   J    	   J
     N      r   	     KJ   &s JB   s   t   w     r   	     KJ   &s JB   u   	     KJ   w     r   	     KJ   &s JB   v   	     KJw   w     r   	     KJ   &s JB   x   	     KJ   w     r   	     KJ   &s JB   y   	     KJz   w     r   	     KJ   &s JB   {   	     KJ|   w     }   	     KJ   &s JB   s   t   w     }   	     KJ   &s JB   u   	     KJ   w     }   	     KJ   &s JB   v   	     KJw   w     }   	     KJ   &s JB   x   	     KJ   w     }   	     KJ   &s JB   y   	     KJ   w     }   	     KJ   &s JB   {   	     KJ|   w   0(     `PPD`*`*`*`*`'` `, `f@`*`),` &P@`@`O` ` `@` DP *PP ` `	 4+ EK"!@$` ` ` `@*`
 P
/P$`*`*` P:P(` P:P(`	  ! `P
P ` `	, `	E `	C 7@9`@<`I?FC0F& +@K` `)&&@T`	@V`PP `	 @  ` & & & ` `	  4+ &J P ` `	& `	, `@
1`@  `P
P `PP `P
+P$` `P
P `P
P  `f ` P
D% *&'&H  6PD  1`@  `P
P `PD  `f ` PJ DP ` P*@ DP ` P*@ 	DP ` P*@ DP ` P*@ DP ` P*@ DP ` PJ CP ` P*@ CP ` P*@ CP ` P*@ CP ` P*@ CP ` P*@ CPD 1`0 P         o   7         a            5	    H   DH                                    s J   w   `P
P$PH   2nH                                    s J   w   `P

P$P  99  <                                                   &.             J   m           0(       '           &.    &.          KJ          	   
   J   J   J        KJ               KJ               KJ   #               KJ   s s 	   *                         KJ   &s J      s               KJ   &s J      s        KJ   J   s            K        KJ   	  	  J   l       s 	  	  J   l!       s 	       KJ   J      P        KJ   ,   S        KJ   J"   s #   &Y   
    $   &.    %        KJ   &&   &	  &'   &   &(   &
  &)   &&.    *   &.    +   &.    ,   &.    -        KJ   &.   &	  &/   &&.    0      &1   &
  &,   &&.    2   &.    3   &.    4     5      |   6      |       |   &,   &&.    7   &.    8   &.              8   &.       9        KJ   &:   &&.    ;   i        <   T        =   ?        >   *        ?           @      0        A        KJ   &B   &&.       C   	   &D   &&.      E   s JF   s  G   f          KJ   *                         o        5           5      @           KJ   5               KJ   5              H        KJ   &I   &
  &J   &     KJ   &K   &&.    L        KJ   &M   &
  &N   &&.    O        KJ   &P   &&.       0(       Q   &.      R   s JS   T   s Y          U   s JV     w     W   s JX   Y   Z   w [    w  J          \   s J]     w     W   s JX   Y   ^   w        _   s J`   w      \   s Ja   w      b   s J]     w           J            c        KJ   &s Jd   9e   f        KJ   &<g   h   <i   <j   x<k   <l   <m   w   0(  i      n   s Jo   mp   w q    mr   w           J   \  $      s        KJ   &s Jt   u   v   w     s        KJ   &s Jt   w        KJx   w     s        KJ   &s Jt   y        KJz   w     s        KJ   &s Jt   {        KJ   w     s        KJ   &s Jt   |        KJ}   w     s        KJ   &s Jt   ~        KJ   w     s        KJ   &s Jt           KJ   w             KJ   &s Jt   u   v   w             KJ   &s Jt   w        KJx   w             KJ   &s Jt   y        KJz   w             KJ   &s Jt   {        KJ   w             KJ   &s Jt   |        KJ}   w             KJ   &s Jt   ~        KJ   w             KJ   &s Jt           KJ   w   0(     `
`'`*`*`*`  `f@`@
` ` `@`,,` @( jP^PN`*`*` P>P(` P>PH` &P(`@` `
P(`
P(` mP ` `	   %@@"` ` `@&`	 a `	/S ` `@+`	& ` `@/` `@4`	& ` `	1@9`	@;`P
P ` `	B > `	A : `	3@5`@D`@G`PP-`P
P$`P P$` `P
P$`P PIO`P
PDQ`P
PDS`P
PDU `f ` P
K% *&'&HV=PDU5`@``P
PDc`PDj `f ` P KP$` PVP$` P`P$` PXP$` PZP$` P_P$` P`P$` P JP$` PUP$` P_P$` PWP$` PYP$` P^P$` P_PDj5`0{P         E                          q  H   DH                                    s J   w   `P
P$PH   2nH                                    s J   w   `P

P$P4  Q~4           
       /             J   J   &         &   J   J   J	     
      s &        s          <          (                       $           &   &             &   &            s J      s J     w        s J      s J   9      <      <       <!       <"   #   <$   w        s J   %   &   w  `
 `
 0P)`P(`*` `i@	`l@`PP
P$`PP
%****J0PD`P PP  dX                  3      $       s J      w        s J      w        s J   s             w         	   s J
   w            &s J      s           J   w     w      w     !        !      J         $       w  .   &            w          w ,          s J      m   w     w     3        3   @`PPD`PPD`P
P	,`O	`P
 P$`PP(`	P$`:!` @` ` `"P$`"PI`P#P4&!` 0+P  x                                         p        V	Z   _                                 s J      s <             s J   w         s J   w      `P P-`P
P$`P
PIP   }N1   P                 	                                  w              w 	   @`,`*` `P `P9	P(  GR(                              i             s J      w        s J      w     	   s J   
   w S             s J   s            s J      w        w    @` `PP$`PP$`PP `P
P(`PP$`P9P   O o             	                            s J   s          J   9         &   &  J	   s &<
      <   <   m   <   m   <   w    @`*`P
P(`'`%5+P)*&JJPD`Q   (R   R                           KJ               +        KJ                   ` ` ` `LP,   |*S,                               `!Qh  V&H    	      	       e      $            s J   s           )             s J   s                               	    w  
     1&   &         s J   w         s J     w        s J      w        s J   w         s J   9   <   
<      <   w        s J         w        s J         w        s J   m   w     Z   8          s J   w         s J    w         s J   m!   w E   "   J#   	  +      $   s J%     w     &   s J   '   w (    )   w *    w      +   s J,      m-   w     .   s J,      m/   w     0   s J,      m1   w   w     e        e   I`P
PH` P
P `J'`E.3@@`P
 PDC`P
!P$`PPDF`P
P$`P
%&'JGPDM`P P$`P,P$`P
$PDS`LV`P
P$`P
P$`P
!PI^` `P
/P$`P
P$`PDc`*`P)PDg`P(PDj`P'P4m!` 0rPh  X  2                     L   =dL                                        w &`P$PD   @D                                       w  `
P$P<   t<                                       ` P<   t<                                       ` P<   t<                                       ` P  _*  A  	             G                   s J      w                                 s     5   
          s           	   w     
   5          s                          >        J   J   J   s           s J   s                s J   s           s J   s       J   9      <   9     <     <     <     <      J   s  <      <      <!   <"   m#   <$   m%   <&   '   <(   )   <*   m+   <,   m-   <.   w    E       /   w G   I`PP$`&` `P `P/`P$`1qF` ` `@`K` ` "P(`P
PH`*`P
P(`P
PH `%*%))))P(*N+J.J1**JjJ P>n `P9qP4   )rq4                                 w   `*P4   )rq4                                 w   `*Pl  UDl                  9               KJ       J      s K     J      s K     KJ                   s J	   w  
      
               w        s J   w         s J   m   w        s J	   w         s J      w     w         w '   +          w       /         8   2             w             w 9    `*`/` P+` P*	` `P
PD`@`,`P$`P
P$`P
!PD`P
P$`P
PD`J`P>  `PD&`@+	` `L0`J2`J4`
PI6PD   D                                       w  `
P$P(   l(                               @8  X&8                                                                                           &s J      w        s J   w      	   s J   w  
       m   w @` ` `@`P P$`P
P$`P
PD`P4PT  h{JHT                                               k                   s J   w         s J   w         s J   	   w H                   s J
   w         s J
   w            w  ` `,`P
P$`P
P$`PP>	 `,`P
P$`P
PI`P$P   EQ   \                            J   9        &<   m   <   m   <	   
   <   <   m   <   m   <   w @`%2)JJ
*&J-JP41P4   3
4                                 w   `*P4   3
4                                 w   `*P  }  5                 6         J   %              J   J   J     KJ   w     	   s J
     KJ   w       KJ   w        s J
     KJ   J   s  w        s J
     KJ   J   s  w        s J
     KJ   w        s J
     KJ   w       KJ   w 6    ` `L` 
P$`P

PD`
P$`P
 PP$`P
 PPD`P

PD`P

PD`
PI P(   )(                               @   @   G                                               w              w     `*` `P `P9P   Ha   b   	                                  J   9        &<      <   <	   m
   <   m   <   w    )`+`%/)*&JJPD`Q   x   6                       $      w "                     !`	P +`OP                             (   )(                               @  ^{%                          $                        s J   w         s J   w        w       w                 A`
,`N	`P
P$`P
PD`P$`P 0P     	   w                 n   h   wbh   3                                 s J   w         s J   w   `P
P$`P
PPh   wbh   3                                 s J   w         s J   w   `P
P$`P
PP   6   ?                  
                &s J   9   <   X<   <   <   w @`P
%&((FP4	P   f   W                             s        J   9         &<      <   <	   m
   <   m   <   w  `.`%1**&JJP4P  V]l                                  s J     KJ   w        s J     KJ   w        s J     KJ   w        s J	   
   w        s J      w  `P

P$`P

P$`P

P$`PP$`PP$P(   )(                               @`   w`   ,                                           m   w @` 1P4,P  7                                                                        9   	      J     w    J     w (             s J   m   w       J   9   	      &
   &   &<      <   <   m   <   m   <   w     @`-` ` `'`	  `	P$`P `P
-PI`% +*&J#JPI(P   [   x                                s J      s             J      s KN         J      s KN   0(   &`PP(` P(` PG`-P   Qq   J                 
              w        s J      w     s            w  `PD`PPD`N
`
P$P(   Nd(                               @    
                O         +           ,                        
              &   &         &s J	   
   s &   &         &s J	      s &   &         &s J	      s &   &         &s J	      s &   &         &s J	      s &   & 0            &s J   m   w          &s J      w          &s J   9      <      <   <    <   s             &s J       w          &s J	   !      w @`,` `   O
PPFPPFPPFPPF"PPO+`
P
PD/`P	P$`P



P(`P	P$`
P!P45PD   cjD                                     w &`P$P|   ?|   <                               s J      s         s J      w  `PP'`PPPX   {7X   #                                  &s J      w  `PPP  m`@  L                /               s J   s  J   s            s J   s            s J      w     	   s J      w     
   s J      w        s J   w        o         J   9         &   &   &   &   &<      <   <   m   <   m   <   w    -          w /   @`P
P
P)`P
#P(`PP$`PP$`PPD	`P
PD` `,	%.&, *&J)JP>, `P9/P                                       KJ    (                J   w j   
          s J     KJ   w     	   s J   
      J   '&   &   &   &w     `N	`
,`%J"P> `P

PD`PJ%&
LPIP$   $                                8  h                  p            s J      w        s J      w        s J      w        s J   w            	   s J
   w         s J   w         s J      w        s J
   w         &   &  &   &&.                     &.     &        J   =  *             KJ          KJ    ~   2      J   J   J        KJ       ;        KJ      >        KJ   A        s   $   B           KJ   &  F            KJ   s        !      "   #   s s       '   Q      $   &.     &.  S        KJ%   &     X        KJ   J      ^        KJ   ,   a        KJ   J'   s (   &g        )   &.      *        KJ   &+   &     KJ   &,   &  &   &  &-   &  &.   &&.     /        KJ   &0   &     KJ   &1   &&.    2        KJ   &3   &&.    4        KJ   &5   &     KJ   &6   &     KJ   &7   &     KJ   &8   &  &9   &&.            KJ%   :             KJ;   	  <   	  K
       KJ   J              KJ   ,           KJ   J'   s (   &        =   &.      *        KJ   &+   &     KJ   &>   &
  &?   &  &   &  &-   &  &.   &&.     /        KJ   &@   &&.  	  A   i      	  B   T      	  C   ?      	  D   *      	  E         	  F      0        G        KJ   &H   &&.       I        KJ   &J   &  &K   &     KJ   &L   &&.    M     &N   &&.    O        KJ   &P   &     KJQ   &R   &  &S   &     KJ   &T   &  &U   &&.  
     V   &.      W   &.               X   &.       0(           s J     w        s JY      w        s J
   w           J      !      Z        KJ   &s J[   9\   ]        KJ   &<^   _   <`   <a   x<b   <c   <d   w   0(  i6    6    e   J     :       KJ%   &     ?      f        KJ   &s Jg   h   &   w     f        KJ   &s Jg   i        KJ   w     f        KJ   &s Jg   j        KJk   w     f        KJ   &s Jg   l        KJ   w     f        KJ   &s Jg   m        KJn   J   w     f        KJ   &s Jg   o        KJp   w     q        KJ   &s Jg   h   &   w     q        KJ   &s Jg   i        KJ   w     q        KJ   &s Jg   j        KJk   w     q        KJ   &s Jg   l        KJ   w     q        KJ   &s Jg   m        KJn   #          KJn   J             w     q        KJ   &s Jg   o        KJp   w          KJ%   :           r   e     KJ   &s Jg   h   :   w     r   e     KJ   &s Jg   i   e     KJQ   w     r   e     KJ   &s Jg   j   e     KJk   w     r   e     KJ   &s Jg   l   e     KJ   w     r   e     KJ   &s Jg   m   e     KJn   #     e     KJn   J             w     r   e     KJ   &s Jg   o   e     KJp   w     r   e     KJ   &s Jg   s   e     KJ   w     t   e     KJ   &s Jg   h   :   w     t   e     KJ   &s Jg   i   e     KJQ   w     t   e     KJ   &s Jg   j   e     KJk   w     t   e     KJ   &s Jg   l   e     KJ   w     t   e     KJ   &s Jg   m   e     KJn   #   N  e     KJn   J      R     R  w     t   e     KJ   &s Jg   o   e     KJp   w     t   e     KJ   &s Jg   s   e     KJ   w i    0(  k      u   s Jv   w   mx   w  `PP$`PP$`PP$`P

PD
`*`P
P$`P
P$`PP$`P
PD`$7)3M`*`'`*`@ `f@`*`@ `0,` @( j^P `%@'`P(`PPH*` ` `@0`@5` yP ` `	  gK:"@<`	  P `	E@A`)&0G&&& `@Q` `/` yP ` `	  MKX"@Z`	  ` `	1@_`	B > `	@e`)&0k&&&@s` ` ` `@9`@|`P
P$`P
P$`P

P  `f ` P
L% *&'&H  >PD  9`@   `f ` `&%@  PJ  4P `&%@  P @  4P `&%@  P%O  4P `&%@  P @  4P `&%@  P%@  P `&%@  P @  4P `&%@  PJ  4P `&%@  P @  4P `&%@  P%O  4P `&%@  P @  4P `&%@  P%	@  P `&%@  P @  4P ` `&%@  PJ  0P `&%@  P @  0P `&%@  P @  0P `&%@  P @  0P `&%@  P%	@  0P `&%@  P @  0P `&%@  P @  0P `&%@  PJ  0P `&%@  P @  0P `&%@  P @  0P `&%@  P @  0P `&%@  P%	@  0P `&%@  P @  0P `&%@  P @ 0PI  5`@ `P#P4 P8         ;  R                       '     ~   _                                 s J      s <             s J   w         s J   w     @`P P-`P
P$`P
PI
P   	9&   P                 
           s         s        s                  w     w   `.`.`.`

P$`PH  YdH           	       ;                           s J   s        J   J              s  \         J	   
      &   &9      <   9   <   <   <   <   w _          w      w      s          w              s J   w  *   ^   *             &s J      s         J   w        s J   w  7          s J    !   "   w  ` `1#F`P
 P(`%,` `	%*%&'LP>@`*`*`.`
P$`,`P
P0 `PP(`
	P$`P
PI!`P P4#P                                         w  a       A                w      s            w              @`O`@	`@`,`*`N`
P.`0P\   {c\   "                                         s  s w  `%VPPP  H}  p                ,                   J   l      s       J      s K             &   &s J	   
             &   &s J   s  w                              d         J   9         &   &   &<   <      <   m   <   m   <   w )   %             &s J   w  *          w ,    `
P)` P+`P'P
PP$`  ` `,
%%"+&*JJP>! `P
PI$`P9'P   
H^+                                `            &   &   &   &   &   &             &s J      w             w    @` `%&&+`P
P `PIP$   O$                                   [   a   	                             J   9      <   9    <    <   <	   
   <      <   m   <   w )`%*%(M**JP4P   e   l                              ]                &   &s J             &   &s J      s w        `@`P*PPCP>@P   ]]   Q   	                            J   9        &<   <      <   m	   <
   m   <   w )`,%2)&*J(JP4,PX  >H                  1        KJ      &      J      s                 J   '   	       K    J     J      s &s     J	   l
      s J   s         KJ   &   &  &         &   &    K&   &  &   &  &   &  &   &&.    0(  &       ,   (          s J     w -   ,             &s J     w 1   @` ` P(`*
 `f `.`+ PP(`
P*P(`%  *`)&&&&M5`@`,`P
PN `P
P)PX         =      (   )(                               @        $                   $                    J   9         &<   <      <   m	   <
   m   <   m   <   m   <   w                 !`%0+&*JJJJP@0P                      %   b   x   x   =                                 s J      w        s J      w  `PEPD`PP$PP   D&P                                    s J      w  `PPDP   k   O                  	              s J      s J   w                 w     w   `PP
P$`	P$`*P(   l(                               @   n|      	                   $        J   9      <   <      <   m	   <
   m   <   m   <   m   <   w                 !`%*&*JJJJP@0P         n              
   \   x   x   =                                 s J      w        s J      w  `PEPD`PP$PL   IL                                    s J      w  `PP$P   *x   7                       $      w     w                   ` P!` @P         %                    (   l(                               @  `!                  w              J   W              J            KJ   J   s        &   &  &      KJ        	     K               a     
   J   J   J             s s           &   &
   J   J   J             s    s &   &   &   &&.          s J   s     5   2           &   &  &   &&.   ;   7           &   &  &   &  &   &&.   >          &    &  &!   &  &"   &&.      E   
   J   J   J             s   s      #     &$   &   &%   &  &&   &
   J   J   J             s '   s &(   &&.           &)   &   &*   &  &+   &&.   e     0(  $g     ,   i       ,   s J-      w +   m       .    &s J-      w r   ,   r       .    &s J-   /   w w    `*` 	 `f ` P(`
J` ` `@` 0PP(`	$+ .PP$ `P
P `	p= `	pG@`	8
L0 ` .P(P(`)&&&	 .PP@)`	$  ,=@'`@0`,`P
PN3`P
P `P:7E6P99P         $       Nm                  E                   s J      w          J            KJ   J   s        KJ   J   s        KJ	   J   s    
        K
        &   &  &       #          &   &  &       &   &  &   &
   &   &  &   &  &   &  &   &  &   &  &   &  &   &    KJ    (   6          KJ   &   &   :      :   &   &               ?       ?      ?   &s J       w C     0(  #E    `*`P
P$ `f ` P(` P(` P(` `*` `2J`#++,E%, -K)U @` P
CPI&`0$P         -     T   T                                     &s J   w   `P
 PPT   T                                     &s J   w   `P
 PP        	                   $        J   9       &            &            &<      <	   
   <   m   <   m   <   w                 !`%<  **J
JP@0P                     
   }   d   8d   *                                   &s J   w      w   `P
P$`*P(   l(                               @   h      	                   $        J   9                  &            &<      <	   m
   <   w                 !`%)  *JP@	0P         w              
   e   D   XD                                     w  ` P$Pt   D6Nt   <                            J   J                  J      w     ` `.`P9PH   r:YH                                J   J   J   s   ` )PQ\   b\   )                                s J        &   &w  `P*%J!P4Pd   i-d   2                                s J      s J   s         `PP
P(`Q   $gP   T                 
                s J      s &      J      J      s &s      `P
P)` PP(`Q    -                 (              s J     w        s J       w  J   s                J	     J
      s s       J   s     -             s J      w &             s J     w            s J       w        s J      w @`P
P$`P)P$`
	P `  PP)`P `P
PN	`P
PI`P&PD`PPPL   L                                    s J      w  `PPP  h  L                ,              s J   s    J   s               w    
    J   s              w             s              s J   	   s           s J   
   s      J   9       &   &  &   &   &<      <   m   <   w #   (       w         w ,    `P
P'`
P ` `
P
.` `P-`PP(`PP(`,
%+$ **JP> `*`P9"P   d   q                          KJ      G          s            w        w     w            	   w     
` `.`
P$`CPD` `PIP$   ;$                               0l   Il   0                         l   J     s                 `P-`1; `1VL   gL                                    s J      w  `PPP\   #\   )                                s J        &   &w  `P
%3
PPL   @L                                    s J      w  `PPPL   @L                                    s J      w  `PPP   t<)   N                                s J      s                J             `PPH` `9; `1VH    I         
       J      $                                     w                	       
          w                 J   J                 J   J   t          J     KJ	      
    J     KJ   
     J         &
   &w   0(  y(   p   (             s J   s     
          s J   s  
     J         &
   &w :      J   9        &   & &   & &   &  &<      <      <   m   <   w    J        J   @`*`J`  `P$`12K` 0 `P$`12; ` ` 
 `f ` ` `PD?`0@` P
P)` 
P
P)`P9!`%0$ 
***J P@.02PH  (     7                            e   t   "t   :                           J                w           J   w  
` `O`P$Px   ]x   :                          9   h    <             s J   m   w     #`%@`P
-PD
`Q   H^   c                              J   J   9          s J      s <          s J      s <	   w &` )%PP(PPH'PDPX   mX   )                                 s J      s J   w   `PP
PP0   )0                                 `Q`   `   ,                                s J      s J     w  `PP
PPX   '!7X   )                                 s J      s J   w   `P P
PP`   '`   ,                                s J      s J     w  `P P
PP0   )0                                 `Q8   ;(
8                                        `P8   ;(
8                                     `P0   )0                                 `QT   8T   $                                 s J         w  `P &PP@   +@                                J      L    `Pl   hkl   4                               5          s J   m   w  `P*EP4=P   A   o                               5         9      <      <      J	   <
   9   <   m   <   m   <       `$%**/*J!ND:P  >  I               2             J    J   s  J   s     s    
          s J      w     	   s J
          K&   &  &   &w        s J   9      <   9   <   w    J   9          s J   s  <          s J   s  <      J   <   w    0        !   w 2   &`


P
P#	EP-`PPD`P*   J!PD
`P
&%*%H
'PD`%	P*
P(	P
P(	OPD`A; `P$`AVl  L     '                    $               5             &   &z ^        KJ               KJ            #             	   w       
    m   w                     `PN`A` ` 
`
P 
`5CP@@Pl  \                   i   a   4   8{4                                 w   `*
P   2   M                 
                      &s J      w        s J   w    w   `J`P
P$`P
P$`PP   6L=@P                                   s J     w  `P
PP   P   O                                       &s J      w        s J   w      w   `J`P
P$`P
P$`P   ';   i                       $   J   9      <   9     <   <   m	   <
   w '   
                 w    !`%*%MJP@
+`P:P         I                 @   $   $                                   )i   t   	                   $       J   9      <        &<      <	   m
   <   m   <   w                 9!`%*)*J
JP@0P         b              
   P   @   QI@                                  w  `	P$P(   (                              @  5b                  !                  J              KJ   J          KJ               &s J   	     s             &s J   
   9             J            <   h   9        KJ   <     <   i    <   w    0(   !   @ `f ` ` `P(P(`P*% 	% @PD&`0P              D   jD                               J     w  `PP   m   d                                            0        J   l      s                    `,`5
F` `

P(`4
; `5
V      b   	                              3                &s J      s              J   m   w )`,`	PPN`*EP4Pp  ]>~P                  4                &s J         J   s              J   L   
             &s J           KJ   w   0(     	      w 
       w           &s J         J   s              J   ~   "             &s J           KJ   w           &s J           KJ   w   0(  s4    `P/J.PH	 `f `P/N PD)`0 `P$`P$`P/J
*PH	 `f `P/N PD`P/N PD)`0 Pp         8   `                h   h   -                                   &s J        J   w  `P*PPh   Yh   4                             J   9      <      <   m   <	   w  `%**JP4P(   (                              @  E    	             6                   s J   s               h      i       i      i      i   	   i   
   i      i      i      i      i	      i
      i      i              	         
   #      h      i                      h)      i       i      i      i      i      i      i      i      i      i	      i
       i   !   i   "   i   #   i   $   i   %   i   &   i   '   i   (   i   )   i   *   i   +   i   ,   i   -   i   .   i   /   i   0   i      i      i      i      i   	   i    
   i!      i"      i#      i$      i%      i&      i'      i(        1   J2         3         1   J4            J5   96      <7   8   <9   :   <;     <<   m=   <>   m?   w    J@      mA   w     B   s J   C   w     D   s JE   F   w     G   s JH   I   w J   JK      	  +s       L   s JM     w )`P
P(`@`-` ` ` `@` ` `@`%	*	*	*	)J"EPD+`PD/`PP$`PP$`PPD3`
P(`P
/PP   [6                                J   9          s J   s  <          s J   s  <       	   s J   s  <
          s J   s  <      <   w  `%P
P(
P
P(P
P(P
P(J)PD`!Q      p                            J      m   w        s J   w         s J      w     	   s J
      w  	`PD	`P
P$	`PP$	`PP$PD   o9D                                     w  `	P$	PD   <1D                                     w  `	P$P  Y|                  N        J   `                    J            KJ   J   s        KJ         KJ              KJ             KJ            KJ          &      KJ	     
        K
                   &   &
   &   &   J   J   J              s   s &   &&.           &   &&.         &.   G   1           &   &
   &   &  &   &  &   &&.   ;     0(  5=         &.     ,   @          s J      w +   D            &s J      w I   ,   I            &s J   !   w N    ` `*	 `f ` P(` ` `@	`J` ` `.`)&&( .	P(P@`)	@` `)&&&@'`@%` `,`P
PN)`P
P `PP9-P         $       >  h  	             0                         J       m   w     m   w        s J	   
   
   w        s J   w         s J      m   w             s J     w        s J      9      <   <   <      <      <      <   m    <!   m"   <#   m$   <%   m&   <'   w     (   s J)   *   w )` `$PD`*PD
`P P$`P
P$`P+PD`*`P
P$`P:%%*&&***J?JAJMJPDU`P"PPX   ,XX   "                                w          w  `#P$`P$P@   4@                                  w  `$P$P@   /Z@                                    w  `$P$PH  H                                        J       J       J       J             &   &  &	   &  &
   &  &   &&.         &.                           "               m   w     `*`J`-`-`-`-`)+ %$+&M`@`I
` `&	$	%	E$PIPp   p   2                                   w        s J      w  
`#E PD
`P*U$	P$   $                                  |   L                          J            K       &   &  J   &   &  J   &   &@`-`/`%&F
/Q   I(J   L                          J            K       &   &  J   &   &  J   &   & `-`/`+//Q  G9         	          d                  &.           &   &&.         &.         &.         &.         &.      	   &.      
   &.         &.         &.         &.            J            KJ         KJ          &      KJ         KJ         KJ         KJ             K           &   &&.           &   &&.           &   &&.           &   &&.           /         &.      0         &.   1             &!   &&.        *   7      "     &   &&.   %   :      #     &   &&.   =      $     &   &&.         &.     0(  C      %   &.   &    '   s J(      w &    )   s J*   9+   ,   <-   <.   /   <0   w &    1   s J2   3   w &    )   s J4   5   s J6   7   m8   w 9          &    )   s J4   :   s J6   7   m;   w  `*` `	 ` ` ` ` ` ` ` ` `  `f ` ` `*` ` ` ` ` `	 `	;-`) `	;-` ` `@"`	* ` `	$ `)@*`	' `@&`@-` `P
P$`PJ1%*'J0PD7`PP$`PP%E8,PDH` `PP%EI,P4`P                                                    s J      s ;             s J      s J      w 6             s J      s J      w        	   s J
      s J      s -             s J      w -             s J         w     &	`PP-`PPP `PPPI	`PPE:P `PP `P PIP4  m4                                  s J      s J      s J   s           s J      s J      s J   s          <         J	     m
   w    J     m   w    F`PPP*P(`PPE4P*P(	`@`,EPD`%$EPIP@   @                                  w  	`$P$P@   pG@                                  w  `P$P   "G   A                                     J     m   w    J     m   w  ` `/#EPD`%#EP4
P@   4@                                  w  `$P$P@   @                                  w  `P$P$  >                  0                       J   5       J   '        s   	          KJ   &   &    KJ   &   &    KJ   &	   &     J
     w   0)        J      s           s J      w                  s J      s J      m   w        s J   w  #   ,          s J   w  0    ` `*` 	 
`f `%  +`PD3`@`+U(`P
P$` `PP%E0PD`P
P `P
P9P$         ?            A                                s J      s       J      m   w &`PP(`,EPDP@   @                                  w  	`$P$P      }   	                                        J   9       &   &<   	   <
   m   <   m   <   m   <   m   <   w )`,`,`,%%/*JJJJP4P   7F   L                  
               s J      w        s J      s J      w  `PE)PD`P#P*U$P`   ]y`   .                                 s J      s J      w  `P#P*U$P@   QI@                                  w  `	P$P$   $                                   "]n   [   	                             J   9      <      <   m   <	   m
   <   m   <   m   <   w )`%**J	JJJP4P   <a   L                  
               s J      w        s J      s J      w  `PP$`PPE1PDPd   0pd   .                                 s J      s J      w  `PPE1PDP@   @                                  w  `	P$P$   g$                                   &   D   	              
                      &s J   9   <   <   m   <   w )`P*%&&JP4P   A   V                                  &s J      s               J    J   m   w  `PP'` `/(EPDP@   i@                                  w  `$P$P   &   D   	              
                      &s J   9   <   <   m   <   w )`P*%&&JP4P   A   V                                  &s J      s               J    J   m   w  `PP'` `/(EPDP@   i@                                  w  `$P$P8  :F8     	                                            s J      s J   m   w    J	      J
   's          &.                              "                m   w    )`+`+`PP*E5PD`+P)`@`J` `P9P    =        	       *                s J      s           s J      s    	         s J      s J   s          s J      s J   s          s J   	   s J   s          s J   
   s J   s            &   &  &   &  &   &  &   &&.   *   &`PP(	`P	P-`PP
P(`PP
P(`PP
P(`PP
P(`
-%(+$ @Pp   _p   2                                   w        s J      w  `P$`P"P$P   rkf      	                                                           J   9      <      <	   
   <   9     <    <      <   <   m   <   m   <   w  ` `J`*`%***%((NJJP4P   {P6   T                  
         J   !            J   w (               J   &   &w 
    ` `	P `PIP(   )(                               @   h3   i   	                            J   9      <      <        &<	   m
   <   m   <   m   <   m   <   w )`%**)J
JJJP4P   <a   L                  
               s J      w        s J      s J      w  `PP$`PPE1PDPd   0pd   .                                 s J      s J      w  `PPE1PDP@   @                                  w  `	P$P$   g$                                P   6tP      	                               m   w )`
P4P   I:   _                           J      7             s J      s J   w     	          w     ` `P
P
P `PIP  )^                    N               s J   w         s J      w        s J      w        s J      w 	   	   
   
          s J   w         s J   w     J      J   w    J      J   w     w         s J      w        s J   w         s J   w         s J   w         s J   w     J       @          J   w D          s J      s    I       w     K        !   w N    `P
P$`PP$`PP$`PP$`,`,`P
P$`P
P$`
P$`
P$`J`PPD`P
P$`P
P$`P
P$`P
PD` `"
PD`1!F`PP-` `P9!P  _  &                l      $   J      w        s J   w         s J   w         s J	   w      
   s J	   w               s       J     s ;         J      w    J     w     w  $                 s J   w                       &s J      s             &s J      s             6         Z   8          s J	   w         s J	   w         s J	   w  U   D          s J   w         s J   w         s J   w  P   U   P          s J   w         s J   w         s J   w  \         w       w    J   9      <    !     &<"   #   <$   m%   <&   m'   <(   w    l        l    ` P$`P
P$`P
P$`P
PD`P
P$`N	`	PH`P `P$`P$`O`N`P

PD`+`+`P"P)`P"P)` ` `P
P$`P
P$`P
P> `P
P$`P
P$`P
P0% `P
P$`P
P$`P
P9*!`P$`P$`%*)*J  J-P@  P    )                  j   H  D  
                [     $  J                      s                       '           &.    &.  	       KJ           s                     KJ   J             KJ   *          KJ   J	   s 
   &         KJ             KJ                      &.      KJ   7  $            KJ   &   &   &   &   &   &  &   &    KJ   &   &    KJ   &   &    KJ   &   &    KJ   &   &      s &   &    KJ   &   &  &   &&.             s &    &&.  4   N               &    &&.  Q   -  Q            KJ   &   &   &   &   &   &  &"   &    KJ   &   &    KJ   &#   &    KJ   &   &    KJ   &   &      s &   &    KJ   &   &  &$   &&.             s &    &&.  4   {               &    &&.  ~     &   '        KJ(   s &)   &&.  *   J+   	      KJ         *   J,   	       -       KJ   &.   &  &   &   &   &   &   &  &   &    KJ   &   &      s &   &    KJ   &/   &&.    0     &1   &&.    2   	  &3   &  &4   &&.    5   &.    6     &7   &&.    8   &.    9            :         ;      &7   &&.    <   '        KJ(   s &7   &&.    =   &.    >   &.    ?   &.    7   &.              >   &.         KJ@   <          KJ@   A             KJ@   B              C   ,         D            D                     
  E   JF   
  w    C   ,         D            D            G    H       KJ   &s JI   w    J       KJ   &K   &&.    L       KJ   &M   &      s &N   &&.  H             L       KJ   &M   &  &N   &&.       P   &.       0(       Q   &.    R   &.  G    S   s JT   U   s O     G    V   s JW     w G    X   s JY   Z   [   w J     G    V   s JW     w G    X   s JY   Z   \   w   G    ]   s J^   w  G    V   s J_   w  G    `   s J^   w  G    X   s Ja   mb   s Jc   md   s Je   mf   w G    g   s Je   mh   w G    i   s Jj     w   7      J      :      KJ@   <   >      KJ@   A      B      KJ@   B   E  s   F  G    k       KJ   &s Jl   9m   n       KJ   &<o   p   <q   <r   x<s   <t   <u   w W    0(  Y  v    w   `-`'`*`*`. `fO	` ` `@` 
aP ' ` @P ` ` 	` `	& /    & 7 V &P
, 9!`	$P@+`	$0 `	& /    & 6 V &P
, 9!`	$P@!+`	$@%`	?P `/	` `@*`	' I, @ &P
, `	g `	` ` `	0 ` `	& `	P ` `@6` ` 	` `@<	` ` `P$
` `P
1PDD`	% 	`	A 1P@I+	`	A 1@M`@`@Q` `@T`PP-`P
P$`P P>X `P
P$`P PI]`P
P$`P
P$`P

PDa`P
 PJjPJlPDp`P
PDs`P
P$ `f 	`@{`P
I%	 	*	&	'	&	H{@PIt)`@  ` PH             !     '   %     '   O     ;                         `  )             )             =          <            	     H  kH                                 w    J      w    J     w       s J   s  J            s J   s  J         	   s J
   9      >&<     -&<   w        s J   w  &`P$` P$`PD`P
P-`P
P-`P
P$`P
P$P(   Nd(                               @   l   B                                  s J      w        s J      w &`PP$`PP$PH   H                                    s J   w   `P
P$P(   (                              @   G   d                           J     s       J         J   w    J         J   w        w  `P(`
P$`
PD`"P4PL   9nwL                                    w @`"P4P0  N                   P       $   J      w                 &.           K&&.     	        J   s          	     K&
   &         Ks &   &     K&   &&.             K&&.      J        &	     K&w       9   	     K<            Ks <   N       	     K&s J   9      	     K&<      <   <   x<   <   <   w -   C           J     w F     0(  }H           s J!     w     "   s J#      w @`P$`
`*` `	/ `f `	1 
P
: `	 `
P$`./
P:!`P
8% *&'&H*P@`PJ%`@`P
P$`P
P4"P0                     :  h          W       s	7  M                +              s J   s  J   s           J   'K   F         J      J   's           s J      w                   	      7             s J   	   w 
    w  i            K :   !             KJ         KJ     w    )             w +    `P
P
P(` `%P(`P
PI` `PP$` `
,`*$P `P9P                    k            w        s J      s <             s J   w         s J   w         	   s J
   s  J   s           J   'K   )         J      J   's          J      s     "      J      s %     &      J      J      s s        	   s J
      w          0         1   y   2       	   s J
      w        s J      s    <       w     >       w  @      @         K    D      J         KJ   s &     J        J   w    J        J   w           KJ         KJ   w ]   o   ]          s J      s 7   c       	   s J
      w     w     i       w  k    `P$`PP-`P
P$`P
PI`P
P
P(` `%PM` P #P `% PP(`P
P$` `PP$`PP/` `0 `
L`P*`
P$`
PD`*P0 `PP/`PP$` `?(P   H:vO                                    s J      s           w d            
      J      #          	   
   w              w     `PP-`P.` `"P `P9	PD  >'D                  3          J   J            &   J   J   J     	   
     s  s &              7            &  &   & &   & &   &     
      s      J     w           &   &         s J      s J     w        s J      s J   9      <      <      <       <!   "   <#   w        s J   $   %   w  ` `
 /P'P)`  `
+

@`P(`P$`*`] `PP
P$`PP
%****J0PD`P PP    D  	                                        $                      )                w       
      J     w                J                	    
   s J     w 	       s J      w 	       s J   9      <   <   <          <   m   <   w 	       s J   9      <   <   <          <   m   <   w 	       s J   9   <   <    w 	    !   s J   9"   <   <    w #     	    $   s J     w 	    %   s J&   '   s J(   9)   *   <+   m,   <-   w 	   J.   9/   0   <1   2   <3   4   <5   96      <5         &<7   <8   <9   m:   <;   m<   <=   m>   <?   m@   <A   w 	    B   s JC   w  D      j   D   J   m   k   n   	    E   s JF   G   9H   I   <J   
<K   L   <M   N   <O   mP   <Q   mR   <S   w    {   T      ~   T   J      f      	    E   s JF   U   9V   I   <J   
<K   L   <M   N   <O   mW   <Q   mX   <S   w    	    Y   s JZ   m[   w     ` `&` ` P$`@
`PI` `J`P
PD`P"PD!`P
%*&&
	P(J!PD+`P
%*&&
	P(J+PD4`P
%&F4PD9`P
%&F9PD=`J@`P
!PDB`PP
%*JB.PDJ`%****@Q&JUJXJmJJPDs`P
@P$` `PB%*'*J|JJvPN  ` `PA%*'*  J  PI  `P
P9  P\   q\   '                                s J           w  `P 0PDP$   Sn$                               X   QX   #                                  s J   s  +&` P
P'Q4   A4                                 w   `*P4   A4                                 w   `*P  
  i                &        J   Y                 &.            J                 &&   &    KJ   &   &&.       KJ             KJ   	               
   &.               &.                KJ   &   &&.         &.     0(  !         &.          s J      w &    	` `*`  `f `	 ` 	`@	`@`	\ `@$`@` `P
PIP         4      $   >$                                t   6=]t   C                              J   &   &  J   &   &  J   &   &  J   &   & `/Z)$  Qd   d   4                  	            J   &   &  J   &   &  J   &   & 	`6Qt   6=]t   C                              J   &   &  J   &   &  J   &   &  J   &   & `/Z)$  Qd   d   4                  	            J   &   &  J   &   &  J   &   & 	`6QH   ;H                                       w  `	P$P  u  /                I                               s J   s                       s J   s     %             s J   s      K             s J   s           s J   w                 )        J   9	   
   <      <      <   9     <      <     <     <    <        &<          s J   s  <          s J   s  <          s J   s  <          s J   s  <   <   <   <    m!   <"   m#   <$   m%   <&   m'   <(   w I    `*`*`&`&`&`P
*P `K
`P
P P
P `P
P(`P
P$` `K`.`%***				(.P
P(	P
P(P
P(	P
P-&&J&J-J2JP97P4   A4                                 w   `*P   8   ~                              w         s J      w        s J      w        s J   w      	   s J
      w  `*`PP$`PP$`P
P$`PP$Pp   %p   8                                s J   w      w            w  `P
@P$`*` P$P$   >$                                h  sCh                  I              s J   w      m   2w                     s J   	   w     
   s J   	   s                   s J      w        s J   	   s                          J         w   J         w 9           $        %   1   &   9          s J   s  <     ,      J   9      <     <      <   m   <    m!   <"   m#   <$   m%   <&   w    ;                 '   s J      w     (   s J      w     )   s J      w *             w I    `P
P$`5BPD`*`*`&`P PD`PP-`+`PP$`PPM` `@` P$` 
P$`*` `P
P@`%*)*J J#J3JP>7 `*`*`PP$`PP$`PP$`P9?PL   TL                                    s J      w  `PP$P4   )rq4                                 w   `*P4   )rq4                                 w   `*P   y   u                              KJ           KJ         9     KJ   <     KJ   <	     KJ   <
           w @`@`@`*//@`%PDP$   $                                  Md7  M                )               s J   w              &.         &.         &.         &.      	   &.       
   s J      w        s J   9      <      <   <   x<   <   d<   <   <   w             J       <   !          s J   w         s J   w  )    `P
PD`*` ` ` ` ` `P
PD`P
"%**&'&'&FPD` `P
P$`P
P9P8  Qb8                   3             s J      s N            s J      s J      s J      	   w I            s J      s J      s J      
   w           s J      s            w              s J   s     )   #          s J   s     (   C   )          s J      w     w       w    1       w 3    `PP-`PPP P `PPP PI`PP/`%P.`P
P P
P `PP$`*`P `P9P  yj  =                 &          $                                    s J      w        s J      s J      	   s J   
      w        s J         w        s J   w  _             s J   w         s J      w        s J      w &    `  `PP$`PP*Z*Z$`P %P$`P
P `P
8P$`PP$`PP9P\  \                                   s J      s             _             s J      w        s J   w      	   s J   w  A          
   s J   w         s J      w           s J      w  `PP  `PP$`P
P$`P
&P `P
8P$`PPI	`PP4P0   I0                                  `5QD   X	,D                                 m   dw  `5BP4P|   :|]|   @                  	               s J   9      <   <      <	   <
   w @`P
#%*'*FPDP      	      
       M              &             s J   s         &             s J   s                  s                  s             s                      	   s J   s  
             -              s J      s    $          s J      s          *           *      *      *          s J   s                 X   /          (   2         s         4           4          s J   s       J   9      <   9     <    <     <     <     <    <     <!     <"   <#   $   <%   <&   m'   <(   m)   <*   w @`,`P
P,`,`P
P,`,`P,`,`PL`PI`&`,`P
P ` `PPN`P!P(` `)`0  `L(`P
P(`*`*`/`*` `P(` `'`O5`P
P(`%*(()))((NA*&JUJ6P4YP   ilm                              KJ                        KJ   w          	          w           w         w  	    
   s J      w  `0 `
PI`/`P@`O`*`PPDP(   )(                               @  /@                                   s J      w        s J      w        s J      w     	   s J
      w        s J      w        s J   w   `P+P$`PP$`PP$`P  P$`PP$`P
dPPL  k,  %  	             I      $            s J      w        s J   w         s J   	      w     
   s J   	      w     
   s J   m   w     Z             s J   w         s J   w         s J   m   w $          s J      w    J   	  +          s J      w        s J      w     w         s J      m   w        s J      m    w     !   s J      m"   w   w     F        F   $    m%   w I`P PD`P
 PD`P P$`P,P$`P
$PD`L`P
P$`P
P$`P
!PI`PE!PD` `P
/P$`P
PD`*`P)PD#`P(PD&`P'P4)!` @.`50C.P41PL  <  #                     L   =dL                                        w &`P$PD   @D                                       w  `
P$P<   t<                                       ` P<   t<                                       ` P<   t<                                       ` PL   XL                                    s J      w  `PP$P  .'           	       '          J     K       #         J      w         J     9      <   	   <
   h   9      <   h      i       i      i   <   i    9      <   h      i       i      i      i   <   i   9      <   h      i       i      i      i      i      i      i   <   i   9       <   h   !   i       i   <   i   9"   #   <   h   $   i       i   <   i   9%   &   <   h   '   i    (   i   )   i      i   <   i   <*   w '    `@`
,` 	P>@
`
J%
 
 
 
 
 
@
P9P  M6           
       <               s J   s                                     s     
      5          s                                  J	   J
   J   s           s J   s                 s J   s       J   9      <   9     <     <     <      <      J   s  <      <   <   m   <   m   <       <!   "   <#   m$   <%   m&   <'   w    :   (    )   w <   @`P
P)`&` `PN` ` `@`K` ` "P(`P
P(`+`P
P(`%*%)))*P(O"J%J(**J_JP>c `P9fP4   )rq4                                 w   `*P4   )rq4                                 w   `*P  (                  =               KJ       J      s K     J      s K     KJ                   s J	   w  
      
               w        s J   w         s J   m   w        s J	   w         s J      w        w       w        w        w '   /          w       3         8   6             w             w =    `*`/` P+` P*	` `P
PD`@`,`P$`P
P$`P
!PD`P
P$`P
P$`P$`P$`P$`P> `PD$`@)	` `L.`J0`J2`
PI4PD   D                                       w  `
P$P(   l(                               @,  ?",                  *             s J      s    h      i       i      i      i        )         J    J	   s  s    }          
   s J      w        s J         w        s J      s J   m   w       b            1&   &     J   9      <     <      <      <   w #   '      J       w *    `PP)` ` "
	PP `PP$`PP$`PP
PN
`+`I `%*)*JP>@`P9P@   d6!@                                J      L    ` P   V   C                           J   J   J           s       J       w  ` /P(`PP   F   I                              :             w        s J        w     `@`P$`P#P9P  #M    B                    $                           5      J      w    J      w    J      w    J      w        s J   w         s J   w                  &s J	                &             
   s J	   a          
   s J   s  J      s                 &   s &   q   )          s J	   R   .          s J      s                 &   s &   6          s J      w        s J   w                  B          s  	     J      s >   I      J    	  w    J      w     w  Q            S          s J   w         s J      w        s J    !   s  
               a   "      K d   O   e   "      KJ#       j   "      KJ#   n      o      o   m$      %   $   s          u      v      w       %   w   y           "   {      J   &   s ~   3                '   s J(      w            ,         )            *      (          +   s J(   s            (         ,                                  J-   9.   /   <0   91      <2      <3      <4      <5      <6   <7   8   <9   :   <;   m<   <=   m>   <?   m@   <A   mB   <C   w           D          `P$`P$`P$`P$`P
P$`P
PD`+`P `' `P@`P
3P	P)`P `P `P$P)`PO`PP$`P
P$`@`,`	PI`P `P$`P$`O `@"`P

P$`PP$`PPI&`'`'` 0 ` 0 `<-A1`K ` ' `P `'` P `+`P
P `'` `P
P ` 4 ` `%*



/****J 	J P@ P    D                  &  1  s<O0  ,'               
     $           5      J            J            J            J         h    	         J                         s        J   .         J            J               	   &.                  J   M	     
         KJ         KN      KJ            KJ             s       '          '      J         +      %   +      J      s    &/            KJ      3         KJ      5      5            KJ            KJ         KJ   &         KJ      @         KJ      B      B            KJ      F         KJ      H      H                   KJ      -   M             KJ   z      Q   Q         $   T         W      X      Y         Y    #     ]   \         KJ         a         KJ   d      e    #  e      e    #  e      J             KJ!      k      J"      m      #         KJ   1&$   &   1&%   &   1&&   &   1&'   &   1&(   &   1&)   &   1&*   &&.      :         (      +    ,   s J-   .   s    !         /   &.            0   &.      1   J2         K3   w    4         KJ   1&5   &6       s 1&7   &      KJ   1&8   &   1&9   &   1&:   &      &1&;   &<          KJ=   s 1&>   &&.      ?         KJ   &@   &   &A   & #  &B   &   &C   &   &D   &      KJ   &5   &6       s &E   &      KJ   &F   &&.      G   &.      H      &I   &&.      J      &K   &   &L   &&.      M      &N   &&.      O      &N   &&.      P    #        Q               &N   &&.      R   &.      S   <          KJ=   s &N   &&.      T       &N   &&.      G   &.      U   &.   +    V         KJ   &s JW   w        KJX   B            KJX   Y   !            KJX   Z              [         KJ   &\   &&.   +    ]   s J^   s  _           /                   KJ     J        `         KJ   &a   &      KJ   &b   &&.        (        c      &d   &&.           KJ   J        e         KJ   &5   &      KJ   &f   &&.   '     g      &h   &&.      i   &.   +     0(   -     -        J     1        KJ            KJ=      9        KJ=      <  j       >           KJ      C        KJ      F     F           KJ      K        KJ      N     N            KJ      -   T            KJ   z '     Y  Y   $           $   \        _   $  `     a        a        KJ             s       f   k      f     J         j     %   j     J      s    &n                 KJl      +   t        KJl   Jm   s  n   z     {  o         {  o      {   "     ]   ~        KJ                 KJ           "          "       p         KJq   1&r   &   1&s   &      KJq   1&t   &   1&9   &   1&u   &<          KJ=   s 1&>   &&.      v         KJq   &w   &   &x   &      KJq   &y   &      KJq   &z   &&.      G   &.      {      &|   &      KJ   J}   s  &N   &&.      ~   &.      M      &N   &&.      O      &N   &&.          "       Q             &N   &&.               KJl                 KJl             &N   &&.      S   <          KJ=   s &N   &&.      T       &N   &&.      G   &.      U   &.   +             KJq   &s JW   w              KJq   &   &      KJq   &   &&.   +    ]   s J^   s  _           $              $                     KJq   &   &&.               KJq   &   &   &b   &&.      3                 KJq   &   &&.              &h   &&.      i   &.      0(   o                     J   O
  $        KJ      )        KJ      ,     ,           KJ      1        KJ      4     4            KJ      -   :            KJ   z z     ?  ?   	           $   B        E   	  F     G        G     !   I        KJ      M  (   N  +       s J   w  #   R  +       s J   w  V        KJ         \     J   J   J         KJ         f        KJ      i        KJ   l           KJ   s    p        ]   s        KJ         y        KJ   }     ~     ~     ~     ~        KJ      !           KJ                       +             KJ   &s J-      s          KJ   Jm   s   
      
  K         KJ    !       !  s  !                      KJ         J   l      s       J   l      s     !  J         !  "      !  J   s    &                 KJ   1&r   &   1&   & 
  1&   &   1&   &   1&9   &   1&u   &<          KJ=   s 1&>   &&.      !           KJ        (     +       s J   w  #     +       s J   w                KJ   &   &   &   & 
  &   &   &   &&.      G   &.      {      &   & !  &N   &&.      T         KJ      )           KJ   J   s            &   &      KJ                 KJ             &N   &&.      M      &N   &&.      O      &N   &&.      P           Q             &N   &&.      R   &.      S   <          KJ=   s &N   &&.      T       &N   &&.      G   &.      U   &.   +             KJ   &s JW   w              KJ   &\   &&.    
     n   $   
     X   &   
     B   (   
     ,   *   
        ,   
     -  3   .              KJ   &   &&.   4           &   &&.   +    ]   s J^   s  _      =     /   @        C        KJ   G  ?   H     `         KJ   &   &   &b   &&.   P     r   R              KJ         X        KJ      [        KJ   ^  &   &&.   a           &h   &&.      i   &.      0(   g        &.   +       s J      s Z   m  +       s J      w +       s J         w     w  K   x  +       s J      w +       s J         w   +       s J   w  +       s J   w  +       s J   w  +       s J   m   s J   m   s J   m   w +       s J   m   w +       s J      w            J        +             KJ   &s J   9            KJ   &<      <   <   x<   <   <   w                  0(   E             J       +             KJq   &s J   9            KJq   &<      <   <   x<   <   <   w               +             KJq   &s J         w +             KJq   &s J            KJq   w +             KJq   &s J            KJ   w +             KJq   &s J            KJ   w +             KJq   &s J            KJ   w +             KJq   &s J            KJ   w +             KJq   &s J         w +             KJq   &s J            KJq   w +             KJq   &s J            KJ   w +             KJq   &s J            KJ   w +             KJq   &s J            KJ   w +             KJq   &s J            KJ   w    0(   gO     O        J     S  +             KJ   &s J   9            KJ   &<      <   <   x<   <   <   w .   f         1   J2      w i  +             KJ   &s J         w +             KJ   &s J            KJq   w +             KJ   &s J            KJ   w +             KJ   &s J            KJ   w +             KJ   &s J            KJ   w +             KJ   &s J            KJ   w +             KJ   &s J            KJ   w +             KJ   &s J         w +             KJ   &s J            KJq   w +             KJ   &s J            KJ   w +             KJ   &s J            KJ   w +             KJ   &s J            KJ   w +             KJ   &s J            KJ   w +             KJ   &s J            KJ   w    0(     +       s J   m   w     m   w     w   ` ` ` ` `(`+`+`O
` `@
 `f ` ` ` 
aP ' `
 4P ` ` ` & ` ` `+`   P ` `@"`'` 	`  `0' `L,` ` `@1`
%@3----- ` PP ` `@>` P$`
: $P+@AMD 3	.% P@Q`
' I, @ &P
, ` `
f `
2 `
E `
% `
# ` `
( P `
 ` `@_` P
1P$` `
% 	`P
P 
` `
A 2@g	`/`
7 	` `
6 '@l`
F `@(`@r
 `f@t` ` @P.` `@y` !  P `+` `@~` 
aP ' `
 4P `+	` ) 3P ` ` `'` 	` # ` `L  `
     -% P@  `
  4, A ` `
DJ P ` `
E `
% `
& `
, ' `
( P `
 ` ` `
 P
/P$`
  # `P
P 	` `
, `
C 7 
`/`
@ `
D `@r3`@  `+
 `f ` ` ` %  P `+` ` ` `P
EP `P
EP 	` , ` ? ( i `P `'` 	` ' ` ` ` ' ` P=P ` &P)` ` 
a"P + ` `
P)`
P)` 1P `
  ,-   -% P ` `P
EP `P
EPI `
 aG ` `
DK `
 ' 0P + " `
E `
% `
# ` `
( P `
 ` ` ` P
=P$`
& ` `
1 `
 `P
P@ .
` `
A : 
`/`
6 ( `
H `@  7`@ 8` `PP-`P
P$`P P$` `P
P$`P P `P
P$`P
P$`P

P `P
 PJ NP P `P
PD Y`P
P$
 `f!` P
I% *&'&H ^?P@ f@ Z(`@ j
 `f!` P
D% *&'&H m:P@ u ` PJ wFP ` P*@ yFP ` P*@ {FP ` P*@ }FP ` P*@ FP ` P*@ FP ` PJ EP ` P*@ EP ` P*@ EP ` P*@ EP ` P*@ EP ` P*@ EPD j3`@ 
 `f!` P
K% *&'&H ?P@ `P*` P KP$` PV P$` P` P$` PX P$` PZ P$` P_ P$` P` P$` P JP$` PU P$` P_ P$` PW P$` PY P$` P^ P$` P_ PD 7`@ `P
P `PD ` P1   1          k           .                        `#                         $  c	          c            
                        @  e
          i  t          H             5  t                      "  t          "  1    E                                 w       s J   s  J            s J   s  J            s J   9      >&<     -&<   w     	   s J
   w  &`PD`P
P-`P
P-`P
P$`P
P$P(   l(                               @   O-^+   B                                  s J      w        s J      w &`PP$`PP$PH   EH                                    s J   w   `P
P$PH   m#H                                    s J   w   `P
P$PH   |DH                                    s J   w   `P

P$P4   S\Fg4                                 w   `
P4   p$4                                 w   `
P    {k   f                                       w    J        w   J   #   	          s J   w      `.`P$`P$	`@`P
EPIP(   @(                              @,  k(            	                                                  ^   _`x                                    &     KJ   &   &     KJ   &   &&.     a   ` P-`*` $` ] /@L`Q,        B         Rp   p                 
       l      l     l        J     s :        J     s         J     s 
    
`*
`*
`*`P
P
PQ   5/P                                         s       J   9         &   &   &<   	   <
   m   <   m   <   <   m   <   m   <   w  `+`P(`%%**J
J&J"JP4&P4   A4                                 w   `*P4   A4                                 w   `*P,  `o,                                            s J      w        	 w     s              	       w +      
       s           w                 w     
` `PP$`IPD`.`N`P@`PH`P0 `PIP(   Nd(                               @  G                  <      $                w        J           KJ           s                      &	   &  
       s J      w 
       s J     w 
       s J        &   &w 
       s J      w 
       s J   w  
       s J   9   <   
<      <   w      KJ      0        KJ      2          4            ^5   _`@   6     
       s J           KJ!   w <   a@` `P$`1&F `O` aP '@`E>@`P,P$`P
,P$`P
.9
PD`PPD`P
P$`P
!%&'J!PD` LP-`*` $`P.PD!<&P       h              I              H   `   u`   ,                                           m   w  `   |P47P   Fd                   Q      $                  ~         J             	      
         K            J      K         J                 _         J	      K      J
             J
            J        Z         J      K      J              J      !      J   "     "      J          s J   s  s          s J   s           s J   s            3         s 6      7          w  9      J           s      <        <      J   9      <   9      <!          D       D     D   <"     <#      <$     <%   <&   m'   <(   m)   <*   +   <$   m,   <-   w Q    `-`F`&` ` + ` `@` ` ` `	( ` `	,@`[
PP(`P
P(`P
PH` P `P$`A5F`.	aP '@`%*%) )*N'J*J-*JPI5P        G             (     4   A4                                 w   `*P4   A4                                 w   `*Pt   +t   6                                s J      w       w     w   `PP$`P$`*P  5!  %                s     $                            J    K      J         J           s      	        	      J
   J   s         K     J            s J   s      J     J      s   J   s                    J            J                    J            J                      J      #      J      $      $          &   &  &   &  J   s  &   &  &   &       s J   s  &    &  &!   &  &"   &  &#   &  &$   &	      %   s J&     '   &w     (   s J)   	  w     *   s J   s  +   *   K       ,   s J-   .   s P   2   Q       /   s J)   0    &1   &w W       2   s J3   w      2   s J3   94   <5   
<6   7   <8   w    J9      g      J9      h   :       j   
       
  ^k   _`@   l         2   s J3   ;   
    KJ<   w r   a    =   s J>   ?   w   v     &   L  x            J@    K    JA        J           s                 C          K    J            s J   s      J     J      s   J   s                   J           J                   JE           JE                   J           J                   JF            JF   J                   &   &  &   &  J   s  &G   &  &   &  &H   &       s J   s  &    &  &!   &  &"   &  &#   &  &$   &	      %   s J&     '   &w     (   s J)   	  w     *   s J   s  +   *          ,   s J-   .   s    2          /   s J)   I    &1   &w        2   s J3   w      2   s J3   9J   <5   
<6   7   <8   w   J9           J9         :          
       
  ^   _`@            2   s J3   ;   
    KJ<   w    a    =   s J>   ?   w      K        L   J         M             M    K           JN    K       JO        JP       JQ     JR   &    J           s               C          K    T   &  &U   &         s J   s      J     J      s   J   s                 J          J                 JE          JE                 J          J                    &   &  &   &  J   s  &   &  &H   &       s J   s  &    &  &!   &  &"   &  &#   &  &$   &	      %   s J&     '   &w     (   s J)   	  w     *   s J   s  +   *   E      ,   s J-   .   s J  2   K      /   s J)   W    &1   &w Q      2   s J3   w      2   s J3   9X   <5   
<6   7   <8   w   J9      a    J9      b  :       d  
       
  ^e  _`@   f        2   s J3   ;   
    KJ<   w l  a    =   s J>   ?   w p  Y    mZ   w  `'`+` `+`@`/`.aP '@` "P(`/`.`P
P!`" P	P  ` ` `@`E"K$R+	P**+#[
P*,+ +-K=+@A`P
1
P$`P
,P$`P
P PP `P
.9
PIF`P
P$`P
!%&'JG"PDM` @P-`*` $`P.PDOLR`PP.`@U`KW` `OZ`.aP '@]`*`/`.`P
P!`" P	P  ` ` ` `	@i`EtKvR+	P*(+*+#[
P*,+ +-K  + `P
1
P$`P
,P$`P
P PP `P
.5
P `P
P$`P
!%&'J  "PD  ` 8P-`*` $`P.PD   `PP `+` ` + ` ` ` `.`	( `.aP ' `*`/`
 `P
P!`" P	P  ` ` ` `E   R+	P**+#[
P*,+ +-K  + `P
1
P$`P
,P$`P
P PP `P
.7
P `P
P$`P
!%&'J  "PD  ` .P-`*` $`P.PD   `PP `5 C  P4 P    	                  B        D   7     S   b	     V    
             a                 4           H                          4           H           C	             	  4           H         l                             J   9      <      <      <	   9
      <	         &<   <   m   <   m   <   w  `%****@JJPDP  y  E                !        J   5                 &.            J                 &&   &    KJ   &   &&.       KJ             KJ   	               
   &.               &.            &.     0(  ,         &.          s J      w !    ` `*` 
 `f `	 
` `@` `@#`@` `P
$PIP         4      $   $                                  q  G                 )                                        7             s J      s J   m   w           s J   m	   w    J
   .         J
            J
      (             s J   w  #   !          s J   w  %   9      <      <      <    ` ` ` `,`PP
PI	`P
0PD%` `P
GP `P
GPI*`

Q8   ?8                                 w  `P$PH  V8T          	       9       $        s J      s                s J   s          J                            K        	   J
      K        J     J   w                     s J      s    m            s J   s     	   J      K     J     J   w    )        )         s J      s    m   /         s J   s     	   J      K     J     J   w    9        9   &`PP `P
P(`!` + ` `@
`	P @`PP!`P
P( ` `	P @`PP!`P
P(` `	P @PH                n                     U   }             N             N   X   3X   #   	                                    m   w )`   YP4 P@  -"(@                                        J                            K      
      J      K         J        J   9	   
   <   9     <   <   m   <   m   <      <   m   <   w     `M`F` + ` `@`.`%*%NJJ*JPIP4   A4                                 w   `*P4   A4                                 w   `*PL   oL              C                    w     w   `P$`*P  {o           	       ~               s     J   J   6        J   J      
     J   J                                               s J	     w     
   s J	      w        s J   9      <   <   <          <   m   <   w        s J   9      <   <   <          <   m   <   w        s J   9   <   <   w        s J   9    <   <   w !         "   s J	     w     #   s J$   %   s J&   9'   (   <)   m*   <+   w     ,   s J-   w  .      T   .   J   W   k   X       /   s J0   1   92   3   <4   
<5   6   <7   8   <9   m:   <;   m<   <=   w    e   >      h   >   J   k   f   l       /   s J0   ?   9@   3   <4   
<5   6   <7   8   <9   mA   <;   mB   <=   w y       C   s JD   mE   w ~    `F`P(` ` `K` `J`P
PD`P"PD`P
%*&&
	P(JPD'`P
%*&&
	P(J'PD0`P
%&F0PD5`P
%&F5PD9`J<`P
!PD>`PP
%*J>.PDE`P
@P$` `PB%*'*JNJQJHPNS` `PA%*'*J[J^JUPIb`P
P9gP\   q\   '                                s J           w  `P 0PDP$   Sn$                               X   QX   #                                  s J   s  +&` P
P'Qt   6=]t   C                              J   &   &  J   &   &  J   &   &  J   &   & `/Z)$  Qd   d   4                  	            J   &   &  J   &   &  J   &   & 	`6Qt   6=]t   C                              J   &   &  J   &   &  J   &   &  J   &   & `/Z)$  Qd   d   4                  	            J   &   &  J   &   &  J   &   & 	`6Q4   3
4                                 w   `*P          
                      s       J   J   6         J   J      
      J   J                                                                 	   s J
   s                       s J
   s     %   !          s J
   s   &   K   '          s J
   s           s J   w       /     /          s J
   s           s J
   s           s J
   s           s J
   s  	      @      J   J      D      J   9      <      <      <   9     <     <     <     <      <      J   J    s  <!     <"     <#     <$   	  <%   <&   <'   m(   <)   m*   <+   m,   <-   m.   </   w c      J   J      g      J   90      <      <      <   91     <     <     <     <   2   <      J   J    s  <!     <"     <#     <$   	  <%   <&   <'   m3   <)   m4   <+   m5   <-   m6   </   w       J   J            J   97      <      <      <   98     <     <     <     <   9   <      J   J    s  <!     <"     <#     <$   	  <%   <&   <'   m:   <)   m;   <+   m<   <-   m=   </   w    >    m?   w     `P(` ` `@` `1zF`*`*`&`&`&`P
*P `K`P
P P
P `P
P(`P
P$` `K`P
P(`P
P(`P
P(`P
P(`N!` `%***				* !P())).&J0J3J6J"PI:` `%***				* !P())).&JIJLJOJ;PIS` `%***				* P())).&JbJeJhJTPIm`5vCmP9zP4   U4                                 w   `*P4   U4                                 w   `*P(   kt=(                              @$   O$                                4   U4                                 w   `*P4   U4                                 w   `*P(   kt=(                              @$   O$                                4   U4                                 w   `*P4   U4                                 w   `*P(   kt=(                              @$   O$                                  T                                   s J      w        s J      w        s J   w         s J	   
   w        s J   w      w            w  `PP$`PP$`P
P$`PPD`P
@P$`*` P$PP   cRP                                       m   w @`   YP4%P  MV  ^                2         U         s       J   J   6         J   J            J   J                                                 w    	   J
   9      <   9      J   J   s  <      J   J   s  <      J   J   s  <   <   m   <   m   <      <   m   <   w 2    `M`P(` ` `@	` `P$`A"F`%*% !P( P( !PMJJ*JPI"P4   A4                                 w   `*P4   A4                                 w   `*PL   oL                                  w     w   `P$`*PX   bX   #   	                                    m   w I`   YP4P   ~   n                           e         J   9      <   9      <   <   m	   <
   m   <      <   m   <   w     `-`%*%OJ
J*JPIP4   A4                                 w   `*P4   A4                                 w   `*PL   oL                                  w     w   `P$`*PT   T(T   #   	                                    m   w )` gP4P   ~   n                           e         J   9      <   9      <   <   m	   <
   m   <      <   m   <   w     `-`%*%OJ
J*JPIP4   A4                                 w   `*P4   A4                                 w   `*Pd   %1?d   ,                                s J      w       w  `PP$`P$P   E/   R                             J   9      <      <      <	   m
   <   m   <   m   <   w @`%***J	JJP4!P4   3
4                                 w   `*P4   3
4                                 w   `*P   S   |                                 J   m   w        s J         1&   &w     	   s J
   w         s J   w   `+`
PD`P
EMPD`P
P$`P
P$P   z   `                                &1&   &  J   1&   &  J   1&   &  J   1&   &  J	   1&
   &&.    `
) @L @P   H/   y                                 s J   m   w        s J   m   w        s J   m   w     	   s J
   m   w @`P
$PD
`P
 PD`P
!PD`P
-P4P   ;   \                
                 s       J   w     J         w       s J   w  &`P(	`P$	` P$	`P
P$	`!Q8    8                                 w   	`J	`!Q\   N\                                          s w &	`PP$	`!Qh   4h   3                           J   "          w    J   w      `@`*`
PIP  wC  <                $         J      s       J      s 4         J      s J      s J      2         J   	   s J
      w          J      s 4         J      s J      s J      <         J   s  J   w     J   s  J   w  "      J   w  $    `PH` 
P.PP@	` 
P"P ` 
P KPP `
P
P$`
P
PI	`
P9P<  ><  {                .               s J   s        J   s      J      s         J     J	   
   s &  J   s s       &     J        J      s J   
      &
      &s w   J      s J   m   w   J      s J      w   J      s       J      s J   m   w    J      s J   m   w  `P
9PH`PH` P(`	 P	PPI`M
`  P

PP$` P
PD` P!PD`-PH` P
$PD` P
%P4 P  &           
                       s       J         J      s J         &      &s w    J         J      s J         &      &s w &`PH	`  P

PP$	`  P

PP$P8   Y8                                 w   	`*	`!Q\   N\                                          s w &	`PP$	`!Q4   4                                 w  @`P  f                  {          J      w          s J      s &         s J      s  ,            s J      s 	      6         
         s J      s &&.            s J      s  (             s J      s  %      &     &         s J      s (   ,         s J      s 1      2         &.   $  3         s J      s A   9               s J      s &   &&.      @         s J      s A   F               s J      s &   &&.   ^   M               s J      s &   &      s J      s &   &&.   Z         s J      s  c   `         s J      s J   s  	   -   h         s J      s J   n   @   o               s J      s J   s  &&.   w          s J      w  ` P$`PP)`PP PP `	'PP `PP PP: `PP  PP ` `PP/`	"PP `PP/`	"PP@`	"PP
)PP@`PP PP
P PP `	 PP
P@`P
PP  f                  {          J      w          s J      s &         s J      s  ,            s J      s 	      6         
         s J      s &&.            s J      s  (             s J      s  %      &     &         s J      s (   ,         s J      s 1      2         &.   $  3         s J      s A   9               s J      s &   &&.      @         s J      s A   F               s J      s &   &&.   ^   M               s J      s &   &      s J      s &   &&.   Z         s J      s  c   `         s J      s J   s  	   -   h         s J      s J   n   @   o               s J      s J   s  &&.   w          s J      w  ` P$`PP)`PP PP `	'PP `PP PP: `PP  PP ` `PP/`	"PP `PP/`	"PP@`	"PP
)PP@`PP PP
P PP `	 PP
P@`P
PPX   ZNX   $                            J        &   & &w  `+
"PP3  `I  ]  {  O  ^  $  #  '  (  _     @  @a   J  `    @  @     @  b    @  @  @c  d    `$  l  m  n    `g  h  i  $  j    k    p     s  t  u  v  w     x  y  z    `    `    `{          `  `             $     x                  	      0          v  w  y        {          @    "        J  B      p    p    p    p  
  `    `    `      `	  `$    	  @      J  B      p    p    p    p    `    C  $     x  
    ` $         
  @     `  `$     m    `$      `s  t    $           I  ]          {  l     `                              a                                                                             X       -       d   w                                                            	       p   p   p   p   p_      @        !   `$  " (  ]  I  ^  _    @  @a   {  J  `       @  b    @c    `  `$  $      %   `# $  
        `  `  `$      @( J  B    $  p  %  p    `$  *     '  , -   @/ .   @1 2 0 3 4 	  5   &   `$  3   	  &   `     `  !  `$  
      W 1  X g  h  i  e  Y   E Z 	  *     "  `  `$  $   ;   < = > ? % @ A o  B D  x  E   G      I J * M     @N O P Q R S T U V J  B    )  p  *  p  +  p  ,  p  $  `  %  `  &  `W 1  ^ X _ >  /  z  '  `#  `$      @] S T J  B    .  p  /  p  0  p  1  p  )  `  *  `  +  `W 1  c h a  i  <  ^ X _   ,  `i -  `i   (  `>  ,  ~  c 0  $      @d J    @e       f 9   `  g 0  B    3  p  4  p  5  p  6  p  /  `  0  `  1  `W 1  ^ X _   h 2  `.  `>  ,  $      @k J    @e `  g 0  B    8  p  9  p  :  p  ;  p  3  `)  i $  , m #  '  (  n J  N  o   @p .   @1 2 0 > q 5  `  6  `  7  `u $  v      ^ w x y    z > { 8  `4  `'  J $      @s R J  J    >  p  ?  p     @  p  A  p  :  `  $       <  `$      m   ;  `  k  E  p=  `4     >  `i   9  `B  $      	          @~ J  B    C  p  D  p     F  p  G  p  @  `  $       B  `$      m   A  `  k  K  pC  `3   D  `i   ?  `B  $      @ J  B    I  p  J  p     L  p  M  p  E  `$  #  '  (  ]  F  `$  #  '  (  )          I  J  ,  G  `$  #  '  (  )  x   H  `$  #  '  (  )  I  `$  #  '  (  )     J  `$         K  `$  #  '  (  )     L  `$  #  '  (     M  `$  #  '  (     N  `$  #  '  (  )  c    O  `$  #  '  (  )  d    P  `$  #  '  (     R  `$    S  `   Q  `$           8  3  I       {             e              r                -            f  g          `     h  i  j     k      -     X           _           @        !   [  p \  p  J           U  `$    V  `   T  `     4  I  8      D      1     {     $   r                P-    P                       -           D  E  M   F  G               	   
            _                      @        !   ^  p _  p `                W  ` g    /   D    1  d       I  K  L     ! $  "    #            @$   -  %   0  & ' ( Z  `$  7  x  8   9 X  `$  *  + , -   . /   #  '  (  )  0 J  1 2 Y  `O  4 i  <  5 6  b  p: [  `\  `6  '  < > = ]  `6  $       ?         A _  `W 1  0  `  `^  `'  $  ?     !  @D E F J  B       f  p  g  p  b  `Y Y  c  `\ J  d  `7  <   e  `7  g f  `7  i a  `$  H   J K    L M N P Q /          R   "  @S T   U V `  W X  i  pZ [ j  p^ _ ` J  a '  b c d e 6 k  pf l  ph m  pg  `i  `  j  `  l  `\ J  k  `   X   -  W 1  $  u   t 6  v Z [  r  pp    > w _ 7  <   . '  ) m  `h  `$         k ; > l 6  B m n c o p   '  q R   #  @s J  $  @ J   r F {  t   `  o  p  p  p  B    g 0  q  p  s  p  x o  `{ y $  h  u       n  `{ 6  $   | } ~  8 < u  pq  `  r  `  s  `I  6  m n c   $  p    v {  q   ? a a     t  `p  `$    %  @ J  w  p  x  p  B       y  p  z  p  u  `'   > = w  `x  `y  `v  `   $    &  @ J  J       }  p  ~  p  z  `'  $         {  `|  `$       }  `$       ~  `$  #  +  '  @,    -      `$     o   {    _   /  +  n    `  `)  $    (  @ J  B         p    p    `$       -    `>  $      )  )   `  `  v  $        p  )  @  J  J         p    p    `     p  `   `Y      l $  #  `   m  n  o  p  q     p| } *  @            `$  |  }   `$  #   }   `5  W  I  $  *   X /      `  `$                       +  @  A   J  B         p    p  >    `$  7  x  9   8   `$  *                     5  I  {    D      1    J r l    /    0  J          e                     D  E  M   F  G       	               _    ,  @        ! 4   `               5 6    p  `B @ A z  ]    `y $  / J  m n c  ,  ?  -  @ . .  @  2 0 . N )  ) 6  ~   #  '  (   V `  W    `> 6  N )  )   `  J )    `     $  #    >   `  `    P     -  $  #     `     0    /  @  J     J      p    p       `  $  #       `     `$    0  @ J  1  @  `  J    g 0    p    `      ;  I     /      P~      -        $  	   #    `  `$    2  @ J     B      p    p    `$  	     m     `$       `$  	          `  `$    3  @ J     B      p    p    p    p    `  `$  	     m     `$       `   `  `  `$    4  @ J     B      p    p    p    p    `  `   I  {  "   -  0     D    2           $  H           !  r  # $ % &  ' s * 	   #  +   `   $  	   I  {  "  0      -  - E  t u v 1 2 w 3  4 5   '  x #  7 _    `$  9     `$  9    `$  #    @   `  `$    5  @> ?    J  B    g 0    p    p    `  `   `$    6  @ A    J  B      p    `  `m n c     `m n c C   `$  E   F G   `$  E    E     `   $        -    `$  M   `         .       W *  +  n    `$  *  +  C     `W 1  )  ) ^ V N > W   `$  M        N R `   W   7  @S T U J  B      p  > X   `  `  P    `$  *        `$  /   \ G   `$  .  +  n    `$  .  +  C     `$  " (  )     `W 1  ^ > X   `   > f g    I  W h  i v  -  $  j   k   8  @l m n o J  B    g 0    p    `  ` v  :  @$  `   h  i   `9  @ $        p  `$  s    E     `=    `$  s    E     `$  /    E     `$  /    E     `>    `>    `?    `?    `$  3   {   `g   ~ }   `$  n "   C   m   	 _        =  @   >  @  ?  @a   r p  ^ _  >    `   `   (  )  W 1  h t   7 k    p  `  `  ;  @ d  {  ^ _   <  @`    p   p   `$      p  `y $  .     g   `$       `z $  #     g    `  `$    @  @ J  A  @W `    p    `i   `  `  `$    B  @ J   `  B      p    p    `  `I   a  {  $  #  '  (     _  C  @  b  D  @ J  `    `A  v    `       P  `$  #  '  (     I          `$  #  '  (  )      p  `$  #  '  (        `  `$    E  @ J  g 0    p    ` G  @$                `    `   p$   g              `    `$  H    D  E  H  F  G   r  K   I   M   J    b                           ^ _    F  @r  \       p   p   p         #         ` J    `I   {  "      0     # $  D    1              $     #     `   Z    `   `   ` $         `   [   e  r { | } ~  ]      p  `  `  " #   &   `  ( #  ) *   `  w    p   p$     { [ 6    p     	 
 H  @            p   p    p!   p'         `$   x  N [ m  O  E    P    4 {     `   `X   `$  N [    R J  S T U   pV   p  `+ ,  - . / 0 1 2 3 4  5 I    6  e r 7   8 9   : ; < = > ? @ A B C   $  D   E F I  @H G I K J L m      M 6    p Q   p `  `X   ` U   pV   p `  `$     U   p `     I  \  ]  {  ^ v  >  _ $  `       a 6    p    `$  d   e     m    `$  d       	 `
 ` `'  <  $    J  @b c J  B     p   p   p   p   `$  D   e     m    `$  D        ` ` `$    K  @f J  B     p   p  	 p  
 p   `  `$  #  (  )   U   p `$  #  (  L  @ h  pi  `  `$  #  (  )   U   p `$  #  (  M  @ h  pi  `$     M  x  S J  R Q l { | } ~   ` $        `   [  $  E    j     p  I  ]     p `W  > q X r  ` `t  '  $    N  @n J  B    g 0  O  @o  b `   p   p   `$  D   e     m    `$  D        `  ` `$    P  @s J  B     `   p   p   p   p  " `W 1  $  N [   > x ! `w  p# `$             * '  <      z { I  | }  	 ~    g  h  i     x  
 e  Y * ` s  t  a  $         R  @   + `, `$     m  - `$    % `I         {  l   & `           a                             ' `    ( `     ^                          -          w       -  s  t  $              	 ) `                            ! p " p # p $ p  _    S  @        !   . `$ `s  t    $  ~       '  9  |   z v  } <             -   |    Q  @ J   `  B      p  % p  / `0 `|   { z I  i  1 `i  2 `s  t  z     /  I   |          T  @r {  $    U  @        ! 3 `      4 `$       I  /        y   r {   5 ` $              I  /           x  
 y  |   r { z  {  6 `$     x   | I  i  '  <  e  Y 7 `g    /   D    1           s  t    $  "    #         V  @$   -  %   0  & ' ( 9 `$      : `; `$    < `  = `  > `I           -         $     ? `@ `"  # {     & A `(  # {   * B `"  # {     & C `(  # {   * D ` 8 `     >   v  I   $         W  @       . p  X  @/ p  Y  @   Z  @         [  @    0 p    \  @ J  B    g 0  ]  @ `     1 p  2 p  3 p  4 p       	  ^  @     {   5 p! 6 p'   _  @7 p8 p  9 pF `  G `  $   	             H `$      >    I `E `   $     j      `  @ J  J    g 0  a  @              `      ; p  < p  = p  > p  K `$  l  m  n  L `  M `  N `4  H 3    e  @   	 i  O `J `$  j   k  @ p       	           v  y  w  b  @|  c  @    ~    d  @ J  `  B    A p  B p  C p  D p      z  P `$                   f  @        !    | I  ~   Q `$       m     H      x  i         y     R `  $             ! Z  " #  $        S `$         % $       T ` V `$  ( F g  @H G I K J ) U `k  K pX `W 1  > X e  Y  1 $  2   Y `W `$  +   , @ A o  B   -  x  .   G      '  J /   h  @0 J  i  @7 8 F + H 9   K `  B       M p  N p  Z `$  3      4 /     5 Z 	  	   6 7  \ `Y Y  ] `\ J  ^ `7  <   _ `7  g ` `7  i b `$  2   [ `$  9 Z 	  /  V `  W X  Q pZ   [ R pE   : ^ _ ` J  a   '  d e 6 S pf T ph U pa `k  V pc `m n       j  @= < > -  k  @@ {  B C -  A l  @D E F G m  @H I J K L M N n  @O P o  @Q R p  @S T U V ? e `  f `  h `\ J  g `   X   -  W 1  $  u   t 6  v Z [  \ pp     ^ w > _ 7  <   . '  ) i `d `$  ?      k 6  B m n c o p '  q   q  @s J  r  @ J   r F {  t `  Y p  Z p  B    g 0  [ p  ] p  > x k `g   } j `$    Y I  K  L      "      [  \   _ p] ^  s  @` _      a -  b l ` D    1     b m `      $        s ` $         t  @   t `u `$     m  v `$    z `$    { `   o ` 3   4  	 I       r f a  {  l   p `                -    t     o                 v w x y z { "  $      	  | } s  t  ~                              6                                 w                                    q `                                          D      1  0   r   r `    P  P                 D  E  M   F  G      
           i              d p e p f p g p  _   u  @        ! w ` v  @ x ` `   J            w  @ y `       h p i p  | `  } `  ~ ` s  t     $     `n `s  t  $  ~      j I  k b     #  m    n     '  9  |   z v  } <        x  f   c p     |        x  @ J  y  @r  ~     `  g 0  B    j p  k p  l p  m p   ` `           `  P	  P
  P   `   `   `u $  v      ^ w x y    z > {  ` `'  J $    z  @s R J  J    q p  r p     s p  t p   ` [   	 {  l    `  $   J                 {  @S T   U            `   `   `$      >   `< z I  {    a  J     	   $            ; >  {  l    `  |  @ J  }  @    0   `  x p  y p  g z p   `   w p `I           -      $      ` `$      @ J  B    g 0    @    `  } p  ~ p   `    	  {  l    `     $        /  I   `                   J             x        ~  @S T   U                `  `        @< z {   a         `    `   @k  | p `   `$     <   z I  {    v  a   ` 	   `J     ` `  $      p     pI        @    `   `   `>   `z I  {    a  $      @ J    @ `   p   p  g 0   p   `    p `$       ` `$     `"  # {     &  `(  # {   *  `"  # {     &  `(  # {   *  `  `   I     $           @        p    @ p    @     @           @     p       	    @     {    p!  p'     @ p p   p `   `   ` ` `   `   ` ` `   `   ` ` `$   	                 >     `   I         $     j            @ J  J    g 0    @     < "       `      p   p   p   p    @  @  p p p p  @  @  p p p pk   p `   `   `>   `   I      >  $      @ J    @"     `   p   p  g 0   p   `    p `   `   `>   `$      @ J    @ `   p   p  g 0   p   `    p `   `   `$      >  `$      @" J    @ `   p   p  g 0   p   ` !   p `   `   `'  (    ) *  + , -  `       p$      . /       `$      @$ J  B    % 0   p   p   p   `$  3     4 5   `7  `9 $   `  7 ;  `$  1   p6  p8  p:    p `> ?  @ A    B I  C      D E     F  `$    {    _    `7  `9 $   `$  H F J      M  -  I       O     pQ      R 6   p8  p `z   `s  t    U $    V W    X Y Z [ \  ] ^    _ J    `   `s  t    U $    V W    X Y Z [ \  ] ^    _ J    `   `g  n  b c  `$     `$     `$     `$     `    C  $           #      `$      	  
      @            @      p      @  @    p  @  @  p    @  @    p      p!  "   `$     `$  #  '  (  )   `$  #      @            @$      p   %  	  p `$  *  +    @,    -     `$  .  +    @,    -     `$  /  +    @,    -       `  p  p  p  p  p   p!  p"  p#  p&  p'  p(  p-  p2  p7  p<  p=  pB  pH  pN  pO  pP  pQ  pR  pS  pT  pU  pV  pW  pX  pY  pZ  p]  p`  pa  pc  pd  pe  ph  pn  pt  pv  p{  p|  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p  p p p p p p p p p p p& p' p( p) p* p+ p, p- p: p? pE pF pG pH pI pJ pL pO pP pW pX p^ p` pa pb pn po pp pu pv p{ p p p p p p p p p p p p p p p p                @$    p  p
  p  p  p0    @3  4  5  6  7  8  9  :  ;  '  <  =  >  ?  @  A  B  C    @N    @X  Y  {  y z   @|   @   f  X                9  $             "             %             (             +             .               f               ]             `               x  	               	               	                    Z        !      e                     @   7   z        6              8              :              ?                            w              y              {              ~                               
                                                              <             R     #       X     &       `     '       ^             _             l     )            /         1   6                                                                [                                   	                             a                                                           3     j       &             (             *             2             J     l       s     p       `             b             d             r                  |                                                                                                                                                        ]                         x            )                                                                     %     c        -     d        5              C  ~          ;            ?                                                L  '          {     )       s                 ;            >            B                                   3   <                                                                   (  0   A                                                          '             d     z       X                        p             r             t                                           J                                   
                                    	                                                     \                                 	                          "                      ;            @            S            E             R             x  y          p                            #                                   /            %  	           .             R            J             }            b             |                                                                                                                                               0            !          %     8       )     :       3     ;       -             2             F     @       D             S     .       X            ]     v       c     k       i     I       q     K            N            O         
                Y            R            1            0            ]            ^            _             `                         p         
               r       	     @       	     t       	     u       	     v       	     A       	     w       	     y       	     B       !	     z       &	     |       m	     d       \	            +	  "          O	            M	            r	            y	            }	            	            	             	            	             	             	            	            	            	  	   y       	            	     z       	  
   N       	             
  N          	            	            	            
            S
  "          
  +          u
            y
            {
            
            }
            
             
     !       
     '       
  <          
             
             
            
            1     Y       -            /            ?     X       9            7            i            W  	           `             g             h                         |  	                                                    	             	   i                     	             	   i                                                                                                  U         	                                                  5     t       ,  	          8  "   y         *          s  w           Z            h            i            o                                                   $   }       B            R            p            }  &            \                                                                                                     	   !            '         	   !            '            "       [  )          D             F             R             Z               +   
            '                                                                
                                                        +                  ,       <  +   *       .             ;             g     1         &   8       x     /       {     /       ~     /            /            /            /         +   ;         *   W                                                   3                    1     X       -     5       P     c       X     d         E   i        ~    p       `     7       k     7       l     7       r     7       v     7       z     7                                   	                                          ;                                                                         "          a            3  .   @       (             *             ,               [          x     D       f             w                               G            G       -                 H                                              ^  F          2            8            9             <  	   !       E     '       L  	   !       U     '       \     P         @                                                                                                                                                                           U       *                 V                    	                          G            6     Z       /             1             3             g             V     ^       L             N             P                  #       l             n             {             p     e            0            f            f            f            f            9            7            g            g            g            S                                    a       H                                   %                       -                       8               T	  ~	  L	  ~	  C               "
  L
  
  L
  N               w
  ~  o
  ~  S   $           Y    Q    j                       r                V    N    w   2               3    3  }                A    9                      0    0                                          #    #    "                                   $  -  $  -  R              ,  ,  {,  ,                 ,  ,  ,  ,                 ,  -  ,  -                -  -  -  -                /  j1  n/  j1                x0  0  p0  0                 0  0  0  0                 0  E1  0  E1                Z1  c1  R1  c1                1  (O  l1  (O                H  I  }H  I  6  !           I  J  I  J  B              J  K  J  K  K              "K  K  K  K  N               K  K  K  K  R               O  R  O  R  s  $            cS  S  >S  S    &             iT  T  ET  T    %            U  V  cU  V                 U  U  U  U                V  V  U  V                 V  Y  V  Y    (             Y  Z  Y  Z    (          \  0i  \  0i    !            d  d  d  d  *               d  e  d  e  -               /e  
i  'e  
i  0              i  )i  i  )i  L             i  Jl  pi  Jl  X               j  j  j  j  ^               j  j  j  j  a               k  $l  k  $l  d              9l  Cl  1l  Cl  m             l  q  zl  q  w  !            n  n  n  n                 n  n  n  n                 o  mq  o  mq                q  q  yq  q                q  wt  q  wt    (            r  s  r  s                 4s  Xs  ,s  Xs                 ns  St  fs  St                gt  pt  _t  pt                 5u  .w  u  .w    +           w  {  w  {                 x   y  x   y                 y  Ay  y  Ay                 ly  {  dy  {                {  {  {  {                |  ?  n|  ?                }  }  }  }  &              ~  v~  ~  v~  *               E~  l~  =~  l~  ,               ~    ~    /                7    7  4                      B                      G                p    p  K               :  a  2  a  M                       Q                      V               '        \                "    "  c               6    $    q                       y                 2    2                 H    4                    <    <                 P    =                                                                                                                                  @  f  8  f                 y    q                  o    N      "                     :                       =                 @    @  `             T  <  B  <  w              /    '      .                       #                 `      '                     (                                                          `    `    %           l    d    :  /                     C  -             6  d  .  d  O  4                     R  3               &    &  U  2             T   T d                                                          J    B                        0                              f 	 U 	                	 w 	   -            	  	                ]
 
 U
 
                
 
 
 
                
  
  	                  *               _  >  5  "           ) b  b F               -  - L              A J 9 J S                 |  q                I  I   #             m  K    #              P  P   &                                                                  [ % G %                     ;            A  A   ;                                                 , N$  N$              Z# v# R# v# 	                e$ $ P$ $ $	              % & % & 3	            & 4, & 4, <	               ) + ) + O	              + + + + e	              - \ |- \ w	  &            \ \ \ \ 
  .             ] ^ h] ^ 
              _ b ^ b 
  *             b 5e b 5e 
               e f e f 
  &           df j Gf j 
              h Lj h Lj                cj nj [j nj              k l j l   $            k l k l &            m r l r 4              m r m r :              r r r r \              s u r u e               s Gt s Gt k               _t t Wt t p               t Uu t Uu t              ju tu bu tu y             u $x u $x   )            v w yv w                $w cw w cw                zw w rw w               w 	x w 	x                Ex  &x                 f   >     )             R  R 	              g  T               3  3   '                                               \ _ 5 _ &  (             C  C +              ~  a  4                C  C ;               ^  E  ?               [  [ E               s  ]  J              
    P                  `              4    d              H p @ p t              < C ' C                  u                ' N  N                l  P                 .  .                 P { 0 {   !               }    !            ~  i                                                  H  @    8             ! S  S   &             u  U    !                   &             Q  Q                 r  S                       '             * W  W   '            z  Y  #  "                '  "              E  E +               \  G  /             .D - * - :             .h ) ` ) <              , v $ v B            .    ]                  i                     !                              z  [                      !            f o ^ o                    '            ~  v                                        !                              } ) [ )   #          A  +                                   ]  ] "               _  &  &                 *             {  { 0                l  l H  )            |  t  R               ,  , S  @             W  W [  <              }  g  $           R  R   &            2  *    @             3  3   4                  6             p  p                a  a                                                    .  &               J T J   -            _  _ (              F  F 9               j  b  E  $             9  9 I             i  L  P               7  7 S                w  W             U  U [            /  '  l                   o  $           c  c z                                                     >  >               S \ K \               | e |   3                                                    6 Y . Y               m u e u                ~    -                                             L       -                             k  c               O   O    -           w  o                  H   H    I          v   P     '            A  9                                 4 ?  ?   )             r  r                                                     0 8 ( 8              c . A .   #             *  *   /            U 	 7 	 $             Z
 ) <
 ) I              ?)  ?) z             # $ # $   .            $ 	% $ 	%               % % % %                % % % %                T) _) L) _)               ) * ) *               * + * +               + 0 + 0 %               -0 A2 0 A2 H               ^2 @7 B2 @7 Z               ]7 k8 A7 k8                8 < l8 <             < T ]< T   ,            E ;F E ;F               F F F F              H "I H "I                J 9J J 9J                QJ yJ IJ yJ                J M J M               M M M M                O P O P &              P [Q P [Q )              R S |R S 3              S UT S UT 6              T T T T :  +            T X[ T X[ A              TY }Y LY }Y d               Y fZ Y fZ g               |Z /[ tZ /[ n              C[ L[ ;[ L[ s              z[ 1b Z[ 1b z  !            [ [ [ [ }               ^ ^ ^ ^                ^ _ ^ _                1_ &a )_ &a               ;a Da 3a Da                b f b f                g 7i f 7i               \i Zk 9i Zk   $            k l [k l    )            l \n l \n               wn p ]n p                n p n p              p rz p rz )  (            x Nz x Nz l              bz kz Zz kz ~               z { tz {              k|  E|    '           } !~ } !~   /              9  9   -             e  ]    4                   3             ) U ! U   2                                                g  G    !             4 [ , [                s  k  
              c  c               [  S  "  0             x  p  D              G  G N               =  = T  :             k  I  k  #                p            .P w & w }  +          .        $                 -             <  <               M  D                                      ,   ,  [               A  f  9  f  ^                   {                   |               ) / ! / }              E Q = Q                 x                                      "              	  	                5	 ]	 -	 ]	                	  	                                    #  #   /          G  &    "                                                                   9  1  #             H  H -  &           UE xH ME xH ,               E TH E TH 4              gH oH _H oH F             H .N H .N L              OI sI GI sI Q  :            I L I L U  ;           QN Q 0N Q y  "           O Q O Q z              P P P P                P Q P Q                FQ Q >Q Q              Q nb Q nb   /             X X X X               vY Y nY Y              [ [ [ [                6] U^ .] U^               t^ _ l^ _               0` Oa (` Oa               na b fa b               8b db 0b db   +            b n pb n   (             vg g ng g 2               g g g g 5               g h g h 8              (h 2h  h 2h ;               i j i j K               -j Wj %j Wj N               nj j fj j Q              j j j j T               [l l Sl l d               l l l l g               l l l l j              m m m m m               ;m n 3m n r              n r n r   4            o r o r               q q q q                r <r r <r                gr r _r r             r 'u r 'u   (           s #u s #u               Et nt =t nt                t t t t                t u t u             Mu Vw )u Vw   %           u Rw u Rw   q            _v v Wv v                v v v v                v Dw v Dw              w I{ Xw I{   6             x 4x x 4x                Jx nx Bx nx              x B{ zx B{               x y x y              f{ ~ L{ ~               { | { |    2             | 0} | 0}   .            a} } Y} }   /             } ~ } ~   ;            ~  ~              3    /                  :  5                 E  C            h  `  K  D                 Q                s  s f                v                      !          5!r8<x      ggHgx   b    O^partitionKey=%28https%2Ccmrit.ac.in%29,:https://erp.cmrit.ac.in/scripts/dms/DMSmanageDocument.js necko:classified 1 strongly-framed 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAAAAgAAAAAAAAAAAAAAAAAAAAEAOQFmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAZeMIIGWjCCBUKgAwIBAgIMBDRov99iNgtiT0/6MA0GCSqGSIb3DQEBCwUAMFUxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWduIG52LXNhMSswKQYDVQQDEyJHbG9iYWxTaWduIEdDQyBSNiBBbHBoYVNTTCBDQSAyMDIzMB4XDTI0MDcwNTA5MDUyMVoXDTI1MDgwNjA5MDUyMFowGDEWMBQGA1UEAwwNKi5jbXJpdC5hYy5pbjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBANYiwzmvUK2/gsxQAtHV+G0vy665aU6ugVBmPzAEwCJr64nlJzPtA4nKiKddlbF0n5wIYz6qHEYswc/VMe03LLOFEyGHZCicGajhmvAv4MI3oVgQ8r/NDmc63WY1BazuIvlaEBaSdo7TosAMIhuSMbry0ZJ+72aTDrr22XXMB8iOmiEFzf/MMVgO5/fnh69czcjxT/kUWw+hP1qsAe3vXly1XdArNERI1m6d33SNuAFIrDvCM1nFuFpNf2GhiMDoeGnkR55cLgz7lzuX3uW84dfS2rhnhGBQGP+7bBzw8lkD6N/f0u7ahswxw8H6MOhMqmSSNSt/DoT8jP24h/6jRCkCAwEAAaOCA2UwggNhMA4GA1UdDwEB/wQEAwIFoDAMBgNVHRMBAf8EAjAAMIGZBggrBgEFBQcBAQSBjDCBiTBJBggrBgEFBQcwAoY9aHR0cDovL3NlY3VyZS5nbG9iYWxzaWduLmNvbS9jYWNlcnQvZ3NnY2NyNmFscGhhc3NsY2EyMDIzLmNydDA8BggrBgEFBQcwAYYwaHR0cDovL29jc3AuZ2xvYmFsc2lnbi5jb20vZ3NnY2NyNmFscGhhc3NsY2EyMDIzMFcGA1UdIARQME4wCAYGZ4EMAQIBMEIGCisGAQQBoDIKAQMwNDAyBggrBgEFBQcCARYmaHR0cHM6Ly93d3cuZ2xvYmFsc2lnbi5jb20vcmVwb3NpdG9yeS8wRAYDVR0fBD0wOzA5oDegNYYzaHR0cDovL2NybC5nbG9iYWxzaWduLmNvbS9nc2djY3I2YWxwaGFzc2xjYTIwMjMuY3JsMCUGA1UdEQQeMByCDSouY21yaXQuYWMuaW6CC2Ntcml0LmFjLmluMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBS9BbfzipM8c8t5+g+FEqF3lhiRdDAdBgNVHQ4EFgQUf3W8QY8EiQ7VPwxF4aS4Vf8WetwwggF+BgorBgEEAdZ5AgQCBIIBbgSCAWoBaAB2AK8YGijWjKPgqYpMnGerCfi7vCK6rryxOKOhndP5tgMNAAABkIIkH2EAAAQDAEcwRQIgTN19xjG3exUUK8CUQTJyyW3lC6PbP7tSLIPQfg62S8oCIQDaz7bAkIsTLvQgeGmRLlxxTxm/8OIAgsCNVjTnQWVBtwB2ABLxTjS9U3JMhAYZw48/ehP457Vih4icbTAFhOvlhiY6AAABkIIkIDMAAAQDAEcwRQIhAIt6+TPWN/uXoo50HsiUEJM9gnQAwDRhGejwSPvu4YIfAiAK2/DtKUuMvI+PtbokhaSz+NDIfec2NJzVqX4f3OGimwB2AObSMWNAd4zBEEEG13G5zsHSQPaWhIb7uocyHf0eN45QAAABkIIkH24AAAQDAEcwRQIhANQJnsn2DGT93ap7L8PL4lHIMSN6km0tBxntLCxKOL1dAiBPh7iC+H2lPvlPQjkr1IVVBkirx0/Ese2qg2qGi8CEjTANBgkqhkiG9w0BAQsFAAOCAQEAGP2xoNrcnvmeqt84f+EmQYIm79CxvUEYsZ7tlMhdm3eWzs7EJ96BDr020b5bL5sELUoN3C4C56TZcJztd/ieDWR79oKAjUMEnC8yuW+FAffetYwZSK4WQ17lJowV5kntQEhh6PilWnDi45Na5/gyiXCPmAXEFMV/vBsIgUOy1k6VFTUccxUXCRbIgusxYDvoiA+gWAJ3QHL8JKKYLtScUcBJxvTRyi6HeUiGfayu/RZ3gDOontPyOWJVqALAh/qiOa5roMxXrK4EVQyhwvGWLEASIzHPejj66HxM5RiMmWyH0BGrTF2lCI/Ts/132GUlMHdFs60B8CqcyGGBxYkBosAwAAMAAAAAAAEBAAAFAAAABFAyNTYAAAAQUlNBLVBLQ1MxLVNIQTUxMgADZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAGXjCCBlowggVCoAMCAQICDAQ0aL/fYjYLYk9P+jANBgkqhkiG9w0BAQsFADBVMQswCQYDVQQGEwJCRTEZMBcGA1UEChMQR2xvYmFsU2lnbiBudi1zYTErMCkGA1UEAxMiR2xvYmFsU2lnbiBHQ0MgUjYgQWxwaGFTU0wgQ0EgMjAyMzAeFw0yNDA3MDUwOTA1MjFaFw0yNTA4MDYwOTA1MjBaMBgxFjAUBgNVBAMMDSouY21yaXQuYWMuaW4wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDWIsM5r1Ctv4LMUALR1fhtL8uuuWlOroFQZj8wBMAia+uJ5Scz7QOJyoinXZWxdJ+cCGM+qhxGLMHP1THtNyyzhRMhh2QonBmo4ZrwL+DCN6FYEPK/zQ5nOt1mNQWs7iL5WhAWknaO06LADCIbkjG68tGSfu9mkw669tl1zAfIjpohBc3/zDFYDuf354evXM3I8U/5FFsPoT9arAHt715ctV3QKzRESNZund90jbgBSKw7wjNZxbhaTX9hoYjA6Hhp5EeeXC4M+5c7l97lvOHX0tq4Z4RgUBj/u2wc8PJZA+jf39Lu2obMMcPB+jDoTKpkkjUrfw6E/Iz9uIf+o0QpAgMBAAGjggNlMIIDYTAOBgNVHQ8BAf8EBAMCBaAwDAYDVR0TAQH/BAIwADCBmQYIKwYBBQUHAQEEgYwwgYkwSQYIKwYBBQUHMAKGPWh0dHA6Ly9zZWN1cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L2dzZ2NjcjZhbHBoYXNzbGNhMjAyMy5jcnQwPAYIKwYBBQUHMAGGMGh0dHA6Ly9vY3NwLmdsb2JhbHNpZ24uY29tL2dzZ2NjcjZhbHBoYXNzbGNhMjAyMzBXBgNVHSAEUDBOMAgGBmeBDAECATBCBgorBgEEAaAyCgEDMDQwMgYIKwYBBQUHAgEWJmh0dHBzOi8vd3d3Lmdsb2JhbHNpZ24uY29tL3JlcG9zaXRvcnkvMEQGA1UdHwQ9MDswOaA3oDWGM2h0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vZ3NnY2NyNmFscGhhc3NsY2EyMDIzLmNybDAlBgNVHREEHjAcgg0qLmNtcml0LmFjLmluggtjbXJpdC5hYy5pbjAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwHwYDVR0jBBgwFoAUvQW384qTPHPLefoPhRKhd5YYkXQwHQYDVR0OBBYEFH91vEGPBIkO1T8MReGkuFX/FnrcMIIBfgYKKwYBBAHWeQIEAgSCAW4EggFqAWgAdgCvGBoo1oyj4KmKTJxnqwn4u7wiuq68sTijoZ3T+bYDDQAAAZCCJB9hAAAEAwBHMEUCIEzdfcYxt3sVFCvAlEEycslt5Quj2z+7UiyD0H4OtkvKAiEA2s+2wJCLEy70IHhpkS5ccU8Zv/DiAILAjVY050FlQbcAdgAS8U40vVNyTIQGGcOPP3oT+Oe1YoeInG0wBYTr5YYmOgAAAZCCJCAzAAAEAwBHMEUCIQCLevkz1jf7l6KOdB7IlBCTPYJ0AMA0YRno8Ej77uGCHwIgCtvw7SlLjLyPj7W6JIWks/jQyH3nNjSc1al+H9zhopsAdgDm0jFjQHeMwRBBBtdxuc7B0kD2loSG+7qHMh39HjeOUAAAAZCCJB9uAAAEAwBHMEUCIQDUCZ7J9gxk/d2qey/Dy+JRyDEjepJtLQcZ7SwsSji9XQIgT4e4gvh9pT75T0I5K9SFVQZIq8dPxLHtqoNqhovAhI0wDQYJKoZIhvcNAQELBQADggEBABj9saDa3J75nqrfOH/hJkGCJu/Qsb1BGLGe7ZTIXZt3ls7OxCfegQ69NtG+Wy+bBC1KDdwuAuek2XCc7Xf4ng1ke/aCgI1DBJwvMrlvhQH33rWMGUiuFkNe5SaMFeZJ7UBIYej4pVpw4uOTWuf4Molwj5gFxBTFf7wbCIFDstZOlRU1HHMVFwkWyILrMWA76IgPoFgCd0By/CSimC7UnFHAScb00couh3lIhn2srv0Wd4AzqJ7T8jliVagCwIf6ojmua6DMV6yuBFUMocLxlixAEiMxz3o4+uh8TOUYjJlsh9ARq0xdpQiP07P9d9hlJTB3RbOtAfAqnMhhgcWJAaJmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAWQMIIFjDCCA3SgAwIBAgIQfx8skC6D0OO2+zvuR4tegDANBgkqhkiG9w0BAQsFADBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSNjETMBEGA1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMzA3MTkwMzQzMjVaFw0yNjA3MTkwMDAwMDBaMFUxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWduIG52LXNhMSswKQYDVQQDEyJHbG9iYWxTaWduIEdDQyBSNiBBbHBoYVNTTCBDQSAyMDIzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA00Jvk5ADppO0rgDnj1M14XIb032Aas409JJFAb8cUjipFOth7ySLdaWLe3s63oSs5x3eWwzTpX4BFkzZbxT1eoJSHfT2M0wZ5QOPcCIjsr+YB8TAvV2yJSyq+emRrN/FtgCSTaWXSJ5jipW8SJ/VAuXPMzuAP2yYpuPcjjQ5GyrssDXgu+FhtYxqyFP7BSvx9jQhh5QV5zhLycuan8n+J0Uw09WRQK6JGQ5HzDZQinkNel+fZZNRG1gE9Qeh+tHBplrkalB1g85qJkPOJ7SoEvKsmDkajggk/sSq7NPyzFaa/VBGZiRRG+FkxCBniGD5618PQ4trcwHyMojSFObOHQIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQWBBS9BbfzipM8c8t5+g+FEqF3lhiRdDAfBgNVHSMEGDAWgBSubAWjkxPioufi1xzWx/B/yGdToDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3NwMi5nbG9iYWxzaWduLmNvbS9yb290cjYwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjYuY3J0MDYGA1UdHwQvMC0wK6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yNi5jcmwwIQYDVR0gBBowGDAIBgZngQwBAgEwDAYKKwYBBAGgMgoBAzANBgkqhkiG9w0BAQsFAAOCAgEAfMkkMo5g4mn1ft4d4xR2kHzYpDukhC1XYPwfSZN3A9nEBadjdKZMH7iuS1vF8uScg26/30DRPen2fFRsr662ECyUCR4OfeiiGNdoQvcesM9Xpew3HLQP4qHg+s774hNLvGRD4aKSKwFqLMrcqCw6tEAfX99tFWsD4jzbC6k8tjSLzEl0fTUlfkJaWpvLVkpg9et8tD8d51bymCg5J6J6wcXpmsSGnksBobac1+nXmgB7jQC9edU8Z41FFo87BV3kCtrWWsdkQavObMsXUPl/AO8y/jOuAWz0wyvPnKom+o6W4vKDY6/6XPypNdebOJ6mjyaILp0quoQvhjx87BzENh5s57AIOyIGpS0sDEChVDPzLEfRsH2FJ8/W5woF0nvsBTqfYSCqblQbHeDDtCj7Mlf8JfqaMuqcbE4rMSyfeHyCdZQwnc/r9ujnth691AJhxyYeCM04metJIe7cB6d4dFm+Pd5ervY4x32r0uQ1Q0spy1VjNqUJjussYuXNyMmFHSuLQQ6PrePmH5lcSMQpYKzPoD/RiNVD/PK0O3vuO5vh3o7oKb1FfzoanDsFFTrw0aLOdRW/tmLPWVNVlAb8ad+B80YJsL4HXYnQG8wYAFb8LhwSDyT9v+C1C1lcIHE7nE0AAp9JSHxDYsma9pi4g0Phg3BgOm2euTRzw7R0SzVmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAWHMIIFgzCCA2ugAwIBAgIORea7A4Mzw4VlSOb/RVEwDQYJKoZIhvcNAQEMBQAwTDEgMB4GA1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjYxEzARBgNVBAoTCkdsb2JhbFNpZ24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMTQxMjEwMDAwMDAwWhcNMzQxMjEwMDAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSNjETMBEGA1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAJUH6HPKZvnsFMp7PPcNCPG0RQssgrRIxutbPK6DuEGSMxSkb3/pKszGsIhrxbaJ0cay/xTOURQh7ErdG1rG1ofuTToVBu1kZguSgMpE3nOUTvOniX9PeGMIyBJQbUJmL025eShNUhqKGoC3GYEOfsSKvGRMIRxDaNc9PIrFsmbVkJq3MQbFvuJtMgamHvm566qjuL++gmNQ0PAYid/kD3n16qIfKtJwLnvnvJO7bVPiSHyMEAc4/2ayd2F+4OqMPKq0pPbzlUoSB239jLKJz9CgYXfIWHSw1CM69106yqLbnQneXUQtkPGBzVeS+n68UARjNN9rkxi+azayOeSsJDa38O+2HBNXk7besvjihbdzorg1qkXy4J02oW9UivFyVm4uiMVRQkQVlO6jxTiWm05OWgtH8wY2SXcwvHE35absIQh1/OZhFj931dmRl4QKbNQCTXTAFO39OfuD8l4UoQSwC+n+7o/hbguyCLNhZglqsQY6ZZZZwPA1/cnaKI0aEYdwgQqomnUdnjqGBQCe24DWJfncBZ4nWUx2OVvq+aWh2IMP0f/fMBH5hc8zSPXKbWQULHpYT9NLCEnFlWQaYw55PfWzjMpYrZxCRXluDocZXFSxZba/jJvcE+kNb7gu3GduyYsRtYQUigAZcIN5kZeR1BonvzceMgfYFGM8KEyvAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBSubAWjkxPioufi1xzWx/B/yGdToDAfBgNVHSMEGDAWgBSubAWjkxPioufi1xzWx/B/yGdToDANBgkqhkiG9w0BAQwFAAOCAgEAgyXt6NH9lVLNnsAEoJFp5lzQhN7craJP6Ed41mWYqVuoPId8AorRbrcWc+ZfwFSY1XS+wc3iEZGtIxg93eFyRJa0lV7Ae46ZeBZDE1ZXs6KzO7V33EByrKPrmzU+sQghoefEQzd5Mr6155wsTLxDKZmOMNOsIeDjHfrYBzN2VAAiKrlNIC5waNrlU/yDXNOd8v9EDERm8tLjvUYAGm0CuiVdjaExUd1URhxN25mW7xocBFymFe944Hn+Xds+qkxV/ZoVqW/hpvvfcDDpw+5CRu3CkwWJ+n1jez/QcYF8AOiYrg54NMMl+68KnyBr3TsTjxKM4kEaSHpzoHdpx7Zcf4LIHv5YGygrqGytXm3ABdJ7t+uA/iU3/gKbaKxCXcPu9czc8FB10jZpnOZ7BN9uBmm23goJSFmH63sUYHpkqmlD75HHTOwY3WzvUy2MmeFe8nI+z1TIvWfspA9MRf/TuTAjB0yPEL+GltmZWrSZVxykzLsViVO6LAUP5MSeGbEYNNVMnbrt9x+vJJUEeKgDu+6B5dpffItKoZB0JaezPkvILFa9x8jvOOJckvB595yEunQtYQEgfn7R8k8HWV+LLUNS60YMlOH1Zkd5d9VUWx+tJDfLRVpOoERIyNiwmcUVhAn21klJwGW45hpxbqCo8YLoRT5s1gLXCmeDBVrJpBAAAAABAAAAAAABAAAAAE10bHNmbGFnczB4MDAwMDAwMDA6ZXJwLmNtcml0LmFjLmluOjQ0M15wYXJ0aXRpb25LZXk9JTI4aHR0cHMlMkNjbXJpdC5hYy5pbiUyOQAA request-method GET response-head HTTP/1.1 200 
Date: Fri, 11 Apr 2025 08:08:02 GMT
Server: Apache/2.4.6 (CentOS) OpenSSL/1.0.2k-fips PHP/8.1.22
Strict-Transport-Security: max-age=63072000; includeSubdomains; preload
Permissions-Policy: geolocation=(),midi=(),microphone=(),camera=(),magnetometer=(),gyroscope=(),fullscreen=(self),payment=()
X-StackifyID: V1|df2e8dfd-cca3-2d53-001f-25c6b8308b6d|
Accept-Ranges: bytes
ETag: W/"234406-1744298492000"
Last-Modified: Thu, 10 Apr 2025 15:21:32 GMT
Content-Type: application/javascript
Content-Length: 234406
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Referrer-Policy: same-origin
Feature-Policy: geolocation 'self'; vibrate 'none'
Access-Control-Allow-Headers: origin, x-requested-with, content-type
 original-response-headers Date: Fri, 11 Apr 2025 08:08:02 GMT
Server: Apache/2.4.6 (CentOS) OpenSSL/1.0.2k-fips PHP/8.1.22
Strict-Transport-Security: max-age=63072000; includeSubdomains; preload
Permissions-Policy: geolocation=(),midi=(),microphone=(),camera=(),magnetometer=(),gyroscope=(),fullscreen=(self),payment=()
X-StackifyID: V1|df2e8dfd-cca3-2d53-001f-25c6b8308b6d|
Accept-Ranges: bytes
ETag: W/"234406-1744298492000"
Last-Modified: Thu, 10 Apr 2025 15:21:32 GMT
Content-Type: application/javascript
Content-Length: 234406
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Referrer-Policy: same-origin
Feature-Policy: geolocation 'self'; vibrate 'none'
Access-Control-Allow-Headers: origin, x-requested-with, content-type
Keep-Alive: timeout=5, max=89
Connection: Keep-Alive
 ctid 2 uncompressed-len 0 net-response-time-onstart 591 net-response-time-onstop 796 alt-data 1;234406,javascript/moz-script-bytecode-20250331133932-8l alt-data-from-child 1  ~